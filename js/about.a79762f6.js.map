{"version":3,"sources":["webpack:///./src/components/Item.vue?ba45","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./src/views/Items.vue","webpack:///./src/components/Item.vue","webpack:///./src/components/Item.vue?6395","webpack:///./src/views/Items.vue?4f7d","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./src/views/Add.vue","webpack:///./src/views/Add.vue?65b9","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./node_modules/lottie-web/build/player/lottie.js","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/views/Login.vue","webpack:///./src/components/LoginAnimate.vue","webpack:///./node_modules/vue-lottie/src/lottie.vue","webpack:///./node_modules/vue-lottie/src/lottie.vue?eada","webpack:///./src/components/LoginAnimate.vue?5322","webpack:///./src/views/Login.vue?f1df","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./src/views/Home.vue","webpack:///./src/components/Card.vue","webpack:///./src/components/Card.vue?6c9b","webpack:///./src/components/Pop.vue","webpack:///./src/components/Pop.vue?8f6e","webpack:///./src/views/Home.vue?a655","webpack:///./node_modules/@headlessui/vue/dist/headlessui.esm.js","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["module","exports","requireObjectCoercible","whitespaces","whitespace","ltrim","RegExp","rtrim","createMethod","TYPE","$this","string","String","replace","start","end","trim","class","class_bg","total","item_list","item","key","updated","name","amount","balance","intensity","color_intensity","color","class_default_bg","props","setup","lower","toLowerCase","toUpperCase","slice","Number","render","__scopeId","components","Item","colors","random","Math","floor","length","store","getItemList","dispatch","state","getters","total_items","isObject","setPrototypeOf","dummy","Wrapper","NewTarget","NewTargetPrototype","constructor","prototype","for","value","id","description","type","items_select","index","negative","ok","date","mode","dayClicked","is-expanded","is-required","day1","addRegister","DatePicker","Calendar","Switch","SwitchGroup","SwitchLabel","Date","day","selectedDay","amount2","abs","formatDate","d","month","getMonth","getDate","year","getFullYear","join","payload","console","log","toPrimitive","definePropertyModule","createPropertyDescriptor","object","propertyKey","f","factory","root","window","svgNS","locationHref","initialDefaultFrame","subframeEnabled","expressionsPlugin","isSafari","test","navigator","userAgent","cachedColors","bmRnd","bmPow","pow","bmSqrt","sqrt","bmFloor","bmMax","max","bmMin","min","BMMath","ProjectInterface","i","propertyNames","len","val","tOfVal","absArr","createSizedArray","defaultCurveSegments","degToRads","PI","roundCorner","roundValues","flag","round","styleDiv","element","style","position","top","left","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","currentTime","totalTime","frameMultiplier","this","direction","BMCompleteEvent","BMCompleteLoopEvent","totalLoops","currentLoop","BMSegmentStartEvent","firstFrame","totalFrames","BMDestroyEvent","target","BMRenderFrameErrorEvent","nativeError","BMConfigErrorEvent","BMAnimationConfigErrorEvent","createElementID","_count","HSVtoRGB","h","s","v","r","g","b","p","q","t","RGBtoHSV","addSaturationToRGB","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","hex","colorMap","toString","BaseEvent","triggerEvent","eventName","args","_cbs","addEventListener","callback","push","removeEventListener","bind","splice","createTypedArray","createRegularArray","arr","createTypedArrayFactory","Float32Array","Int16Array","Uint8ClampedArray","Array","apply","createNS","document","createElementNS","createTag","createElement","DynamicPropertyContainer","addDynamicProperty","prop","dynamicProperties","indexOf","container","_isAnimated","iterateDynamicProperties","_mdf","getValue","initDynamicPropertyContainer","getBlendMode","blendModeEnums","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","Matrix","_cos","cos","_sin","sin","_tan","tan","_rnd","reset","rotate","angle","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","sy","skew","ax","ay","skewFromAxis","scale","sz","setTransform","a","c","e","j","k","l","m","n","o","translate","tx","ty","tz","transform","a2","b2","c2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_p","_identityCalculated","a1","b1","c1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","p1","isIdentity","_identity","equals","matr","clone","cloneFromProps","applyToPoint","x","y","z","applyToX","applyToY","applyToZ","getInverseMatrix","determinant","inverseMatrix","inversePoint","pt","applyToPointArray","inversePoints","pts","retPts","applyToTriplePoints","pt1","pt2","pt3","p0","p4","p5","p12","p13","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","_a","_b","_c","_d","_e","_f","pool","math","nodecrypto","global","width","chunks","digits","rngname","startdenom","significance","overflow","mask","seedrandom","seed","options","entropy","shortseed","mixkey","flatten","tostring","autoseed","arc4","ARC4","prng","int32","quick","double","S","pass","is_math_call","copy","keylen","me","count","obj","depth","result","typ","smear","stringseed","charCodeAt","randomBytes","out","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","screen","fromCharCode","BezierFactory","ob","getBezierEasing","beziers","nm","str","bezEasing","BezierEasing","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","newtonRaphsonIterate","aGuessT","currentSlope","points","_mSampleValues","_precomputed","get","mY1","mY2","_precompute","_getTForX","_calcSampleValues","mSampleValues","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","extendPrototype","sources","destination","sourcePrototype","attr","Object","hasOwnProperty","call","getDescriptor","getOwnPropertyDescriptor","createProxyFunction","ProxyFunction","bezFunction","pointOnLine2D","x1","y1","x2","y2","x3","y3","det1","pointOnLine3D","z1","z2","z3","diffDist","dist1","dist2","dist3","getBezierLength","pt4","ptCoord","perc","ptDistance","curveSegments","addedLength","point","lastPoint","lengthData","bezierLengthPool","newElement","percents","lengths","getSegmentsLength","shapeData","segmentsLength","segmentsLengthPool","closed","pathV","pathO","pathI","_length","totalLength","BezierData","segmentLength","PointData","partial","partialLength","buildBezierData","storedData","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","getPointInSegment","percent","t1","u1","ptX","ptY","bezierSegmentPoints","getNewSegment","startPerc","endPerc","t0","u0","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","currTime","getTime","timeToCall","setTimeout","clearTimeout","bez","dataFunctionManager","completeLayers","layers","comps","fontManager","layerData","jLen","kLen","completed","tt","td","hasMask","maskProps","masksProperties","convertPathsToAbsoluteValues","findCompLayers","refId","completeShapes","shapes","completeText","__used","JSON","parse","stringify","ks","it","path","checkVersion","minimum","animVersionString","animVersion","split","checkText","minimumVersion","updateTextLayer","textLayer","documentData","iterateLayers","animationData","assets","checkChars","chars","pathData","paths","data","__converted","checkColors","iterateShapes","checkShapes","completeClosingShapes","cl","completeData","__complete","singleShape","moduleOb","dataManager","getFontProperties","fontData","styleName","styles","fStyle","fWeight","weight","FontManager","maxWaitingTime","emptyChar","w","size","combinedCharacters","trimFontOptions","font","familyArray","enabledFamilies","setUpNode","family","parentNode","setAttribute","fontFamily","node","innerText","fontSize","fontVariant","fontStyle","fontWeight","letterSpacing","appendChild","body","offsetWidth","parent","checkLoadedFonts","fonts","loadedCount","loaded","fOrigin","origin","monoCase","sansCase","removeChild","now","initTime","checkLoadedFontsBinded","setIsLoadedBinded","createHelper","def","tHelper","fontProps","fFamily","textContent","fClass","tCanvasHelper","getContext","addFonts","defs","isLoaded","list","fontArr","_pendingFonts","loadedSelector","shouldLoadFont","fPath","querySelectorAll","href","rel","src","sc","helper","cache","addChars","found","ch","getCharData","char","warn","_warned","measureText","fontName","getFontByName","doubleSize","getComputedTextLength","singleSize","fName","getCombinedCharacterCodes","setIsLoaded","concat","Font","typekitLoaded","fontPrototype","PropertyFactory","initFrame","mathAbs","interpolateValue","frameNum","caching","newValue","offsetTime","propType","pv","keyData","nextKeyData","fnc","iterationIndex","lastIndex","keyframes","endValue","nextKeyTime","keyTime","to","ti","ind","__fnct","segmentPerc","distanceInLine","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","quatStart","createQuaternion","quatEnd","time","quaternionToEuler","slerp","omega","cosom","sinom","scale0","scale1","az","aw","bx","by","bz","bw","acos","quat","qx","qy","qz","qw","heading","atan2","attitude","asin","bank","values","c3","s1","s2","s3","getValueAtCurrentTime","comp","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","processEffectsSequence","elem","globalData","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","ValueProperty","vel","MultiDimensionalProperty","KeyframedValueProperty","st","KeyframedMultidimensionalProperty","arrLen","getProp","TransformPropertyFactory","defaultVector","applyToMatrix","mat","sk","sa","rz","ry","rx","or","px","py","pz","processKeys","forceRender","_isDirty","precalculateMatrix","frameRate","pre","appliedTransformations","autoOriented","v1","v2","getValueAtTime","autoOrient","_addDynamicProperty","TransformProperty","getTransformProperty","ShapePath","_maxLength","setPathData","setLength","pointPool","doubleArrayLength","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","init","cnt","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","resetShape","localShapeCollection","shapesEqual","shape1","shape2","shapePool","releaseShapes","addShape","ShapeProperty","shapeCollectionPool","newShapeCollection","KeyframedShapeProperty","EllShapeProperty","cPoint","EllShapePropertyFactory","convertEllToPath","s0","_cw","_v","StarShapeProperty","StarShapePropertyFactory","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","os","rad","roundness","perimSegment","numPts","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","currentAng","ox","oy","RectShapeProperty","RectShapePropertyFactory","convertRectToPath","v0","getShapeProp","dataProp","keys","getConstructorFunction","getKeyframedConstructorFunction","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","TrimModifier","RoundCornersModifier","PuckerAndBloatModifier","RepeaterModifier","ShapeCollection","DashProperty","renderer","dataProps","dashStr","dashArray","dashoffset","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","initModifierProperties","addShapeToModifier","shape","setAsAnimated","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segments","segmentOb","shapeSegments","shapeS","shapeE","releasePathsData","release","processShapes","shapePaths","_s","totalShapeLength","edges","newShapesData","addShapes","lastShapeInCollection","lastShape","pop","addPaths","newPaths","addSegment","shapePath","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","segment","rd","processPath","clonedPath","currentV","currentI","currentO","closerV","distance","newPosPerc","centerPoint","pathLength","tr","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","unshift","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","hasReloaded","copies","ceil","group","ix","reloadShapes","elems","transformData","op","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","comparePoints","diff","buildShapeString","pathNodes","_o","_i","shapeString","audioControllerFactory","AudioController","audioFactory","audios","_volume","_isMuted","addAudio","audio","pause","resume","setRate","rateValue","createAudio","assetPath","Howl","isPlaying","play","seek","playing","rate","setVolume","setAudioFactory","_updateVolume","mute","unmute","getVolume","volume","ImagePreloader","proxyImage","canvas","height","ctx","fillStyle","fillRect","imageLoaded","loadedAssets","totalImages","loadedFootagesCount","totalFootages","imagesLoadedCb","footageLoaded","getAssetsPath","assetData","assetsPath","originalPath","imagePath","u","testImageLoaded","img","intervalId","setInterval","box","getBBox","_imageLoaded","clearInterval","createImageData","setAttributeNS","_elementHelper","append","createImgData","crossOrigin","createFootageData","assetLoader","load","footageData","_footageLoaded","loadAssets","cb","images","_createImageData","setPath","setAssetsPath","getAsset","destroy","loadedImages","loadedFootages","setCacheType","elementHelper","ImagePreloaderFactory","featureSupport","maskType","filtersFactory","createFilter","filId","skipCoordinates","fil","createAlphaToLuminanceFilter","feColorMatrix","formatResponse","xhr","response","responseText","loadAsset","errorCallback","XMLHttpRequest","responseType","err","onreadystatechange","readyState","status","open","send","TextAnimatorProperty","textData","renderType","_hasMaskedPath","_frameId","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","TextAnimatorDataProperty","animatorProps","defaultData","textAnimatorAnimatables","sw","fc","fh","fs","fb","TextSelectorProp","getTextSelectorProp","LetterProps","TextProperty","keysIndex","canResize","minimumFontSize","currentData","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ls","of","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","searchProperty","completeTextData","searchProperties","maskManager","getMaskProperty","getMeasures","xPos","yPos","pathInfo","currentLength","currentPoint","pointInd","segmentInd","prevPoint","tanAngle","animators","matrixHelper","mHelper","renderedLettersCount","letters","tLength","pi","animatorSelector","letterValue","yOff","firstLine","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","initPathPos","initSegmentInd","initPointInd","currentLine","letterM","letterP","defaultPropsArray","animatorJustifyOffset","animatorFirstCharOffset","justifyOffsetMult","isNewLine","getMult","anIndexes","totalChars","line","extra","an","animatorOffset","add","rot","atan","update","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","textKeys","buildFinalText","text","charCode","charactersArray","charAt","substr","newLineFlag","charData","anchorGrouping","currentSize","currentPos","lineWidth","maxLineWidth","trackingOffset","currentHeight","boxHeight","lastSpaceIndex","currentChar","uncollapsedSpaces","animatorData","letterData","based","indexes","rn","newInd","currentInd","updateDocumentData","newData","undefined","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","TextSelectorPropFactory","_currentTextLength","finalS","finalE","xe","ne","textProperty","easer","tot","newCharsFlag","divisor","poolFactory","initialLength","_create","_release","pooling","create","cloned","shapeCollection","markerParser","parsePayloadLines","lines","keysCount","Error","_markers","markers","_marker","markerData","tm","duration","dr","cm","_","__","BaseRenderer","SVGRenderer","animationItem","config","svgElement","ariaLabel","title","titleElement","titleId","descElement","descId","maskElement","layerElement","renderConfig","preserveAspectRatio","imagePreserveAspectRatio","progressiveLoad","hideOnTransparent","viewBoxOnly","viewBoxSize","className","focusable","filterSize","pendingElements","destroyed","rendererType","CanvasRenderer","clearCanvas","context","dpr","wrapper","devicePixelRatio","currentGlobalAlpha","contextData","CVContextData","transformMat","HybridRenderer","threeDElements","camera","supports3d","MaskElement","viewData","solidPath","rect","expansor","feMorph","properties","currentMasks","layerId","maskRef","lastPath","filterID","expan","lastOperator","filterId","lastRadius","createLayerSolidPath","invRect","drawPath","maskedElement","addRenderableComponent","HierarchyElement","FrameElement","TransformElement","RenderableElement","RenderableDOMElement","ProcessedElement","SVGStyleData","level","lvl","hd","pElem","msElem","SVGShapeData","transformers","caches","lStr","SVGTransformData","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGGradientFillStyleData","initGradientData","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","checkLayers","num","ip","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","createFootage","AudioElement","FootageElement","buildAllItems","includeLayers","newLayers","setProjectInterface","pInterface","projectInterface","initItems","buildElementParenting","parentName","hierarchy","setAsParent","setHierarchy","addPendingElement","searchExtraCompositions","xt","initExpressions","registerComposition","setupGlobalData","animData","fontsContainer","getAssetData","imageLoader","imagePreloader","audioController","fr","compSize","NullElement","SVGShapeElement","SVGTextLottieElement","IImageElement","SVGCompElement","ISolidElement","configAnimation","maskId","updateContainerSize","appendElementInPos","setMatte","checkParenting","renderFrame","currentFrame","prepareFrame","getBaseElement","nextElement","insertBefore","hide","show","CVShapeElement","CVTextElement","CVImageElement","CVCompElement","CVSolidElement","ctxTransform","cProps","cTr","trProps","canvasContext","ctxOpacity","globalAlpha","cO","restore","save","actionFlag","cArrPos","duplicate","saved","savedOp","blendMode","popped","containerStyle","mozTransformOrigin","transformCanvas","isDashed","elementWidth","elementHeight","elementRel","animationRel","offsetHeight","par","fillType","beginPath","closePath","clip","clearRect","newDOMElement","ddd","addTo3dContainer","nextDOMElement","nextLayer","tmpDOMElement","getThreeDContainerByPos","HShapeElement","HTextElement","HCameraElement","HImageElement","HCompElement","HSolidElement","startPos","endPos","perspectiveElem","createThreeDContainer","center","webkitTransform","threeDContainerData","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","svg","cWidth","cHeight","webkitPerspective","perspective","floatingContainer","isFirstFrame","finalMat","finalTransform","mProp","getMaskelement","pathString","pathShapeValue","initHierarchy","_isParent","prepareProperties","isVisible","initTransform","_matMdf","_opMdf","ao","renderTransform","globalToLocal","transforms","ptNew","initRenderable","isInRange","hidden","isTransparent","renderableComponents","component","removeRenderableComponent","prepareRenderableFrame","checkLayerLimits","checkTransparency","renderRenderable","sourceRectAtTime","getLayerSize","_prototype","initElement","initBaseData","initRendererElement","createContainerElements","createRenderableComponents","createContent","baseElement","renderElement","renderInnerContent","innerElem","destroyBaseElement","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","stop","gf","cst","opacityId","opFill","ms","ost","SVGElementsRenderer","_identityMatrix","_matrixHelper","createRenderFunction","renderFill","renderGradient","renderGradientStroke","renderStroke","renderPath","renderContentTransform","styleData","itemData","pathStringTransformed","redraw","iterations","lLen","styleElem","hasOpacity","attr1","attr2","cValues","oValues","ang","ShapeTransformManager","sequences","sequenceList","transform_key_count","CVShapeData","transformsManager","styledShapes","styledShape","addTransformSequence","trNodes","BaseElement","SVGBaseElement","IShapeElement","ITextElement","ICompElement","sourceRect","_isPlaying","_canPlay","_currentTime","_placeholder","textSpans","shapesData","stylesList","shapeModifiers","itemsData","processedElements","animatedContents","SVGTintFilter","filter","filterManager","matrixFilter","effectElements","feMergeNode","feMerge","SVGFillFilter","SVGGaussianBlurEffect","feGaussianBlur","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","feOffset","feFlood","feComposite","originalNodeAdded","sequence","processSequence","processSequences","getNewKey","checkMasks","layerInterface","LayerExpressionInterface","registerMaskInterface","effectsInterface","EffectsExpressionInterface","createEffectsInterface","registerEffectsInterface","compInterface","CompExpressionInterface","shapeInterface","ShapeExpressionInterface","content","textInterface","TextExpressionInterface","setBlendMode","blendModeValue","bm","sr","effectsManager","EffectsManager","getType","matteElement","transformedElement","_sizeChanged","gg","layerElementParent","masker","maskGroup","maskGrouper","feCTr","feFunc","alphaRect","ln","cp","clipId","cpGroup","renderableEffectsManager","SVGEffects","addShapeToModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","shouldBreakProcess","lcEnum","ljEnum","searchProcessedElement","addProcessedElement","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","timeRemapped","setElements","getElements","destroyElements","pr","volumeValue","FootageInterface","getFootageData","textContainer","buildTextContents","textArray","textContents","currentTextContent","tSpan","usesGlyphs","cachedSpansLength","tElement","justify","textBox","bbox","renderedLetter","textSpan","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","GradientConstructor","lc","lj","ml","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","shapeProperty","fn","setElementStyles","currentTransform","modifier","processedPos","ownStyles","ownModifiers","renderShape","animatedContent","colorBlack","colorWhite","opacity","kBlurrinessToSigma","sigma","dimensions","sigmaX","sigmaY","edgeMode","initialize","groupPath","elemChildren","children","childNodes","removeAttribute","pathMasker","dasharrayValue","getTotalLength","lineLength","units","color1","color2","color3","tableR","tableG","tableB","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","outputDelta","inputDelta","col","_svgMatteSymbols","SVGMatte3Effect","filterElem","ef","filters","CVBaseElement","CVMaskElement","hasMasks","stroke","fill","currentRender","sWidth","fValue","CVEffects","HBaseElement","shapesContainer","currentBBox","textPaths","isMasked","pe","_prevMat","HEffects","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","newLength","currentSavedOp","set","createElements","globalCompositeOperation","hideElement","showElement","forceRealStack","widthCrop","heightCrop","imgW","imgH","imgRel","canvasRel","drawImage","moveTo","lineTo","bezierCurveTo","transformHelper","dashResetter","preTransforms","co","wi","da","do","addTransformToStyleList","removeTransformFromStyleList","closeStyles","shouldRender","ownTransforms","_shouldRender","renderShapeTransform","parentTransform","groupTransform","drawLayer","nodes","currentStyle","coOp","strokeStyle","grd","lineCap","lineJoin","miterLimit","setLineDash","lineDashOffset","isMain","renderGradientFill","renderStyledShape","shapeNodes","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","hasFill","hasStroke","commands","pathArr","lastFill","lastStroke","lastStrokeW","checkBlendMode","tg","transformedElementStyle","matrixValue","addEffects","backgroundColor","_createBaseContainerElements","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","boundingBox","vPoint","oPoint","nextIPoint","nextVPoint","checkBounds","getBoundsOfCurve","bounds","shapeBoundingBox","xMax","right","yMax","bottom","tempBoundingBox","p3","b2ac","t2","calculateF","calculateBoundingBox","currentBoxContains","changed","shapeStyle","shapeTransform","compW","compH","innerElemStyle","textColor","strokeWidth","lineHeight","tParent","tCont","tContStyle","tContTranslation","tStyle","tSpanTranslation","svgStyle","translation","textPath","margin","svgTransform","Image","imageElem","perspectiveStyle","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","mRotationX","mRotationY","hasMatrixChanged","matValue","animationManager","registeredAnimations","playingAnimationsNum","_stopped","_isFrozen","removeElement","ev","animItem","animation","isPaused","subtractPlayingCount","registerAnimation","AnimationItem","setupAnimation","setData","getRegisteredAnimations","lenAnims","animations","addPlayingCount","activate","loadAnimation","params","setParams","setSpeed","setDirection","nowTime","elapsedTime","advanceTime","first","goToAndStop","isFrame","togglePause","searchAnimations","standalone","animElements","getElementsByClassName","getElementsByTagName","div","resize","freeze","unfreeze","currentRawFrame","frameMult","playSpeed","playDirection","playCount","autoplay","loop","animationID","timeCompleted","segmentPos","isSubframeEnabled","_idle","_completedLoop","animType","rendererSettings","parseInt","autoloadSegments","initialSegment","lastIndexOf","fileName","trigger","wrapperAttributes","attributes","getNamedItem","prerender","loadNextSegment","shift","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","updaFrameModifier","waitForFontsLoaded","error","triggerConfigError","gotoFrame","setSubframe","triggerRenderFrameError","setCurrentRawFrameValue","getMarkerData","markerName","marker","numValue","isNaN","frameModifier","goToAndPlay","playSegments","nextValue","_isComplete","checkSegments","adjustSegment","setSegment","pendingFrame","forceFlag","resetSegments","onEnterFrame","onLoopComplete","onComplete","onSegmentStart","onDestroy","getPath","getDuration","onError","Expressions","stackCount","registers","pushExpression","popExpression","releaseInstances","registerExpressionProperty","expression","ExpressionManager","$bm_isInstanceOfArray","isNumerable","tOfV","$bm_neg","tOfA","lenA","retArr","easeInBez","easeOutBez","easeInOutBez","sum","tOfB","lenB","sub","mul","mod","$bm_sum","$bm_sub","$bm_mul","$bm_div","$bm_mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","arr2","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","linear","tMin","tMax","value1","value2","_tMin","rnd","rndm","createPath","inTangents","outTangents","inVertexPoint","outVertexPoint","arrPlaceholder","initiateExpression","property","needsVelocity","_needsRandom","elemType","$bm_transform","effect","thisProperty","valueAtTime","defineProperty","frameDuration","displayStartTime","inPoint","outPoint","loopIn","loop_in","loopOut","loop_out","smooth","toWorld","fromWorld","fromComp","toComp","fromCompToSurface","rotation","anchorPoint","thisLayer","thisComp","velocityAtTime","scoped_bm_rt","expression_function","eval","numKeys","active","wiggle","freq","amp","iWiggle","lenWiggle","addedAmps","periods","loopInDuration","loopOutDuration","getVelocityAtTime","velocity","textIndex","textTotal","selectorValue","lookAt","elem1","elem2","fVec","pitch","yaw","easeOut","val1","val2","applyEase","easeIn","ease","iKey","lenKey","nearestKey","obKey","framesToTime","frames","fps","timeToFrames","seedRandom","randSeed","substring","posterizeTime","framesPerSecond","hasParent","executeExpression","_value","frameExpressionId","expressionHelpers","searchExpressions","_cachingAtTime","getSpeedAtTime","delta","speed","getStaticValueAtTime","setGroupProperty","propertyGroup","durationFlag","cycleDuration","firstKeyFrame","ret","lastKeyFrame","initV","endV","current","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","samples","sampleValue","endFrame","sampleFrequency","getTransformValueAtTime","_transformCachingAtTime","anchor","skewAxis","rotationZ","rotationY","rotationX","orientation","positionX","positionY","positionZ","getTransformStaticValueAtTime","propertyGetProp","getShapeValueAtTime","shapeValue","propertyIndex","ShapePropertyConstructorFunction","KeyframedShapePropertyConstructorFunction","ShapeExpressions","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","unitVector","tangentOnPath","normalOnPath","propertyGetShapeProp","trims","calculateExpression","getExpressionValue","isKeyframed","hasExpressions","ShapePathInterface","view","interfaceFunction","_propertyGroup","propertyGroupFactory","PropertyInterface","defineProperties","_name","mn","parentPropertyGroup","propertyName","iterateElements","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","contentsInterfaceFactory","interfaces","numProperties","transformInterface","transformInterfaceFactory","cix","np","ExpressionPropertyInterface","_dashPropertyGroup","dashOb","addPropertyToDashOb","dash","outerRadius","outerRoundness","innerRoundness","innerRadius","radius","_interfaceFunction","parentGroupWrapper","_prevValue","_sourceText","_thisLayerFunction","sourceText","stringValue","getMatrix","toWorldMat","propMatrix","toWorldVec","applyPoint","fromWorldVec","invertPoint","sampleImage","_registerMaskInterface","MaskManagerInterface","_registerEffectsInterface","effects","TransformExpressionInterface","anchorPointDescriptor","anchor_point","startTime","source","outlineInterfaceFactory","currentPropertyName","currentProperty","propertyNameIndex","dataInterfaceFactory","outlineInterface","dataInterface","pixelAspect","numLayers","_thisFunction","xRotation","yRotation","xPosition","yPosition","zPosition","_px","_py","_pz","_transformFactory","compositions","_thisProjectFunction","effectsData","createGroupInterface","groupInterface","createValueInterface","enabled","en","expressionProperty","MaskInterface","_mask","_data","MaskManager","_masksInterfaces","maskFunction","defaultUnidimensionalValue","defaultMultidimensionalValue","completeProperty","expressionValue","valueProp","assign","speedAtTime","UnidimensionalPropertyInterface","MultidimensionalPropertyInterface","arrValue","defaultGetter","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","effectItem","GroupEffect","getValueProxy","propertyGetTextProp","TextExpressionSelectorPropFactory","eff","lottie","setLocationHref","setSubframeRendering","setQuality","inBrowser","installPlugin","plugin","getFactory","checkReady","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","__getFactory","version","scripts","myScript","$","fails","isArray","toObject","toLength","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","array","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","FORCED","proto","forced","arg","E","arguments","TypeError","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","ES3_STRINGS","STRICT_METHOD","separator","login","username","placeholder","password","autocomplete","lottieOptions","handleAnimation","ref","required","mounted","anim","$refs","lavContainer","$emit","methods","HelloWorld","LoginAnimate","commit","METHOD_NAME","argument","method","DESCRIPTORS","isForced","redefine","has","classof","inheritIfRequired","getOwnPropertyNames","NUMBER","NativeNumber","NumberPrototype","BROKEN_CLASSOF","toNumber","third","radix","maxCode","code","NaN","NumberWrapper","valueOf","home_list","register","item__name","item__color","item__color_intensity","selected","register_selected","aria-hidden","appear","isOpen","as","closeModal2","enter","enter-from","enter-to","leave","leave-from","leave-to","confirmation","closeModal","TransitionRoot","TransitionChild","Dialog","DialogOverlay","DialogTitle","openModal","Card","Pop","ordered_home_list","getHomeList","Features","RenderStrategy","Keys","_extends","_objectWithoutPropertiesLoose","excluded","sourceKeys","_unsupportedIterableToArray","minLen","_arrayLikeToArray","from","_createForOfIteratorHelperLoose","allowArrayLike","Symbol","iterator","done","next","match","lookup","returnValue","_len","_key","map","captureStackTrace","_ref","_ref$visible","visible","_ref$features","features","None","main","Static","_main$props$unmount","_match","strategy","unmount","Unmount","Hidden","_ref2","attrs","slots","slot","_omit","omit","passThroughProps","_ref3","firstChild","other","isValidElement","keysToOmit","_step","_iterator","input","generateId","useId","Focus","FocusResult","Direction","FocusableMode","focusableSelector","selector","getFocusableElements","isFocusableElement","Strict","matches","Loose","parentElement","focusElement","focus","preventScroll","focusIn","activeElement","First","Next","Previous","Last","startIndex","focusOptions","NoScroll","_next","nextIdx","WrapAround","Underflow","Overflow","hasAttribute","Success","useWindowEvent","listener","contains","containers","useFocusTrap","restoreElement","previousActiveElement","handleFocus","initialFocus","couldFocus","event","Tab","preventDefault","_step2","_iterator2","shiftKey","previous","toElement","HTMLElement","stopPropagation","CHILDREN_SELECTOR","interactables","Set","originals","Map","inert","original","useInertOthers","onInvalidate","forEach","child","interactable","getAttribute","_step3","_iterator3","_step4","_iterator4","_element","StackMessage","StackContext","useStackContext","useElemenStack","notify","domElement","AddElement","RemoveElement","useStackProvider","onUpdate","parentUpdate","ForcePortalRootContext","usePortalRoot","ForcePortalRoot","force","Boolean","getPortalRoot","existingRoot","getElementById","Portal","forcePortalRoot","groupContext","PortalGroupContext","myTarget","resolveTarget","_myTarget$value$paren","propsWeControl","PortalGroup","api","DescriptionContext","useDescriptions","_temp","_ref$slot","_ref$name","_ref$props","descriptionIds","idx","dom","_ref$value$$el","$el","State","DialogStates","Context","useOpenClosed","useOpenClosedProvider","DialogContext","useDialogContext","DisclosureStates","Missing","inheritAttrs","emits","_this","$attrs","role","dialogState","Open","describedby","onClick","handleClick","onKeydown","handleKeyDown","_this$$props","$props","dialogRef","$slots","emit","usesOpenClosedState","Closed","hasOpen","internalDialogRef","focusTrapOptions","message","_match2","setTitleId","close","documentElement","paddingRight","scrollbarWidth","innerWidth","clientWidth","observer","IntersectionObserver","entries","entry","boundingClientRect","observe","disconnect","el","Escape","DisclosureContext","useDisclosureContext","Focus$1","ListboxStates","assertNever","calculateActiveIndex","action","resolvers","resolveItems","currentActiveIndex","resolveActiveIndex","activeIndex","nextActiveIndex","findIndex","resolveDisabled","all","_idx","Specific","resolveId","Nothing","resolvePropValue","bag","ListboxContext","useListboxContext","MenuStates","useTreeWalker","accept","walk","acceptNode","walker","createTreeWalker","NodeFilter","SHOW_ELEMENT","nextNode","currentNode","nextFrame$1","MenuContext","useMenuContext","PopoverStates","PopoverContext","usePopoverContext","Popover","PopoverGroupContext","usePopoverGroupContext","PopoverPanelContext","usePopoverPanelContext","buttonId","panelId","popoverState","button","panel","togglePopover","closePopover","registerBag","registerPopover","isFocusWithinPopoverGroup","_groupContext$isFocus","_dom","_dom2","_dom3","_dom4","_dom5","LabelContext","useLabelContext","useLabels","labelIds","Label","passive","_this$context","_this$context$name","_this$context$slot","_this$context$props","reduce","acc","_Object$assign","allProps","RadioGroupContext","useRadioGroupContext","OptionState","Reason","GroupContext","switchRef","labelledby","click","modelValue","Function","defaultClass","_this$$props$classNam","checked","tabIndex","onKeyup","handleKeyUp","onKeypress","handleKeyPress","toggle","Space","once","called","disposables","_requestAnimationFrame","raf","nextFrame","_setTimeout","timer","dispose","addClasses","_node$classList","classes","classList","removeClasses","_node$classList2","_len2","_key2","remove","waitForTransition","_getComputedStyle","getComputedStyle","transitionDuration","transitionDelay","_map","_value$split$filter$m","includes","parseFloat","sort","_value$split$filter$m2","resolvedValue","durationMs","delaysMs","Finished","Cancelled","transition","base","_done","reason","splitClasses","TreeStates","TransitionContext","useTransitionContext","useParentNesting","NestingContext","hasChildren","Visible","useNesting","transitionableChildren","unregister","childId","find","TransitionChildRenderFeatures","enterFrom","enterTo","leaveFrom","leaveTo","rest","passthroughProps","_ref4","_useTransitionContext","_useParentNesting","initial","isTransitioning","nesting","enterClasses","enterFromClasses","enterToClasses","leaveClasses","leaveFromClasses","leaveToClasses","executeTransition","skip","isEmptyDOMNode","Comment","_oldValues","_newValues","immediate","_match3","_this$$props2","sharedProps","_match4","nestingBag","transitionBag","toAbsoluteIndex","HAS_SPECIES_SUPPORT","SPECIES","nativeSlice","Constructor","fin"],"mappings":"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","file":"js/about.a79762f6.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Item.vue?vue&type=style&index=0&id=e059f4ac&scoped=true&lang=css\"","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","<template>\n  <div>\n\n    <div class=\"m-3 mb-4 border rounded-lg shadow-md hover:border-2 hover:border-gray-500\" v-bind:class=\"[class_bg ? class_bg : 'bg-white']\">\n        \n       \n      <div class=\"flex p-3 place-content-between \">   \n    \n        <div class=\"font-bold text-md\">\n            Saldo Total\n        </div>\n        <div class=\"font-bold text-md\">\n            {{total}}\n        </div>\n        </div>\n    </div>\n    \n  <div class=\"grid flex-wrap grid-cols-2 gap-4 m-3 mb-4 items\" >\n    <div  v-for=\"item in item_list\" :key=\"item.updated\">\n      \n    <Item :name=\"item.name\" :amount=\"item.balance\" :intensity=\"item.color_intensity\" :color=\"item.color\" class=\"h-full\"/>\n    </div>\n    \n  </div>\n  </div>\n</template>\n<script>\n// @ is an alias to /src\nimport Item from '@/components/Item.vue'\nimport { ref, computed } from 'vue'\nimport {useStore} from 'vuex'\nexport default {\n  name: 'Items',\n  components: {\n    Item\n  },\n  setup(props){\n    const color_intensity = '100'\n    const colors = [\"red\", \"blue\", \"pink\", \"gray\", \"green\", \"purple\", \"yellow\", \"indigo\"];\n    const random = Math.floor(Math.random() * colors.length);\n    const class_bg = computed(()=> `bg-${colors[random]}-${color_intensity}`)\n    const store = useStore()\n    const getItemList = ()=> store.dispatch('getItemList')\n    getItemList()\n    \n    const item_list = computed(() => store.state.item_list)\n    const total = computed(() => store.getters.total_items)\n    \n    return {item_list, total, class_bg}\n  }\n}\n</script>","<template>\n        \n        <div class=\"flex flex-col py-2 border rounded-lg shadow-md place-content-between hover:border-2 hover:border-gray-500\" v-bind:class=\"[class_bg ? class_bg : class_default_bg]\">\n        \n        <div class=\"p-2 text-2xl font-semibold text-black name\">\n            {{name}}\n        </div>\n       \n        <div class=\"px-3 py-2 font-semibold amount place-self-end\" v-bind:class=\"{ negative: amount<0 }\">\n            {{amount}}\n        </div>\n        </div>\n    \n</template>\n<script>\nimport {computed} from 'vue'\nexport default {\n    props : ['name', 'amount', 'color', 'intensity'],\n    setup(props) {\n        const name = computed(()=>{\n            const lower = props.name.toLowerCase()\n            return lower[0].toUpperCase() + lower.slice(1)\n        })\n                \n        const amount = Number(props.amount)\n        const color = props.color\n        const intensity = props.intensity\n        const class_default_bg = 'bg-white'\n        \n        const class_bg = computed(()=> {\n            if (color && intensity) {\n                return `bg-${color}-${intensity}`\n            }else{\n                return null\n            }\n        })\n        \n        return {name,amount, class_bg, class_default_bg}\n        \n    },\n}\n</script>\n<style scoped>\n.negative {\n  color: #EF4444;\n  background: #FEE2E2;\n  margin-left: 0.5rem;\n  margin-bottom : 0.1rem;\n  border-radius: 8px;\n  padding-left: 0.3rem;\n  padding-right:0.3rem;\n  padding-top: 0.2rem;\n  padding-bottom: 0.2rem;\n  border-width: 1px;\n  border-color: #EF4444;\n  \n}\n</style>","import { render } from \"./Item.vue?vue&type=template&id=e059f4ac&scoped=true\"\nimport script from \"./Item.vue?vue&type=script&lang=js\"\nexport * from \"./Item.vue?vue&type=script&lang=js\"\n\nimport \"./Item.vue?vue&type=style&index=0&id=e059f4ac&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-e059f4ac\"\n\nexport default script","import { render } from \"./Items.vue?vue&type=template&id=fca770a4\"\nimport script from \"./Items.vue?vue&type=script&lang=js\"\nexport * from \"./Items.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","<template>\n    <div>\n        <div>\n        <div class=\"flex flex-col h-20 m-6\">\n        <label for=\"des\" class=\"font-sans text-lg font-bold\">Descripcion</label>\n        \n        <input id=\"des\" v-model=\"description\" type=\"text\" class=\"bg-gray-200 w-full h-full border border-gray-400 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent\">\n        </div>\n\n        <div class=\"flex flex-col h-20 m-6\">\n            <label for=\"item\" class=\"font-sans text-lg font-bold\">Item</label>\n            \n            <select id=\"item\" v-model=\"item\" class=\"bg-gray-200 w-full h-full border border-gray-400 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent\">\n            <option value=\"-------\">-------</option>\n            <option v-for=\"(item, index) in items_select\" :key=\"index\" :value=\"item.id\">{{item.name}}</option>\n            </select>\n            </div>\n\n        <div class=\"flex flex-col h-20 m-6\">\n            <div class=\"\">\n            \n            <SwitchGroup>\n                                         \n\n            <div class=\"flex items-center mb-1\">\n            <SwitchLabel class=\"mr-4 font-sans text-lg font-bold\">\n            <h1 v-if=\"negative\">Egreso</h1>\n            <h1 v-else>Ingreso</h1>\n\n            </SwitchLabel>   \n\n            <Switch\n                v-model=\"negative\"\n                :class='negative ? \"bg-blue-600\" : \"bg-blue-500\"'\n                class=\"relative inline-flex items-center h-5 transition-colors rounded-full w-11 focus:outline-none focus:ring-1 focus:ring-offset-2 focus:ring-gray-800\"\n            >\n                <span\n                :class='negative ? \"translate-x-6\" : \"translate-x-1\"'\n                class=\"inline-block w-4 h-4 transition-transform transform bg-white rounded-full\"\n                />\n            </Switch>\n            </div>\n        </SwitchGroup>\n\n\n            </div>\n\n                             \n            <input id=\"amount\" type=\"number\"  v-model=\"amount\" class=\"bg-gray-200 w-full h-full border border-gray-400 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent\">\n            \n            </div>\n\n\n        <div class=\"flex flex-col h-20 m-6\">\n            <label for=\"date\" class=\"font-sans text-lg font-bold\">Fecha</label>\n            <div v-if=\"ok\" class=\"pb-1 mb-1\">\n                <v-date-picker v-model=\"date\" mode=\"date\" @dayclick='dayClicked' is-expanded is-required/>\n                \n            </div>\n            \n            <input type=\"text\" @click=\"ok=true\" :value=\"day1\" v-if=\"!ok\" class=\"bg-gray-200 w-full h-full border border-gray-400 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-black focus:border-transparent\">\n            \n            \n\n\n            \n            </div>\n\n        </div>\n\n        <div class=\"flex m-6 place-content-between\">\n            \n         <button class=\"px-6 py-2 font-sans font-semibold text-white bg-gray-700 rounded-xl hover:bg-gray-900\">\n            Borrar\n        </button>\n\n\n        <button @click=\"addRegister\" class=\"px-6 py-2 font-sans font-semibold text-white bg-gray-700 rounded-xl hover:bg-gray-900\">\n            Guardar\n        </button>\n        </div>\n    </div>\n</template>\n\n<script>\n\n\nimport { ref, computed } from 'vue'\nimport { Calendar, DatePicker } from 'v-calendar';\nimport {useStore} from 'vuex'\nimport { Switch, SwitchGroup, SwitchLabel } from '@headlessui/vue'\n\nexport default {\n  name: 'Add',\n  components: {DatePicker,Calendar, Switch, SwitchGroup, SwitchLabel},\n\n    setup(props){\n        const date = ref(new Date())\n        const negative = ref(true)\n\n        const dayClicked =(day)=> {\n        \n        \n        \n        selectedDay.value = day;\n        ok.value = false\n        \n\n\n        \n    }\n        \n        const store = useStore()\n        const getItemList = ()=> store.dispatch('getItemList')\n        if (!store.state.item_list.length){\n            getItemList()\n        }\n        const selectedDay = ref(null)\n        const ok = ref(false)\n        const description = ref('')\n        const amount = ref('')\n        const amount2 = computed(() => {\n            if(negative.value){\n                return Math.abs(amount.value) * -1\n            }else{\n                return Math.abs(amount.value)\n            }\n\n        })\n        const item = ref('')\n        \n\n        const formatDate = (d)=>{\n\n     \n    \n        let month = '' + (d.getMonth() + 1);\n        let day = '' + d.getDate();\n        let year = d.getFullYear();\n\n        if (month.length < 2) \n            month = '0' + month;\n        if (day.length < 2) \n            day = '0' + day;\n\n        return [year, month, day].join('-')\n        }\n\n\n\n\n        const day1 = computed(() => formatDate(date.value))\n        \n        const addRegister = ()=> {\n\n            let payload = {\"description\": description.value, \"amount\": amount2.value,\n                    \"date\": day1.value, \"item\": item.value\n            }\n            console.log(payload)\n            \n            \n            store.dispatch('addRegister', payload)\n            \n            }\n\n\n\n\n        \n        const items_select = computed(() => store.getters.items_select)\n        \n        return{ items_select, day1, description, amount, amount2, item, date, ok, addRegister, selectedDay, dayClicked, negative}\n\n    \n    \n    \n  },\n\n}\n</script>","import { render } from \"./Add.vue?vue&type=template&id=0e7cd9e8\"\nimport script from \"./Add.vue?vue&type=script&lang=js\"\nexport * from \"./Add.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","(typeof navigator !== \"undefined\") && (function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(function() {\n            return factory(root);\n        });\n    } else if (typeof module === \"object\" && module.exports) {\n        module.exports = factory(root);\n    } else {\n        root.lottie = factory(root);\n        root.bodymovin = root.lottie;\n    }\n}((window || {}), function(window) {\n\t/* global locationHref:writable, animationManager, subframeEnabled:writable, defaultCurveSegments:writable, roundValues,\r\nexpressionsPlugin:writable, PropertyFactory, ShapePropertyFactory, Matrix */\r\n/* exported locationHref, subframeEnabled, expressionsPlugin */\r\n\r\n'use strict';\r\n\r\n/* exported svgNS, locationHref, initialDefaultFrame */\r\n\r\nvar svgNS = 'http://www.w3.org/2000/svg';\r\n\r\nvar locationHref = '';\r\n\r\nvar initialDefaultFrame = -999999;\r\n\r\n/* global createSizedArray */\r\n/* exported subframeEnabled, expressionsPlugin, isSafari, cachedColors, bmPow, bmSqrt, bmFloor, bmMax, bmMin, ProjectInterface,\r\ndefaultCurveSegments, degToRads, roundCorner, bmRnd, styleDiv, BMEnterFrameEvent, BMCompleteEvent, BMCompleteLoopEvent,\r\nBMSegmentStartEvent, BMDestroyEvent, BMRenderFrameErrorEvent, BMConfigErrorEvent, BMAnimationConfigErrorEvent, createElementID,\r\naddSaturationToRGB, addBrightnessToRGB, addHueToRGB, rgbToHex */\r\n\r\nvar subframeEnabled = true;\r\nvar expressionsPlugin;\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\nvar cachedColors = {};\r\nvar bmRnd;\r\nvar bmPow = Math.pow;\r\nvar bmSqrt = Math.sqrt;\r\nvar bmFloor = Math.floor;\r\nvar bmMax = Math.max;\r\nvar bmMin = Math.min;\r\n\r\nvar BMMath = {};\r\n(function () {\r\n  var propertyNames = ['abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'atan2', 'ceil', 'cbrt', 'expm1', 'clz32', 'cos', 'cosh', 'exp', 'floor', 'fround', 'hypot', 'imul', 'log', 'log1p', 'log2', 'log10', 'max', 'min', 'pow', 'random', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc', 'E', 'LN10', 'LN2', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\r\n  var i;\r\n  var len = propertyNames.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n  }\r\n}());\r\n\r\nfunction ProjectInterface() { return {}; }\r\n\r\nBMMath.random = Math.random;\r\nBMMath.abs = function (val) {\r\n  var tOfVal = typeof val;\r\n  if (tOfVal === 'object' && val.length) {\r\n    var absArr = createSizedArray(val.length);\r\n    var i;\r\n    var len = val.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      absArr[i] = Math.abs(val[i]);\r\n    }\r\n    return absArr;\r\n  }\r\n  return Math.abs(val);\r\n};\r\nvar defaultCurveSegments = 150;\r\nvar degToRads = Math.PI / 180;\r\nvar roundCorner = 0.5519;\r\n\r\nfunction roundValues(flag) {\r\n  if (flag) {\r\n    bmRnd = Math.round;\r\n  } else {\r\n    bmRnd = function (val) {\r\n      return val;\r\n    };\r\n  }\r\n}\r\nroundValues(false);\r\n\r\nfunction styleDiv(element) {\r\n  element.style.position = 'absolute';\r\n  element.style.top = 0;\r\n  element.style.left = 0;\r\n  element.style.display = 'block';\r\n  element.style.transformOrigin = '0 0';\r\n  element.style.webkitTransformOrigin = '0 0';\r\n  element.style.backfaceVisibility = 'visible';\r\n  element.style.webkitBackfaceVisibility = 'visible';\r\n  element.style.transformStyle = 'preserve-3d';\r\n  element.style.webkitTransformStyle = 'preserve-3d';\r\n  element.style.mozTransformStyle = 'preserve-3d';\r\n}\r\n\r\nfunction BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier) {\r\n  this.type = type;\r\n  this.currentTime = currentTime;\r\n  this.totalTime = totalTime;\r\n  this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteEvent(type, frameMultiplier) {\r\n  this.type = type;\r\n  this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier) {\r\n  this.type = type;\r\n  this.currentLoop = currentLoop;\r\n  this.totalLoops = totalLoops;\r\n  this.direction = frameMultiplier < 0 ? -1 : 1;\r\n}\r\n\r\nfunction BMSegmentStartEvent(type, firstFrame, totalFrames) {\r\n  this.type = type;\r\n  this.firstFrame = firstFrame;\r\n  this.totalFrames = totalFrames;\r\n}\r\n\r\nfunction BMDestroyEvent(type, target) {\r\n  this.type = type;\r\n  this.target = target;\r\n}\r\n\r\nfunction BMRenderFrameErrorEvent(nativeError, currentTime) {\r\n  this.type = 'renderFrameError';\r\n  this.nativeError = nativeError;\r\n  this.currentTime = currentTime;\r\n}\r\n\r\nfunction BMConfigErrorEvent(nativeError) {\r\n  this.type = 'configError';\r\n  this.nativeError = nativeError;\r\n}\r\n\r\nfunction BMAnimationConfigErrorEvent(type, nativeError) {\r\n  this.type = type;\r\n  this.nativeError = nativeError;\r\n}\r\n\r\nvar createElementID = (function () {\r\n  var _count = 0;\r\n  return function createID() {\r\n    _count += 1;\r\n    return '__lottie_element_' + _count;\r\n  };\r\n}());\r\n\r\nfunction HSVtoRGB(h, s, v) {\r\n  var r;\r\n  var g;\r\n  var b;\r\n  var i;\r\n  var f;\r\n  var p;\r\n  var q;\r\n  var t;\r\n  i = Math.floor(h * 6);\r\n  f = h * 6 - i;\r\n  p = v * (1 - s);\r\n  q = v * (1 - f * s);\r\n  t = v * (1 - (1 - f) * s);\r\n  switch (i % 6) {\r\n    case 0: r = v; g = t; b = p; break;\r\n    case 1: r = q; g = v; b = p; break;\r\n    case 2: r = p; g = v; b = t; break;\r\n    case 3: r = p; g = q; b = v; break;\r\n    case 4: r = t; g = p; b = v; break;\r\n    case 5: r = v; g = p; b = q; break;\r\n    default: break;\r\n  }\r\n  return [r,\r\n    g,\r\n    b];\r\n}\r\n\r\nfunction RGBtoHSV(r, g, b) {\r\n  var max = Math.max(r, g, b);\r\n  var min = Math.min(r, g, b);\r\n  var d = max - min;\r\n  var h;\r\n  var s = (max === 0 ? 0 : d / max);\r\n  var v = max / 255;\r\n\r\n  switch (max) {\r\n    case min: h = 0; break;\r\n    case r: h = (g - b) + d * (g < b ? 6 : 0); h /= 6 * d; break;\r\n    case g: h = (b - r) + d * 2; h /= 6 * d; break;\r\n    case b: h = (r - g) + d * 4; h /= 6 * d; break;\r\n    default: break;\r\n  }\r\n\r\n  return [\r\n    h,\r\n    s,\r\n    v,\r\n  ];\r\n}\r\n\r\nfunction addSaturationToRGB(color, offset) {\r\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n  hsv[1] += offset;\r\n  if (hsv[1] > 1) {\r\n    hsv[1] = 1;\r\n  } else if (hsv[1] <= 0) {\r\n    hsv[1] = 0;\r\n  }\r\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n}\r\n\r\nfunction addBrightnessToRGB(color, offset) {\r\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n  hsv[2] += offset;\r\n  if (hsv[2] > 1) {\r\n    hsv[2] = 1;\r\n  } else if (hsv[2] < 0) {\r\n    hsv[2] = 0;\r\n  }\r\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n}\r\n\r\nfunction addHueToRGB(color, offset) {\r\n  var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\r\n  hsv[0] += offset / 360;\r\n  if (hsv[0] > 1) {\r\n    hsv[0] -= 1;\r\n  } else if (hsv[0] < 0) {\r\n    hsv[0] += 1;\r\n  }\r\n  return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\r\n}\r\n\r\nvar rgbToHex = (function () {\r\n  var colorMap = [];\r\n  var i;\r\n  var hex;\r\n  for (i = 0; i < 256; i += 1) {\r\n    hex = i.toString(16);\r\n    colorMap[i] = hex.length === 1 ? '0' + hex : hex;\r\n  }\r\n\r\n  return function (r, g, b) {\r\n    if (r < 0) {\r\n      r = 0;\r\n    }\r\n    if (g < 0) {\r\n      g = 0;\r\n    }\r\n    if (b < 0) {\r\n      b = 0;\r\n    }\r\n    return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n  };\r\n}());\r\n\r\nfunction BaseEvent() {}\r\nBaseEvent.prototype = {\r\n  triggerEvent: function (eventName, args) {\r\n    if (this._cbs[eventName]) {\r\n      var len = this._cbs[eventName].length;\r\n      for (var i = 0; i < len; i += 1) {\r\n        this._cbs[eventName][i](args);\r\n      }\r\n    }\r\n  },\r\n  addEventListener: function (eventName, callback) {\r\n    if (!this._cbs[eventName]) {\r\n      this._cbs[eventName] = [];\r\n    }\r\n    this._cbs[eventName].push(callback);\r\n\r\n    return function () {\r\n      this.removeEventListener(eventName, callback);\r\n    }.bind(this);\r\n  },\r\n  removeEventListener: function (eventName, callback) {\r\n    if (!callback) {\r\n      this._cbs[eventName] = null;\r\n    } else if (this._cbs[eventName]) {\r\n      var i = 0;\r\n      var len = this._cbs[eventName].length;\r\n      while (i < len) {\r\n        if (this._cbs[eventName][i] === callback) {\r\n          this._cbs[eventName].splice(i, 1);\r\n          i -= 1;\r\n          len -= 1;\r\n        }\r\n        i += 1;\r\n      }\r\n      if (!this._cbs[eventName].length) {\r\n        this._cbs[eventName] = null;\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\n/* exported createTypedArray, createSizedArray */\r\n\r\nvar createTypedArray = (function () {\r\n  function createRegularArray(type, len) {\r\n    var i = 0;\r\n    var arr = [];\r\n    var value;\r\n    switch (type) {\r\n      case 'int16':\r\n      case 'uint8c':\r\n        value = 1;\r\n        break;\r\n      default:\r\n        value = 1.1;\r\n        break;\r\n    }\r\n    for (i = 0; i < len; i += 1) {\r\n      arr.push(value);\r\n    }\r\n    return arr;\r\n  }\r\n  function createTypedArrayFactory(type, len) {\r\n    if (type === 'float32') {\r\n      return new Float32Array(len);\r\n    } if (type === 'int16') {\r\n      return new Int16Array(len);\r\n    } if (type === 'uint8c') {\r\n      return new Uint8ClampedArray(len);\r\n    }\r\n    return createRegularArray(type, len);\r\n  }\r\n  if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n    return createTypedArrayFactory;\r\n  }\r\n  return createRegularArray;\r\n}());\r\n\r\nfunction createSizedArray(len) {\r\n  return Array.apply(null, { length: len });\r\n}\r\n\r\n/* global svgNS */\r\n/* exported createNS */\r\n\r\nfunction createNS(type) {\r\n  // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n  return document.createElementNS(svgNS, type);\r\n}\r\n\r\n/* exported createTag */\r\n\r\nfunction createTag(type) {\r\n  // return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n  return document.createElement(type);\r\n}\r\n\r\nfunction DynamicPropertyContainer() {}\r\nDynamicPropertyContainer.prototype = {\r\n  addDynamicProperty: function (prop) {\r\n    if (this.dynamicProperties.indexOf(prop) === -1) {\r\n      this.dynamicProperties.push(prop);\r\n      this.container.addDynamicProperty(this);\r\n      this._isAnimated = true;\r\n    }\r\n  },\r\n  iterateDynamicProperties: function () {\r\n    this._mdf = false;\r\n    var i;\r\n    var len = this.dynamicProperties.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.dynamicProperties[i].getValue();\r\n      if (this.dynamicProperties[i]._mdf) {\r\n        this._mdf = true;\r\n      }\r\n    }\r\n  },\r\n  initDynamicPropertyContainer: function (container) {\r\n    this.container = container;\r\n    this.dynamicProperties = [];\r\n    this._mdf = false;\r\n    this._isAnimated = false;\r\n  },\r\n};\r\n\r\n/* exported getBlendMode */\r\n\r\nvar getBlendMode = (function () {\r\n  var blendModeEnums = {\r\n    0: 'source-over',\r\n    1: 'multiply',\r\n    2: 'screen',\r\n    3: 'overlay',\r\n    4: 'darken',\r\n    5: 'lighten',\r\n    6: 'color-dodge',\r\n    7: 'color-burn',\r\n    8: 'hard-light',\r\n    9: 'soft-light',\r\n    10: 'difference',\r\n    11: 'exclusion',\r\n    12: 'hue',\r\n    13: 'saturation',\r\n    14: 'color',\r\n    15: 'luminosity',\r\n  };\r\n\r\n  return function (mode) {\r\n    return blendModeEnums[mode] || '';\r\n  };\r\n}());\r\n\r\n/* global createTypedArray */\r\n\r\n/*!\r\n Transformation Matrix v2.0\r\n (c) Epistemex 2014-2015\r\n www.epistemex.com\r\n By Ken Fyrstenberg\r\n Contributions by leeoniya.\r\n License: MIT, header required.\r\n */\r\n\r\n/**\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\n\r\nvar Matrix = (function () {\r\n  var _cos = Math.cos;\r\n  var _sin = Math.sin;\r\n  var _tan = Math.tan;\r\n  var _rnd = Math.round;\r\n\r\n  function reset() {\r\n    this.props[0] = 1;\r\n    this.props[1] = 0;\r\n    this.props[2] = 0;\r\n    this.props[3] = 0;\r\n    this.props[4] = 0;\r\n    this.props[5] = 1;\r\n    this.props[6] = 0;\r\n    this.props[7] = 0;\r\n    this.props[8] = 0;\r\n    this.props[9] = 0;\r\n    this.props[10] = 1;\r\n    this.props[11] = 0;\r\n    this.props[12] = 0;\r\n    this.props[13] = 0;\r\n    this.props[14] = 0;\r\n    this.props[15] = 1;\r\n    return this;\r\n  }\r\n\r\n  function rotate(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function rotateX(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function rotateY(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function rotateZ(angle) {\r\n    if (angle === 0) {\r\n      return this;\r\n    }\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function shear(sx, sy) {\r\n    return this._t(1, sy, sx, 1, 0, 0);\r\n  }\r\n\r\n  function skew(ax, ay) {\r\n    return this.shear(_tan(ax), _tan(ay));\r\n  }\r\n\r\n  function skewFromAxis(ax, angle) {\r\n    var mCos = _cos(angle);\r\n    var mSin = _sin(angle);\r\n    return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\r\n      ._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)\r\n      ._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\r\n    // return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n  }\r\n\r\n  function scale(sx, sy, sz) {\r\n    if (!sz && sz !== 0) {\r\n      sz = 1;\r\n    }\r\n    if (sx === 1 && sy === 1 && sz === 1) {\r\n      return this;\r\n    }\r\n    return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n  }\r\n\r\n  function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n    this.props[0] = a;\r\n    this.props[1] = b;\r\n    this.props[2] = c;\r\n    this.props[3] = d;\r\n    this.props[4] = e;\r\n    this.props[5] = f;\r\n    this.props[6] = g;\r\n    this.props[7] = h;\r\n    this.props[8] = i;\r\n    this.props[9] = j;\r\n    this.props[10] = k;\r\n    this.props[11] = l;\r\n    this.props[12] = m;\r\n    this.props[13] = n;\r\n    this.props[14] = o;\r\n    this.props[15] = p;\r\n    return this;\r\n  }\r\n\r\n  function translate(tx, ty, tz) {\r\n    tz = tz || 0;\r\n    if (tx !== 0 || ty !== 0 || tz !== 0) {\r\n      return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n    var _p = this.props;\r\n\r\n    if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\r\n      // NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n      // if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n      _p[12] = _p[12] * a2 + _p[15] * m2;\r\n      _p[13] = _p[13] * f2 + _p[15] * n2;\r\n      _p[14] = _p[14] * k2 + _p[15] * o2;\r\n      _p[15] *= p2;\r\n      // }\r\n      this._identityCalculated = false;\r\n      return this;\r\n    }\r\n\r\n    var a1 = _p[0];\r\n    var b1 = _p[1];\r\n    var c1 = _p[2];\r\n    var d1 = _p[3];\r\n    var e1 = _p[4];\r\n    var f1 = _p[5];\r\n    var g1 = _p[6];\r\n    var h1 = _p[7];\r\n    var i1 = _p[8];\r\n    var j1 = _p[9];\r\n    var k1 = _p[10];\r\n    var l1 = _p[11];\r\n    var m1 = _p[12];\r\n    var n1 = _p[13];\r\n    var o1 = _p[14];\r\n    var p1 = _p[15];\r\n\r\n    /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n    _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n    _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\r\n    _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\r\n    _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\r\n\r\n    _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\r\n    _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\r\n    _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\r\n    _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\r\n\r\n    _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\r\n    _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\r\n    _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\r\n    _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\r\n\r\n    _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\r\n    _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\r\n    _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\r\n    _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\r\n\r\n    this._identityCalculated = false;\r\n    return this;\r\n  }\r\n\r\n  function isIdentity() {\r\n    if (!this._identityCalculated) {\r\n      this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n      this._identityCalculated = true;\r\n    }\r\n    return this._identity;\r\n  }\r\n\r\n  function equals(matr) {\r\n    var i = 0;\r\n    while (i < 16) {\r\n      if (matr.props[i] !== this.props[i]) {\r\n        return false;\r\n      }\r\n      i += 1;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function clone(matr) {\r\n    var i;\r\n    for (i = 0; i < 16; i += 1) {\r\n      matr.props[i] = this.props[i];\r\n    }\r\n    return matr;\r\n  }\r\n\r\n  function cloneFromProps(props) {\r\n    var i;\r\n    for (i = 0; i < 16; i += 1) {\r\n      this.props[i] = props[i];\r\n    }\r\n  }\r\n\r\n  function applyToPoint(x, y, z) {\r\n    return {\r\n      x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n      y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n      z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14],\r\n    };\r\n    /* return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         }; */\r\n  }\r\n  function applyToX(x, y, z) {\r\n    return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n  }\r\n  function applyToY(x, y, z) {\r\n    return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n  }\r\n  function applyToZ(x, y, z) {\r\n    return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n  }\r\n\r\n  function getInverseMatrix() {\r\n    var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n    var a = this.props[5] / determinant;\r\n    var b = -this.props[1] / determinant;\r\n    var c = -this.props[4] / determinant;\r\n    var d = this.props[0] / determinant;\r\n    var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\r\n    var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\r\n    var inverseMatrix = new Matrix();\r\n    inverseMatrix.props[0] = a;\r\n    inverseMatrix.props[1] = b;\r\n    inverseMatrix.props[4] = c;\r\n    inverseMatrix.props[5] = d;\r\n    inverseMatrix.props[12] = e;\r\n    inverseMatrix.props[13] = f;\r\n    return inverseMatrix;\r\n  }\r\n\r\n  function inversePoint(pt) {\r\n    var inverseMatrix = this.getInverseMatrix();\r\n    return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0);\r\n  }\r\n\r\n  function inversePoints(pts) {\r\n    var i;\r\n    var len = pts.length;\r\n    var retPts = [];\r\n    for (i = 0; i < len; i += 1) {\r\n      retPts[i] = inversePoint(pts[i]);\r\n    }\r\n    return retPts;\r\n  }\r\n\r\n  function applyToTriplePoints(pt1, pt2, pt3) {\r\n    var arr = createTypedArray('float32', 6);\r\n    if (this.isIdentity()) {\r\n      arr[0] = pt1[0];\r\n      arr[1] = pt1[1];\r\n      arr[2] = pt2[0];\r\n      arr[3] = pt2[1];\r\n      arr[4] = pt3[0];\r\n      arr[5] = pt3[1];\r\n    } else {\r\n      var p0 = this.props[0];\r\n      var p1 = this.props[1];\r\n      var p4 = this.props[4];\r\n      var p5 = this.props[5];\r\n      var p12 = this.props[12];\r\n      var p13 = this.props[13];\r\n      arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n      arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n      arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n      arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n      arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n      arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  function applyToPointArray(x, y, z) {\r\n    var arr;\r\n    if (this.isIdentity()) {\r\n      arr = [x, y, z];\r\n    } else {\r\n      arr = [\r\n        x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n        x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n        x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14],\r\n      ];\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  function applyToPointStringified(x, y) {\r\n    if (this.isIdentity()) {\r\n      return x + ',' + y;\r\n    }\r\n    var _p = this.props;\r\n    return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\r\n  }\r\n\r\n  function toCSS() {\r\n    // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n    /* if(this.isIdentity()) {\r\n            return '';\r\n        } */\r\n    var i = 0;\r\n    var props = this.props;\r\n    var cssValue = 'matrix3d(';\r\n    var v = 10000;\r\n    while (i < 16) {\r\n      cssValue += _rnd(props[i] * v) / v;\r\n      cssValue += i === 15 ? ')' : ',';\r\n      i += 1;\r\n    }\r\n    return cssValue;\r\n  }\r\n\r\n  function roundMatrixProperty(val) {\r\n    var v = 10000;\r\n    if ((val < 0.000001 && val > 0) || (val > -0.000001 && val < 0)) {\r\n      return _rnd(val * v) / v;\r\n    }\r\n    return val;\r\n  }\r\n\r\n  function to2dCSS() {\r\n    // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n    /* if(this.isIdentity()) {\r\n            return '';\r\n        } */\r\n    var props = this.props;\r\n    var _a = roundMatrixProperty(props[0]);\r\n    var _b = roundMatrixProperty(props[1]);\r\n    var _c = roundMatrixProperty(props[4]);\r\n    var _d = roundMatrixProperty(props[5]);\r\n    var _e = roundMatrixProperty(props[12]);\r\n    var _f = roundMatrixProperty(props[13]);\r\n    return 'matrix(' + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + ')';\r\n  }\r\n\r\n  return function () {\r\n    this.reset = reset;\r\n    this.rotate = rotate;\r\n    this.rotateX = rotateX;\r\n    this.rotateY = rotateY;\r\n    this.rotateZ = rotateZ;\r\n    this.skew = skew;\r\n    this.skewFromAxis = skewFromAxis;\r\n    this.shear = shear;\r\n    this.scale = scale;\r\n    this.setTransform = setTransform;\r\n    this.translate = translate;\r\n    this.transform = transform;\r\n    this.applyToPoint = applyToPoint;\r\n    this.applyToX = applyToX;\r\n    this.applyToY = applyToY;\r\n    this.applyToZ = applyToZ;\r\n    this.applyToPointArray = applyToPointArray;\r\n    this.applyToTriplePoints = applyToTriplePoints;\r\n    this.applyToPointStringified = applyToPointStringified;\r\n    this.toCSS = toCSS;\r\n    this.to2dCSS = to2dCSS;\r\n    this.clone = clone;\r\n    this.cloneFromProps = cloneFromProps;\r\n    this.equals = equals;\r\n    this.inversePoints = inversePoints;\r\n    this.inversePoint = inversePoint;\r\n    this.getInverseMatrix = getInverseMatrix;\r\n    this._t = this.transform;\r\n    this.isIdentity = isIdentity;\r\n    this._identity = true;\r\n    this._identityCalculated = false;\r\n\r\n    this.props = createTypedArray('float32', 16);\r\n    this.reset();\r\n  };\r\n}());\r\n\r\n/* eslint-disable */\r\n/*\r\n Copyright 2014 David Bau.\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining\r\n a copy of this software and associated documentation files (the\r\n \"Software\"), to deal in the Software without restriction, including\r\n without limitation the rights to use, copy, modify, merge, publish,\r\n distribute, sublicense, and/or sell copies of the Software, and to\r\n permit persons to whom the Software is furnished to do so, subject to\r\n the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be\r\n included in all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n */\r\n\r\n(function (pool, math) {\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\n    var global = this,\r\n        width = 256,        // each RC4 output is 0 <= x < 256\r\n        chunks = 6,         // at least six RC4 outputs for each double\r\n        digits = 52,        // there are 52 significant digits in a double\r\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\r\n        startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1,\r\n        nodecrypto;         // node.js crypto module, initialized at the bottom.\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\n    function seedrandom(seed, options, callback) {\r\n        var key = [];\r\n        options = (options === true) ? { entropy: true } : (options || {});\r\n\r\n        // Flatten the seed string or build one from local entropy if needed.\r\n        var shortseed = mixkey(flatten(\r\n            options.entropy ? [seed, tostring(pool)] :\r\n                (seed === null) ? autoseed() : seed, 3), key);\r\n\r\n        // Use the seed to initialize an ARC4 generator.\r\n        var arc4 = new ARC4(key);\r\n\r\n        // This function returns a random double in [0, 1) that contains\r\n        // randomness in every bit of the mantissa of the IEEE 754 value.\r\n        var prng = function() {\r\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n                x = 0;                          //   and no 'extra last byte'.\r\n            while (n < significance) {          // Fill up all significant digits by\r\n                n = (n + x) * width;              //   shifting numerator and\r\n                d *= width;                       //   denominator and generating a\r\n                x = arc4.g(1);                    //   new least-significant-byte.\r\n            }\r\n            while (n >= overflow) {             // To avoid rounding up, before adding\r\n                n /= 2;                           //   last byte, shift everything\r\n                d /= 2;                           //   right using integer math until\r\n                x >>>= 1;                         //   we have exactly the desired bits.\r\n            }\r\n            return (n + x) / d;                 // Form the number within [0, 1).\r\n        };\r\n\r\n        prng.int32 = function() { return arc4.g(4) | 0; };\r\n        prng.quick = function() { return arc4.g(4) / 0x100000000; };\r\n        prng.double = prng;\r\n\r\n        // Mix the randomness into accumulated entropy.\r\n        mixkey(tostring(arc4.S), pool);\r\n\r\n        // Calling convention: what to return as a function of prng, seed, is_math.\r\n        return (options.pass || callback ||\r\n        function(prng, seed, is_math_call, state) {\r\n            if (state) {\r\n                // Load the arc4 state from the given state if it has an S array.\r\n                if (state.S) { copy(state, arc4); }\r\n                // Only provide the .state method if requested via options.state.\r\n                prng.state = function() { return copy(arc4, {}); };\r\n            }\r\n\r\n            // If called as a method of Math (Math.seedrandom()), mutate\r\n            // Math.random because that is how seedrandom.js has worked since v1.0.\r\n            if (is_math_call) { math[rngname] = prng; return seed; }\r\n\r\n            // Otherwise, it is a newer calling convention, so return the\r\n            // prng directly.\r\n            else return prng;\r\n        })(\r\n            prng,\r\n            shortseed,\r\n            'global' in options ? options.global : (this == math),\r\n            options.state);\r\n    }\r\n    math['seed' + rngname] = seedrandom;\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n    function ARC4(key) {\r\n        var t, keylen = key.length,\r\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n        // The empty key [] is treated as [0].\r\n        if (!keylen) { key = [keylen++]; }\r\n\r\n        // Set up S using the standard key scheduling algorithm.\r\n        while (i < width) {\r\n            s[i] = i++;\r\n        }\r\n        for (i = 0; i < width; i++) {\r\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n            s[j] = t;\r\n        }\r\n\r\n        // The \"g\" method returns the next (count) outputs as one number.\r\n        me.g = function(count) {\r\n            // Using instance members instead of closure state nearly doubles speed.\r\n            var t, r = 0,\r\n                i = me.i, j = me.j, s = me.S;\r\n            while (count--) {\r\n                t = s[i = mask & (i + 1)];\r\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n            }\r\n            me.i = i; me.j = j;\r\n            return r;\r\n            // For robust unpredictability, the function call below automatically\r\n            // discards an initial batch of values.  This is called RC4-drop[256].\r\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n        };\r\n    }\r\n\r\n//\r\n// copy()\r\n// Copies internal state of ARC4 to or from a plain object.\r\n//\r\n    function copy(f, t) {\r\n        t.i = f.i;\r\n        t.j = f.j;\r\n        t.S = f.S.slice();\r\n        return t;\r\n    }\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\n    function flatten(obj, depth) {\r\n        var result = [], typ = (typeof obj), prop;\r\n        if (depth && typ == 'object') {\r\n            for (prop in obj) {\r\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n            }\r\n        }\r\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\r\n    }\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\n    function mixkey(seed, key) {\r\n        var stringseed = seed + '', smear, j = 0;\r\n        while (j < stringseed.length) {\r\n            key[mask & j] =\r\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n        }\r\n        return tostring(key);\r\n    }\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto and Node crypto\r\n// module if available.\r\n//\r\n    function autoseed() {\r\n        try {\r\n            if (nodecrypto) { return tostring(nodecrypto.randomBytes(width)); }\r\n            var out = new Uint8Array(width);\r\n            (global.crypto || global.msCrypto).getRandomValues(out);\r\n            return tostring(out);\r\n        } catch (e) {\r\n            var browser = global.navigator,\r\n                plugins = browser && browser.plugins;\r\n            return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n        }\r\n    }\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\n    function tostring(a) {\r\n        return String.fromCharCode.apply(0, a);\r\n    }\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to interfere with deterministic PRNG state later,\r\n// seedrandom will not call math.random on its own again after\r\n// initialization.\r\n//\r\n    mixkey(math.random(), pool);\r\n\r\n//\r\n// Nodejs and AMD support: export the implementation as a module using\r\n// either convention.\r\n//\r\n\r\n// End anonymous scope, and pass initial values.\r\n})(\r\n    [],     // pool: entropy pool starts empty\r\n    BMMath    // math: package containing random, pow, and seedrandom\r\n);\r\n/* eslint-disable */\r\nvar BezierFactory = (function () {\r\n  /**\r\n     * BezierEasing - use bezier curve for transition easing function\r\n     * by Gatan Renaudeau 2014 - 2015  MIT License\r\n     *\r\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n     * Usage:\r\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n     *\r\n     */\r\n\r\n  var ob = {};\r\n  ob.getBezierEasing = getBezierEasing;\r\n  var beziers = {};\r\n\r\n  function getBezierEasing(a, b, c, d, nm) {\r\n    var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\r\n    if (beziers[str]) {\r\n      return beziers[str];\r\n    }\r\n    var bezEasing = new BezierEasing([a, b, c, d]);\r\n    beziers[str] = bezEasing;\r\n    return bezEasing;\r\n  }\r\n\r\n  // These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n  var NEWTON_ITERATIONS = 4;\r\n  var NEWTON_MIN_SLOPE = 0.001;\r\n  var SUBDIVISION_PRECISION = 0.0000001;\r\n  var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n  var kSplineTableSize = 11;\r\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n  var float32ArraySupported = typeof Float32Array === 'function';\r\n\r\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n  function C(aA1) { return 3.0 * aA1; }\r\n\r\n  // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n  function calcBezier(aT, aA1, aA2) {\r\n    return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\r\n  }\r\n\r\n  // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n  function getSlope(aT, aA1, aA2) {\r\n    return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n  }\r\n\r\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\r\n    var currentX,\r\n      currentT,\r\n      i = 0;\r\n    do {\r\n      currentT = aA + (aB - aA) / 2.0;\r\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n      if (currentX > 0.0) {\r\n        aB = currentT;\r\n      } else {\r\n        aA = currentT;\r\n      }\r\n    } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n    return currentT;\r\n  }\r\n\r\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\r\n    for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n      if (currentSlope === 0.0) return aGuessT;\r\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n      aGuessT -= currentX / currentSlope;\r\n    }\r\n    return aGuessT;\r\n  }\r\n\r\n  /**\r\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n     */\r\n  function BezierEasing(points) {\r\n    this._p = points;\r\n    this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n    this._precomputed = false;\r\n\r\n    this.get = this.get.bind(this);\r\n  }\r\n\r\n  BezierEasing.prototype = {\r\n\r\n    get: function (x) {\r\n      var mX1 = this._p[0],\r\n        mY1 = this._p[1],\r\n        mX2 = this._p[2],\r\n        mY2 = this._p[3];\r\n      if (!this._precomputed) this._precompute();\r\n      if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n      // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n      if (x === 0) return 0;\r\n      if (x === 1) return 1;\r\n      return calcBezier(this._getTForX(x), mY1, mY2);\r\n    },\r\n\r\n    // Private part\r\n\r\n    _precompute: function () {\r\n      var mX1 = this._p[0],\r\n        mY1 = this._p[1],\r\n        mX2 = this._p[2],\r\n        mY2 = this._p[3];\r\n      this._precomputed = true;\r\n      if (mX1 !== mY1 || mX2 !== mY2) { this._calcSampleValues(); }\r\n    },\r\n\r\n    _calcSampleValues: function () {\r\n      var mX1 = this._p[0],\r\n        mX2 = this._p[2];\r\n      for (var i = 0; i < kSplineTableSize; ++i) {\r\n        this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n      }\r\n    },\r\n\r\n    /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\r\n    _getTForX: function (aX) {\r\n      var mX1 = this._p[0],\r\n        mX2 = this._p[2],\r\n        mSampleValues = this._mSampleValues;\r\n\r\n      var intervalStart = 0.0;\r\n      var currentSample = 1;\r\n      var lastSample = kSplineTableSize - 1;\r\n\r\n      for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n        intervalStart += kSampleStepSize;\r\n      }\r\n      --currentSample;\r\n\r\n      // Interpolate to provide an initial guess for t\r\n      var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\r\n      var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n      var initialSlope = getSlope(guessForT, mX1, mX2);\r\n      if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n      } if (initialSlope === 0.0) {\r\n        return guessForT;\r\n      }\r\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n    },\r\n  };\r\n\r\n  return ob;\r\n}());\r\n\r\n(function () {\r\n  var lastTime = 0;\r\n  var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) { // eslint-disable-line no-plusplus\r\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n  }\r\n  if (!window.requestAnimationFrame) {\r\n    window.requestAnimationFrame = function (callback) {\r\n      var currTime = new Date().getTime();\r\n      var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n      var id = setTimeout(function () {\r\n        callback(currTime + timeToCall);\r\n      },\r\n      timeToCall);\r\n      lastTime = currTime + timeToCall;\r\n      return id;\r\n    };\r\n  }\r\n  if (!window.cancelAnimationFrame) {\r\n    window.cancelAnimationFrame = function (id) {\r\n      clearTimeout(id);\r\n    };\r\n  }\r\n}());\r\n\r\n/* exported extendPrototype, getDescriptor, createProxyFunction */\r\n\r\nfunction extendPrototype(sources, destination) {\r\n  var i;\r\n  var len = sources.length;\r\n  var sourcePrototype;\r\n  for (i = 0; i < len; i += 1) {\r\n    sourcePrototype = sources[i].prototype;\r\n    for (var attr in sourcePrototype) {\r\n      if (Object.prototype.hasOwnProperty.call(sourcePrototype, attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDescriptor(object, prop) {\r\n  return Object.getOwnPropertyDescriptor(object, prop);\r\n}\r\n\r\nfunction createProxyFunction(prototype) {\r\n  function ProxyFunction() {}\r\n  ProxyFunction.prototype = prototype;\r\n  return ProxyFunction;\r\n}\r\n\r\n/* global segmentsLengthPool, defaultCurveSegments, createSizedArray, bmPow, bmSqrt, bmFloor, createTypedArray, bezierLengthPool */\r\n/* exported bez */\r\n\r\nfunction bezFunction() {\r\n  var math = Math;\r\n\r\n  function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\r\n    var det1 = (x1 * y2) + (y1 * x3) + (x2 * y3) - (x3 * y2) - (y3 * x1) - (x2 * y1);\r\n    return det1 > -0.001 && det1 < 0.001;\r\n  }\r\n\r\n  function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\r\n    if (z1 === 0 && z2 === 0 && z3 === 0) {\r\n      return pointOnLine2D(x1, y1, x2, y2, x3, y3);\r\n    }\r\n    var dist1 = math.sqrt(math.pow(x2 - x1, 2) + math.pow(y2 - y1, 2) + math.pow(z2 - z1, 2));\r\n    var dist2 = math.sqrt(math.pow(x3 - x1, 2) + math.pow(y3 - y1, 2) + math.pow(z3 - z1, 2));\r\n    var dist3 = math.sqrt(math.pow(x3 - x2, 2) + math.pow(y3 - y2, 2) + math.pow(z3 - z2, 2));\r\n    var diffDist;\r\n    if (dist1 > dist2) {\r\n      if (dist1 > dist3) {\r\n        diffDist = dist1 - dist2 - dist3;\r\n      } else {\r\n        diffDist = dist3 - dist2 - dist1;\r\n      }\r\n    } else if (dist3 > dist2) {\r\n      diffDist = dist3 - dist2 - dist1;\r\n    } else {\r\n      diffDist = dist2 - dist1 - dist3;\r\n    }\r\n    return diffDist > -0.0001 && diffDist < 0.0001;\r\n  }\r\n\r\n  var getBezierLength = (function () {\r\n    return function (pt1, pt2, pt3, pt4) {\r\n      var curveSegments = defaultCurveSegments;\r\n      var k;\r\n      var i;\r\n      var len;\r\n      var ptCoord;\r\n      var perc;\r\n      var addedLength = 0;\r\n      var ptDistance;\r\n      var point = [];\r\n      var lastPoint = [];\r\n      var lengthData = bezierLengthPool.newElement();\r\n      len = pt3.length;\r\n      for (k = 0; k < curveSegments; k += 1) {\r\n        perc = k / (curveSegments - 1);\r\n        ptDistance = 0;\r\n        for (i = 0; i < len; i += 1) {\r\n          ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bmPow(perc, 2) * pt4[i] + bmPow(perc, 3) * pt2[i];\r\n          point[i] = ptCoord;\r\n          if (lastPoint[i] !== null) {\r\n            ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n          }\r\n          lastPoint[i] = point[i];\r\n        }\r\n        if (ptDistance) {\r\n          ptDistance = bmSqrt(ptDistance);\r\n          addedLength += ptDistance;\r\n        }\r\n        lengthData.percents[k] = perc;\r\n        lengthData.lengths[k] = addedLength;\r\n      }\r\n      lengthData.addedLength = addedLength;\r\n      return lengthData;\r\n    };\r\n  }());\r\n\r\n  function getSegmentsLength(shapeData) {\r\n    var segmentsLength = segmentsLengthPool.newElement();\r\n    var closed = shapeData.c;\r\n    var pathV = shapeData.v;\r\n    var pathO = shapeData.o;\r\n    var pathI = shapeData.i;\r\n    var i;\r\n    var len = shapeData._length;\r\n    var lengths = segmentsLength.lengths;\r\n    var totalLength = 0;\r\n    for (i = 0; i < len - 1; i += 1) {\r\n      lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\r\n      totalLength += lengths[i].addedLength;\r\n    }\r\n    if (closed && len) {\r\n      lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\r\n      totalLength += lengths[i].addedLength;\r\n    }\r\n    segmentsLength.totalLength = totalLength;\r\n    return segmentsLength;\r\n  }\r\n\r\n  function BezierData(length) {\r\n    this.segmentLength = 0;\r\n    this.points = new Array(length);\r\n  }\r\n\r\n  function PointData(partial, point) {\r\n    this.partialLength = partial;\r\n    this.point = point;\r\n  }\r\n\r\n  var buildBezierData = (function () {\r\n    var storedData = {};\r\n\r\n    return function (pt1, pt2, pt3, pt4) {\r\n      var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\r\n      if (!storedData[bezierName]) {\r\n        var curveSegments = defaultCurveSegments;\r\n        var k;\r\n        var i;\r\n        var len;\r\n        var ptCoord;\r\n        var perc;\r\n        var addedLength = 0;\r\n        var ptDistance;\r\n        var point;\r\n        var lastPoint = null;\r\n        if (pt1.length === 2 && (pt1[0] !== pt2[0] || pt1[1] !== pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\r\n          curveSegments = 2;\r\n        }\r\n        var bezierData = new BezierData(curveSegments);\r\n        len = pt3.length;\r\n        for (k = 0; k < curveSegments; k += 1) {\r\n          point = createSizedArray(len);\r\n          perc = k / (curveSegments - 1);\r\n          ptDistance = 0;\r\n          for (i = 0; i < len; i += 1) {\r\n            ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bmPow(perc, 2) * (pt2[i] + pt4[i]) + bmPow(perc, 3) * pt2[i];\r\n            point[i] = ptCoord;\r\n            if (lastPoint !== null) {\r\n              ptDistance += bmPow(point[i] - lastPoint[i], 2);\r\n            }\r\n          }\r\n          ptDistance = bmSqrt(ptDistance);\r\n          addedLength += ptDistance;\r\n          bezierData.points[k] = new PointData(ptDistance, point);\r\n          lastPoint = point;\r\n        }\r\n        bezierData.segmentLength = addedLength;\r\n        storedData[bezierName] = bezierData;\r\n      }\r\n      return storedData[bezierName];\r\n    };\r\n  }());\r\n\r\n  function getDistancePerc(perc, bezierData) {\r\n    var percents = bezierData.percents;\r\n    var lengths = bezierData.lengths;\r\n    var len = percents.length;\r\n    var initPos = bmFloor((len - 1) * perc);\r\n    var lengthPos = perc * bezierData.addedLength;\r\n    var lPerc = 0;\r\n    if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\r\n      return percents[initPos];\r\n    }\r\n    var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n    var flag = true;\r\n    while (flag) {\r\n      if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\r\n        lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\r\n        flag = false;\r\n      } else {\r\n        initPos += dir;\r\n      }\r\n      if (initPos < 0 || initPos >= len - 1) {\r\n        // FIX for TypedArrays that don't store floating point values with enough accuracy\r\n        if (initPos === len - 1) {\r\n          return percents[initPos];\r\n        }\r\n        flag = false;\r\n      }\r\n    }\r\n    return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\r\n  }\r\n\r\n  function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n    var t1 = getDistancePerc(percent, bezierData);\r\n    var u1 = 1 - t1;\r\n    var ptX = math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\r\n    var ptY = math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\r\n    return [ptX, ptY];\r\n  }\r\n\r\n  var bezierSegmentPoints = createTypedArray('float32', 8);\r\n\r\n  function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\r\n    if (startPerc < 0) {\r\n      startPerc = 0;\r\n    } else if (startPerc > 1) {\r\n      startPerc = 1;\r\n    }\r\n    var t0 = getDistancePerc(startPerc, bezierData);\r\n    endPerc = endPerc > 1 ? 1 : endPerc;\r\n    var t1 = getDistancePerc(endPerc, bezierData);\r\n    var i;\r\n    var len = pt1.length;\r\n    var u0 = 1 - t0;\r\n    var u1 = 1 - t1;\r\n    var u0u0u0 = u0 * u0 * u0;\r\n    var t0u0u0_3 = t0 * u0 * u0 * 3; // eslint-disable-line camelcase\r\n    var t0t0u0_3 = t0 * t0 * u0 * 3; // eslint-disable-line camelcase\r\n    var t0t0t0 = t0 * t0 * t0;\r\n    //\r\n    var u0u0u1 = u0 * u0 * u1;\r\n    var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1; // eslint-disable-line camelcase\r\n    var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1; // eslint-disable-line camelcase\r\n    var t0t0t1 = t0 * t0 * t1;\r\n    //\r\n    var u0u1u1 = u0 * u1 * u1;\r\n    var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1; // eslint-disable-line camelcase\r\n    var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1; // eslint-disable-line camelcase\r\n    var t0t1t1 = t0 * t1 * t1;\r\n    //\r\n    var u1u1u1 = u1 * u1 * u1;\r\n    var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1; // eslint-disable-line camelcase\r\n    var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1; // eslint-disable-line camelcase\r\n    var t1t1t1 = t1 * t1 * t1;\r\n    for (i = 0; i < len; i += 1) {\r\n      bezierSegmentPoints[i * 4] = math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      bezierSegmentPoints[i * 4 + 1] = math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      bezierSegmentPoints[i * 4 + 2] = math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n      bezierSegmentPoints[i * 4 + 3] = math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\r\n    }\r\n\r\n    return bezierSegmentPoints;\r\n  }\r\n\r\n  return {\r\n    getSegmentsLength: getSegmentsLength,\r\n    getNewSegment: getNewSegment,\r\n    getPointInSegment: getPointInSegment,\r\n    buildBezierData: buildBezierData,\r\n    pointOnLine2D: pointOnLine2D,\r\n    pointOnLine3D: pointOnLine3D,\r\n  };\r\n}\r\n\r\nvar bez = bezFunction();\r\n\r\n/* exported dataManager */\r\n\r\nfunction dataFunctionManager() {\r\n  // var tCanvasHelper = createTag('canvas').getContext('2d');\r\n\r\n  function completeLayers(layers, comps, fontManager) {\r\n    var layerData;\r\n    var i;\r\n    var len = layers.length;\r\n    var j;\r\n    var jLen;\r\n    var k;\r\n    var kLen;\r\n    for (i = 0; i < len; i += 1) {\r\n      layerData = layers[i];\r\n      if (('ks' in layerData) && !layerData.completed) {\r\n        layerData.completed = true;\r\n        if (layerData.tt) {\r\n          layers[i - 1].td = layerData.tt;\r\n        }\r\n        if (layerData.hasMask) {\r\n          var maskProps = layerData.masksProperties;\r\n          jLen = maskProps.length;\r\n          for (j = 0; j < jLen; j += 1) {\r\n            if (maskProps[j].pt.k.i) {\r\n              convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n            } else {\r\n              kLen = maskProps[j].pt.k.length;\r\n              for (k = 0; k < kLen; k += 1) {\r\n                if (maskProps[j].pt.k[k].s) {\r\n                  convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                }\r\n                if (maskProps[j].pt.k[k].e) {\r\n                  convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (layerData.ty === 0) {\r\n          layerData.layers = findCompLayers(layerData.refId, comps);\r\n          completeLayers(layerData.layers, comps, fontManager);\r\n        } else if (layerData.ty === 4) {\r\n          completeShapes(layerData.shapes);\r\n        } else if (layerData.ty === 5) {\r\n          completeText(layerData, fontManager);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function findCompLayers(id, comps) {\r\n    var i = 0;\r\n    var len = comps.length;\r\n    while (i < len) {\r\n      if (comps[i].id === id) {\r\n        if (!comps[i].layers.__used) {\r\n          comps[i].layers.__used = true;\r\n          return comps[i].layers;\r\n        }\r\n        return JSON.parse(JSON.stringify(comps[i].layers));\r\n      }\r\n      i += 1;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function completeShapes(arr) {\r\n    var i;\r\n    var len = arr.length;\r\n    var j;\r\n    var jLen;\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (arr[i].ty === 'sh') {\r\n        if (arr[i].ks.k.i) {\r\n          convertPathsToAbsoluteValues(arr[i].ks.k);\r\n        } else {\r\n          jLen = arr[i].ks.k.length;\r\n          for (j = 0; j < jLen; j += 1) {\r\n            if (arr[i].ks.k[j].s) {\r\n              convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n            }\r\n            if (arr[i].ks.k[j].e) {\r\n              convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n            }\r\n          }\r\n        }\r\n      } else if (arr[i].ty === 'gr') {\r\n        completeShapes(arr[i].it);\r\n      }\r\n    }\r\n  }\r\n\r\n  function convertPathsToAbsoluteValues(path) {\r\n    var i;\r\n    var len = path.i.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      path.i[i][0] += path.v[i][0];\r\n      path.i[i][1] += path.v[i][1];\r\n      path.o[i][0] += path.v[i][0];\r\n      path.o[i][1] += path.v[i][1];\r\n    }\r\n  }\r\n\r\n  function checkVersion(minimum, animVersionString) {\r\n    var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\r\n    if (minimum[0] > animVersion[0]) {\r\n      return true;\r\n    } if (animVersion[0] > minimum[0]) {\r\n      return false;\r\n    }\r\n    if (minimum[1] > animVersion[1]) {\r\n      return true;\r\n    } if (animVersion[1] > minimum[1]) {\r\n      return false;\r\n    }\r\n    if (minimum[2] > animVersion[2]) {\r\n      return true;\r\n    } if (animVersion[2] > minimum[2]) {\r\n      return false;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  var checkText = (function () {\r\n    var minimumVersion = [4, 4, 14];\r\n\r\n    function updateTextLayer(textLayer) {\r\n      var documentData = textLayer.t.d;\r\n      textLayer.t.d = {\r\n        k: [\r\n          {\r\n            s: documentData,\r\n            t: 0,\r\n          },\r\n        ],\r\n      };\r\n    }\r\n\r\n    function iterateLayers(layers) {\r\n      var i;\r\n      var len = layers.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        if (layers[i].ty === 5) {\r\n          updateTextLayer(layers[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return function (animationData) {\r\n      if (checkVersion(minimumVersion, animationData.v)) {\r\n        iterateLayers(animationData.layers);\r\n        if (animationData.assets) {\r\n          var i;\r\n          var len = animationData.assets.length;\r\n          for (i = 0; i < len; i += 1) {\r\n            if (animationData.assets[i].layers) {\r\n              iterateLayers(animationData.assets[i].layers);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }());\r\n\r\n  var checkChars = (function () {\r\n    var minimumVersion = [4, 7, 99];\r\n    return function (animationData) {\r\n      if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\r\n        var i;\r\n        var len = animationData.chars.length;\r\n        var j;\r\n        var jLen;\r\n        var pathData;\r\n        var paths;\r\n        for (i = 0; i < len; i += 1) {\r\n          if (animationData.chars[i].data && animationData.chars[i].data.shapes) {\r\n            paths = animationData.chars[i].data.shapes[0].it;\r\n            jLen = paths.length;\r\n\r\n            for (j = 0; j < jLen; j += 1) {\r\n              pathData = paths[j].ks.k;\r\n              if (!pathData.__converted) {\r\n                convertPathsToAbsoluteValues(paths[j].ks.k);\r\n                pathData.__converted = true;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }());\r\n\r\n  var checkColors = (function () {\r\n    var minimumVersion = [4, 1, 9];\r\n\r\n    function iterateShapes(shapes) {\r\n      var i;\r\n      var len = shapes.length;\r\n      var j;\r\n      var jLen;\r\n      for (i = 0; i < len; i += 1) {\r\n        if (shapes[i].ty === 'gr') {\r\n          iterateShapes(shapes[i].it);\r\n        } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\r\n          if (shapes[i].c.k && shapes[i].c.k[0].i) {\r\n            jLen = shapes[i].c.k.length;\r\n            for (j = 0; j < jLen; j += 1) {\r\n              if (shapes[i].c.k[j].s) {\r\n                shapes[i].c.k[j].s[0] /= 255;\r\n                shapes[i].c.k[j].s[1] /= 255;\r\n                shapes[i].c.k[j].s[2] /= 255;\r\n                shapes[i].c.k[j].s[3] /= 255;\r\n              }\r\n              if (shapes[i].c.k[j].e) {\r\n                shapes[i].c.k[j].e[0] /= 255;\r\n                shapes[i].c.k[j].e[1] /= 255;\r\n                shapes[i].c.k[j].e[2] /= 255;\r\n                shapes[i].c.k[j].e[3] /= 255;\r\n              }\r\n            }\r\n          } else {\r\n            shapes[i].c.k[0] /= 255;\r\n            shapes[i].c.k[1] /= 255;\r\n            shapes[i].c.k[2] /= 255;\r\n            shapes[i].c.k[3] /= 255;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    function iterateLayers(layers) {\r\n      var i;\r\n      var len = layers.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        if (layers[i].ty === 4) {\r\n          iterateShapes(layers[i].shapes);\r\n        }\r\n      }\r\n    }\r\n\r\n    return function (animationData) {\r\n      if (checkVersion(minimumVersion, animationData.v)) {\r\n        iterateLayers(animationData.layers);\r\n        if (animationData.assets) {\r\n          var i;\r\n          var len = animationData.assets.length;\r\n          for (i = 0; i < len; i += 1) {\r\n            if (animationData.assets[i].layers) {\r\n              iterateLayers(animationData.assets[i].layers);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }());\r\n\r\n  var checkShapes = (function () {\r\n    var minimumVersion = [4, 4, 18];\r\n\r\n    function completeClosingShapes(arr) {\r\n      var i;\r\n      var len = arr.length;\r\n      var j;\r\n      var jLen;\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        if (arr[i].ty === 'sh') {\r\n          if (arr[i].ks.k.i) {\r\n            arr[i].ks.k.c = arr[i].closed;\r\n          } else {\r\n            jLen = arr[i].ks.k.length;\r\n            for (j = 0; j < jLen; j += 1) {\r\n              if (arr[i].ks.k[j].s) {\r\n                arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n              }\r\n              if (arr[i].ks.k[j].e) {\r\n                arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n              }\r\n            }\r\n          }\r\n        } else if (arr[i].ty === 'gr') {\r\n          completeClosingShapes(arr[i].it);\r\n        }\r\n      }\r\n    }\r\n\r\n    function iterateLayers(layers) {\r\n      var layerData;\r\n      var i;\r\n      var len = layers.length;\r\n      var j;\r\n      var jLen;\r\n      var k;\r\n      var kLen;\r\n      for (i = 0; i < len; i += 1) {\r\n        layerData = layers[i];\r\n        if (layerData.hasMask) {\r\n          var maskProps = layerData.masksProperties;\r\n          jLen = maskProps.length;\r\n          for (j = 0; j < jLen; j += 1) {\r\n            if (maskProps[j].pt.k.i) {\r\n              maskProps[j].pt.k.c = maskProps[j].cl;\r\n            } else {\r\n              kLen = maskProps[j].pt.k.length;\r\n              for (k = 0; k < kLen; k += 1) {\r\n                if (maskProps[j].pt.k[k].s) {\r\n                  maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                }\r\n                if (maskProps[j].pt.k[k].e) {\r\n                  maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        if (layerData.ty === 4) {\r\n          completeClosingShapes(layerData.shapes);\r\n        }\r\n      }\r\n    }\r\n\r\n    return function (animationData) {\r\n      if (checkVersion(minimumVersion, animationData.v)) {\r\n        iterateLayers(animationData.layers);\r\n        if (animationData.assets) {\r\n          var i;\r\n          var len = animationData.assets.length;\r\n          for (i = 0; i < len; i += 1) {\r\n            if (animationData.assets[i].layers) {\r\n              iterateLayers(animationData.assets[i].layers);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n  }());\r\n\r\n  function completeData(animationData, fontManager) {\r\n    if (animationData.__complete) {\r\n      return;\r\n    }\r\n    checkColors(animationData);\r\n    checkText(animationData);\r\n    checkChars(animationData);\r\n    checkShapes(animationData);\r\n    completeLayers(animationData.layers, animationData.assets, fontManager);\r\n    animationData.__complete = true;\r\n  }\r\n\r\n  function completeText(data) {\r\n    if (data.t.a.length === 0 && !('m' in data.t.p)) {\r\n      data.singleShape = true;\r\n    }\r\n  }\r\n\r\n  var moduleOb = {};\r\n  moduleOb.completeData = completeData;\r\n  moduleOb.checkColors = checkColors;\r\n  moduleOb.checkChars = checkChars;\r\n  moduleOb.checkShapes = checkShapes;\r\n  moduleOb.completeLayers = completeLayers;\r\n\r\n  return moduleOb;\r\n}\r\n\r\nvar dataManager = dataFunctionManager();\r\n\r\n/* exported getFontProperties */\r\n\r\nfunction getFontProperties(fontData) {\r\n  var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n\r\n  var fWeight = 'normal'; var\r\n    fStyle = 'normal';\r\n  var len = styles.length;\r\n  var styleName;\r\n  for (var i = 0; i < len; i += 1) {\r\n    styleName = styles[i].toLowerCase();\r\n    switch (styleName) {\r\n      case 'italic':\r\n        fStyle = 'italic';\r\n        break;\r\n      case 'bold':\r\n        fWeight = '700';\r\n        break;\r\n      case 'black':\r\n        fWeight = '900';\r\n        break;\r\n      case 'medium':\r\n        fWeight = '500';\r\n        break;\r\n      case 'regular':\r\n      case 'normal':\r\n        fWeight = '400';\r\n        break;\r\n      case 'light':\r\n      case 'thin':\r\n        fWeight = '200';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  return {\r\n    style: fStyle,\r\n    weight: fontData.fWeight || fWeight,\r\n  };\r\n}\r\n\r\n/* global createNS, createTag, getFontProperties */\r\n/* exported FontManager */\r\n\r\nvar FontManager = (function () {\r\n  var maxWaitingTime = 5000;\r\n  var emptyChar = {\r\n    w: 0,\r\n    size: 0,\r\n    shapes: [],\r\n  };\r\n  var combinedCharacters = [];\r\n  // Hindi characters\r\n  combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366,\r\n    2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379,\r\n    2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n\r\n  function trimFontOptions(font) {\r\n    var familyArray = font.split(',');\r\n    var i;\r\n    var len = familyArray.length;\r\n    var enabledFamilies = [];\r\n    for (i = 0; i < len; i += 1) {\r\n      if (familyArray[i] !== 'sans-serif' && familyArray[i] !== 'monospace') {\r\n        enabledFamilies.push(familyArray[i]);\r\n      }\r\n    }\r\n    return enabledFamilies.join(',');\r\n  }\r\n\r\n  function setUpNode(font, family) {\r\n    var parentNode = createTag('span');\r\n    // Node is invisible to screen readers.\r\n    parentNode.setAttribute('aria-hidden', true);\r\n    parentNode.style.fontFamily = family;\r\n    var node = createTag('span');\r\n    // Characters that vary significantly among different fonts\r\n    node.innerText = 'giItT1WQy@!-/#';\r\n    // Visible - so we can measure it - but not on the screen\r\n    parentNode.style.position = 'absolute';\r\n    parentNode.style.left = '-10000px';\r\n    parentNode.style.top = '-10000px';\r\n    // Large font size makes even subtle changes obvious\r\n    parentNode.style.fontSize = '300px';\r\n    // Reset any font properties\r\n    parentNode.style.fontVariant = 'normal';\r\n    parentNode.style.fontStyle = 'normal';\r\n    parentNode.style.fontWeight = 'normal';\r\n    parentNode.style.letterSpacing = '0';\r\n    parentNode.appendChild(node);\r\n    document.body.appendChild(parentNode);\r\n\r\n    // Remember width with no applied web font\r\n    var width = node.offsetWidth;\r\n    node.style.fontFamily = trimFontOptions(font) + ', ' + family;\r\n    return { node: node, w: width, parent: parentNode };\r\n  }\r\n\r\n  function checkLoadedFonts() {\r\n    var i;\r\n    var len = this.fonts.length;\r\n    var node;\r\n    var w;\r\n    var loadedCount = len;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.fonts[i].loaded) {\r\n        loadedCount -= 1;\r\n      } else if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\r\n        this.fonts[i].loaded = true;\r\n      } else {\r\n        node = this.fonts[i].monoCase.node;\r\n        w = this.fonts[i].monoCase.w;\r\n        if (node.offsetWidth !== w) {\r\n          loadedCount -= 1;\r\n          this.fonts[i].loaded = true;\r\n        } else {\r\n          node = this.fonts[i].sansCase.node;\r\n          w = this.fonts[i].sansCase.w;\r\n          if (node.offsetWidth !== w) {\r\n            loadedCount -= 1;\r\n            this.fonts[i].loaded = true;\r\n          }\r\n        }\r\n        if (this.fonts[i].loaded) {\r\n          this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n          this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\r\n      setTimeout(this.checkLoadedFontsBinded, 20);\r\n    } else {\r\n      setTimeout(this.setIsLoadedBinded, 10);\r\n    }\r\n  }\r\n\r\n  function createHelper(def, fontData) {\r\n    var tHelper = createNS('text');\r\n    tHelper.style.fontSize = '100px';\r\n    // tHelper.style.fontFamily = fontData.fFamily;\r\n\r\n    var fontProps = getFontProperties(fontData);\r\n    tHelper.setAttribute('font-family', fontData.fFamily);\r\n    tHelper.setAttribute('font-style', fontProps.style);\r\n    tHelper.setAttribute('font-weight', fontProps.weight);\r\n    tHelper.textContent = '1';\r\n    if (fontData.fClass) {\r\n      tHelper.style.fontFamily = 'inherit';\r\n      tHelper.setAttribute('class', fontData.fClass);\r\n    } else {\r\n      tHelper.style.fontFamily = fontData.fFamily;\r\n    }\r\n    def.appendChild(tHelper);\r\n    var tCanvasHelper = createTag('canvas').getContext('2d');\r\n    tCanvasHelper.font = fontData.fWeight + ' ' + fontData.fStyle + ' 100px ' + fontData.fFamily;\r\n    // tCanvasHelper.font = ' 100px '+ fontData.fFamily;\r\n    return tHelper;\r\n  }\r\n\r\n  function addFonts(fontData, defs) {\r\n    if (!fontData) {\r\n      this.isLoaded = true;\r\n      return;\r\n    }\r\n    if (this.chars) {\r\n      this.isLoaded = true;\r\n      this.fonts = fontData.list;\r\n      return;\r\n    }\r\n\r\n    var fontArr = fontData.list;\r\n    var i;\r\n    var len = fontArr.length;\r\n    var _pendingFonts = len;\r\n    for (i = 0; i < len; i += 1) {\r\n      var shouldLoadFont = true;\r\n      var loadedSelector;\r\n      var j;\r\n      fontArr[i].loaded = false;\r\n      fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\r\n      fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\r\n      if (!fontArr[i].fPath) {\r\n        fontArr[i].loaded = true;\r\n        _pendingFonts -= 1;\r\n      } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\r\n        loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\r\n\r\n        if (loadedSelector.length > 0) {\r\n          shouldLoadFont = false;\r\n        }\r\n\r\n        if (shouldLoadFont) {\r\n          var s = createTag('style');\r\n          s.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n          s.setAttribute('f-origin', fontArr[i].origin);\r\n          s.setAttribute('f-family', fontArr[i].fFamily);\r\n          s.type = 'text/css';\r\n          s.innerText = '@font-face {font-family: ' + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\r\n          defs.appendChild(s);\r\n        }\r\n      } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\r\n        loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\r\n\r\n        for (j = 0; j < loadedSelector.length; j += 1) {\r\n          if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\r\n            // Font is already loaded\r\n            shouldLoadFont = false;\r\n          }\r\n        }\r\n\r\n        if (shouldLoadFont) {\r\n          var l = createTag('link');\r\n          l.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n          l.setAttribute('f-origin', fontArr[i].origin);\r\n          l.type = 'text/css';\r\n          l.rel = 'stylesheet';\r\n          l.href = fontArr[i].fPath;\r\n          document.body.appendChild(l);\r\n        }\r\n      } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\r\n        loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\r\n\r\n        for (j = 0; j < loadedSelector.length; j += 1) {\r\n          if (fontArr[i].fPath === loadedSelector[j].src) {\r\n            // Font is already loaded\r\n            shouldLoadFont = false;\r\n          }\r\n        }\r\n\r\n        if (shouldLoadFont) {\r\n          var sc = createTag('link');\r\n          sc.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n          sc.setAttribute('f-origin', fontArr[i].origin);\r\n          sc.setAttribute('rel', 'stylesheet');\r\n          sc.setAttribute('href', fontArr[i].fPath);\r\n          defs.appendChild(sc);\r\n        }\r\n      }\r\n      fontArr[i].helper = createHelper(defs, fontArr[i]);\r\n      fontArr[i].cache = {};\r\n      this.fonts.push(fontArr[i]);\r\n    }\r\n    if (_pendingFonts === 0) {\r\n      this.isLoaded = true;\r\n    } else {\r\n      // On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\r\n      // Adding this timeout seems to fix it\r\n      setTimeout(this.checkLoadedFonts.bind(this), 100);\r\n    }\r\n  }\r\n\r\n  function addChars(chars) {\r\n    if (!chars) {\r\n      return;\r\n    }\r\n    if (!this.chars) {\r\n      this.chars = [];\r\n    }\r\n    var i;\r\n    var len = chars.length;\r\n    var j;\r\n    var jLen = this.chars.length;\r\n    var found;\r\n    for (i = 0; i < len; i += 1) {\r\n      j = 0;\r\n      found = false;\r\n      while (j < jLen) {\r\n        if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\r\n          found = true;\r\n        }\r\n        j += 1;\r\n      }\r\n      if (!found) {\r\n        this.chars.push(chars[i]);\r\n        jLen += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  function getCharData(char, style, font) {\r\n    var i = 0;\r\n    var len = this.chars.length;\r\n    while (i < len) {\r\n      if (this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font) {\r\n        return this.chars[i];\r\n      }\r\n      i += 1;\r\n    }\r\n    if (((typeof char === 'string' && char.charCodeAt(0) !== 13) || !char)\r\n            && console\r\n            && console.warn // eslint-disable-line no-console\r\n            && !this._warned\r\n    ) {\r\n      this._warned = true;\r\n      console.warn('Missing character from exported characters list: ', char, style, font); // eslint-disable-line no-console\r\n    }\r\n    return emptyChar;\r\n  }\r\n\r\n  function measureText(char, fontName, size) {\r\n    var fontData = this.getFontByName(fontName);\r\n    var index = char.charCodeAt(0);\r\n    if (!fontData.cache[index + 1]) {\r\n      var tHelper = fontData.helper;\r\n      // Canvas version\r\n      // fontData.cache[index] = tHelper.measureText(char).width / 100;\r\n      // SVG version\r\n      // console.log(tHelper.getBBox().width)\r\n      if (char === ' ') {\r\n        tHelper.textContent = '|' + char + '|';\r\n        var doubleSize = tHelper.getComputedTextLength();\r\n        tHelper.textContent = '||';\r\n        var singleSize = tHelper.getComputedTextLength();\r\n        fontData.cache[index + 1] = (doubleSize - singleSize) / 100;\r\n      } else {\r\n        tHelper.textContent = char;\r\n        fontData.cache[index + 1] = (tHelper.getComputedTextLength()) / 100;\r\n      }\r\n    }\r\n    return fontData.cache[index + 1] * size;\r\n  }\r\n\r\n  function getFontByName(name) {\r\n    var i = 0;\r\n    var len = this.fonts.length;\r\n    while (i < len) {\r\n      if (this.fonts[i].fName === name) {\r\n        return this.fonts[i];\r\n      }\r\n      i += 1;\r\n    }\r\n    return this.fonts[0];\r\n  }\r\n\r\n  function getCombinedCharacterCodes() {\r\n    return combinedCharacters;\r\n  }\r\n\r\n  function setIsLoaded() {\r\n    this.isLoaded = true;\r\n  }\r\n\r\n  var Font = function () {\r\n    this.fonts = [];\r\n    this.chars = null;\r\n    this.typekitLoaded = 0;\r\n    this.isLoaded = false;\r\n    this._warned = false;\r\n    this.initTime = Date.now();\r\n    this.setIsLoadedBinded = this.setIsLoaded.bind(this);\r\n    this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this);\r\n  };\r\n    // TODO: for now I'm adding these methods to the Class and not the prototype. Think of a better way to implement it.\r\n  Font.getCombinedCharacterCodes = getCombinedCharacterCodes;\r\n\r\n  var fontPrototype = {\r\n    addChars: addChars,\r\n    addFonts: addFonts,\r\n    getCharData: getCharData,\r\n    getFontByName: getFontByName,\r\n    measureText: measureText,\r\n    checkLoadedFonts: checkLoadedFonts,\r\n    setIsLoaded: setIsLoaded,\r\n  };\r\n\r\n  Font.prototype = fontPrototype;\r\n\r\n  return Font;\r\n}());\r\n\r\n/* global initialDefaultFrame, BezierFactory, degToRads, bez, createTypedArray */\r\n/* exported PropertyFactory */\r\n\r\nvar PropertyFactory = (function () {\r\n  var initFrame = initialDefaultFrame;\r\n  var mathAbs = Math.abs;\r\n\r\n  function interpolateValue(frameNum, caching) {\r\n    var offsetTime = this.offsetTime;\r\n    var newValue;\r\n    if (this.propType === 'multidimensional') {\r\n      newValue = createTypedArray('float32', this.pv.length);\r\n    }\r\n    var iterationIndex = caching.lastIndex;\r\n    var i = iterationIndex;\r\n    var len = this.keyframes.length - 1;\r\n    var flag = true;\r\n    var keyData;\r\n    var nextKeyData;\r\n\r\n    while (flag) {\r\n      keyData = this.keyframes[i];\r\n      nextKeyData = this.keyframes[i + 1];\r\n      if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\r\n        if (keyData.h) {\r\n          keyData = nextKeyData;\r\n        }\r\n        iterationIndex = 0;\r\n        break;\r\n      }\r\n      if ((nextKeyData.t - offsetTime) > frameNum) {\r\n        iterationIndex = i;\r\n        break;\r\n      }\r\n      if (i < len - 1) {\r\n        i += 1;\r\n      } else {\r\n        iterationIndex = 0;\r\n        flag = false;\r\n      }\r\n    }\r\n\r\n    var k;\r\n    var kLen;\r\n    var perc;\r\n    var jLen;\r\n    var j;\r\n    var fnc;\r\n    var nextKeyTime = nextKeyData.t - offsetTime;\r\n    var keyTime = keyData.t - offsetTime;\r\n    var endValue;\r\n    if (keyData.to) {\r\n      if (!keyData.bezierData) {\r\n        keyData.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\r\n      }\r\n      var bezierData = keyData.bezierData;\r\n      if (frameNum >= nextKeyTime || frameNum < keyTime) {\r\n        var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\r\n        kLen = bezierData.points[ind].point.length;\r\n        for (k = 0; k < kLen; k += 1) {\r\n          newValue[k] = bezierData.points[ind].point[k];\r\n        }\r\n        // caching._lastKeyframeIndex = -1;\r\n      } else {\r\n        if (keyData.__fnct) {\r\n          fnc = keyData.__fnct;\r\n        } else {\r\n          fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\r\n          keyData.__fnct = fnc;\r\n        }\r\n        perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n        var distanceInLine = bezierData.segmentLength * perc;\r\n\r\n        var segmentPerc;\r\n        var addedLength = (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastAddedLength : 0;\r\n        j = (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastPoint : 0;\r\n        flag = true;\r\n        jLen = bezierData.points.length;\r\n        while (flag) {\r\n          addedLength += bezierData.points[j].partialLength;\r\n          if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\r\n            kLen = bezierData.points[j].point.length;\r\n            for (k = 0; k < kLen; k += 1) {\r\n              newValue[k] = bezierData.points[j].point[k];\r\n            }\r\n            break;\r\n          } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\r\n            segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\r\n            kLen = bezierData.points[j].point.length;\r\n            for (k = 0; k < kLen; k += 1) {\r\n              newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\r\n            }\r\n            break;\r\n          }\r\n          if (j < jLen - 1) {\r\n            j += 1;\r\n          } else {\r\n            flag = false;\r\n          }\r\n        }\r\n        caching._lastPoint = j;\r\n        caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n        caching._lastKeyframeIndex = i;\r\n      }\r\n    } else {\r\n      var outX;\r\n      var outY;\r\n      var inX;\r\n      var inY;\r\n      var keyValue;\r\n      len = keyData.s.length;\r\n      endValue = nextKeyData.s || keyData.e;\r\n      if (this.sh && keyData.h !== 1) {\r\n        if (frameNum >= nextKeyTime) {\r\n          newValue[0] = endValue[0];\r\n          newValue[1] = endValue[1];\r\n          newValue[2] = endValue[2];\r\n        } else if (frameNum <= keyTime) {\r\n          newValue[0] = keyData.s[0];\r\n          newValue[1] = keyData.s[1];\r\n          newValue[2] = keyData.s[2];\r\n        } else {\r\n          var quatStart = createQuaternion(keyData.s);\r\n          var quatEnd = createQuaternion(endValue);\r\n          var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\r\n          quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n        }\r\n      } else {\r\n        for (i = 0; i < len; i += 1) {\r\n          if (keyData.h !== 1) {\r\n            if (frameNum >= nextKeyTime) {\r\n              perc = 1;\r\n            } else if (frameNum < keyTime) {\r\n              perc = 0;\r\n            } else {\r\n              if (keyData.o.x.constructor === Array) {\r\n                if (!keyData.__fnct) {\r\n                  keyData.__fnct = [];\r\n                }\r\n                if (!keyData.__fnct[i]) {\r\n                  outX = (typeof keyData.o.x[i] === 'undefined') ? keyData.o.x[0] : keyData.o.x[i];\r\n                  outY = (typeof keyData.o.y[i] === 'undefined') ? keyData.o.y[0] : keyData.o.y[i];\r\n                  inX = (typeof keyData.i.x[i] === 'undefined') ? keyData.i.x[0] : keyData.i.x[i];\r\n                  inY = (typeof keyData.i.y[i] === 'undefined') ? keyData.i.y[0] : keyData.i.y[i];\r\n                  fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                  keyData.__fnct[i] = fnc;\r\n                } else {\r\n                  fnc = keyData.__fnct[i];\r\n                }\r\n              } else if (!keyData.__fnct) {\r\n                outX = keyData.o.x;\r\n                outY = keyData.o.y;\r\n                inX = keyData.i.x;\r\n                inY = keyData.i.y;\r\n                fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                keyData.__fnct = fnc;\r\n              } else {\r\n                fnc = keyData.__fnct;\r\n              }\r\n              perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n            }\r\n          }\r\n\r\n          endValue = nextKeyData.s || keyData.e;\r\n          keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\r\n\r\n          if (this.propType === 'multidimensional') {\r\n            newValue[i] = keyValue;\r\n          } else {\r\n            newValue = keyValue;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    caching.lastIndex = iterationIndex;\r\n    return newValue;\r\n  }\r\n\r\n  // based on @Toji's https://github.com/toji/gl-matrix/\r\n  function slerp(a, b, t) {\r\n    var out = [];\r\n    var ax = a[0];\r\n    var ay = a[1];\r\n    var az = a[2];\r\n    var aw = a[3];\r\n    var bx = b[0];\r\n    var by = b[1];\r\n    var bz = b[2];\r\n    var bw = b[3];\r\n\r\n    var omega;\r\n    var cosom;\r\n    var sinom;\r\n    var scale0;\r\n    var scale1;\r\n\r\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n    if (cosom < 0.0) {\r\n      cosom = -cosom;\r\n      bx = -bx;\r\n      by = -by;\r\n      bz = -bz;\r\n      bw = -bw;\r\n    }\r\n    if ((1.0 - cosom) > 0.000001) {\r\n      omega = Math.acos(cosom);\r\n      sinom = Math.sin(omega);\r\n      scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n      scale1 = Math.sin(t * omega) / sinom;\r\n    } else {\r\n      scale0 = 1.0 - t;\r\n      scale1 = t;\r\n    }\r\n    out[0] = scale0 * ax + scale1 * bx;\r\n    out[1] = scale0 * ay + scale1 * by;\r\n    out[2] = scale0 * az + scale1 * bz;\r\n    out[3] = scale0 * aw + scale1 * bw;\r\n\r\n    return out;\r\n  }\r\n\r\n  function quaternionToEuler(out, quat) {\r\n    var qx = quat[0];\r\n    var qy = quat[1];\r\n    var qz = quat[2];\r\n    var qw = quat[3];\r\n    var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\r\n    var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\r\n    var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\r\n    out[0] = heading / degToRads;\r\n    out[1] = attitude / degToRads;\r\n    out[2] = bank / degToRads;\r\n  }\r\n\r\n  function createQuaternion(values) {\r\n    var heading = values[0] * degToRads;\r\n    var attitude = values[1] * degToRads;\r\n    var bank = values[2] * degToRads;\r\n    var c1 = Math.cos(heading / 2);\r\n    var c2 = Math.cos(attitude / 2);\r\n    var c3 = Math.cos(bank / 2);\r\n    var s1 = Math.sin(heading / 2);\r\n    var s2 = Math.sin(attitude / 2);\r\n    var s3 = Math.sin(bank / 2);\r\n    var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n    var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n    var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n    var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n\r\n    return [x, y, z, w];\r\n  }\r\n\r\n  function getValueAtCurrentTime() {\r\n    var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n    var initTime = this.keyframes[0].t - this.offsetTime;\r\n    var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n    if (!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))) {\r\n      if (this._caching.lastFrame >= frameNum) {\r\n        this._caching._lastKeyframeIndex = -1;\r\n        this._caching.lastIndex = 0;\r\n      }\r\n\r\n      var renderResult = this.interpolateValue(frameNum, this._caching);\r\n      this.pv = renderResult;\r\n    }\r\n    this._caching.lastFrame = frameNum;\r\n    return this.pv;\r\n  }\r\n\r\n  function setVValue(val) {\r\n    var multipliedValue;\r\n    if (this.propType === 'unidimensional') {\r\n      multipliedValue = val * this.mult;\r\n      if (mathAbs(this.v - multipliedValue) > 0.00001) {\r\n        this.v = multipliedValue;\r\n        this._mdf = true;\r\n      }\r\n    } else {\r\n      var i = 0;\r\n      var len = this.v.length;\r\n      while (i < len) {\r\n        multipliedValue = val[i] * this.mult;\r\n        if (mathAbs(this.v[i] - multipliedValue) > 0.00001) {\r\n          this.v[i] = multipliedValue;\r\n          this._mdf = true;\r\n        }\r\n        i += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  function processEffectsSequence() {\r\n    if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n      return;\r\n    }\r\n    if (this.lock) {\r\n      this.setVValue(this.pv);\r\n      return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = this._isFirstFrame;\r\n    var i;\r\n    var len = this.effectsSequence.length;\r\n    var finalValue = this.kf ? this.pv : this.data.k;\r\n    for (i = 0; i < len; i += 1) {\r\n      finalValue = this.effectsSequence[i](finalValue);\r\n    }\r\n    this.setVValue(finalValue);\r\n    this._isFirstFrame = false;\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n  }\r\n\r\n  function addEffect(effectFunction) {\r\n    this.effectsSequence.push(effectFunction);\r\n    this.container.addDynamicProperty(this);\r\n  }\r\n\r\n  function ValueProperty(elem, data, mult, container) {\r\n    this.propType = 'unidimensional';\r\n    this.mult = mult || 1;\r\n    this.data = data;\r\n    this.v = mult ? data.k * mult : data.k;\r\n    this.pv = data.k;\r\n    this._mdf = false;\r\n    this.elem = elem;\r\n    this.container = container;\r\n    this.comp = elem.comp;\r\n    this.k = false;\r\n    this.kf = false;\r\n    this.vel = 0;\r\n    this.effectsSequence = [];\r\n    this._isFirstFrame = true;\r\n    this.getValue = processEffectsSequence;\r\n    this.setVValue = setVValue;\r\n    this.addEffect = addEffect;\r\n  }\r\n\r\n  function MultiDimensionalProperty(elem, data, mult, container) {\r\n    this.propType = 'multidimensional';\r\n    this.mult = mult || 1;\r\n    this.data = data;\r\n    this._mdf = false;\r\n    this.elem = elem;\r\n    this.container = container;\r\n    this.comp = elem.comp;\r\n    this.k = false;\r\n    this.kf = false;\r\n    this.frameId = -1;\r\n    var i;\r\n    var len = data.k.length;\r\n    this.v = createTypedArray('float32', len);\r\n    this.pv = createTypedArray('float32', len);\r\n    this.vel = createTypedArray('float32', len);\r\n    for (i = 0; i < len; i += 1) {\r\n      this.v[i] = data.k[i] * this.mult;\r\n      this.pv[i] = data.k[i];\r\n    }\r\n    this._isFirstFrame = true;\r\n    this.effectsSequence = [];\r\n    this.getValue = processEffectsSequence;\r\n    this.setVValue = setVValue;\r\n    this.addEffect = addEffect;\r\n  }\r\n\r\n  function KeyframedValueProperty(elem, data, mult, container) {\r\n    this.propType = 'unidimensional';\r\n    this.keyframes = data.k;\r\n    this.offsetTime = elem.data.st;\r\n    this.frameId = -1;\r\n    this._caching = {\r\n      lastFrame: initFrame, lastIndex: 0, value: 0, _lastKeyframeIndex: -1,\r\n    };\r\n    this.k = true;\r\n    this.kf = true;\r\n    this.data = data;\r\n    this.mult = mult || 1;\r\n    this.elem = elem;\r\n    this.container = container;\r\n    this.comp = elem.comp;\r\n    this.v = initFrame;\r\n    this.pv = initFrame;\r\n    this._isFirstFrame = true;\r\n    this.getValue = processEffectsSequence;\r\n    this.setVValue = setVValue;\r\n    this.interpolateValue = interpolateValue;\r\n    this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n    this.addEffect = addEffect;\r\n  }\r\n\r\n  function KeyframedMultidimensionalProperty(elem, data, mult, container) {\r\n    this.propType = 'multidimensional';\r\n    var i;\r\n    var len = data.k.length;\r\n    var s;\r\n    var e;\r\n    var to;\r\n    var ti;\r\n    for (i = 0; i < len - 1; i += 1) {\r\n      if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\r\n        s = data.k[i].s;\r\n        e = data.k[i + 1].s;\r\n        to = data.k[i].to;\r\n        ti = data.k[i].ti;\r\n        if ((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2]))) {\r\n          data.k[i].to = null;\r\n          data.k[i].ti = null;\r\n        }\r\n        if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n          if (s.length === 2 || (s[2] === e[2] && to[2] === 0 && ti[2] === 0)) {\r\n            data.k[i].to = null;\r\n            data.k[i].ti = null;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n    this.data = data;\r\n    this.keyframes = data.k;\r\n    this.offsetTime = elem.data.st;\r\n    this.k = true;\r\n    this.kf = true;\r\n    this._isFirstFrame = true;\r\n    this.mult = mult || 1;\r\n    this.elem = elem;\r\n    this.container = container;\r\n    this.comp = elem.comp;\r\n    this.getValue = processEffectsSequence;\r\n    this.setVValue = setVValue;\r\n    this.interpolateValue = interpolateValue;\r\n    this.frameId = -1;\r\n    var arrLen = data.k[0].s.length;\r\n    this.v = createTypedArray('float32', arrLen);\r\n    this.pv = createTypedArray('float32', arrLen);\r\n    for (i = 0; i < arrLen; i += 1) {\r\n      this.v[i] = initFrame;\r\n      this.pv[i] = initFrame;\r\n    }\r\n    this._caching = { lastFrame: initFrame, lastIndex: 0, value: createTypedArray('float32', arrLen) };\r\n    this.addEffect = addEffect;\r\n  }\r\n\r\n  function getProp(elem, data, type, mult, container) {\r\n    var p;\r\n    if (!data.k.length) {\r\n      p = new ValueProperty(elem, data, mult, container);\r\n    } else if (typeof (data.k[0]) === 'number') {\r\n      p = new MultiDimensionalProperty(elem, data, mult, container);\r\n    } else {\r\n      switch (type) {\r\n        case 0:\r\n          p = new KeyframedValueProperty(elem, data, mult, container);\r\n          break;\r\n        case 1:\r\n          p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    if (p.effectsSequence.length) {\r\n      container.addDynamicProperty(p);\r\n    }\r\n    return p;\r\n  }\r\n\r\n  var ob = {\r\n    getProp: getProp,\r\n  };\r\n  return ob;\r\n}());\r\n\r\n/* global Matrix, degToRads, PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\n/* exported TransformPropertyFactory */\r\n\r\nvar TransformPropertyFactory = (function () {\r\n  var defaultVector = [0, 0];\r\n\r\n  function applyToMatrix(mat) {\r\n    var _mdf = this._mdf;\r\n    this.iterateDynamicProperties();\r\n    this._mdf = this._mdf || _mdf;\r\n    if (this.a) {\r\n      mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n    }\r\n    if (this.s) {\r\n      mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n    }\r\n    if (this.sk) {\r\n      mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n    }\r\n    if (this.r) {\r\n      mat.rotate(-this.r.v);\r\n    } else {\r\n      mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\r\n        .rotateY(this.or.v[1])\r\n        .rotateX(this.or.v[0]);\r\n    }\r\n    if (this.data.p.s) {\r\n      if (this.data.p.z) {\r\n        mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n      } else {\r\n        mat.translate(this.px.v, this.py.v, 0);\r\n      }\r\n    } else {\r\n      mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n    }\r\n  }\r\n  function processKeys(forceRender) {\r\n    if (this.elem.globalData.frameId === this.frameId) {\r\n      return;\r\n    }\r\n    if (this._isDirty) {\r\n      this.precalculateMatrix();\r\n      this._isDirty = false;\r\n    }\r\n\r\n    this.iterateDynamicProperties();\r\n\r\n    if (this._mdf || forceRender) {\r\n      var frameRate;\r\n      this.v.cloneFromProps(this.pre.props);\r\n      if (this.appliedTransformations < 1) {\r\n        this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n      }\r\n      if (this.appliedTransformations < 2) {\r\n        this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n      }\r\n      if (this.sk && this.appliedTransformations < 3) {\r\n        this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n      }\r\n      if (this.r && this.appliedTransformations < 4) {\r\n        this.v.rotate(-this.r.v);\r\n      } else if (!this.r && this.appliedTransformations < 4) {\r\n        this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\r\n          .rotateY(this.or.v[1])\r\n          .rotateX(this.or.v[0]);\r\n      }\r\n      if (this.autoOriented) {\r\n        var v1;\r\n        var v2;\r\n        frameRate = this.elem.globalData.frameRate;\r\n        if (this.p && this.p.keyframes && this.p.getValueAtTime) {\r\n          if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\r\n            v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\r\n            v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\r\n          } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n            v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / frameRate), 0);\r\n            v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\r\n          } else {\r\n            v1 = this.p.pv;\r\n            v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\r\n          }\r\n        } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\r\n          v1 = [];\r\n          v2 = [];\r\n          var px = this.px;\r\n          var py = this.py;\r\n          if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\r\n            v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\r\n            v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\r\n            v2[0] = px.getValueAtTime((px.keyframes[0].t) / frameRate, 0);\r\n            v2[1] = py.getValueAtTime((py.keyframes[0].t) / frameRate, 0);\r\n          } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\r\n            v1[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t / frameRate), 0);\r\n            v1[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t / frameRate), 0);\r\n            v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n            v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n          } else {\r\n            v1 = [px.pv, py.pv];\r\n            v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\r\n            v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\r\n          }\r\n        } else {\r\n          v2 = defaultVector;\r\n          v1 = v2;\r\n        }\r\n        this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n      }\r\n      if (this.data.p && this.data.p.s) {\r\n        if (this.data.p.z) {\r\n          this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n        } else {\r\n          this.v.translate(this.px.v, this.py.v, 0);\r\n        }\r\n      } else {\r\n        this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n      }\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n  }\r\n\r\n  function precalculateMatrix() {\r\n    if (!this.a.k) {\r\n      this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n      this.appliedTransformations = 1;\r\n    } else {\r\n      return;\r\n    }\r\n    if (!this.s.effectsSequence.length) {\r\n      this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n      this.appliedTransformations = 2;\r\n    } else {\r\n      return;\r\n    }\r\n    if (this.sk) {\r\n      if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\r\n        this.pre.skewFromAxis(-this.sk.v, this.sa.v);\r\n        this.appliedTransformations = 3;\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n    if (this.r) {\r\n      if (!this.r.effectsSequence.length) {\r\n        this.pre.rotate(-this.r.v);\r\n        this.appliedTransformations = 4;\r\n      }\r\n    } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\r\n      this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2])\r\n        .rotateY(this.or.v[1])\r\n        .rotateX(this.or.v[0]);\r\n      this.appliedTransformations = 4;\r\n    }\r\n  }\r\n\r\n  function autoOrient() {\r\n    //\r\n    // var prevP = this.getValueAtTime();\r\n  }\r\n\r\n  function addDynamicProperty(prop) {\r\n    this._addDynamicProperty(prop);\r\n    this.elem.addDynamicProperty(prop);\r\n    this._isDirty = true;\r\n  }\r\n\r\n  function TransformProperty(elem, data, container) {\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.propType = 'transform';\r\n    this.data = data;\r\n    this.v = new Matrix();\r\n    // Precalculated matrix with non animated properties\r\n    this.pre = new Matrix();\r\n    this.appliedTransformations = 0;\r\n    this.initDynamicPropertyContainer(container || elem);\r\n    if (data.p && data.p.s) {\r\n      this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\r\n      this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\r\n      if (data.p.z) {\r\n        this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\r\n      }\r\n    } else {\r\n      this.p = PropertyFactory.getProp(elem, data.p || { k: [0, 0, 0] }, 1, 0, this);\r\n    }\r\n    if (data.rx) {\r\n      this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n      this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n      this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n      if (data.or.k[0].ti) {\r\n        var i;\r\n        var len = data.or.k.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          data.or.k[i].to = null;\r\n          data.or.k[i].ti = null;\r\n        }\r\n      }\r\n      this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\r\n      // sh Indicates it needs to be capped between -180 and 180\r\n      this.or.sh = true;\r\n    } else {\r\n      this.r = PropertyFactory.getProp(elem, data.r || { k: 0 }, 0, degToRads, this);\r\n    }\r\n    if (data.sk) {\r\n      this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n      this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n    }\r\n    this.a = PropertyFactory.getProp(elem, data.a || { k: [0, 0, 0] }, 1, 0, this);\r\n    this.s = PropertyFactory.getProp(elem, data.s || { k: [100, 100, 100] }, 1, 0.01, this);\r\n    // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n    if (data.o) {\r\n      this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\r\n    } else {\r\n      this.o = { _mdf: false, v: 1 };\r\n    }\r\n    this._isDirty = true;\r\n    if (!this.dynamicProperties.length) {\r\n      this.getValue(true);\r\n    }\r\n  }\r\n\r\n  TransformProperty.prototype = {\r\n    applyToMatrix: applyToMatrix,\r\n    getValue: processKeys,\r\n    precalculateMatrix: precalculateMatrix,\r\n    autoOrient: autoOrient,\r\n  };\r\n\r\n  extendPrototype([DynamicPropertyContainer], TransformProperty);\r\n  TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n  TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\r\n\r\n  function getTransformProperty(elem, data, container) {\r\n    return new TransformProperty(elem, data, container);\r\n  }\r\n\r\n  return {\r\n    getTransformProperty: getTransformProperty,\r\n  };\r\n}());\r\n\r\n/* global createSizedArray, createSizedArray, pointPool */\r\n\r\nfunction ShapePath() {\r\n  this.c = false;\r\n  this._length = 0;\r\n  this._maxLength = 8;\r\n  this.v = createSizedArray(this._maxLength);\r\n  this.o = createSizedArray(this._maxLength);\r\n  this.i = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapePath.prototype.setPathData = function (closed, len) {\r\n  this.c = closed;\r\n  this.setLength(len);\r\n  var i = 0;\r\n  while (i < len) {\r\n    this.v[i] = pointPool.newElement();\r\n    this.o[i] = pointPool.newElement();\r\n    this.i[i] = pointPool.newElement();\r\n    i += 1;\r\n  }\r\n};\r\n\r\nShapePath.prototype.setLength = function (len) {\r\n  while (this._maxLength < len) {\r\n    this.doubleArrayLength();\r\n  }\r\n  this._length = len;\r\n};\r\n\r\nShapePath.prototype.doubleArrayLength = function () {\r\n  this.v = this.v.concat(createSizedArray(this._maxLength));\r\n  this.i = this.i.concat(createSizedArray(this._maxLength));\r\n  this.o = this.o.concat(createSizedArray(this._maxLength));\r\n  this._maxLength *= 2;\r\n};\r\n\r\nShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\r\n  var arr;\r\n  this._length = Math.max(this._length, pos + 1);\r\n  if (this._length >= this._maxLength) {\r\n    this.doubleArrayLength();\r\n  }\r\n  switch (type) {\r\n    case 'v':\r\n      arr = this.v;\r\n      break;\r\n    case 'i':\r\n      arr = this.i;\r\n      break;\r\n    case 'o':\r\n      arr = this.o;\r\n      break;\r\n    default:\r\n      arr = [];\r\n      break;\r\n  }\r\n  if (!arr[pos] || (arr[pos] && !replace)) {\r\n    arr[pos] = pointPool.newElement();\r\n  }\r\n  arr[pos][0] = x;\r\n  arr[pos][1] = y;\r\n};\r\n\r\nShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\r\n  this.setXYAt(vX, vY, 'v', pos, replace);\r\n  this.setXYAt(oX, oY, 'o', pos, replace);\r\n  this.setXYAt(iX, iY, 'i', pos, replace);\r\n};\r\n\r\nShapePath.prototype.reverse = function () {\r\n  var newPath = new ShapePath();\r\n  newPath.setPathData(this.c, this._length);\r\n  var vertices = this.v;\r\n  var outPoints = this.o;\r\n  var inPoints = this.i;\r\n  var init = 0;\r\n  if (this.c) {\r\n    newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n    init = 1;\r\n  }\r\n  var cnt = this._length - 1;\r\n  var len = this._length;\r\n\r\n  var i;\r\n  for (i = init; i < len; i += 1) {\r\n    newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n    cnt -= 1;\r\n  }\r\n  return newPath;\r\n};\r\n\r\n/* global extendPrototype, roundCorner, BezierFactory, shapePool, degToRads,\r\n  shapeCollectionPool, PropertyFactory, bmMin, DynamicPropertyContainer */\r\n/* exported ShapePropertyFactory */\r\n\r\nvar ShapePropertyFactory = (function () {\r\n  var initFrame = -999999;\r\n\r\n  function interpolateShape(frameNum, previousValue, caching) {\r\n    var iterationIndex = caching.lastIndex;\r\n    var keyPropS;\r\n    var keyPropE;\r\n    var isHold;\r\n    var j;\r\n    var k;\r\n    var jLen;\r\n    var kLen;\r\n    var perc;\r\n    var vertexValue;\r\n    var kf = this.keyframes;\r\n    if (frameNum < kf[0].t - this.offsetTime) {\r\n      keyPropS = kf[0].s[0];\r\n      isHold = true;\r\n      iterationIndex = 0;\r\n    } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\r\n      keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\r\n      /* if(kf[kf.length - 1].s){\r\n                keyPropS = kf[kf.length - 1].s[0];\r\n            }else{\r\n                keyPropS = kf[kf.length - 2].e[0];\r\n            } */\r\n      isHold = true;\r\n    } else {\r\n      var i = iterationIndex;\r\n      var len = kf.length - 1;\r\n      var flag = true;\r\n      var keyData;\r\n      var nextKeyData;\r\n      while (flag) {\r\n        keyData = kf[i];\r\n        nextKeyData = kf[i + 1];\r\n        if ((nextKeyData.t - this.offsetTime) > frameNum) {\r\n          break;\r\n        }\r\n        if (i < len - 1) {\r\n          i += 1;\r\n        } else {\r\n          flag = false;\r\n        }\r\n      }\r\n      isHold = keyData.h === 1;\r\n      iterationIndex = i;\r\n      if (!isHold) {\r\n        if (frameNum >= nextKeyData.t - this.offsetTime) {\r\n          perc = 1;\r\n        } else if (frameNum < keyData.t - this.offsetTime) {\r\n          perc = 0;\r\n        } else {\r\n          var fnc;\r\n          if (keyData.__fnct) {\r\n            fnc = keyData.__fnct;\r\n          } else {\r\n            fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\r\n            keyData.__fnct = fnc;\r\n          }\r\n          perc = fnc((frameNum - (keyData.t - this.offsetTime)) / ((nextKeyData.t - this.offsetTime) - (keyData.t - this.offsetTime)));\r\n        }\r\n        keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\r\n      }\r\n      keyPropS = keyData.s[0];\r\n    }\r\n    jLen = previousValue._length;\r\n    kLen = keyPropS.i[0].length;\r\n    caching.lastIndex = iterationIndex;\r\n\r\n    for (j = 0; j < jLen; j += 1) {\r\n      for (k = 0; k < kLen; k += 1) {\r\n        vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\r\n        previousValue.i[j][k] = vertexValue;\r\n        vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\r\n        previousValue.o[j][k] = vertexValue;\r\n        vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\r\n        previousValue.v[j][k] = vertexValue;\r\n      }\r\n    }\r\n  }\r\n\r\n  function interpolateShapeCurrentTime() {\r\n    var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n    var initTime = this.keyframes[0].t - this.offsetTime;\r\n    var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n    var lastFrame = this._caching.lastFrame;\r\n    if (!(lastFrame !== initFrame && ((lastFrame < initTime && frameNum < initTime) || (lastFrame > endTime && frameNum > endTime)))) {\r\n      /// /\r\n      this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n      this.interpolateShape(frameNum, this.pv, this._caching);\r\n      /// /\r\n    }\r\n    this._caching.lastFrame = frameNum;\r\n    return this.pv;\r\n  }\r\n\r\n  function resetShape() {\r\n    this.paths = this.localShapeCollection;\r\n  }\r\n\r\n  function shapesEqual(shape1, shape2) {\r\n    if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\r\n      return false;\r\n    }\r\n    var i;\r\n    var len = shape1._length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (shape1.v[i][0] !== shape2.v[i][0]\r\n            || shape1.v[i][1] !== shape2.v[i][1]\r\n            || shape1.o[i][0] !== shape2.o[i][0]\r\n            || shape1.o[i][1] !== shape2.o[i][1]\r\n            || shape1.i[i][0] !== shape2.i[i][0]\r\n            || shape1.i[i][1] !== shape2.i[i][1]) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function setVValue(newPath) {\r\n    if (!shapesEqual(this.v, newPath)) {\r\n      this.v = shapePool.clone(newPath);\r\n      this.localShapeCollection.releaseShapes();\r\n      this.localShapeCollection.addShape(this.v);\r\n      this._mdf = true;\r\n      this.paths = this.localShapeCollection;\r\n    }\r\n  }\r\n\r\n  function processEffectsSequence() {\r\n    if (this.elem.globalData.frameId === this.frameId) {\r\n      return;\r\n    } if (!this.effectsSequence.length) {\r\n      this._mdf = false;\r\n      return;\r\n    }\r\n    if (this.lock) {\r\n      this.setVValue(this.pv);\r\n      return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var finalValue;\r\n    if (this.kf) {\r\n      finalValue = this.pv;\r\n    } else if (this.data.ks) {\r\n      finalValue = this.data.ks.k;\r\n    } else {\r\n      finalValue = this.data.pt.k;\r\n    }\r\n    var i;\r\n    var len = this.effectsSequence.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      finalValue = this.effectsSequence[i](finalValue);\r\n    }\r\n    this.setVValue(finalValue);\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n  }\r\n\r\n  function ShapeProperty(elem, data, type) {\r\n    this.propType = 'shape';\r\n    this.comp = elem.comp;\r\n    this.container = elem;\r\n    this.elem = elem;\r\n    this.data = data;\r\n    this.k = false;\r\n    this.kf = false;\r\n    this._mdf = false;\r\n    var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n    this.v = shapePool.clone(pathData);\r\n    this.pv = shapePool.clone(this.v);\r\n    this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n    this.paths = this.localShapeCollection;\r\n    this.paths.addShape(this.v);\r\n    this.reset = resetShape;\r\n    this.effectsSequence = [];\r\n  }\r\n\r\n  function addEffect(effectFunction) {\r\n    this.effectsSequence.push(effectFunction);\r\n    this.container.addDynamicProperty(this);\r\n  }\r\n\r\n  ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n  ShapeProperty.prototype.getValue = processEffectsSequence;\r\n  ShapeProperty.prototype.setVValue = setVValue;\r\n  ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n  function KeyframedShapeProperty(elem, data, type) {\r\n    this.propType = 'shape';\r\n    this.comp = elem.comp;\r\n    this.elem = elem;\r\n    this.container = elem;\r\n    this.offsetTime = elem.data.st;\r\n    this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n    this.k = true;\r\n    this.kf = true;\r\n    var len = this.keyframes[0].s[0].i.length;\r\n    this.v = shapePool.newElement();\r\n    this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n    this.pv = shapePool.clone(this.v);\r\n    this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n    this.paths = this.localShapeCollection;\r\n    this.paths.addShape(this.v);\r\n    this.lastFrame = initFrame;\r\n    this.reset = resetShape;\r\n    this._caching = { lastFrame: initFrame, lastIndex: 0 };\r\n    this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n  }\r\n  KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n  KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n  KeyframedShapeProperty.prototype.setVValue = setVValue;\r\n  KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n  var EllShapeProperty = (function () {\r\n    var cPoint = roundCorner;\r\n\r\n    function EllShapePropertyFactory(elem, data) {\r\n      /* this.v = {\r\n                v: createSizedArray(4),\r\n                i: createSizedArray(4),\r\n                o: createSizedArray(4),\r\n                c: true\r\n            }; */\r\n      this.v = shapePool.newElement();\r\n      this.v.setPathData(true, 4);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.paths = this.localShapeCollection;\r\n      this.localShapeCollection.addShape(this.v);\r\n      this.d = data.d;\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.frameId = -1;\r\n      this.initDynamicPropertyContainer(elem);\r\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n      this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n      if (this.dynamicProperties.length) {\r\n        this.k = true;\r\n      } else {\r\n        this.k = false;\r\n        this.convertEllToPath();\r\n      }\r\n    }\r\n\r\n    EllShapePropertyFactory.prototype = {\r\n      reset: resetShape,\r\n      getValue: function () {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n          return;\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this.iterateDynamicProperties();\r\n\r\n        if (this._mdf) {\r\n          this.convertEllToPath();\r\n        }\r\n      },\r\n      convertEllToPath: function () {\r\n        var p0 = this.p.v[0];\r\n        var p1 = this.p.v[1];\r\n        var s0 = this.s.v[0] / 2;\r\n        var s1 = this.s.v[1] / 2;\r\n        var _cw = this.d !== 3;\r\n        var _v = this.v;\r\n        _v.v[0][0] = p0;\r\n        _v.v[0][1] = p1 - s1;\r\n        _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n        _v.v[1][1] = p1;\r\n        _v.v[2][0] = p0;\r\n        _v.v[2][1] = p1 + s1;\r\n        _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n        _v.v[3][1] = p1;\r\n        _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n        _v.i[0][1] = p1 - s1;\r\n        _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n        _v.i[1][1] = p1 - s1 * cPoint;\r\n        _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n        _v.i[2][1] = p1 + s1;\r\n        _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n        _v.i[3][1] = p1 + s1 * cPoint;\r\n        _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n        _v.o[0][1] = p1 - s1;\r\n        _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n        _v.o[1][1] = p1 + s1 * cPoint;\r\n        _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n        _v.o[2][1] = p1 + s1;\r\n        _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n        _v.o[3][1] = p1 - s1 * cPoint;\r\n      },\r\n    };\r\n\r\n    extendPrototype([DynamicPropertyContainer], EllShapePropertyFactory);\r\n\r\n    return EllShapePropertyFactory;\r\n  }());\r\n\r\n  var StarShapeProperty = (function () {\r\n    function StarShapePropertyFactory(elem, data) {\r\n      this.v = shapePool.newElement();\r\n      this.v.setPathData(true, 0);\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.data = data;\r\n      this.frameId = -1;\r\n      this.d = data.d;\r\n      this.initDynamicPropertyContainer(elem);\r\n      if (data.sy === 1) {\r\n        this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\r\n        this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\r\n        this.convertToPath = this.convertStarToPath;\r\n      } else {\r\n        this.convertToPath = this.convertPolygonToPath;\r\n      }\r\n      this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\r\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n      this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\r\n      this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\r\n      this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.localShapeCollection.addShape(this.v);\r\n      this.paths = this.localShapeCollection;\r\n      if (this.dynamicProperties.length) {\r\n        this.k = true;\r\n      } else {\r\n        this.k = false;\r\n        this.convertToPath();\r\n      }\r\n    }\r\n\r\n    StarShapePropertyFactory.prototype = {\r\n      reset: resetShape,\r\n      getValue: function () {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n          return;\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this.iterateDynamicProperties();\r\n        if (this._mdf) {\r\n          this.convertToPath();\r\n        }\r\n      },\r\n      convertStarToPath: function () {\r\n        var numPts = Math.floor(this.pt.v) * 2;\r\n        var angle = (Math.PI * 2) / numPts;\r\n        /* this.v.v.length = numPts;\r\n                this.v.i.length = numPts;\r\n                this.v.o.length = numPts; */\r\n        var longFlag = true;\r\n        var longRad = this.or.v;\r\n        var shortRad = this.ir.v;\r\n        var longRound = this.os.v;\r\n        var shortRound = this.is.v;\r\n        var longPerimSegment = (2 * Math.PI * longRad) / (numPts * 2);\r\n        var shortPerimSegment = (2 * Math.PI * shortRad) / (numPts * 2);\r\n        var i;\r\n        var rad;\r\n        var roundness;\r\n        var perimSegment;\r\n        var currentAng = -Math.PI / 2;\r\n        currentAng += this.r.v;\r\n        var dir = this.data.d === 3 ? -1 : 1;\r\n        this.v._length = 0;\r\n        for (i = 0; i < numPts; i += 1) {\r\n          rad = longFlag ? longRad : shortRad;\r\n          roundness = longFlag ? longRound : shortRound;\r\n          perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n          var x = rad * Math.cos(currentAng);\r\n          var y = rad * Math.sin(currentAng);\r\n          var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n          var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n          x += +this.p.v[0];\r\n          y += +this.p.v[1];\r\n          this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n\r\n          /* this.v.v[i] = [x,y];\r\n                    this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                    this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                    this.v._length = numPts; */\r\n          longFlag = !longFlag;\r\n          currentAng += angle * dir;\r\n        }\r\n      },\r\n      convertPolygonToPath: function () {\r\n        var numPts = Math.floor(this.pt.v);\r\n        var angle = (Math.PI * 2) / numPts;\r\n        var rad = this.or.v;\r\n        var roundness = this.os.v;\r\n        var perimSegment = (2 * Math.PI * rad) / (numPts * 4);\r\n        var i;\r\n        var currentAng = -Math.PI * 0.5;\r\n        var dir = this.data.d === 3 ? -1 : 1;\r\n        currentAng += this.r.v;\r\n        this.v._length = 0;\r\n        for (i = 0; i < numPts; i += 1) {\r\n          var x = rad * Math.cos(currentAng);\r\n          var y = rad * Math.sin(currentAng);\r\n          var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\r\n          var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\r\n          x += +this.p.v[0];\r\n          y += +this.p.v[1];\r\n          this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\r\n          currentAng += angle * dir;\r\n        }\r\n        this.paths.length = 0;\r\n        this.paths[0] = this.v;\r\n      },\r\n\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], StarShapePropertyFactory);\r\n\r\n    return StarShapePropertyFactory;\r\n  }());\r\n\r\n  var RectShapeProperty = (function () {\r\n    function RectShapePropertyFactory(elem, data) {\r\n      this.v = shapePool.newElement();\r\n      this.v.c = true;\r\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\r\n      this.localShapeCollection.addShape(this.v);\r\n      this.paths = this.localShapeCollection;\r\n      this.elem = elem;\r\n      this.comp = elem.comp;\r\n      this.frameId = -1;\r\n      this.d = data.d;\r\n      this.initDynamicPropertyContainer(elem);\r\n      this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\r\n      this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\r\n      this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\r\n      if (this.dynamicProperties.length) {\r\n        this.k = true;\r\n      } else {\r\n        this.k = false;\r\n        this.convertRectToPath();\r\n      }\r\n    }\r\n\r\n    RectShapePropertyFactory.prototype = {\r\n      convertRectToPath: function () {\r\n        var p0 = this.p.v[0];\r\n        var p1 = this.p.v[1];\r\n        var v0 = this.s.v[0] / 2;\r\n        var v1 = this.s.v[1] / 2;\r\n        var round = bmMin(v0, v1, this.r.v);\r\n        var cPoint = round * (1 - roundCorner);\r\n        this.v._length = 0;\r\n\r\n        if (this.d === 2 || this.d === 1) {\r\n          this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\r\n          this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\r\n          if (round !== 0) {\r\n            this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\r\n            this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\r\n            this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\r\n            this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\r\n          } else {\r\n            this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\r\n            this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\r\n          }\r\n        } else {\r\n          this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\r\n          if (round !== 0) {\r\n            this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\r\n            this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\r\n            this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\r\n            this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\r\n            this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\r\n            this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\r\n          } else {\r\n            this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\r\n            this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\r\n            this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\r\n          }\r\n        }\r\n      },\r\n      getValue: function () {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n          return;\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n        this.iterateDynamicProperties();\r\n        if (this._mdf) {\r\n          this.convertRectToPath();\r\n        }\r\n      },\r\n      reset: resetShape,\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], RectShapePropertyFactory);\r\n\r\n    return RectShapePropertyFactory;\r\n  }());\r\n\r\n  function getShapeProp(elem, data, type) {\r\n    var prop;\r\n    if (type === 3 || type === 4) {\r\n      var dataProp = type === 3 ? data.pt : data.ks;\r\n      var keys = dataProp.k;\r\n      if (keys.length) {\r\n        prop = new KeyframedShapeProperty(elem, data, type);\r\n      } else {\r\n        prop = new ShapeProperty(elem, data, type);\r\n      }\r\n    } else if (type === 5) {\r\n      prop = new RectShapeProperty(elem, data);\r\n    } else if (type === 6) {\r\n      prop = new EllShapeProperty(elem, data);\r\n    } else if (type === 7) {\r\n      prop = new StarShapeProperty(elem, data);\r\n    }\r\n    if (prop.k) {\r\n      elem.addDynamicProperty(prop);\r\n    }\r\n    return prop;\r\n  }\r\n\r\n  function getConstructorFunction() {\r\n    return ShapeProperty;\r\n  }\r\n\r\n  function getKeyframedConstructorFunction() {\r\n    return KeyframedShapeProperty;\r\n  }\r\n\r\n  var ob = {};\r\n  ob.getShapeProp = getShapeProp;\r\n  ob.getConstructorFunction = getConstructorFunction;\r\n  ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n  return ob;\r\n}());\r\n\r\n/* global shapeCollectionPool, initialDefaultFrame, extendPrototype, DynamicPropertyContainer */\r\n/* exported ShapeModifiers */\r\n\r\nvar ShapeModifiers = (function () {\r\n  var ob = {};\r\n  var modifiers = {};\r\n  ob.registerModifier = registerModifier;\r\n  ob.getModifier = getModifier;\r\n\r\n  function registerModifier(nm, factory) {\r\n    if (!modifiers[nm]) {\r\n      modifiers[nm] = factory;\r\n    }\r\n  }\r\n\r\n  function getModifier(nm, elem, data) {\r\n    return new modifiers[nm](elem, data);\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\nfunction ShapeModifier() {}\r\nShapeModifier.prototype.initModifierProperties = function () {};\r\nShapeModifier.prototype.addShapeToModifier = function () {};\r\nShapeModifier.prototype.addShape = function (data) {\r\n  if (!this.closed) {\r\n    // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\r\n    data.sh.container.addDynamicProperty(data.sh);\r\n    var shapeData = { shape: data.sh, data: data, localShapeCollection: shapeCollectionPool.newShapeCollection() };\r\n    this.shapes.push(shapeData);\r\n    this.addShapeToModifier(shapeData);\r\n    if (this._isAnimated) {\r\n      data.setAsAnimated();\r\n    }\r\n  }\r\n};\r\nShapeModifier.prototype.init = function (elem, data) {\r\n  this.shapes = [];\r\n  this.elem = elem;\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.initModifierProperties(elem, data);\r\n  this.frameId = initialDefaultFrame;\r\n  this.closed = false;\r\n  this.k = false;\r\n  if (this.dynamicProperties.length) {\r\n    this.k = true;\r\n  } else {\r\n    this.getValue(true);\r\n  }\r\n};\r\nShapeModifier.prototype.processKeys = function () {\r\n  if (this.elem.globalData.frameId === this.frameId) {\r\n    return;\r\n  }\r\n  this.frameId = this.elem.globalData.frameId;\r\n  this.iterateDynamicProperties();\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], ShapeModifier);\r\n\r\n/* global extendPrototype, ShapeModifier, PropertyFactory, segmentsLengthPool, bez, shapePool, ShapeModifiers */\r\n\r\nfunction TrimModifier() {\r\n}\r\nextendPrototype([ShapeModifier], TrimModifier);\r\nTrimModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n  this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n  this.sValue = 0;\r\n  this.eValue = 0;\r\n  this.getValue = this.processKeys;\r\n  this.m = data.m;\r\n  this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\r\n};\r\n\r\nTrimModifier.prototype.addShapeToModifier = function (shapeData) {\r\n  shapeData.pathsData = [];\r\n};\r\n\r\nTrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\r\n  var segments = [];\r\n  if (e <= 1) {\r\n    segments.push({\r\n      s: s,\r\n      e: e,\r\n    });\r\n  } else if (s >= 1) {\r\n    segments.push({\r\n      s: s - 1,\r\n      e: e - 1,\r\n    });\r\n  } else {\r\n    segments.push({\r\n      s: s,\r\n      e: 1,\r\n    });\r\n    segments.push({\r\n      s: 0,\r\n      e: e - 1,\r\n    });\r\n  }\r\n  var shapeSegments = [];\r\n  var i;\r\n  var len = segments.length;\r\n  var segmentOb;\r\n  for (i = 0; i < len; i += 1) {\r\n    segmentOb = segments[i];\r\n    if (!(segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength)) {\r\n      var shapeS;\r\n      var shapeE;\r\n      if (segmentOb.s * totalModifierLength <= addedLength) {\r\n        shapeS = 0;\r\n      } else {\r\n        shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n      }\r\n      if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n        shapeE = 1;\r\n      } else {\r\n        shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\r\n      }\r\n      shapeSegments.push([shapeS, shapeE]);\r\n    }\r\n  }\r\n  if (!shapeSegments.length) {\r\n    shapeSegments.push([0, 0]);\r\n  }\r\n  return shapeSegments;\r\n};\r\n\r\nTrimModifier.prototype.releasePathsData = function (pathsData) {\r\n  var i;\r\n  var len = pathsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    segmentsLengthPool.release(pathsData[i]);\r\n  }\r\n  pathsData.length = 0;\r\n  return pathsData;\r\n};\r\n\r\nTrimModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var s;\r\n  var e;\r\n  if (this._mdf || _isFirstFrame) {\r\n    var o = (this.o.v % 360) / 360;\r\n    if (o < 0) {\r\n      o += 1;\r\n    }\r\n    if (this.s.v > 1) {\r\n      s = 1 + o;\r\n    } else if (this.s.v < 0) {\r\n      s = 0 + o;\r\n    } else {\r\n      s = this.s.v + o;\r\n    }\r\n    if (this.e.v > 1) {\r\n      e = 1 + o;\r\n    } else if (this.e.v < 0) {\r\n      e = 0 + o;\r\n    } else {\r\n      e = this.e.v + o;\r\n    }\r\n\r\n    if (s > e) {\r\n      var _s = s;\r\n      s = e;\r\n      e = _s;\r\n    }\r\n    s = Math.round(s * 10000) * 0.0001;\r\n    e = Math.round(e * 10000) * 0.0001;\r\n    this.sValue = s;\r\n    this.eValue = e;\r\n  } else {\r\n    s = this.sValue;\r\n    e = this.eValue;\r\n  }\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var pathsData;\r\n  var pathData;\r\n  var totalShapeLength;\r\n  var totalModifierLength = 0;\r\n\r\n  if (e === s) {\r\n    for (i = 0; i < len; i += 1) {\r\n      this.shapes[i].localShapeCollection.releaseShapes();\r\n      this.shapes[i].shape._mdf = true;\r\n      this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n      if (this._mdf) {\r\n        this.shapes[i].pathsData.length = 0;\r\n      }\r\n    }\r\n  } else if (!((e === 1 && s === 0) || (e === 0 && s === 1))) {\r\n    var segments = [];\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n      if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n        shapeData.shape.paths = shapeData.localShapeCollection;\r\n      } else {\r\n        shapePaths = shapeData.shape.paths;\r\n        jLen = shapePaths._length;\r\n        totalShapeLength = 0;\r\n        if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n          totalShapeLength = shapeData.totalShapeLength;\r\n        } else {\r\n          pathsData = this.releasePathsData(shapeData.pathsData);\r\n          for (j = 0; j < jLen; j += 1) {\r\n            pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n            pathsData.push(pathData);\r\n            totalShapeLength += pathData.totalLength;\r\n          }\r\n          shapeData.totalShapeLength = totalShapeLength;\r\n          shapeData.pathsData = pathsData;\r\n        }\r\n\r\n        totalModifierLength += totalShapeLength;\r\n        shapeData.shape._mdf = true;\r\n      }\r\n    }\r\n    var shapeS = s;\r\n    var shapeE = e;\r\n    var addedLength = 0;\r\n    var edges;\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      shapeData = this.shapes[i];\r\n      if (shapeData.shape._mdf) {\r\n        localShapeCollection = shapeData.localShapeCollection;\r\n        localShapeCollection.releaseShapes();\r\n        // if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n        if (this.m === 2 && len > 1) {\r\n          edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n          addedLength += shapeData.totalShapeLength;\r\n        } else {\r\n          edges = [[shapeS, shapeE]];\r\n        }\r\n        jLen = edges.length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          shapeS = edges[j][0];\r\n          shapeE = edges[j][1];\r\n          segments.length = 0;\r\n          if (shapeE <= 1) {\r\n            segments.push({\r\n              s: shapeData.totalShapeLength * shapeS,\r\n              e: shapeData.totalShapeLength * shapeE,\r\n            });\r\n          } else if (shapeS >= 1) {\r\n            segments.push({\r\n              s: shapeData.totalShapeLength * (shapeS - 1),\r\n              e: shapeData.totalShapeLength * (shapeE - 1),\r\n            });\r\n          } else {\r\n            segments.push({\r\n              s: shapeData.totalShapeLength * shapeS,\r\n              e: shapeData.totalShapeLength,\r\n            });\r\n            segments.push({\r\n              s: 0,\r\n              e: shapeData.totalShapeLength * (shapeE - 1),\r\n            });\r\n          }\r\n          var newShapesData = this.addShapes(shapeData, segments[0]);\r\n          if (segments[0].s !== segments[0].e) {\r\n            if (segments.length > 1) {\r\n              var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\r\n              if (lastShapeInCollection.c) {\r\n                var lastShape = newShapesData.pop();\r\n                this.addPaths(newShapesData, localShapeCollection);\r\n                newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n              } else {\r\n                this.addPaths(newShapesData, localShapeCollection);\r\n                newShapesData = this.addShapes(shapeData, segments[1]);\r\n              }\r\n            }\r\n            this.addPaths(newShapesData, localShapeCollection);\r\n          }\r\n        }\r\n        shapeData.shape.paths = localShapeCollection;\r\n      }\r\n    }\r\n  } else if (this._mdf) {\r\n    for (i = 0; i < len; i += 1) {\r\n      // Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\r\n      // Don't remove this even if it's losing cached info.\r\n      this.shapes[i].pathsData.length = 0;\r\n      this.shapes[i].shape._mdf = true;\r\n    }\r\n  }\r\n};\r\n\r\nTrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\r\n  var i;\r\n  var len = newPaths.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    localShapeCollection.addShape(newPaths[i]);\r\n  }\r\n};\r\n\r\nTrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n  shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n  shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n  if (newShape) {\r\n    shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n  }\r\n  shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\r\n  shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n  shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n  if (newShape) {\r\n    shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n  }\r\n  shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\r\n  var pathsData = shapeData.pathsData;\r\n  var shapePaths = shapeData.shape.paths.shapes;\r\n  var i;\r\n  var len = shapeData.shape.paths._length;\r\n  var j;\r\n  var jLen;\r\n  var addedLength = 0;\r\n  var currentLengthData;\r\n  var segmentCount;\r\n  var lengths;\r\n  var segment;\r\n  var shapes = [];\r\n  var initPos;\r\n  var newShape = true;\r\n  if (!shapePath) {\r\n    shapePath = shapePool.newElement();\r\n    segmentCount = 0;\r\n    initPos = 0;\r\n  } else {\r\n    segmentCount = shapePath._length;\r\n    initPos = shapePath._length;\r\n  }\r\n  shapes.push(shapePath);\r\n  for (i = 0; i < len; i += 1) {\r\n    lengths = pathsData[i].lengths;\r\n    shapePath.c = shapePaths[i].c;\r\n    jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n    for (j = 1; j < jLen; j += 1) {\r\n      currentLengthData = lengths[j - 1];\r\n      if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n        addedLength += currentLengthData.addedLength;\r\n        shapePath.c = false;\r\n      } else if (addedLength > shapeSegment.e) {\r\n        shapePath.c = false;\r\n        break;\r\n      } else {\r\n        if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n          this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n        } else {\r\n          segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\r\n          this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n          // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n          shapePath.c = false;\r\n        }\r\n        addedLength += currentLengthData.addedLength;\r\n        segmentCount += 1;\r\n      }\r\n    }\r\n    if (shapePaths[i].c && lengths.length) {\r\n      currentLengthData = lengths[j - 1];\r\n      if (addedLength <= shapeSegment.e) {\r\n        var segmentLength = lengths[j - 1].addedLength;\r\n        if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n          this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n        } else {\r\n          segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n          this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n          // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n          newShape = false;\r\n          shapePath.c = false;\r\n        }\r\n      } else {\r\n        shapePath.c = false;\r\n      }\r\n      addedLength += currentLengthData.addedLength;\r\n      segmentCount += 1;\r\n    }\r\n    if (shapePath._length) {\r\n      shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n      shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\r\n    }\r\n    if (addedLength > shapeSegment.e) {\r\n      break;\r\n    }\r\n    if (i < len - 1) {\r\n      shapePath = shapePool.newElement();\r\n      newShape = true;\r\n      shapes.push(shapePath);\r\n      segmentCount = 0;\r\n    }\r\n  }\r\n  return shapes;\r\n};\r\n\r\nShapeModifiers.registerModifier('tm', TrimModifier);\r\n\r\n/* global extendPrototype, ShapeModifier, PropertyFactory, shapePool, roundCorner, ShapeModifiers */\r\n\r\nfunction RoundCornersModifier() {}\r\nextendPrototype([ShapeModifier], RoundCornersModifier);\r\nRoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\r\n  this._isAnimated = !!this.rd.effectsSequence.length;\r\n};\r\n\r\nRoundCornersModifier.prototype.processPath = function (path, round) {\r\n  var clonedPath = shapePool.newElement();\r\n  clonedPath.c = path.c;\r\n  var i;\r\n  var len = path._length;\r\n  var currentV;\r\n  var currentI;\r\n  var currentO;\r\n  var closerV;\r\n  var distance;\r\n  var newPosPerc;\r\n  var index = 0;\r\n  var vX;\r\n  var vY;\r\n  var oX;\r\n  var oY;\r\n  var iX;\r\n  var iY;\r\n  for (i = 0; i < len; i += 1) {\r\n    currentV = path.v[i];\r\n    currentO = path.o[i];\r\n    currentI = path.i[i];\r\n    if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\r\n      if ((i === 0 || i === len - 1) && !path.c) {\r\n        clonedPath.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\r\n        /* clonedPath.v[index] = currentV;\r\n                clonedPath.o[index] = currentO;\r\n                clonedPath.i[index] = currentI; */\r\n        index += 1;\r\n      } else {\r\n        if (i === 0) {\r\n          closerV = path.v[len - 1];\r\n        } else {\r\n          closerV = path.v[i - 1];\r\n        }\r\n        distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n        newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n        iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n        vX = iX;\r\n        iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\r\n        vY = iY;\r\n        oX = vX - (vX - currentV[0]) * roundCorner;\r\n        oY = vY - (vY - currentV[1]) * roundCorner;\r\n        clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n        index += 1;\r\n\r\n        if (i === len - 1) {\r\n          closerV = path.v[0];\r\n        } else {\r\n          closerV = path.v[i + 1];\r\n        }\r\n        distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\r\n        newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\r\n        oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\r\n        vX = oX;\r\n        oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\r\n        vY = oY;\r\n        iX = vX - (vX - currentV[0]) * roundCorner;\r\n        iY = vY - (vY - currentV[1]) * roundCorner;\r\n        clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\r\n        index += 1;\r\n      }\r\n    } else {\r\n      clonedPath.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\r\n      index += 1;\r\n    }\r\n  }\r\n  return clonedPath;\r\n};\r\n\r\nRoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var rd = this.rd.v;\r\n\r\n  if (rd !== 0) {\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      localShapeCollection = shapeData.localShapeCollection;\r\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n        localShapeCollection.releaseShapes();\r\n        shapeData.shape._mdf = true;\r\n        shapePaths = shapeData.shape.paths.shapes;\r\n        jLen = shapeData.shape.paths._length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\r\n        }\r\n      }\r\n      shapeData.shape.paths = shapeData.localShapeCollection;\r\n    }\r\n  }\r\n  if (!this.dynamicProperties.length) {\r\n    this._mdf = false;\r\n  }\r\n};\r\n\r\nShapeModifiers.registerModifier('rd', RoundCornersModifier);\r\n\r\n/* global extendPrototype, ShapeModifier, PropertyFactory, shapePool, ShapeModifiers */\r\n\r\nfunction PuckerAndBloatModifier() {}\r\nextendPrototype([ShapeModifier], PuckerAndBloatModifier);\r\nPuckerAndBloatModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\r\n  this._isAnimated = !!this.amount.effectsSequence.length;\r\n};\r\n\r\nPuckerAndBloatModifier.prototype.processPath = function (path, amount) {\r\n  var percent = amount / 100;\r\n  var centerPoint = [0, 0];\r\n  var pathLength = path._length;\r\n  var i = 0;\r\n  for (i = 0; i < pathLength; i += 1) {\r\n    centerPoint[0] += path.v[i][0];\r\n    centerPoint[1] += path.v[i][1];\r\n  }\r\n  centerPoint[0] /= pathLength;\r\n  centerPoint[1] /= pathLength;\r\n  var clonedPath = shapePool.newElement();\r\n  clonedPath.c = path.c;\r\n  var vX;\r\n  var vY;\r\n  var oX;\r\n  var oY;\r\n  var iX;\r\n  var iY;\r\n  for (i = 0; i < pathLength; i += 1) {\r\n    vX = path.v[i][0] + (centerPoint[0] - path.v[i][0]) * percent;\r\n    vY = path.v[i][1] + (centerPoint[1] - path.v[i][1]) * percent;\r\n    oX = path.o[i][0] + (centerPoint[0] - path.o[i][0]) * -percent;\r\n    oY = path.o[i][1] + (centerPoint[1] - path.o[i][1]) * -percent;\r\n    iX = path.i[i][0] + (centerPoint[0] - path.i[i][0]) * -percent;\r\n    iY = path.i[i][1] + (centerPoint[1] - path.i[i][1]) * -percent;\r\n    clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, i);\r\n  }\r\n  return clonedPath;\r\n};\r\n\r\nPuckerAndBloatModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var shapePaths;\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var j;\r\n  var jLen;\r\n  var amount = this.amount.v;\r\n\r\n  if (amount !== 0) {\r\n    var shapeData;\r\n    var localShapeCollection;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapeData = this.shapes[i];\r\n      localShapeCollection = shapeData.localShapeCollection;\r\n      if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\r\n        localShapeCollection.releaseShapes();\r\n        shapeData.shape._mdf = true;\r\n        shapePaths = shapeData.shape.paths.shapes;\r\n        jLen = shapeData.shape.paths._length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          localShapeCollection.addShape(this.processPath(shapePaths[j], amount));\r\n        }\r\n      }\r\n      shapeData.shape.paths = shapeData.localShapeCollection;\r\n    }\r\n  }\r\n  if (!this.dynamicProperties.length) {\r\n    this._mdf = false;\r\n  }\r\n};\r\nShapeModifiers.registerModifier('pb', PuckerAndBloatModifier);\r\n\r\n/* global extendPrototype, ShapeModifier, TransformPropertyFactory, PropertyFactory, Matrix, ShapeModifiers */\r\n\r\nfunction RepeaterModifier() {}\r\nextendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\nRepeaterModifier.prototype.initModifierProperties = function (elem, data) {\r\n  this.getValue = this.processKeys;\r\n  this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\r\n  this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\r\n  this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\r\n  this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\r\n  this.data = data;\r\n  if (!this.dynamicProperties.length) {\r\n    this.getValue(true);\r\n  }\r\n  this._isAnimated = !!this.dynamicProperties.length;\r\n  this.pMatrix = new Matrix();\r\n  this.rMatrix = new Matrix();\r\n  this.sMatrix = new Matrix();\r\n  this.tMatrix = new Matrix();\r\n  this.matrix = new Matrix();\r\n};\r\n\r\nRepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\r\n  var dir = inv ? -1 : 1;\r\n  var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n  var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n  pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n  rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n  rMatrix.rotate(-transform.r.v * dir * perc);\r\n  rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n  sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n  sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\r\n  sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n};\r\n\r\nRepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\r\n  this.elem = elem;\r\n  this.arr = arr;\r\n  this.pos = pos;\r\n  this.elemsData = elemsData;\r\n  this._currentCopies = 0;\r\n  this._elements = [];\r\n  this._groups = [];\r\n  this.frameId = -1;\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.initModifierProperties(elem, arr[pos]);\r\n  while (pos > 0) {\r\n    pos -= 1;\r\n    // this._elements.unshift(arr.splice(pos,1)[0]);\r\n    this._elements.unshift(arr[pos]);\r\n  }\r\n  if (this.dynamicProperties.length) {\r\n    this.k = true;\r\n  } else {\r\n    this.getValue(true);\r\n  }\r\n};\r\n\r\nRepeaterModifier.prototype.resetElements = function (elements) {\r\n  var i;\r\n  var len = elements.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    elements[i]._processed = false;\r\n    if (elements[i].ty === 'gr') {\r\n      this.resetElements(elements[i].it);\r\n    }\r\n  }\r\n};\r\n\r\nRepeaterModifier.prototype.cloneElements = function (elements) {\r\n  var newElements = JSON.parse(JSON.stringify(elements));\r\n  this.resetElements(newElements);\r\n  return newElements;\r\n};\r\n\r\nRepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\r\n  var i;\r\n  var len = elements.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    elements[i]._render = renderFlag;\r\n    if (elements[i].ty === 'gr') {\r\n      this.changeGroupRender(elements[i].it, renderFlag);\r\n    }\r\n  }\r\n};\r\n\r\nRepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\r\n  var items;\r\n  var itemsTransform;\r\n  var i;\r\n  var dir;\r\n  var cont;\r\n  var hasReloaded = false;\r\n  if (this._mdf || _isFirstFrame) {\r\n    var copies = Math.ceil(this.c.v);\r\n    if (this._groups.length < copies) {\r\n      while (this._groups.length < copies) {\r\n        var group = {\r\n          it: this.cloneElements(this._elements),\r\n          ty: 'gr',\r\n        };\r\n        group.it.push({\r\n          a: { a: 0, ix: 1, k: [0, 0] }, nm: 'Transform', o: { a: 0, ix: 7, k: 100 }, p: { a: 0, ix: 2, k: [0, 0] }, r: { a: 1, ix: 6, k: [{ s: 0, e: 0, t: 0 }, { s: 0, e: 0, t: 1 }] }, s: { a: 0, ix: 3, k: [100, 100] }, sa: { a: 0, ix: 5, k: 0 }, sk: { a: 0, ix: 4, k: 0 }, ty: 'tr',\r\n        });\r\n\r\n        this.arr.splice(0, 0, group);\r\n        this._groups.splice(0, 0, group);\r\n        this._currentCopies += 1;\r\n      }\r\n      this.elem.reloadShapes();\r\n      hasReloaded = true;\r\n    }\r\n    cont = 0;\r\n    var renderFlag;\r\n    for (i = 0; i <= this._groups.length - 1; i += 1) {\r\n      renderFlag = cont < copies;\r\n      this._groups[i]._render = renderFlag;\r\n      this.changeGroupRender(this._groups[i].it, renderFlag);\r\n      if (!renderFlag) {\r\n        var elems = this.elemsData[i].it;\r\n        var transformData = elems[elems.length - 1];\r\n        if (transformData.transform.op.v !== 0) {\r\n          transformData.transform.op._mdf = true;\r\n          transformData.transform.op.v = 0;\r\n        } else {\r\n          transformData.transform.op._mdf = false;\r\n        }\r\n      }\r\n      cont += 1;\r\n    }\r\n\r\n    this._currentCopies = copies;\r\n    /// /\r\n\r\n    var offset = this.o.v;\r\n    var offsetModulo = offset % 1;\r\n    var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n    var pProps = this.pMatrix.props;\r\n    var rProps = this.rMatrix.props;\r\n    var sProps = this.sMatrix.props;\r\n    this.pMatrix.reset();\r\n    this.rMatrix.reset();\r\n    this.sMatrix.reset();\r\n    this.tMatrix.reset();\r\n    this.matrix.reset();\r\n    var iteration = 0;\r\n\r\n    if (offset > 0) {\r\n      while (iteration < roundOffset) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n        iteration += 1;\r\n      }\r\n      if (offsetModulo) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n        iteration += offsetModulo;\r\n      }\r\n    } else if (offset < 0) {\r\n      while (iteration > roundOffset) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n        iteration -= 1;\r\n      }\r\n      if (offsetModulo) {\r\n        this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\r\n        iteration -= offsetModulo;\r\n      }\r\n    }\r\n    i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n    dir = this.data.m === 1 ? 1 : -1;\r\n    cont = this._currentCopies;\r\n    var j;\r\n    var jLen;\r\n    while (cont) {\r\n      items = this.elemsData[i].it;\r\n      itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n      jLen = itemsTransform.length;\r\n      items[items.length - 1].transform.mProps._mdf = true;\r\n      items[items.length - 1].transform.op._mdf = true;\r\n      items[items.length - 1].transform.op.v = this._currentCopies === 1\r\n        ? this.so.v\r\n        : this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\r\n\r\n      if (iteration !== 0) {\r\n        if ((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)) {\r\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n        }\r\n        this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\r\n        this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\r\n        this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\r\n\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsTransform[j] = this.matrix.props[j];\r\n        }\r\n        this.matrix.reset();\r\n      } else {\r\n        this.matrix.reset();\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsTransform[j] = this.matrix.props[j];\r\n        }\r\n      }\r\n      iteration += 1;\r\n      cont -= 1;\r\n      i += dir;\r\n    }\r\n  } else {\r\n    cont = this._currentCopies;\r\n    i = 0;\r\n    dir = 1;\r\n    while (cont) {\r\n      items = this.elemsData[i].it;\r\n      itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n      items[items.length - 1].transform.mProps._mdf = false;\r\n      items[items.length - 1].transform.op._mdf = false;\r\n      cont -= 1;\r\n      i += dir;\r\n    }\r\n  }\r\n  return hasReloaded;\r\n};\r\n\r\nRepeaterModifier.prototype.addShape = function () {};\r\n\r\nShapeModifiers.registerModifier('rp', RepeaterModifier);\r\n\r\n/* global createSizedArray, shapePool */\r\n\r\nfunction ShapeCollection() {\r\n  this._length = 0;\r\n  this._maxLength = 4;\r\n  this.shapes = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapeCollection.prototype.addShape = function (shapeData) {\r\n  if (this._length === this._maxLength) {\r\n    this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n    this._maxLength *= 2;\r\n  }\r\n  this.shapes[this._length] = shapeData;\r\n  this._length += 1;\r\n};\r\n\r\nShapeCollection.prototype.releaseShapes = function () {\r\n  var i;\r\n  for (i = 0; i < this._length; i += 1) {\r\n    shapePool.release(this.shapes[i]);\r\n  }\r\n  this._length = 0;\r\n};\r\n\r\n/* global createSizedArray, createTypedArray, PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\n\r\nfunction DashProperty(elem, data, renderer, container) {\r\n  this.elem = elem;\r\n  this.frameId = -1;\r\n  this.dataProps = createSizedArray(data.length);\r\n  this.renderer = renderer;\r\n  this.k = false;\r\n  this.dashStr = '';\r\n  this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\r\n  this.dashoffset = createTypedArray('float32', 1);\r\n  this.initDynamicPropertyContainer(container);\r\n  var i;\r\n  var len = data.length || 0;\r\n  var prop;\r\n  for (i = 0; i < len; i += 1) {\r\n    prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\r\n    this.k = prop.k || this.k;\r\n    this.dataProps[i] = { n: data[i].n, p: prop };\r\n  }\r\n  if (!this.k) {\r\n    this.getValue(true);\r\n  }\r\n  this._isAnimated = this.k;\r\n}\r\n\r\nDashProperty.prototype.getValue = function (forceRender) {\r\n  if (this.elem.globalData.frameId === this.frameId && !forceRender) {\r\n    return;\r\n  }\r\n  this.frameId = this.elem.globalData.frameId;\r\n  this.iterateDynamicProperties();\r\n  this._mdf = this._mdf || forceRender;\r\n  if (this._mdf) {\r\n    var i = 0;\r\n    var len = this.dataProps.length;\r\n    if (this.renderer === 'svg') {\r\n      this.dashStr = '';\r\n    }\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.dataProps[i].n !== 'o') {\r\n        if (this.renderer === 'svg') {\r\n          this.dashStr += ' ' + this.dataProps[i].p.v;\r\n        } else {\r\n          this.dashArray[i] = this.dataProps[i].p.v;\r\n        }\r\n      } else {\r\n        this.dashoffset[0] = this.dataProps[i].p.v;\r\n      }\r\n    }\r\n  }\r\n};\r\nextendPrototype([DynamicPropertyContainer], DashProperty);\r\n\r\n/* global createTypedArray, PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\nfunction GradientProperty(elem, data, container) {\r\n  this.data = data;\r\n  this.c = createTypedArray('uint8c', data.p * 4);\r\n  var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p * 4) : data.k.k.length - data.p * 4;\r\n  this.o = createTypedArray('float32', cLength);\r\n  this._cmdf = false;\r\n  this._omdf = false;\r\n  this._collapsable = this.checkCollapsable();\r\n  this._hasOpacity = cLength;\r\n  this.initDynamicPropertyContainer(container);\r\n  this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\r\n  this.k = this.prop.k;\r\n  this.getValue(true);\r\n}\r\n\r\nGradientProperty.prototype.comparePoints = function (values, points) {\r\n  var i = 0;\r\n  var len = this.o.length / 2;\r\n  var diff;\r\n  while (i < len) {\r\n    diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\r\n    if (diff > 0.01) {\r\n      return false;\r\n    }\r\n    i += 1;\r\n  }\r\n  return true;\r\n};\r\n\r\nGradientProperty.prototype.checkCollapsable = function () {\r\n  if (this.o.length / 2 !== this.c.length / 4) {\r\n    return false;\r\n  }\r\n  if (this.data.k.k[0].s) {\r\n    var i = 0;\r\n    var len = this.data.k.k.length;\r\n    while (i < len) {\r\n      if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n        return false;\r\n      }\r\n      i += 1;\r\n    }\r\n  } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\nGradientProperty.prototype.getValue = function (forceRender) {\r\n  this.prop.getValue();\r\n  this._mdf = false;\r\n  this._cmdf = false;\r\n  this._omdf = false;\r\n  if (this.prop._mdf || forceRender) {\r\n    var i;\r\n    var len = this.data.p * 4;\r\n    var mult;\r\n    var val;\r\n    for (i = 0; i < len; i += 1) {\r\n      mult = i % 4 === 0 ? 100 : 255;\r\n      val = Math.round(this.prop.v[i] * mult);\r\n      if (this.c[i] !== val) {\r\n        this.c[i] = val;\r\n        this._cmdf = !forceRender;\r\n      }\r\n    }\r\n    if (this.o.length) {\r\n      len = this.prop.v.length;\r\n      for (i = this.data.p * 4; i < len; i += 1) {\r\n        mult = i % 2 === 0 ? 100 : 1;\r\n        val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\r\n        if (this.o[i - this.data.p * 4] !== val) {\r\n          this.o[i - this.data.p * 4] = val;\r\n          this._omdf = !forceRender;\r\n        }\r\n      }\r\n    }\r\n    this._mdf = !forceRender;\r\n  }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], GradientProperty);\r\n\r\n/* exported buildShapeString */\r\n\r\nvar buildShapeString = function (pathNodes, length, closed, mat) {\r\n  if (length === 0) {\r\n    return '';\r\n  }\r\n  var _o = pathNodes.o;\r\n  var _i = pathNodes.i;\r\n  var _v = pathNodes.v;\r\n  var i;\r\n  var shapeString = ' M' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n  for (i = 1; i < length; i += 1) {\r\n    shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[i][0], _i[i][1]) + ' ' + mat.applyToPointStringified(_v[i][0], _v[i][1]);\r\n  }\r\n  if (closed && length) {\r\n    shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[0][0], _i[0][1]) + ' ' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n    shapeString += 'z';\r\n  }\r\n  return shapeString;\r\n};\r\n\r\n/* global Howl */\r\n/* exported audioControllerFactory */\r\n\r\nvar audioControllerFactory = (function () {\r\n  function AudioController(audioFactory) {\r\n    this.audios = [];\r\n    this.audioFactory = audioFactory;\r\n    this._volume = 1;\r\n    this._isMuted = false;\r\n  }\r\n\r\n  AudioController.prototype = {\r\n    addAudio: function (audio) {\r\n      this.audios.push(audio);\r\n    },\r\n    pause: function () {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].pause();\r\n      }\r\n    },\r\n    resume: function () {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].resume();\r\n      }\r\n    },\r\n    setRate: function (rateValue) {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].setRate(rateValue);\r\n      }\r\n    },\r\n    createAudio: function (assetPath) {\r\n      if (this.audioFactory) {\r\n        return this.audioFactory(assetPath);\r\n      } if (Howl) {\r\n        return new Howl({\r\n          src: [assetPath],\r\n        });\r\n      }\r\n      return {\r\n        isPlaying: false,\r\n        play: function () { this.isPlaying = true; },\r\n        seek: function () { this.isPlaying = false; },\r\n        playing: function () {},\r\n        rate: function () {},\r\n        setVolume: function () {},\r\n      };\r\n    },\r\n    setAudioFactory: function (audioFactory) {\r\n      this.audioFactory = audioFactory;\r\n    },\r\n    setVolume: function (value) {\r\n      this._volume = value;\r\n      this._updateVolume();\r\n    },\r\n    mute: function () {\r\n      this._isMuted = true;\r\n      this._updateVolume();\r\n    },\r\n    unmute: function () {\r\n      this._isMuted = false;\r\n      this._updateVolume();\r\n    },\r\n    getVolume: function () {\r\n      return this._volume;\r\n    },\r\n    _updateVolume: function () {\r\n      var i;\r\n      var len = this.audios.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this.audios[i].volume(this._volume * (this._isMuted ? 0 : 1));\r\n      }\r\n    },\r\n  };\r\n\r\n  return function () {\r\n    return new AudioController();\r\n  };\r\n}());\r\n\r\n/* global createTag, createNS, isSafari, assetLoader */\r\n/* exported ImagePreloader */\r\n\r\nvar ImagePreloader = (function () {\r\n  var proxyImage = (function () {\r\n    var canvas = createTag('canvas');\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    var ctx = canvas.getContext('2d');\r\n    ctx.fillStyle = 'rgba(0,0,0,0)';\r\n    ctx.fillRect(0, 0, 1, 1);\r\n    return canvas;\r\n  }());\r\n\r\n  function imageLoaded() {\r\n    this.loadedAssets += 1;\r\n    if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n      if (this.imagesLoadedCb) {\r\n        this.imagesLoadedCb(null);\r\n      }\r\n    }\r\n  }\r\n  function footageLoaded() {\r\n    this.loadedFootagesCount += 1;\r\n    if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\r\n      if (this.imagesLoadedCb) {\r\n        this.imagesLoadedCb(null);\r\n      }\r\n    }\r\n  }\r\n\r\n  function getAssetsPath(assetData, assetsPath, originalPath) {\r\n    var path = '';\r\n    if (assetData.e) {\r\n      path = assetData.p;\r\n    } else if (assetsPath) {\r\n      var imagePath = assetData.p;\r\n      if (imagePath.indexOf('images/') !== -1) {\r\n        imagePath = imagePath.split('/')[1];\r\n      }\r\n      path = assetsPath + imagePath;\r\n    } else {\r\n      path = originalPath;\r\n      path += assetData.u ? assetData.u : '';\r\n      path += assetData.p;\r\n    }\r\n    return path;\r\n  }\r\n\r\n  function testImageLoaded(img) {\r\n    var _count = 0;\r\n    var intervalId = setInterval(function () {\r\n      var box = img.getBBox();\r\n      if (box.width || _count > 500) {\r\n        this._imageLoaded();\r\n        clearInterval(intervalId);\r\n      }\r\n      _count += 1;\r\n    }.bind(this), 50);\r\n  }\r\n\r\n  function createImageData(assetData) {\r\n    var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n    var img = createNS('image');\r\n    if (isSafari) {\r\n      this.testImageLoaded(img);\r\n    } else {\r\n      img.addEventListener('load', this._imageLoaded, false);\r\n    }\r\n    img.addEventListener('error', function () {\r\n      ob.img = proxyImage;\r\n      this._imageLoaded();\r\n    }.bind(this), false);\r\n    img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\r\n    if (this._elementHelper.append) {\r\n      this._elementHelper.append(img);\r\n    } else {\r\n      this._elementHelper.appendChild(img);\r\n    }\r\n    var ob = {\r\n      img: img,\r\n      assetData: assetData,\r\n    };\r\n    return ob;\r\n  }\r\n\r\n  function createImgData(assetData) {\r\n    var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n    var img = createTag('img');\r\n    img.crossOrigin = 'anonymous';\r\n    img.addEventListener('load', this._imageLoaded, false);\r\n    img.addEventListener('error', function () {\r\n      ob.img = proxyImage;\r\n      this._imageLoaded();\r\n    }.bind(this), false);\r\n    img.src = path;\r\n    var ob = {\r\n      img: img,\r\n      assetData: assetData,\r\n    };\r\n    return ob;\r\n  }\r\n\r\n  function createFootageData(data) {\r\n    var ob = {\r\n      assetData: data,\r\n    };\r\n    var path = getAssetsPath(data, this.assetsPath, this.path);\r\n    assetLoader.load(path, function (footageData) {\r\n      ob.img = footageData;\r\n      this._footageLoaded();\r\n    }.bind(this), function () {\r\n      ob.img = {};\r\n      this._footageLoaded();\r\n    }.bind(this));\r\n    return ob;\r\n  }\r\n\r\n  function loadAssets(assets, cb) {\r\n    this.imagesLoadedCb = cb;\r\n    var i;\r\n    var len = assets.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!assets[i].layers) {\r\n        if (!assets[i].t) {\r\n          this.totalImages += 1;\r\n          this.images.push(this._createImageData(assets[i]));\r\n        } else if (assets[i].t === 3) {\r\n          this.totalFootages += 1;\r\n          this.images.push(this.createFootageData(assets[i]));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function setPath(path) {\r\n    this.path = path || '';\r\n  }\r\n\r\n  function setAssetsPath(path) {\r\n    this.assetsPath = path || '';\r\n  }\r\n\r\n  function getAsset(assetData) {\r\n    var i = 0;\r\n    var len = this.images.length;\r\n    while (i < len) {\r\n      if (this.images[i].assetData === assetData) {\r\n        return this.images[i].img;\r\n      }\r\n      i += 1;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function destroy() {\r\n    this.imagesLoadedCb = null;\r\n    this.images.length = 0;\r\n  }\r\n\r\n  function loadedImages() {\r\n    return this.totalImages === this.loadedAssets;\r\n  }\r\n\r\n  function loadedFootages() {\r\n    return this.totalFootages === this.loadedFootagesCount;\r\n  }\r\n\r\n  function setCacheType(type, elementHelper) {\r\n    if (type === 'svg') {\r\n      this._elementHelper = elementHelper;\r\n      this._createImageData = this.createImageData.bind(this);\r\n    } else {\r\n      this._createImageData = this.createImgData.bind(this);\r\n    }\r\n  }\r\n\r\n  function ImagePreloaderFactory() {\r\n    this._imageLoaded = imageLoaded.bind(this);\r\n    this._footageLoaded = footageLoaded.bind(this);\r\n    this.testImageLoaded = testImageLoaded.bind(this);\r\n    this.createFootageData = createFootageData.bind(this);\r\n    this.assetsPath = '';\r\n    this.path = '';\r\n    this.totalImages = 0;\r\n    this.totalFootages = 0;\r\n    this.loadedAssets = 0;\r\n    this.loadedFootagesCount = 0;\r\n    this.imagesLoadedCb = null;\r\n    this.images = [];\r\n  }\r\n\r\n  ImagePreloaderFactory.prototype = {\r\n    loadAssets: loadAssets,\r\n    setAssetsPath: setAssetsPath,\r\n    setPath: setPath,\r\n    loadedImages: loadedImages,\r\n    loadedFootages: loadedFootages,\r\n    destroy: destroy,\r\n    getAsset: getAsset,\r\n    createImgData: createImgData,\r\n    createImageData: createImageData,\r\n    imageLoaded: imageLoaded,\r\n    footageLoaded: footageLoaded,\r\n    setCacheType: setCacheType,\r\n  };\r\n\r\n  return ImagePreloaderFactory;\r\n}());\r\n\r\n/* exported featureSupport */\r\n\r\nvar featureSupport = (function () {\r\n  var ob = {\r\n    maskType: true,\r\n  };\r\n  if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n    ob.maskType = false;\r\n  }\r\n  return ob;\r\n}());\r\n\r\n/* global createNS */\r\n/* exported filtersFactory */\r\n\r\nvar filtersFactory = (function () {\r\n  var ob = {};\r\n  ob.createFilter = createFilter;\r\n  ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n  function createFilter(filId, skipCoordinates) {\r\n    var fil = createNS('filter');\r\n    fil.setAttribute('id', filId);\r\n    if (skipCoordinates !== true) {\r\n      fil.setAttribute('filterUnits', 'objectBoundingBox');\r\n      fil.setAttribute('x', '0%');\r\n      fil.setAttribute('y', '0%');\r\n      fil.setAttribute('width', '100%');\r\n      fil.setAttribute('height', '100%');\r\n    }\r\n    return fil;\r\n  }\r\n\r\n  function createAlphaToLuminanceFilter() {\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type', 'matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n    feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n    return feColorMatrix;\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\n/* exported assetLoader */\r\n\r\nvar assetLoader = (function () {\r\n  function formatResponse(xhr) {\r\n    if (xhr.response && typeof xhr.response === 'object') {\r\n      return xhr.response;\r\n    } if (xhr.response && typeof xhr.response === 'string') {\r\n      return JSON.parse(xhr.response);\r\n    } if (xhr.responseText) {\r\n      return JSON.parse(xhr.responseText);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function loadAsset(path, callback, errorCallback) {\r\n    var response;\r\n    var xhr = new XMLHttpRequest();\r\n    // set responseType after calling open or IE will break.\r\n    try {\r\n      // This crashes on Android WebView prior to KitKat\r\n      xhr.responseType = 'json';\r\n    } catch (err) {} // eslint-disable-line no-empty\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState === 4) {\r\n        if (xhr.status === 200) {\r\n          response = formatResponse(xhr);\r\n          callback(response);\r\n        } else {\r\n          try {\r\n            response = formatResponse(xhr);\r\n            callback(response);\r\n          } catch (err) {\r\n            if (errorCallback) {\r\n              errorCallback(err);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n    xhr.open('GET', path, true);\r\n    xhr.send();\r\n  }\r\n  return {\r\n    load: loadAsset,\r\n  };\r\n}());\r\n\r\n/* global createSizedArray, PropertyFactory, TextAnimatorDataProperty, bez, addHueToRGB,\r\n  addSaturationToRGB, addBrightnessToRGB, LetterProps, Matrix, extendPrototype, DynamicPropertyContainer */\r\n\r\nfunction TextAnimatorProperty(textData, renderType, elem) {\r\n  this._isFirstFrame = true;\r\n  this._hasMaskedPath = false;\r\n  this._frameId = -1;\r\n  this._textData = textData;\r\n  this._renderType = renderType;\r\n  this._elem = elem;\r\n  this._animatorsData = createSizedArray(this._textData.a.length);\r\n  this._pathData = {};\r\n  this._moreOptions = {\r\n    alignment: {},\r\n  };\r\n  this.renderedLetters = [];\r\n  this.lettersChangedFlag = false;\r\n  this.initDynamicPropertyContainer(elem);\r\n}\r\n\r\nTextAnimatorProperty.prototype.searchProperties = function () {\r\n  var i;\r\n  var len = this._textData.a.length;\r\n  var animatorProps;\r\n  var getProp = PropertyFactory.getProp;\r\n  for (i = 0; i < len; i += 1) {\r\n    animatorProps = this._textData.a[i];\r\n    this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n  }\r\n  if (this._textData.p && 'm' in this._textData.p) {\r\n    this._pathData = {\r\n      f: getProp(this._elem, this._textData.p.f, 0, 0, this),\r\n      l: getProp(this._elem, this._textData.p.l, 0, 0, this),\r\n      r: this._textData.p.r,\r\n      m: this._elem.maskManager.getMaskProperty(this._textData.p.m),\r\n    };\r\n    this._hasMaskedPath = true;\r\n  } else {\r\n    this._hasMaskedPath = false;\r\n  }\r\n  this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\r\n};\r\n\r\nTextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\r\n  this.lettersChangedFlag = lettersChangedFlag;\r\n  if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n    return;\r\n  }\r\n  this._isFirstFrame = false;\r\n  var alignment = this._moreOptions.alignment.v;\r\n  var animators = this._animatorsData;\r\n  var textData = this._textData;\r\n  var matrixHelper = this.mHelper;\r\n  var renderType = this._renderType;\r\n  var renderedLettersCount = this.renderedLetters.length;\r\n  var xPos;\r\n  var yPos;\r\n  var i;\r\n  var len;\r\n  var letters = documentData.l;\r\n  var pathInfo;\r\n  var currentLength;\r\n  var currentPoint;\r\n  var segmentLength;\r\n  var flag;\r\n  var pointInd;\r\n  var segmentInd;\r\n  var prevPoint;\r\n  var points;\r\n  var segments;\r\n  var partialLength;\r\n  var totalLength;\r\n  var perc;\r\n  var tanAngle;\r\n  var mask;\r\n  if (this._hasMaskedPath) {\r\n    mask = this._pathData.m;\r\n    if (!this._pathData.n || this._pathData._mdf) {\r\n      var paths = mask.v;\r\n      if (this._pathData.r) {\r\n        paths = paths.reverse();\r\n      }\r\n      // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n      pathInfo = {\r\n        tLength: 0,\r\n        segments: [],\r\n      };\r\n      len = paths._length - 1;\r\n      var bezierData;\r\n      totalLength = 0;\r\n      for (i = 0; i < len; i += 1) {\r\n        bezierData = bez.buildBezierData(paths.v[i],\r\n          paths.v[i + 1],\r\n          [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n          [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\r\n        pathInfo.tLength += bezierData.segmentLength;\r\n        pathInfo.segments.push(bezierData);\r\n        totalLength += bezierData.segmentLength;\r\n      }\r\n      i = len;\r\n      if (mask.v.c) {\r\n        bezierData = bez.buildBezierData(paths.v[i],\r\n          paths.v[0],\r\n          [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]],\r\n          [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\r\n        pathInfo.tLength += bezierData.segmentLength;\r\n        pathInfo.segments.push(bezierData);\r\n        totalLength += bezierData.segmentLength;\r\n      }\r\n      this._pathData.pi = pathInfo;\r\n    }\r\n    pathInfo = this._pathData.pi;\r\n\r\n    currentLength = this._pathData.f.v;\r\n    segmentInd = 0;\r\n    pointInd = 1;\r\n    segmentLength = 0;\r\n    flag = true;\r\n    segments = pathInfo.segments;\r\n    if (currentLength < 0 && mask.v.c) {\r\n      if (pathInfo.tLength < Math.abs(currentLength)) {\r\n        currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n      }\r\n      segmentInd = segments.length - 1;\r\n      points = segments[segmentInd].points;\r\n      pointInd = points.length - 1;\r\n      while (currentLength < 0) {\r\n        currentLength += points[pointInd].partialLength;\r\n        pointInd -= 1;\r\n        if (pointInd < 0) {\r\n          segmentInd -= 1;\r\n          points = segments[segmentInd].points;\r\n          pointInd = points.length - 1;\r\n        }\r\n      }\r\n    }\r\n    points = segments[segmentInd].points;\r\n    prevPoint = points[pointInd - 1];\r\n    currentPoint = points[pointInd];\r\n    partialLength = currentPoint.partialLength;\r\n  }\r\n\r\n  len = letters.length;\r\n  xPos = 0;\r\n  yPos = 0;\r\n  var yOff = documentData.finalSize * 1.2 * 0.714;\r\n  var firstLine = true;\r\n  var animatorProps;\r\n  var animatorSelector;\r\n  var j;\r\n  var jLen;\r\n  var letterValue;\r\n\r\n  jLen = animators.length;\r\n\r\n  var mult;\r\n  var ind = -1;\r\n  var offf;\r\n  var xPathPos;\r\n  var yPathPos;\r\n  var initPathPos = currentLength;\r\n  var initSegmentInd = segmentInd;\r\n  var initPointInd = pointInd;\r\n  var currentLine = -1;\r\n  var elemOpacity;\r\n  var sc;\r\n  var sw;\r\n  var fc;\r\n  var k;\r\n  var letterSw;\r\n  var letterSc;\r\n  var letterFc;\r\n  var letterM = '';\r\n  var letterP = this.defaultPropsArray;\r\n  var letterO;\r\n\r\n  //\r\n  if (documentData.j === 2 || documentData.j === 1) {\r\n    var animatorJustifyOffset = 0;\r\n    var animatorFirstCharOffset = 0;\r\n    var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n    var lastIndex = 0;\r\n    var isNewLine = true;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (letters[i].n) {\r\n        if (animatorJustifyOffset) {\r\n          animatorJustifyOffset += animatorFirstCharOffset;\r\n        }\r\n        while (lastIndex < i) {\r\n          letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n          lastIndex += 1;\r\n        }\r\n        animatorJustifyOffset = 0;\r\n        isNewLine = true;\r\n      } else {\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n          if (animatorProps.t.propType) {\r\n            if (isNewLine && documentData.j === 2) {\r\n              animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n            }\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n            if (mult.length) {\r\n              animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\r\n            } else {\r\n              animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\r\n            }\r\n          }\r\n        }\r\n        isNewLine = false;\r\n      }\r\n    }\r\n    if (animatorJustifyOffset) {\r\n      animatorJustifyOffset += animatorFirstCharOffset;\r\n    }\r\n    while (lastIndex < i) {\r\n      letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n      lastIndex += 1;\r\n    }\r\n  }\r\n  //\r\n\r\n  for (i = 0; i < len; i += 1) {\r\n    matrixHelper.reset();\r\n    elemOpacity = 1;\r\n    if (letters[i].n) {\r\n      xPos = 0;\r\n      yPos += documentData.yOffset;\r\n      yPos += firstLine ? 1 : 0;\r\n      currentLength = initPathPos;\r\n      firstLine = false;\r\n      if (this._hasMaskedPath) {\r\n        segmentInd = initSegmentInd;\r\n        pointInd = initPointInd;\r\n        points = segments[segmentInd].points;\r\n        prevPoint = points[pointInd - 1];\r\n        currentPoint = points[pointInd];\r\n        partialLength = currentPoint.partialLength;\r\n        segmentLength = 0;\r\n      }\r\n      letterM = '';\r\n      letterFc = '';\r\n      letterSw = '';\r\n      letterO = '';\r\n      letterP = this.defaultPropsArray;\r\n    } else {\r\n      if (this._hasMaskedPath) {\r\n        if (currentLine !== letters[i].line) {\r\n          switch (documentData.j) {\r\n            case 1:\r\n              currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n              break;\r\n            case 2:\r\n              currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n          currentLine = letters[i].line;\r\n        }\r\n        if (ind !== letters[i].ind) {\r\n          if (letters[ind]) {\r\n            currentLength += letters[ind].extra;\r\n          }\r\n          currentLength += letters[i].an / 2;\r\n          ind = letters[i].ind;\r\n        }\r\n        currentLength += (alignment[0] * letters[i].an) * 0.005;\r\n        var animatorOffset = 0;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          animatorProps = animators[j].a;\r\n          if (animatorProps.p.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n            if (mult.length) {\r\n              animatorOffset += animatorProps.p.v[0] * mult[0];\r\n            } else {\r\n              animatorOffset += animatorProps.p.v[0] * mult;\r\n            }\r\n          }\r\n          if (animatorProps.a.propType) {\r\n            animatorSelector = animators[j].s;\r\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n            if (mult.length) {\r\n              animatorOffset += animatorProps.a.v[0] * mult[0];\r\n            } else {\r\n              animatorOffset += animatorProps.a.v[0] * mult;\r\n            }\r\n          }\r\n        }\r\n        flag = true;\r\n        while (flag) {\r\n          if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n            perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n            xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n            yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n            matrixHelper.translate((-alignment[0] * letters[i].an) * 0.005, -(alignment[1] * yOff) * 0.01);\r\n            flag = false;\r\n          } else if (points) {\r\n            segmentLength += currentPoint.partialLength;\r\n            pointInd += 1;\r\n            if (pointInd >= points.length) {\r\n              pointInd = 0;\r\n              segmentInd += 1;\r\n              if (!segments[segmentInd]) {\r\n                if (mask.v.c) {\r\n                  pointInd = 0;\r\n                  segmentInd = 0;\r\n                  points = segments[segmentInd].points;\r\n                } else {\r\n                  segmentLength -= currentPoint.partialLength;\r\n                  points = null;\r\n                }\r\n              } else {\r\n                points = segments[segmentInd].points;\r\n              }\r\n            }\r\n            if (points) {\r\n              prevPoint = currentPoint;\r\n              currentPoint = points[pointInd];\r\n              partialLength = currentPoint.partialLength;\r\n            }\r\n          }\r\n        }\r\n        offf = letters[i].an / 2 - letters[i].add;\r\n        matrixHelper.translate(-offf, 0, 0);\r\n      } else {\r\n        offf = letters[i].an / 2 - letters[i].add;\r\n        matrixHelper.translate(-offf, 0, 0);\r\n\r\n        // Grouping alignment\r\n        matrixHelper.translate((-alignment[0] * letters[i].an) * 0.005, (-alignment[1] * yOff) * 0.01, 0);\r\n      }\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        if (animatorProps.t.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n          // This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n          if (xPos !== 0 || documentData.j !== 0) {\r\n            if (this._hasMaskedPath) {\r\n              if (mult.length) {\r\n                currentLength += animatorProps.t.v * mult[0];\r\n              } else {\r\n                currentLength += animatorProps.t.v * mult;\r\n              }\r\n            } else if (mult.length) {\r\n              xPos += animatorProps.t.v * mult[0];\r\n            } else {\r\n              xPos += animatorProps.t.v * mult;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (documentData.strokeWidthAnim) {\r\n        sw = documentData.sw || 0;\r\n      }\r\n      if (documentData.strokeColorAnim) {\r\n        if (documentData.sc) {\r\n          sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n        } else {\r\n          sc = [0, 0, 0];\r\n        }\r\n      }\r\n      if (documentData.fillColorAnim && documentData.fc) {\r\n        fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n      }\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        if (animatorProps.a.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n\r\n          if (mult.length) {\r\n            matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\r\n          } else {\r\n            matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\r\n          }\r\n        }\r\n      }\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        if (animatorProps.s.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n          if (mult.length) {\r\n            matrixHelper.scale(1 + ((animatorProps.s.v[0] - 1) * mult[0]), 1 + ((animatorProps.s.v[1] - 1) * mult[1]), 1);\r\n          } else {\r\n            matrixHelper.scale(1 + ((animatorProps.s.v[0] - 1) * mult), 1 + ((animatorProps.s.v[1] - 1) * mult), 1);\r\n          }\r\n        }\r\n      }\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n        animatorSelector = animators[j].s;\r\n        mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n        if (animatorProps.sk.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n          } else {\r\n            matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.r.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n          } else {\r\n            matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.ry.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\r\n          } else {\r\n            matrixHelper.rotateY(animatorProps.ry.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.rx.propType) {\r\n          if (mult.length) {\r\n            matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\r\n          } else {\r\n            matrixHelper.rotateX(animatorProps.rx.v * mult);\r\n          }\r\n        }\r\n        if (animatorProps.o.propType) {\r\n          if (mult.length) {\r\n            elemOpacity += ((animatorProps.o.v) * mult[0] - elemOpacity) * mult[0];\r\n          } else {\r\n            elemOpacity += ((animatorProps.o.v) * mult - elemOpacity) * mult;\r\n          }\r\n        }\r\n        if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n          if (mult.length) {\r\n            sw += animatorProps.sw.v * mult[0];\r\n          } else {\r\n            sw += animatorProps.sw.v * mult;\r\n          }\r\n        }\r\n        if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n          for (k = 0; k < 3; k += 1) {\r\n            if (mult.length) {\r\n              sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult[0];\r\n            } else {\r\n              sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult;\r\n            }\r\n          }\r\n        }\r\n        if (documentData.fillColorAnim && documentData.fc) {\r\n          if (animatorProps.fc.propType) {\r\n            for (k = 0; k < 3; k += 1) {\r\n              if (mult.length) {\r\n                fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult[0];\r\n              } else {\r\n                fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult;\r\n              }\r\n            }\r\n          }\r\n          if (animatorProps.fh.propType) {\r\n            if (mult.length) {\r\n              fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\r\n            } else {\r\n              fc = addHueToRGB(fc, animatorProps.fh.v * mult);\r\n            }\r\n          }\r\n          if (animatorProps.fs.propType) {\r\n            if (mult.length) {\r\n              fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\r\n            } else {\r\n              fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\r\n            }\r\n          }\r\n          if (animatorProps.fb.propType) {\r\n            if (mult.length) {\r\n              fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\r\n            } else {\r\n              fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      for (j = 0; j < jLen; j += 1) {\r\n        animatorProps = animators[j].a;\r\n\r\n        if (animatorProps.p.propType) {\r\n          animatorSelector = animators[j].s;\r\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n          if (this._hasMaskedPath) {\r\n            if (mult.length) {\r\n              matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n            } else {\r\n              matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n            }\r\n          } else if (mult.length) {\r\n            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n          } else {\r\n            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n          }\r\n        }\r\n      }\r\n      if (documentData.strokeWidthAnim) {\r\n        letterSw = sw < 0 ? 0 : sw;\r\n      }\r\n      if (documentData.strokeColorAnim) {\r\n        letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\r\n      }\r\n      if (documentData.fillColorAnim && documentData.fc) {\r\n        letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\r\n      }\r\n\r\n      if (this._hasMaskedPath) {\r\n        matrixHelper.translate(0, -documentData.ls);\r\n\r\n        matrixHelper.translate(0, (alignment[1] * yOff) * 0.01 + yPos, 0);\r\n        if (textData.p.p) {\r\n          tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n          var rot = (Math.atan(tanAngle) * 180) / Math.PI;\r\n          if (currentPoint.point[0] < prevPoint.point[0]) {\r\n            rot += 180;\r\n          }\r\n          matrixHelper.rotate((-rot * Math.PI) / 180);\r\n        }\r\n        matrixHelper.translate(xPathPos, yPathPos, 0);\r\n        currentLength -= (alignment[0] * letters[i].an) * 0.005;\r\n        if (letters[i + 1] && ind !== letters[i + 1].ind) {\r\n          currentLength += letters[i].an / 2;\r\n          currentLength += (documentData.tr * 0.001) * documentData.finalSize;\r\n        }\r\n      } else {\r\n        matrixHelper.translate(xPos, yPos, 0);\r\n\r\n        if (documentData.ps) {\r\n          // matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n          matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n        }\r\n        switch (documentData.j) {\r\n          case 1:\r\n            matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\r\n            break;\r\n          case 2:\r\n            matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n        matrixHelper.translate(0, -documentData.ls);\r\n        matrixHelper.translate(offf, 0, 0);\r\n        matrixHelper.translate((alignment[0] * letters[i].an) * 0.005, (alignment[1] * yOff) * 0.01, 0);\r\n        xPos += letters[i].l + (documentData.tr * 0.001) * documentData.finalSize;\r\n      }\r\n      if (renderType === 'html') {\r\n        letterM = matrixHelper.toCSS();\r\n      } else if (renderType === 'svg') {\r\n        letterM = matrixHelper.to2dCSS();\r\n      } else {\r\n        letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\r\n      }\r\n      letterO = elemOpacity;\r\n    }\r\n\r\n    if (renderedLettersCount <= i) {\r\n      letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\r\n      this.renderedLetters.push(letterValue);\r\n      renderedLettersCount += 1;\r\n      this.lettersChangedFlag = true;\r\n    } else {\r\n      letterValue = this.renderedLetters[i];\r\n      this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n    }\r\n  }\r\n};\r\n\r\nTextAnimatorProperty.prototype.getValue = function () {\r\n  if (this._elem.globalData.frameId === this._frameId) {\r\n    return;\r\n  }\r\n  this._frameId = this._elem.globalData.frameId;\r\n  this.iterateDynamicProperties();\r\n};\r\n\r\nTextAnimatorProperty.prototype.mHelper = new Matrix();\r\nTextAnimatorProperty.prototype.defaultPropsArray = [];\r\nextendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\r\n\r\n/* global PropertyFactory, degToRads, TextSelectorProp */\r\n/* exported TextAnimatorDataProperty */\r\n\r\nfunction TextAnimatorDataProperty(elem, animatorProps, container) {\r\n  var defaultData = { propType: false };\r\n  var getProp = PropertyFactory.getProp;\r\n  var textAnimatorAnimatables = animatorProps.a;\r\n  this.a = {\r\n    r: textAnimatorAnimatables.r ? getProp(elem, textAnimatorAnimatables.r, 0, degToRads, container) : defaultData,\r\n    rx: textAnimatorAnimatables.rx ? getProp(elem, textAnimatorAnimatables.rx, 0, degToRads, container) : defaultData,\r\n    ry: textAnimatorAnimatables.ry ? getProp(elem, textAnimatorAnimatables.ry, 0, degToRads, container) : defaultData,\r\n    sk: textAnimatorAnimatables.sk ? getProp(elem, textAnimatorAnimatables.sk, 0, degToRads, container) : defaultData,\r\n    sa: textAnimatorAnimatables.sa ? getProp(elem, textAnimatorAnimatables.sa, 0, degToRads, container) : defaultData,\r\n    s: textAnimatorAnimatables.s ? getProp(elem, textAnimatorAnimatables.s, 1, 0.01, container) : defaultData,\r\n    a: textAnimatorAnimatables.a ? getProp(elem, textAnimatorAnimatables.a, 1, 0, container) : defaultData,\r\n    o: textAnimatorAnimatables.o ? getProp(elem, textAnimatorAnimatables.o, 0, 0.01, container) : defaultData,\r\n    p: textAnimatorAnimatables.p ? getProp(elem, textAnimatorAnimatables.p, 1, 0, container) : defaultData,\r\n    sw: textAnimatorAnimatables.sw ? getProp(elem, textAnimatorAnimatables.sw, 0, 0, container) : defaultData,\r\n    sc: textAnimatorAnimatables.sc ? getProp(elem, textAnimatorAnimatables.sc, 1, 0, container) : defaultData,\r\n    fc: textAnimatorAnimatables.fc ? getProp(elem, textAnimatorAnimatables.fc, 1, 0, container) : defaultData,\r\n    fh: textAnimatorAnimatables.fh ? getProp(elem, textAnimatorAnimatables.fh, 0, 0, container) : defaultData,\r\n    fs: textAnimatorAnimatables.fs ? getProp(elem, textAnimatorAnimatables.fs, 0, 0.01, container) : defaultData,\r\n    fb: textAnimatorAnimatables.fb ? getProp(elem, textAnimatorAnimatables.fb, 0, 0.01, container) : defaultData,\r\n    t: textAnimatorAnimatables.t ? getProp(elem, textAnimatorAnimatables.t, 0, 0, container) : defaultData,\r\n  };\r\n\r\n  this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\r\n  this.s.t = animatorProps.s.t;\r\n}\r\n\r\nfunction LetterProps(o, sw, sc, fc, m, p) {\r\n  this.o = o;\r\n  this.sw = sw;\r\n  this.sc = sc;\r\n  this.fc = fc;\r\n  this.m = m;\r\n  this.p = p;\r\n  this._mdf = {\r\n    o: true,\r\n    sw: !!sw,\r\n    sc: !!sc,\r\n    fc: !!fc,\r\n    m: true,\r\n    p: true,\r\n  };\r\n}\r\n\r\nLetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\r\n  this._mdf.o = false;\r\n  this._mdf.sw = false;\r\n  this._mdf.sc = false;\r\n  this._mdf.fc = false;\r\n  this._mdf.m = false;\r\n  this._mdf.p = false;\r\n  var updated = false;\r\n\r\n  if (this.o !== o) {\r\n    this.o = o;\r\n    this._mdf.o = true;\r\n    updated = true;\r\n  }\r\n  if (this.sw !== sw) {\r\n    this.sw = sw;\r\n    this._mdf.sw = true;\r\n    updated = true;\r\n  }\r\n  if (this.sc !== sc) {\r\n    this.sc = sc;\r\n    this._mdf.sc = true;\r\n    updated = true;\r\n  }\r\n  if (this.fc !== fc) {\r\n    this.fc = fc;\r\n    this._mdf.fc = true;\r\n    updated = true;\r\n  }\r\n  if (this.m !== m) {\r\n    this.m = m;\r\n    this._mdf.m = true;\r\n    updated = true;\r\n  }\r\n  if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n    this.p = p;\r\n    this._mdf.p = true;\r\n    updated = true;\r\n  }\r\n  return updated;\r\n};\r\n\r\n/* global FontManager, initialDefaultFrame, getFontProperties */\r\n/* exported TextProperty */\r\n\r\nfunction TextProperty(elem, data) {\r\n  this._frameId = initialDefaultFrame;\r\n  this.pv = '';\r\n  this.v = '';\r\n  this.kf = false;\r\n  this._isFirstFrame = true;\r\n  this._mdf = false;\r\n  this.data = data;\r\n  this.elem = elem;\r\n  this.comp = this.elem.comp;\r\n  this.keysIndex = 0;\r\n  this.canResize = false;\r\n  this.minimumFontSize = 1;\r\n  this.effectsSequence = [];\r\n  this.currentData = {\r\n    ascent: 0,\r\n    boxWidth: this.defaultBoxWidth,\r\n    f: '',\r\n    fStyle: '',\r\n    fWeight: '',\r\n    fc: '',\r\n    j: '',\r\n    justifyOffset: '',\r\n    l: [],\r\n    lh: 0,\r\n    lineWidths: [],\r\n    ls: '',\r\n    of: '',\r\n    s: '',\r\n    sc: '',\r\n    sw: 0,\r\n    t: 0,\r\n    tr: 0,\r\n    sz: 0,\r\n    ps: null,\r\n    fillColorAnim: false,\r\n    strokeColorAnim: false,\r\n    strokeWidthAnim: false,\r\n    yOffset: 0,\r\n    finalSize: 0,\r\n    finalText: [],\r\n    finalLineHeight: 0,\r\n    __complete: false,\r\n\r\n  };\r\n  this.copyData(this.currentData, this.data.d.k[0].s);\r\n\r\n  if (!this.searchProperty()) {\r\n    this.completeTextData(this.currentData);\r\n  }\r\n}\r\n\r\nTextProperty.prototype.defaultBoxWidth = [0, 0];\r\n\r\nTextProperty.prototype.copyData = function (obj, data) {\r\n  for (var s in data) {\r\n    if (Object.prototype.hasOwnProperty.call(data, s)) {\r\n      obj[s] = data[s];\r\n    }\r\n  }\r\n  return obj;\r\n};\r\n\r\nTextProperty.prototype.setCurrentData = function (data) {\r\n  if (!data.__complete) {\r\n    this.completeTextData(data);\r\n  }\r\n  this.currentData = data;\r\n  this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n  this._mdf = true;\r\n};\r\n\r\nTextProperty.prototype.searchProperty = function () {\r\n  return this.searchKeyframes();\r\n};\r\n\r\nTextProperty.prototype.searchKeyframes = function () {\r\n  this.kf = this.data.d.k.length > 1;\r\n  if (this.kf) {\r\n    this.addEffect(this.getKeyframeValue.bind(this));\r\n  }\r\n  return this.kf;\r\n};\r\n\r\nTextProperty.prototype.addEffect = function (effectFunction) {\r\n  this.effectsSequence.push(effectFunction);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.getValue = function (_finalValue) {\r\n  if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n    return;\r\n  }\r\n  this.currentData.t = this.data.d.k[this.keysIndex].s.t;\r\n  var currentValue = this.currentData;\r\n  var currentIndex = this.keysIndex;\r\n  if (this.lock) {\r\n    this.setCurrentData(this.currentData);\r\n    return;\r\n  }\r\n  this.lock = true;\r\n  this._mdf = false;\r\n  var i; var\r\n    len = this.effectsSequence.length;\r\n  var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\r\n  for (i = 0; i < len; i += 1) {\r\n    // Checking if index changed to prevent creating a new object every time the expression updates.\r\n    if (currentIndex !== this.keysIndex) {\r\n      finalValue = this.effectsSequence[i](finalValue, finalValue.t);\r\n    } else {\r\n      finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\r\n    }\r\n  }\r\n  if (currentValue !== finalValue) {\r\n    this.setCurrentData(finalValue);\r\n  }\r\n  this.v = this.currentData;\r\n  this.pv = this.v;\r\n  this.lock = false;\r\n  this.frameId = this.elem.globalData.frameId;\r\n};\r\n\r\nTextProperty.prototype.getKeyframeValue = function () {\r\n  var textKeys = this.data.d.k;\r\n  var frameNum = this.elem.comp.renderedFrame;\r\n  var i = 0; var\r\n    len = textKeys.length;\r\n  while (i <= len - 1) {\r\n    if (i === len - 1 || textKeys[i + 1].t > frameNum) {\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n  if (this.keysIndex !== i) {\r\n    this.keysIndex = i;\r\n  }\r\n  return this.data.d.k[this.keysIndex].s;\r\n};\r\n\r\nTextProperty.prototype.buildFinalText = function (text) {\r\n  var combinedCharacters = FontManager.getCombinedCharacterCodes();\r\n  var charactersArray = [];\r\n  var i = 0; var\r\n    len = text.length;\r\n  var charCode;\r\n  while (i < len) {\r\n    charCode = text.charCodeAt(i);\r\n    if (combinedCharacters.indexOf(charCode) !== -1) {\r\n      charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n    } else if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n      charCode = text.charCodeAt(i + 1);\r\n      if (charCode >= 0xDC00 && charCode <= 0xDFFF) {\r\n        charactersArray.push(text.substr(i, 2));\r\n        i += 1;\r\n      } else {\r\n        charactersArray.push(text.charAt(i));\r\n      }\r\n    } else {\r\n      charactersArray.push(text.charAt(i));\r\n    }\r\n    i += 1;\r\n  }\r\n  return charactersArray;\r\n};\r\n\r\nTextProperty.prototype.completeTextData = function (documentData) {\r\n  documentData.__complete = true;\r\n  var fontManager = this.elem.globalData.fontManager;\r\n  var data = this.data;\r\n  var letters = [];\r\n  var i; var\r\n    len;\r\n  var newLineFlag; var index = 0; var\r\n    val;\r\n  var anchorGrouping = data.m.g;\r\n  var currentSize = 0; var currentPos = 0; var currentLine = 0; var\r\n    lineWidths = [];\r\n  var lineWidth = 0;\r\n  var maxLineWidth = 0;\r\n  var j; var\r\n    jLen;\r\n  var fontData = fontManager.getFontByName(documentData.f);\r\n  var charData; var\r\n    cLength = 0;\r\n\r\n  var fontProps = getFontProperties(fontData);\r\n  documentData.fWeight = fontProps.weight;\r\n  documentData.fStyle = fontProps.style;\r\n  documentData.finalSize = documentData.s;\r\n  documentData.finalText = this.buildFinalText(documentData.t);\r\n  len = documentData.finalText.length;\r\n  documentData.finalLineHeight = documentData.lh;\r\n  var trackingOffset = (documentData.tr / 1000) * documentData.finalSize;\r\n  var charCode;\r\n  if (documentData.sz) {\r\n    var flag = true;\r\n    var boxWidth = documentData.sz[0];\r\n    var boxHeight = documentData.sz[1];\r\n    var currentHeight; var\r\n      finalText;\r\n    while (flag) {\r\n      finalText = this.buildFinalText(documentData.t);\r\n      currentHeight = 0;\r\n      lineWidth = 0;\r\n      len = finalText.length;\r\n      trackingOffset = (documentData.tr / 1000) * documentData.finalSize;\r\n      var lastSpaceIndex = -1;\r\n      for (i = 0; i < len; i += 1) {\r\n        charCode = finalText[i].charCodeAt(0);\r\n        newLineFlag = false;\r\n        if (finalText[i] === ' ') {\r\n          lastSpaceIndex = i;\r\n        } else if (charCode === 13 || charCode === 3) {\r\n          lineWidth = 0;\r\n          newLineFlag = true;\r\n          currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n        }\r\n        if (fontManager.chars) {\r\n          charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n          cLength = newLineFlag ? 0 : (charData.w * documentData.finalSize) / 100;\r\n        } else {\r\n          // tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n          cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n        }\r\n        if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\r\n          if (lastSpaceIndex === -1) {\r\n            len += 1;\r\n          } else {\r\n            i = lastSpaceIndex;\r\n          }\r\n          currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n          finalText.splice(i, lastSpaceIndex === i ? 1 : 0, '\\r');\r\n          // finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n          lastSpaceIndex = -1;\r\n          lineWidth = 0;\r\n        } else {\r\n          lineWidth += cLength;\r\n          lineWidth += trackingOffset;\r\n        }\r\n      }\r\n      currentHeight += (fontData.ascent * documentData.finalSize) / 100;\r\n      if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n        documentData.finalSize -= 1;\r\n        documentData.finalLineHeight = (documentData.finalSize * documentData.lh) / documentData.s;\r\n      } else {\r\n        documentData.finalText = finalText;\r\n        len = documentData.finalText.length;\r\n        flag = false;\r\n      }\r\n    }\r\n  }\r\n  lineWidth = -trackingOffset;\r\n  cLength = 0;\r\n  var uncollapsedSpaces = 0;\r\n  var currentChar;\r\n  for (i = 0; i < len; i += 1) {\r\n    newLineFlag = false;\r\n    currentChar = documentData.finalText[i];\r\n    charCode = currentChar.charCodeAt(0);\r\n    if (charCode === 13 || charCode === 3) {\r\n      uncollapsedSpaces = 0;\r\n      lineWidths.push(lineWidth);\r\n      maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n      lineWidth = -2 * trackingOffset;\r\n      val = '';\r\n      newLineFlag = true;\r\n      currentLine += 1;\r\n    } else {\r\n      val = currentChar;\r\n    }\r\n    if (fontManager.chars) {\r\n      charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n      cLength = newLineFlag ? 0 : (charData.w * documentData.finalSize) / 100;\r\n    } else {\r\n      // var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n      // tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n      cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n    }\r\n\r\n    //\r\n    if (currentChar === ' ') {\r\n      uncollapsedSpaces += cLength + trackingOffset;\r\n    } else {\r\n      lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n      uncollapsedSpaces = 0;\r\n    }\r\n    letters.push({\r\n      l: cLength, an: cLength, add: currentSize, n: newLineFlag, anIndexes: [], val: val, line: currentLine, animatorJustifyOffset: 0,\r\n    });\r\n    if (anchorGrouping == 2) { // eslint-disable-line eqeqeq\r\n      currentSize += cLength;\r\n      if (val === '' || val === ' ' || i === len - 1) {\r\n        if (val === '' || val === ' ') {\r\n          currentSize -= cLength;\r\n        }\r\n        while (currentPos <= i) {\r\n          letters[currentPos].an = currentSize;\r\n          letters[currentPos].ind = index;\r\n          letters[currentPos].extra = cLength;\r\n          currentPos += 1;\r\n        }\r\n        index += 1;\r\n        currentSize = 0;\r\n      }\r\n    } else if (anchorGrouping == 3) { // eslint-disable-line eqeqeq\r\n      currentSize += cLength;\r\n      if (val === '' || i === len - 1) {\r\n        if (val === '') {\r\n          currentSize -= cLength;\r\n        }\r\n        while (currentPos <= i) {\r\n          letters[currentPos].an = currentSize;\r\n          letters[currentPos].ind = index;\r\n          letters[currentPos].extra = cLength;\r\n          currentPos += 1;\r\n        }\r\n        currentSize = 0;\r\n        index += 1;\r\n      }\r\n    } else {\r\n      letters[index].ind = index;\r\n      letters[index].extra = 0;\r\n      index += 1;\r\n    }\r\n  }\r\n  documentData.l = letters;\r\n  maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n  lineWidths.push(lineWidth);\r\n  if (documentData.sz) {\r\n    documentData.boxWidth = documentData.sz[0];\r\n    documentData.justifyOffset = 0;\r\n  } else {\r\n    documentData.boxWidth = maxLineWidth;\r\n    switch (documentData.j) {\r\n      case 1:\r\n        documentData.justifyOffset = -documentData.boxWidth;\r\n        break;\r\n      case 2:\r\n        documentData.justifyOffset = -documentData.boxWidth / 2;\r\n        break;\r\n      default:\r\n        documentData.justifyOffset = 0;\r\n    }\r\n  }\r\n  documentData.lineWidths = lineWidths;\r\n\r\n  var animators = data.a; var animatorData; var\r\n    letterData;\r\n  jLen = animators.length;\r\n  var based; var ind; var\r\n    indexes = [];\r\n  for (j = 0; j < jLen; j += 1) {\r\n    animatorData = animators[j];\r\n    if (animatorData.a.sc) {\r\n      documentData.strokeColorAnim = true;\r\n    }\r\n    if (animatorData.a.sw) {\r\n      documentData.strokeWidthAnim = true;\r\n    }\r\n    if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\r\n      documentData.fillColorAnim = true;\r\n    }\r\n    ind = 0;\r\n    based = animatorData.s.b;\r\n    for (i = 0; i < len; i += 1) {\r\n      letterData = letters[i];\r\n      letterData.anIndexes[j] = ind;\r\n      if ((based == 1 && letterData.val !== '') || (based == 2 && letterData.val !== '' && letterData.val !== ' ') || (based == 3 && (letterData.n || letterData.val == ' ' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))) { // eslint-disable-line eqeqeq\r\n        if (animatorData.s.rn === 1) {\r\n          indexes.push(ind);\r\n        }\r\n        ind += 1;\r\n      }\r\n    }\r\n    data.a[j].s.totalChars = ind;\r\n    var currentInd = -1; var\r\n      newInd;\r\n    if (animatorData.s.rn === 1) {\r\n      for (i = 0; i < len; i += 1) {\r\n        letterData = letters[i];\r\n        if (currentInd != letterData.anIndexes[j]) { // eslint-disable-line eqeqeq\r\n          currentInd = letterData.anIndexes[j];\r\n          newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\r\n        }\r\n        letterData.anIndexes[j] = newInd;\r\n      }\r\n    }\r\n  }\r\n  documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\r\n  documentData.ls = documentData.ls || 0;\r\n  documentData.ascent = (fontData.ascent * documentData.finalSize) / 100;\r\n};\r\n\r\nTextProperty.prototype.updateDocumentData = function (newData, index) {\r\n  index = index === undefined ? this.keysIndex : index;\r\n  var dData = this.copyData({}, this.data.d.k[index].s);\r\n  dData = this.copyData(dData, newData);\r\n  this.data.d.k[index].s = dData;\r\n  this.recalculate(index);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.recalculate = function (index) {\r\n  var dData = this.data.d.k[index].s;\r\n  dData.__complete = false;\r\n  this.keysIndex = 0;\r\n  this._isFirstFrame = true;\r\n  this.getValue(dData);\r\n};\r\n\r\nTextProperty.prototype.canResizeFont = function (_canResize) {\r\n  this.canResize = _canResize;\r\n  this.recalculate(this.keysIndex);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.setMinimumFontSize = function (_fontValue) {\r\n  this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n  this.recalculate(this.keysIndex);\r\n  this.elem.addDynamicProperty(this);\r\n};\r\n\r\n/* global extendPrototype, BezierFactory, PropertyFactory, DynamicPropertyContainer */\r\n/* exported TextSelectorProp */\r\n\r\nvar TextSelectorProp = (function () {\r\n  var max = Math.max;\r\n  var min = Math.min;\r\n  var floor = Math.floor;\r\n\r\n  function TextSelectorPropFactory(elem, data) {\r\n    this._currentTextLength = -1;\r\n    this.k = false;\r\n    this.data = data;\r\n    this.elem = elem;\r\n    this.comp = elem.comp;\r\n    this.finalS = 0;\r\n    this.finalE = 0;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.s = PropertyFactory.getProp(elem, data.s || { k: 0 }, 0, 0, this);\r\n    if ('e' in data) {\r\n      this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\r\n    } else {\r\n      this.e = { v: 100 };\r\n    }\r\n    this.o = PropertyFactory.getProp(elem, data.o || { k: 0 }, 0, 0, this);\r\n    this.xe = PropertyFactory.getProp(elem, data.xe || { k: 0 }, 0, 0, this);\r\n    this.ne = PropertyFactory.getProp(elem, data.ne || { k: 0 }, 0, 0, this);\r\n    this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\r\n    if (!this.dynamicProperties.length) {\r\n      this.getValue();\r\n    }\r\n  }\r\n\r\n  TextSelectorPropFactory.prototype = {\r\n    getMult: function (ind) {\r\n      if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n        this.getValue();\r\n      }\r\n      // var easer = bez.getEasingCurve(this.ne.v/100,0,1-this.xe.v/100,1);\r\n      var x1 = 0;\r\n      var y1 = 0;\r\n      var x2 = 1;\r\n      var y2 = 1;\r\n      if (this.ne.v > 0) {\r\n        x1 = this.ne.v / 100.0;\r\n      } else {\r\n        y1 = -this.ne.v / 100.0;\r\n      }\r\n      if (this.xe.v > 0) {\r\n        x2 = 1.0 - this.xe.v / 100.0;\r\n      } else {\r\n        y2 = 1.0 + this.xe.v / 100.0;\r\n      }\r\n      var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\r\n\r\n      var mult = 0;\r\n      var s = this.finalS;\r\n      var e = this.finalE;\r\n      var type = this.data.sh;\r\n      if (type === 2) {\r\n        if (e === s) {\r\n          mult = ind >= e ? 1 : 0;\r\n        } else {\r\n          mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n        }\r\n        mult = easer(mult);\r\n      } else if (type === 3) {\r\n        if (e === s) {\r\n          mult = ind >= e ? 0 : 1;\r\n        } else {\r\n          mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n        }\r\n\r\n        mult = easer(mult);\r\n      } else if (type === 4) {\r\n        if (e === s) {\r\n          mult = 0;\r\n        } else {\r\n          mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\r\n          if (mult < 0.5) {\r\n            mult *= 2;\r\n          } else {\r\n            mult = 1 - 2 * (mult - 0.5);\r\n          }\r\n        }\r\n        mult = easer(mult);\r\n      } else if (type === 5) {\r\n        if (e === s) {\r\n          mult = 0;\r\n        } else {\r\n          var tot = e - s;\r\n          /* ind += 0.5;\r\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind; */\r\n          ind = min(max(0, ind + 0.5 - s), e - s);\r\n          var x = -tot / 2 + ind;\r\n          var a = tot / 2;\r\n          mult = Math.sqrt(1 - (x * x) / (a * a));\r\n        }\r\n        mult = easer(mult);\r\n      } else if (type === 6) {\r\n        if (e === s) {\r\n          mult = 0;\r\n        } else {\r\n          ind = min(max(0, ind + 0.5 - s), e - s);\r\n          mult = (1 + (Math.cos((Math.PI + Math.PI * 2 * (ind) / (e - s))))) / 2; // eslint-disable-line\r\n        }\r\n        mult = easer(mult);\r\n      } else {\r\n        if (ind >= floor(s)) {\r\n          if (ind - s < 0) {\r\n            mult = max(0, min(min(e, 1) - (s - ind), 1));\r\n          } else {\r\n            mult = max(0, min(e - ind, 1));\r\n          }\r\n        }\r\n        mult = easer(mult);\r\n      }\r\n      return mult * this.a.v;\r\n    },\r\n    getValue: function (newCharsFlag) {\r\n      this.iterateDynamicProperties();\r\n      this._mdf = newCharsFlag || this._mdf;\r\n      this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n      if (newCharsFlag && this.data.r === 2) {\r\n        this.e.v = this._currentTextLength;\r\n      }\r\n      var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\r\n      var o = this.o.v / divisor;\r\n      var s = this.s.v / divisor + o;\r\n      var e = (this.e.v / divisor) + o;\r\n      if (s > e) {\r\n        var _s = s;\r\n        s = e;\r\n        e = _s;\r\n      }\r\n      this.finalS = s;\r\n      this.finalE = e;\r\n    },\r\n  };\r\n  extendPrototype([DynamicPropertyContainer], TextSelectorPropFactory);\r\n\r\n  function getTextSelectorProp(elem, data, arr) {\r\n    return new TextSelectorPropFactory(elem, data, arr);\r\n  }\r\n\r\n  return {\r\n    getTextSelectorProp: getTextSelectorProp,\r\n  };\r\n}());\r\n\r\n/* global createSizedArray, pooling */\r\n/* exported poolFactory */\r\n\r\nvar poolFactory = (function () {\r\n  return function (initialLength, _create, _release) {\r\n    var _length = 0;\r\n    var _maxLength = initialLength;\r\n    var pool = createSizedArray(_maxLength);\r\n\r\n    var ob = {\r\n      newElement: newElement,\r\n      release: release,\r\n    };\r\n\r\n    function newElement() {\r\n      var element;\r\n      if (_length) {\r\n        _length -= 1;\r\n        element = pool[_length];\r\n      } else {\r\n        element = _create();\r\n      }\r\n      return element;\r\n    }\r\n\r\n    function release(element) {\r\n      if (_length === _maxLength) {\r\n        pool = pooling.double(pool);\r\n        _maxLength *= 2;\r\n      }\r\n      if (_release) {\r\n        _release(element);\r\n      }\r\n      pool[_length] = element;\r\n      _length += 1;\r\n    }\r\n\r\n    return ob;\r\n  };\r\n}());\r\n\r\n/* global createSizedArray */\r\n/* exported pooling */\r\n\r\nvar pooling = (function () {\r\n  function double(arr) {\r\n    return arr.concat(createSizedArray(arr.length));\r\n  }\r\n\r\n  return {\r\n    double: double,\r\n  };\r\n}());\r\n\r\n/* global createTypedArray, poolFactory */\r\n/* exported pointPool */\r\n\r\nvar pointPool = (function () {\r\n  function create() {\r\n    return createTypedArray('float32', 2);\r\n  }\r\n  return poolFactory(8, create);\r\n}());\r\n\r\n/* global ShapePath, pointPool, poolFactory */\r\n/* exported shapePool */\r\n\r\nvar shapePool = (function () {\r\n  function create() {\r\n    return new ShapePath();\r\n  }\r\n\r\n  function release(shapePath) {\r\n    var len = shapePath._length;\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      pointPool.release(shapePath.v[i]);\r\n      pointPool.release(shapePath.i[i]);\r\n      pointPool.release(shapePath.o[i]);\r\n      shapePath.v[i] = null;\r\n      shapePath.i[i] = null;\r\n      shapePath.o[i] = null;\r\n    }\r\n    shapePath._length = 0;\r\n    shapePath.c = false;\r\n  }\r\n\r\n  function clone(shape) {\r\n    var cloned = factory.newElement();\r\n    var i;\r\n    var len = shape._length === undefined ? shape.v.length : shape._length;\r\n    cloned.setLength(len);\r\n    cloned.c = shape.c;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\r\n    }\r\n    return cloned;\r\n  }\r\n\r\n  var factory = poolFactory(4, create, release);\r\n  factory.clone = clone;\r\n\r\n  return factory;\r\n}());\r\n\r\n/* global createSizedArray, ShapeCollection, shapePool, pooling */\r\n/* exported shapeCollectionPool */\r\n\r\nvar shapeCollectionPool = (function () {\r\n  var ob = {\r\n    newShapeCollection: newShapeCollection,\r\n    release: release,\r\n  };\r\n\r\n  var _length = 0;\r\n  var _maxLength = 4;\r\n  var pool = createSizedArray(_maxLength);\r\n\r\n  function newShapeCollection() {\r\n    var shapeCollection;\r\n    if (_length) {\r\n      _length -= 1;\r\n      shapeCollection = pool[_length];\r\n    } else {\r\n      shapeCollection = new ShapeCollection();\r\n    }\r\n    return shapeCollection;\r\n  }\r\n\r\n  function release(shapeCollection) {\r\n    var i;\r\n    var len = shapeCollection._length;\r\n    for (i = 0; i < len; i += 1) {\r\n      shapePool.release(shapeCollection.shapes[i]);\r\n    }\r\n    shapeCollection._length = 0;\r\n\r\n    if (_length === _maxLength) {\r\n      pool = pooling.double(pool);\r\n      _maxLength *= 2;\r\n    }\r\n    pool[_length] = shapeCollection;\r\n    _length += 1;\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\n/* global poolFactory, bezierLengthPool */\r\n/* exported segmentsLengthPool */\r\n\r\nvar segmentsLengthPool = (function () {\r\n  function create() {\r\n    return {\r\n      lengths: [],\r\n      totalLength: 0,\r\n    };\r\n  }\r\n\r\n  function release(element) {\r\n    var i;\r\n    var len = element.lengths.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      bezierLengthPool.release(element.lengths[i]);\r\n    }\r\n    element.lengths.length = 0;\r\n  }\r\n\r\n  return poolFactory(8, create, release);\r\n}());\r\n\r\n/* global createTypedArray, defaultCurveSegments, poolFactory */\r\n/* exported bezierLengthPool */\r\n\r\nvar bezierLengthPool = (function () {\r\n  function create() {\r\n    return {\r\n      addedLength: 0,\r\n      percents: createTypedArray('float32', defaultCurveSegments),\r\n      lengths: createTypedArray('float32', defaultCurveSegments),\r\n    };\r\n  }\r\n  return poolFactory(8, create);\r\n}());\r\n\r\n/* exported markerParser */\r\n\r\nvar markerParser = (\r\n\r\n  function () {\r\n    function parsePayloadLines(payload) {\r\n      var lines = payload.split('\\r\\n');\r\n      var keys = {};\r\n      var line;\r\n      var keysCount = 0;\r\n      for (var i = 0; i < lines.length; i += 1) {\r\n        line = lines[i].split(':');\r\n        if (line.length === 2) {\r\n          keys[line[0]] = line[1].trim();\r\n          keysCount += 1;\r\n        }\r\n      }\r\n      if (keysCount === 0) {\r\n        throw new Error();\r\n      }\r\n      return keys;\r\n    }\r\n\r\n    return function (_markers) {\r\n      var markers = [];\r\n      for (var i = 0; i < _markers.length; i += 1) {\r\n        var _marker = _markers[i];\r\n        var markerData = {\r\n          time: _marker.tm,\r\n          duration: _marker.dr,\r\n        };\r\n        try {\r\n          markerData.payload = JSON.parse(_markers[i].cm);\r\n        } catch (_) {\r\n          try {\r\n            markerData.payload = parsePayloadLines(_markers[i].cm);\r\n          } catch (__) {\r\n            markerData.payload = {\r\n              name: _markers[i],\r\n            };\r\n          }\r\n        }\r\n        markers.push(markerData);\r\n      }\r\n      return markers;\r\n    };\r\n  }());\r\n\r\n/* global AudioElement, FootageElement, FontManager */\r\n\r\nfunction BaseRenderer() {}\r\nBaseRenderer.prototype.checkLayers = function (num) {\r\n  var i;\r\n  var len = this.layers.length;\r\n  var data;\r\n  this.completeLayers = true;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (!this.elements[i]) {\r\n      data = this.layers[i];\r\n      if (data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st)) {\r\n        this.buildItem(i);\r\n      }\r\n    }\r\n    this.completeLayers = this.elements[i] ? this.completeLayers : false;\r\n  }\r\n  this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.createItem = function (layer) {\r\n  switch (layer.ty) {\r\n    case 2:\r\n      return this.createImage(layer);\r\n    case 0:\r\n      return this.createComp(layer);\r\n    case 1:\r\n      return this.createSolid(layer);\r\n    case 3:\r\n      return this.createNull(layer);\r\n    case 4:\r\n      return this.createShape(layer);\r\n    case 5:\r\n      return this.createText(layer);\r\n    case 6:\r\n      return this.createAudio(layer);\r\n    case 13:\r\n      return this.createCamera(layer);\r\n    case 15:\r\n      return this.createFootage(layer);\r\n    default:\r\n      return this.createNull(layer);\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.createCamera = function () {\r\n  throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n};\r\n\r\nBaseRenderer.prototype.createAudio = function (data) {\r\n  return new AudioElement(data, this.globalData, this);\r\n};\r\n\r\nBaseRenderer.prototype.createFootage = function (data) {\r\n  return new FootageElement(data, this.globalData, this);\r\n};\r\n\r\nBaseRenderer.prototype.buildAllItems = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.buildItem(i);\r\n  }\r\n  this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.includeLayers = function (newLayers) {\r\n  this.completeLayers = false;\r\n  var i;\r\n  var len = newLayers.length;\r\n  var j;\r\n  var jLen = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    j = 0;\r\n    while (j < jLen) {\r\n      if (this.layers[j].id === newLayers[i].id) {\r\n        this.layers[j] = newLayers[i];\r\n        break;\r\n      }\r\n      j += 1;\r\n    }\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.setProjectInterface = function (pInterface) {\r\n  this.globalData.projectInterface = pInterface;\r\n};\r\n\r\nBaseRenderer.prototype.initItems = function () {\r\n  if (!this.globalData.progressiveLoad) {\r\n    this.buildAllItems();\r\n  }\r\n};\r\nBaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\r\n  var elements = this.elements;\r\n  var layers = this.layers;\r\n  var i = 0;\r\n  var len = layers.length;\r\n  while (i < len) {\r\n    if (layers[i].ind == parentName) { // eslint-disable-line eqeqeq\r\n      if (!elements[i] || elements[i] === true) {\r\n        this.buildItem(i);\r\n        this.addPendingElement(element);\r\n      } else {\r\n        hierarchy.push(elements[i]);\r\n        elements[i].setAsParent();\r\n        if (layers[i].parent !== undefined) {\r\n          this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n        } else {\r\n          element.setHierarchy(hierarchy);\r\n        }\r\n      }\r\n    }\r\n    i += 1;\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.addPendingElement = function (element) {\r\n  this.pendingElements.push(element);\r\n};\r\n\r\nBaseRenderer.prototype.searchExtraCompositions = function (assets) {\r\n  var i;\r\n  var len = assets.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (assets[i].xt) {\r\n      var comp = this.createComp(assets[i]);\r\n      comp.initExpressions();\r\n      this.globalData.projectInterface.registerComposition(comp);\r\n    }\r\n  }\r\n};\r\n\r\nBaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\r\n  this.globalData.fontManager = new FontManager();\r\n  this.globalData.fontManager.addChars(animData.chars);\r\n  this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\r\n  this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n  this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n  this.globalData.imageLoader = this.animationItem.imagePreloader;\r\n  this.globalData.audioController = this.animationItem.audioController;\r\n  this.globalData.frameId = 0;\r\n  this.globalData.frameRate = animData.fr;\r\n  this.globalData.nm = animData.nm;\r\n  this.globalData.compSize = {\r\n    w: animData.w,\r\n    h: animData.h,\r\n  };\r\n};\r\n\r\n/* global createElementID, extendPrototype, BaseRenderer, NullElement, SVGShapeElement, SVGTextLottieElement,\r\nIImageElement, SVGCompElement, ISolidElement, createNS, locationHref, createSizedArray, expressionsPlugin */\r\n\r\nfunction SVGRenderer(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.layers = null;\r\n  this.renderedFrame = -1;\r\n  this.svgElement = createNS('svg');\r\n  var ariaLabel = '';\r\n  if (config && config.title) {\r\n    var titleElement = createNS('title');\r\n    var titleId = createElementID();\r\n    titleElement.setAttribute('id', titleId);\r\n    titleElement.textContent = config.title;\r\n    this.svgElement.appendChild(titleElement);\r\n    ariaLabel += titleId;\r\n  }\r\n  if (config && config.description) {\r\n    var descElement = createNS('desc');\r\n    var descId = createElementID();\r\n    descElement.setAttribute('id', descId);\r\n    descElement.textContent = config.description;\r\n    this.svgElement.appendChild(descElement);\r\n    ariaLabel += ' ' + descId;\r\n  }\r\n  if (ariaLabel) {\r\n    this.svgElement.setAttribute('aria-labelledby', ariaLabel);\r\n  }\r\n  var defs = createNS('defs');\r\n  this.svgElement.appendChild(defs);\r\n  var maskElement = createNS('g');\r\n  this.svgElement.appendChild(maskElement);\r\n  this.layerElement = maskElement;\r\n  this.renderConfig = {\r\n    preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    progressiveLoad: (config && config.progressiveLoad) || false,\r\n    hideOnTransparent: !((config && config.hideOnTransparent === false)),\r\n    viewBoxOnly: (config && config.viewBoxOnly) || false,\r\n    viewBoxSize: (config && config.viewBoxSize) || false,\r\n    className: (config && config.className) || '',\r\n    id: (config && config.id) || '',\r\n    focusable: config && config.focusable,\r\n    filterSize: {\r\n      width: (config && config.filterSize && config.filterSize.width) || '100%',\r\n      height: (config && config.filterSize && config.filterSize.height) || '100%',\r\n      x: (config && config.filterSize && config.filterSize.x) || '0%',\r\n      y: (config && config.filterSize && config.filterSize.y) || '0%',\r\n    },\r\n  };\r\n\r\n  this.globalData = {\r\n    _mdf: false,\r\n    frameNum: -1,\r\n    defs: defs,\r\n    renderConfig: this.renderConfig,\r\n  };\r\n  this.elements = [];\r\n  this.pendingElements = [];\r\n  this.destroyed = false;\r\n  this.rendererType = 'svg';\r\n}\r\n\r\nextendPrototype([BaseRenderer], SVGRenderer);\r\n\r\nSVGRenderer.prototype.createNull = function (data) {\r\n  return new NullElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createShape = function (data) {\r\n  return new SVGShapeElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createText = function (data) {\r\n  return new SVGTextLottieElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createImage = function (data) {\r\n  return new IImageElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createComp = function (data) {\r\n  return new SVGCompElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.createSolid = function (data) {\r\n  return new ISolidElement(data, this.globalData, this);\r\n};\r\n\r\nSVGRenderer.prototype.configAnimation = function (animData) {\r\n  this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n  if (this.renderConfig.viewBoxSize) {\r\n    this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\r\n  } else {\r\n    this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\r\n  }\r\n\r\n  if (!this.renderConfig.viewBoxOnly) {\r\n    this.svgElement.setAttribute('width', animData.w);\r\n    this.svgElement.setAttribute('height', animData.h);\r\n    this.svgElement.style.width = '100%';\r\n    this.svgElement.style.height = '100%';\r\n    this.svgElement.style.transform = 'translate3d(0,0,0)';\r\n  }\r\n  if (this.renderConfig.className) {\r\n    this.svgElement.setAttribute('class', this.renderConfig.className);\r\n  }\r\n  if (this.renderConfig.id) {\r\n    this.svgElement.setAttribute('id', this.renderConfig.id);\r\n  }\r\n  if (this.renderConfig.focusable !== undefined) {\r\n    this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\r\n  }\r\n  this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio);\r\n  // this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n  // this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n  this.animationItem.wrapper.appendChild(this.svgElement);\r\n  // Mask animation\r\n  var defs = this.globalData.defs;\r\n\r\n  this.setupGlobalData(animData, defs);\r\n  this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n  this.data = animData;\r\n\r\n  var maskElement = createNS('clipPath');\r\n  var rect = createNS('rect');\r\n  rect.setAttribute('width', animData.w);\r\n  rect.setAttribute('height', animData.h);\r\n  rect.setAttribute('x', 0);\r\n  rect.setAttribute('y', 0);\r\n  var maskId = createElementID();\r\n  maskElement.setAttribute('id', maskId);\r\n  maskElement.appendChild(rect);\r\n  this.layerElement.setAttribute('clip-path', 'url(' + locationHref + '#' + maskId + ')');\r\n\r\n  defs.appendChild(maskElement);\r\n  this.layers = animData.layers;\r\n  this.elements = createSizedArray(animData.layers.length);\r\n};\r\n\r\nSVGRenderer.prototype.destroy = function () {\r\n  if (this.animationItem.wrapper) {\r\n    this.animationItem.wrapper.innerText = '';\r\n  }\r\n  this.layerElement = null;\r\n  this.globalData.defs = null;\r\n  var i;\r\n  var len = this.layers ? this.layers.length : 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.elements.length = 0;\r\n  this.destroyed = true;\r\n  this.animationItem = null;\r\n};\r\n\r\nSVGRenderer.prototype.updateContainerSize = function () {\r\n};\r\n\r\nSVGRenderer.prototype.buildItem = function (pos) {\r\n  var elements = this.elements;\r\n  if (elements[pos] || this.layers[pos].ty === 99) {\r\n    return;\r\n  }\r\n  elements[pos] = true;\r\n  var element = this.createItem(this.layers[pos]);\r\n\r\n  elements[pos] = element;\r\n  if (expressionsPlugin) {\r\n    if (this.layers[pos].ty === 0) {\r\n      this.globalData.projectInterface.registerComposition(element);\r\n    }\r\n    element.initExpressions();\r\n  }\r\n  this.appendElementInPos(element, pos);\r\n  if (this.layers[pos].tt) {\r\n    if (!this.elements[pos - 1] || this.elements[pos - 1] === true) {\r\n      this.buildItem(pos - 1);\r\n      this.addPendingElement(element);\r\n    } else {\r\n      element.setMatte(elements[pos - 1].layerId);\r\n    }\r\n  }\r\n};\r\n\r\nSVGRenderer.prototype.checkPendingElements = function () {\r\n  while (this.pendingElements.length) {\r\n    var element = this.pendingElements.pop();\r\n    element.checkParenting();\r\n    if (element.data.tt) {\r\n      var i = 0;\r\n      var len = this.elements.length;\r\n      while (i < len) {\r\n        if (this.elements[i] === element) {\r\n          element.setMatte(this.elements[i - 1].layerId);\r\n          break;\r\n        }\r\n        i += 1;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nSVGRenderer.prototype.renderFrame = function (num) {\r\n  if (this.renderedFrame === num || this.destroyed) {\r\n    return;\r\n  }\r\n  if (num === null) {\r\n    num = this.renderedFrame;\r\n  } else {\r\n    this.renderedFrame = num;\r\n  }\r\n  // console.log('-------');\r\n  // console.log('FRAME ',num);\r\n  this.globalData.frameNum = num;\r\n  this.globalData.frameId += 1;\r\n  this.globalData.projectInterface.currentFrame = num;\r\n  this.globalData._mdf = false;\r\n  var i;\r\n  var len = this.layers.length;\r\n  if (!this.completeLayers) {\r\n    this.checkLayers(num);\r\n  }\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].prepareFrame(num - this.layers[i].st);\r\n    }\r\n  }\r\n  if (this.globalData._mdf) {\r\n    for (i = 0; i < len; i += 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nSVGRenderer.prototype.appendElementInPos = function (element, pos) {\r\n  var newElement = element.getBaseElement();\r\n  if (!newElement) {\r\n    return;\r\n  }\r\n  var i = 0;\r\n  var nextElement;\r\n  while (i < pos) {\r\n    if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\r\n      nextElement = this.elements[i].getBaseElement();\r\n    }\r\n    i += 1;\r\n  }\r\n  if (nextElement) {\r\n    this.layerElement.insertBefore(newElement, nextElement);\r\n  } else {\r\n    this.layerElement.appendChild(newElement);\r\n  }\r\n};\r\n\r\nSVGRenderer.prototype.hide = function () {\r\n  this.layerElement.style.display = 'none';\r\n};\r\n\r\nSVGRenderer.prototype.show = function () {\r\n  this.layerElement.style.display = 'block';\r\n};\r\n\r\n/* global CVContextData, Matrix, extendPrototype, BaseRenderer, CVShapeElement, CVTextElement,\r\nCVImageElement, CVCompElement, CVSolidElement, SVGRenderer, createTag, createSizedArray */\r\n\r\nfunction CanvasRenderer(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.renderConfig = {\r\n    clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\r\n    context: (config && config.context) || null,\r\n    progressiveLoad: (config && config.progressiveLoad) || false,\r\n    preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    className: (config && config.className) || '',\r\n    id: (config && config.id) || '',\r\n  };\r\n  this.renderConfig.dpr = (config && config.dpr) || 1;\r\n  if (this.animationItem.wrapper) {\r\n    this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\r\n  }\r\n  this.renderedFrame = -1;\r\n  this.globalData = {\r\n    frameNum: -1,\r\n    _mdf: false,\r\n    renderConfig: this.renderConfig,\r\n    currentGlobalAlpha: -1,\r\n  };\r\n  this.contextData = new CVContextData();\r\n  this.elements = [];\r\n  this.pendingElements = [];\r\n  this.transformMat = new Matrix();\r\n  this.completeLayers = false;\r\n  this.rendererType = 'canvas';\r\n}\r\nextendPrototype([BaseRenderer], CanvasRenderer);\r\n\r\nCanvasRenderer.prototype.createShape = function (data) {\r\n  return new CVShapeElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createText = function (data) {\r\n  return new CVTextElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createImage = function (data) {\r\n  return new CVImageElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createComp = function (data) {\r\n  return new CVCompElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createSolid = function (data) {\r\n  return new CVSolidElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nCanvasRenderer.prototype.ctxTransform = function (props) {\r\n  if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\r\n    return;\r\n  }\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\r\n    return;\r\n  }\r\n  this.transformMat.cloneFromProps(props);\r\n  var cProps = this.contextData.cTr.props;\r\n  this.transformMat.transform(cProps[0], cProps[1], cProps[2], cProps[3], cProps[4], cProps[5], cProps[6], cProps[7], cProps[8], cProps[9], cProps[10], cProps[11], cProps[12], cProps[13], cProps[14], cProps[15]);\r\n  // this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n  this.contextData.cTr.cloneFromProps(this.transformMat.props);\r\n  var trProps = this.contextData.cTr.props;\r\n  this.canvasContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\r\n};\r\n\r\nCanvasRenderer.prototype.ctxOpacity = function (op) {\r\n  /* if(op === 1){\r\n        return;\r\n    } */\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n    this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n    return;\r\n  }\r\n  this.contextData.cO *= op < 0 ? 0 : op;\r\n  if (this.globalData.currentGlobalAlpha !== this.contextData.cO) {\r\n    this.canvasContext.globalAlpha = this.contextData.cO;\r\n    this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n  }\r\n};\r\n\r\nCanvasRenderer.prototype.reset = function () {\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.restore();\r\n    return;\r\n  }\r\n  this.contextData.reset();\r\n};\r\n\r\nCanvasRenderer.prototype.save = function (actionFlag) {\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.save();\r\n    return;\r\n  }\r\n  if (actionFlag) {\r\n    this.canvasContext.save();\r\n  }\r\n  var props = this.contextData.cTr.props;\r\n  if (this.contextData._length <= this.contextData.cArrPos) {\r\n    this.contextData.duplicate();\r\n  }\r\n  var i;\r\n  var arr = this.contextData.saved[this.contextData.cArrPos];\r\n  for (i = 0; i < 16; i += 1) {\r\n    arr[i] = props[i];\r\n  }\r\n  this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\r\n  this.contextData.cArrPos += 1;\r\n};\r\n\r\nCanvasRenderer.prototype.restore = function (actionFlag) {\r\n  if (!this.renderConfig.clearCanvas) {\r\n    this.canvasContext.restore();\r\n    return;\r\n  }\r\n  if (actionFlag) {\r\n    this.canvasContext.restore();\r\n    this.globalData.blendMode = 'source-over';\r\n  }\r\n  this.contextData.cArrPos -= 1;\r\n  var popped = this.contextData.saved[this.contextData.cArrPos];\r\n  var i;\r\n  var arr = this.contextData.cTr.props;\r\n  for (i = 0; i < 16; i += 1) {\r\n    arr[i] = popped[i];\r\n  }\r\n  this.canvasContext.setTransform(popped[0], popped[1], popped[4], popped[5], popped[12], popped[13]);\r\n  popped = this.contextData.savedOp[this.contextData.cArrPos];\r\n  this.contextData.cO = popped;\r\n  if (this.globalData.currentGlobalAlpha !== popped) {\r\n    this.canvasContext.globalAlpha = popped;\r\n    this.globalData.currentGlobalAlpha = popped;\r\n  }\r\n};\r\n\r\nCanvasRenderer.prototype.configAnimation = function (animData) {\r\n  if (this.animationItem.wrapper) {\r\n    this.animationItem.container = createTag('canvas');\r\n    var containerStyle = this.animationItem.container.style;\r\n    containerStyle.width = '100%';\r\n    containerStyle.height = '100%';\r\n    var origin = '0px 0px 0px';\r\n    containerStyle.transformOrigin = origin;\r\n    containerStyle.mozTransformOrigin = origin;\r\n    containerStyle.webkitTransformOrigin = origin;\r\n    containerStyle['-webkit-transform'] = origin;\r\n    this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n    this.canvasContext = this.animationItem.container.getContext('2d');\r\n    if (this.renderConfig.className) {\r\n      this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    if (this.renderConfig.id) {\r\n      this.animationItem.container.setAttribute('id', this.renderConfig.id);\r\n    }\r\n  } else {\r\n    this.canvasContext = this.renderConfig.context;\r\n  }\r\n  this.data = animData;\r\n  this.layers = animData.layers;\r\n  this.transformCanvas = {\r\n    w: animData.w,\r\n    h: animData.h,\r\n    sx: 0,\r\n    sy: 0,\r\n    tx: 0,\r\n    ty: 0,\r\n  };\r\n  this.setupGlobalData(animData, document.body);\r\n  this.globalData.canvasContext = this.canvasContext;\r\n  this.globalData.renderer = this;\r\n  this.globalData.isDashed = false;\r\n  this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n  this.globalData.transformCanvas = this.transformCanvas;\r\n  this.elements = createSizedArray(animData.layers.length);\r\n\r\n  this.updateContainerSize();\r\n};\r\n\r\nCanvasRenderer.prototype.updateContainerSize = function () {\r\n  this.reset();\r\n  var elementWidth;\r\n  var elementHeight;\r\n  if (this.animationItem.wrapper && this.animationItem.container) {\r\n    elementWidth = this.animationItem.wrapper.offsetWidth;\r\n    elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    this.animationItem.container.setAttribute('width', elementWidth * this.renderConfig.dpr);\r\n    this.animationItem.container.setAttribute('height', elementHeight * this.renderConfig.dpr);\r\n  } else {\r\n    elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\r\n    elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\r\n  }\r\n  var elementRel;\r\n  var animationRel;\r\n  if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\r\n    var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n    var fillType = par[1] || 'meet';\r\n    var pos = par[0] || 'xMidYMid';\r\n    var xPos = pos.substr(0, 4);\r\n    var yPos = pos.substr(4);\r\n    elementRel = elementWidth / elementHeight;\r\n    animationRel = this.transformCanvas.w / this.transformCanvas.h;\r\n    if ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice')) {\r\n      this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n      this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n    } else {\r\n      this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n      this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n    }\r\n\r\n    if (xPos === 'xMid' && ((animationRel < elementRel && fillType === 'meet') || (animationRel > elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.tx = ((elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2) * this.renderConfig.dpr;\r\n    } else if (xPos === 'xMax' && ((animationRel < elementRel && fillType === 'meet') || (animationRel > elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\r\n    } else {\r\n      this.transformCanvas.tx = 0;\r\n    }\r\n    if (yPos === 'YMid' && ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.ty = ((elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2) * this.renderConfig.dpr;\r\n    } else if (yPos === 'YMax' && ((animationRel > elementRel && fillType === 'meet') || (animationRel < elementRel && fillType === 'slice'))) {\r\n      this.transformCanvas.ty = ((elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w))) * this.renderConfig.dpr;\r\n    } else {\r\n      this.transformCanvas.ty = 0;\r\n    }\r\n  } else if (this.renderConfig.preserveAspectRatio === 'none') {\r\n    this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\r\n    this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\r\n    this.transformCanvas.tx = 0;\r\n    this.transformCanvas.ty = 0;\r\n  } else {\r\n    this.transformCanvas.sx = this.renderConfig.dpr;\r\n    this.transformCanvas.sy = this.renderConfig.dpr;\r\n    this.transformCanvas.tx = 0;\r\n    this.transformCanvas.ty = 0;\r\n  }\r\n  this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\r\n  /* var i, len = this.elements.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.elements[i] && this.elements[i].data.ty === 0){\r\n            this.elements[i].resize(this.globalData.transformCanvas);\r\n        }\r\n    } */\r\n  this.ctxTransform(this.transformCanvas.props);\r\n  this.canvasContext.beginPath();\r\n  this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n  this.canvasContext.closePath();\r\n  this.canvasContext.clip();\r\n\r\n  this.renderFrame(this.renderedFrame, true);\r\n};\r\n\r\nCanvasRenderer.prototype.destroy = function () {\r\n  if (this.renderConfig.clearCanvas && this.animationItem.wrapper) {\r\n    this.animationItem.wrapper.innerText = '';\r\n  }\r\n  var i;\r\n  var len = this.layers ? this.layers.length : 0;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.elements.length = 0;\r\n  this.globalData.canvasContext = null;\r\n  this.animationItem.container = null;\r\n  this.destroyed = true;\r\n};\r\n\r\nCanvasRenderer.prototype.renderFrame = function (num, forceRender) {\r\n  if ((this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender) || this.destroyed || num === -1) {\r\n    return;\r\n  }\r\n  this.renderedFrame = num;\r\n  this.globalData.frameNum = num - this.animationItem._isFirstFrame;\r\n  this.globalData.frameId += 1;\r\n  this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\r\n  this.globalData.projectInterface.currentFrame = num;\r\n\r\n  // console.log('--------');\r\n  // console.log('NEW: ',num);\r\n  var i;\r\n  var len = this.layers.length;\r\n  if (!this.completeLayers) {\r\n    this.checkLayers(num);\r\n  }\r\n\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].prepareFrame(num - this.layers[i].st);\r\n    }\r\n  }\r\n  if (this.globalData._mdf) {\r\n    if (this.renderConfig.clearCanvas === true) {\r\n      this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n    } else {\r\n      this.save();\r\n    }\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      if (this.completeLayers || this.elements[i]) {\r\n        this.elements[i].renderFrame();\r\n      }\r\n    }\r\n    if (this.renderConfig.clearCanvas !== true) {\r\n      this.restore();\r\n    }\r\n  }\r\n};\r\n\r\nCanvasRenderer.prototype.buildItem = function (pos) {\r\n  var elements = this.elements;\r\n  if (elements[pos] || this.layers[pos].ty === 99) {\r\n    return;\r\n  }\r\n  var element = this.createItem(this.layers[pos], this, this.globalData);\r\n  elements[pos] = element;\r\n  element.initExpressions();\r\n  /* if(this.layers[pos].ty === 0){\r\n        element.resize(this.globalData.transformCanvas);\r\n    } */\r\n};\r\n\r\nCanvasRenderer.prototype.checkPendingElements = function () {\r\n  while (this.pendingElements.length) {\r\n    var element = this.pendingElements.pop();\r\n    element.checkParenting();\r\n  }\r\n};\r\n\r\nCanvasRenderer.prototype.hide = function () {\r\n  this.animationItem.container.style.display = 'none';\r\n};\r\n\r\nCanvasRenderer.prototype.show = function () {\r\n  this.animationItem.container.style.display = 'block';\r\n};\r\n\r\n/* global extendPrototype, BaseRenderer, SVGRenderer, SVGShapeElement, HShapeElement, SVGTextLottieElement,\r\nHTextElement, HCameraElement, IImageElement, HImageElement, SVGCompElement, HCompElement, ISolidElement,\r\nHSolidElement, styleDiv, createTag, createNS */\r\n\r\nfunction HybridRenderer(animationItem, config) {\r\n  this.animationItem = animationItem;\r\n  this.layers = null;\r\n  this.renderedFrame = -1;\r\n  this.renderConfig = {\r\n    className: (config && config.className) || '',\r\n    imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n    hideOnTransparent: !(config && config.hideOnTransparent === false),\r\n    filterSize: {\r\n      width: (config && config.filterSize && config.filterSize.width) || '400%',\r\n      height: (config && config.filterSize && config.filterSize.height) || '400%',\r\n      x: (config && config.filterSize && config.filterSize.x) || '-100%',\r\n      y: (config && config.filterSize && config.filterSize.y) || '-100%',\r\n    },\r\n  };\r\n  this.globalData = {\r\n    _mdf: false,\r\n    frameNum: -1,\r\n    renderConfig: this.renderConfig,\r\n  };\r\n  this.pendingElements = [];\r\n  this.elements = [];\r\n  this.threeDElements = [];\r\n  this.destroyed = false;\r\n  this.camera = null;\r\n  this.supports3d = true;\r\n  this.rendererType = 'html';\r\n}\r\n\r\nextendPrototype([BaseRenderer], HybridRenderer);\r\n\r\nHybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\nHybridRenderer.prototype.checkPendingElements = function () {\r\n  while (this.pendingElements.length) {\r\n    var element = this.pendingElements.pop();\r\n    element.checkParenting();\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.appendElementInPos = function (element, pos) {\r\n  var newDOMElement = element.getBaseElement();\r\n  if (!newDOMElement) {\r\n    return;\r\n  }\r\n  var layer = this.layers[pos];\r\n  if (!layer.ddd || !this.supports3d) {\r\n    if (this.threeDElements) {\r\n      this.addTo3dContainer(newDOMElement, pos);\r\n    } else {\r\n      var i = 0;\r\n      var nextDOMElement;\r\n      var nextLayer;\r\n      var tmpDOMElement;\r\n      while (i < pos) {\r\n        if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement) {\r\n          nextLayer = this.elements[i];\r\n          tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n          nextDOMElement = tmpDOMElement || nextDOMElement;\r\n        }\r\n        i += 1;\r\n      }\r\n      if (nextDOMElement) {\r\n        if (!layer.ddd || !this.supports3d) {\r\n          this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n        }\r\n      } else if (!layer.ddd || !this.supports3d) {\r\n        this.layerElement.appendChild(newDOMElement);\r\n      }\r\n    }\r\n  } else {\r\n    this.addTo3dContainer(newDOMElement, pos);\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.createShape = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGShapeElement(data, this.globalData, this);\r\n  }\r\n  return new HShapeElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createText = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGTextLottieElement(data, this.globalData, this);\r\n  }\r\n  return new HTextElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createCamera = function (data) {\r\n  this.camera = new HCameraElement(data, this.globalData, this);\r\n  return this.camera;\r\n};\r\n\r\nHybridRenderer.prototype.createImage = function (data) {\r\n  if (!this.supports3d) {\r\n    return new IImageElement(data, this.globalData, this);\r\n  }\r\n  return new HImageElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createComp = function (data) {\r\n  if (!this.supports3d) {\r\n    return new SVGCompElement(data, this.globalData, this);\r\n  }\r\n  return new HCompElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createSolid = function (data) {\r\n  if (!this.supports3d) {\r\n    return new ISolidElement(data, this.globalData, this);\r\n  }\r\n  return new HSolidElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nHybridRenderer.prototype.getThreeDContainerByPos = function (pos) {\r\n  var i = 0;\r\n  var len = this.threeDElements.length;\r\n  while (i < len) {\r\n    if (this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n      return this.threeDElements[i].perspectiveElem;\r\n    }\r\n    i += 1;\r\n  }\r\n  return null;\r\n};\r\n\r\nHybridRenderer.prototype.createThreeDContainer = function (pos, type) {\r\n  var perspectiveElem = createTag('div');\r\n  var style;\r\n  var containerStyle;\r\n  styleDiv(perspectiveElem);\r\n  var container = createTag('div');\r\n  styleDiv(container);\r\n  if (type === '3d') {\r\n    style = perspectiveElem.style;\r\n    style.width = this.globalData.compSize.w + 'px';\r\n    style.height = this.globalData.compSize.h + 'px';\r\n    var center = '50% 50%';\r\n    style.webkitTransformOrigin = center;\r\n    style.mozTransformOrigin = center;\r\n    style.transformOrigin = center;\r\n    containerStyle = container.style;\r\n    var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n    containerStyle.transform = matrix;\r\n    containerStyle.webkitTransform = matrix;\r\n  }\r\n\r\n  perspectiveElem.appendChild(container);\r\n  // this.resizerElem.appendChild(perspectiveElem);\r\n  var threeDContainerData = {\r\n    container: container,\r\n    perspectiveElem: perspectiveElem,\r\n    startPos: pos,\r\n    endPos: pos,\r\n    type: type,\r\n  };\r\n  this.threeDElements.push(threeDContainerData);\r\n  return threeDContainerData;\r\n};\r\n\r\nHybridRenderer.prototype.build3dContainers = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  var lastThreeDContainerData;\r\n  var currentContainer = '';\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.layers[i].ddd && this.layers[i].ty !== 3) {\r\n      if (currentContainer !== '3d') {\r\n        currentContainer = '3d';\r\n        lastThreeDContainerData = this.createThreeDContainer(i, '3d');\r\n      }\r\n      lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n    } else {\r\n      if (currentContainer !== '2d') {\r\n        currentContainer = '2d';\r\n        lastThreeDContainerData = this.createThreeDContainer(i, '2d');\r\n      }\r\n      lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\r\n    }\r\n  }\r\n  len = this.threeDElements.length;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.addTo3dContainer = function (elem, pos) {\r\n  var i = 0;\r\n  var len = this.threeDElements.length;\r\n  while (i < len) {\r\n    if (pos <= this.threeDElements[i].endPos) {\r\n      var j = this.threeDElements[i].startPos;\r\n      var nextElement;\r\n      while (j < pos) {\r\n        if (this.elements[j] && this.elements[j].getBaseElement) {\r\n          nextElement = this.elements[j].getBaseElement();\r\n        }\r\n        j += 1;\r\n      }\r\n      if (nextElement) {\r\n        this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n      } else {\r\n        this.threeDElements[i].container.appendChild(elem);\r\n      }\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.configAnimation = function (animData) {\r\n  var resizerElem = createTag('div');\r\n  var wrapper = this.animationItem.wrapper;\r\n  var style = resizerElem.style;\r\n  style.width = animData.w + 'px';\r\n  style.height = animData.h + 'px';\r\n  this.resizerElem = resizerElem;\r\n  styleDiv(resizerElem);\r\n  style.transformStyle = 'flat';\r\n  style.mozTransformStyle = 'flat';\r\n  style.webkitTransformStyle = 'flat';\r\n  if (this.renderConfig.className) {\r\n    resizerElem.setAttribute('class', this.renderConfig.className);\r\n  }\r\n  wrapper.appendChild(resizerElem);\r\n\r\n  style.overflow = 'hidden';\r\n  var svg = createNS('svg');\r\n  svg.setAttribute('width', '1');\r\n  svg.setAttribute('height', '1');\r\n  styleDiv(svg);\r\n  this.resizerElem.appendChild(svg);\r\n  var defs = createNS('defs');\r\n  svg.appendChild(defs);\r\n  this.data = animData;\r\n  // Mask animation\r\n  this.setupGlobalData(animData, svg);\r\n  this.globalData.defs = defs;\r\n  this.layers = animData.layers;\r\n  this.layerElement = this.resizerElem;\r\n  this.build3dContainers();\r\n  this.updateContainerSize();\r\n};\r\n\r\nHybridRenderer.prototype.destroy = function () {\r\n  if (this.animationItem.wrapper) {\r\n    this.animationItem.wrapper.innerText = '';\r\n  }\r\n  this.animationItem.container = null;\r\n  this.globalData.defs = null;\r\n  var i;\r\n  var len = this.layers ? this.layers.length : 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.elements[i].destroy();\r\n  }\r\n  this.elements.length = 0;\r\n  this.destroyed = true;\r\n  this.animationItem = null;\r\n};\r\n\r\nHybridRenderer.prototype.updateContainerSize = function () {\r\n  var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n  var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n  var elementRel = elementWidth / elementHeight;\r\n  var animationRel = this.globalData.compSize.w / this.globalData.compSize.h;\r\n  var sx;\r\n  var sy;\r\n  var tx;\r\n  var ty;\r\n  if (animationRel > elementRel) {\r\n    sx = elementWidth / (this.globalData.compSize.w);\r\n    sy = elementWidth / (this.globalData.compSize.w);\r\n    tx = 0;\r\n    ty = ((elementHeight - this.globalData.compSize.h * (elementWidth / this.globalData.compSize.w)) / 2);\r\n  } else {\r\n    sx = elementHeight / (this.globalData.compSize.h);\r\n    sy = elementHeight / (this.globalData.compSize.h);\r\n    tx = (elementWidth - this.globalData.compSize.w * (elementHeight / this.globalData.compSize.h)) / 2;\r\n    ty = 0;\r\n  }\r\n  var style = this.resizerElem.style;\r\n  style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,' + sy + ',0,0,0,0,1,0,' + tx + ',' + ty + ',0,1)';\r\n  style.transform = style.webkitTransform;\r\n};\r\n\r\nHybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\nHybridRenderer.prototype.hide = function () {\r\n  this.resizerElem.style.display = 'none';\r\n};\r\n\r\nHybridRenderer.prototype.show = function () {\r\n  this.resizerElem.style.display = 'block';\r\n};\r\n\r\nHybridRenderer.prototype.initItems = function () {\r\n  this.buildAllItems();\r\n  if (this.camera) {\r\n    this.camera.setup();\r\n  } else {\r\n    var cWidth = this.globalData.compSize.w;\r\n    var cHeight = this.globalData.compSize.h;\r\n    var i;\r\n    var len = this.threeDElements.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      var style = this.threeDElements[i].perspectiveElem.style;\r\n      style.webkitPerspective = Math.sqrt(Math.pow(cWidth, 2) + Math.pow(cHeight, 2)) + 'px';\r\n      style.perspective = style.webkitPerspective;\r\n    }\r\n  }\r\n};\r\n\r\nHybridRenderer.prototype.searchExtraCompositions = function (assets) {\r\n  var i;\r\n  var len = assets.length;\r\n  var floatingContainer = createTag('div');\r\n  for (i = 0; i < len; i += 1) {\r\n    if (assets[i].xt) {\r\n      var comp = this.createComp(assets[i], floatingContainer, this.globalData.comp, null);\r\n      comp.initExpressions();\r\n      this.globalData.projectInterface.registerComposition(comp);\r\n    }\r\n  }\r\n};\r\n\r\n/* global createSizedArray, createElementID, PropertyFactory, ShapePropertyFactory, createNS, locationHref */\r\n\r\nfunction MaskElement(data, element, globalData) {\r\n  this.data = data;\r\n  this.element = element;\r\n  this.globalData = globalData;\r\n  this.storedData = [];\r\n  this.masksProperties = this.data.masksProperties || [];\r\n  this.maskElement = null;\r\n  var defs = this.globalData.defs;\r\n  var i;\r\n  var len = this.masksProperties ? this.masksProperties.length : 0;\r\n  this.viewData = createSizedArray(len);\r\n  this.solidPath = '';\r\n\r\n  var path;\r\n  var properties = this.masksProperties;\r\n  var count = 0;\r\n  var currentMasks = [];\r\n  var j;\r\n  var jLen;\r\n  var layerId = createElementID();\r\n  var rect;\r\n  var expansor;\r\n  var feMorph;\r\n  var x;\r\n  var maskType = 'clipPath';\r\n  var maskRef = 'clip-path';\r\n  for (i = 0; i < len; i += 1) {\r\n    if ((properties[i].mode !== 'a' && properties[i].mode !== 'n') || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\r\n      maskType = 'mask';\r\n      maskRef = 'mask';\r\n    }\r\n\r\n    if ((properties[i].mode === 's' || properties[i].mode === 'i') && count === 0) {\r\n      rect = createNS('rect');\r\n      rect.setAttribute('fill', '#ffffff');\r\n      rect.setAttribute('width', this.element.comp.data.w || 0);\r\n      rect.setAttribute('height', this.element.comp.data.h || 0);\r\n      currentMasks.push(rect);\r\n    } else {\r\n      rect = null;\r\n    }\r\n\r\n    path = createNS('path');\r\n    if (properties[i].mode === 'n') {\r\n      // TODO move this to a factory or to a constructor\r\n      this.viewData[i] = {\r\n        op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n        prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n        elem: path,\r\n        lastPath: '',\r\n      };\r\n      defs.appendChild(path);\r\n    } else {\r\n      count += 1;\r\n\r\n      path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n      path.setAttribute('clip-rule', 'nonzero');\r\n      var filterID;\r\n\r\n      if (properties[i].x.k !== 0) {\r\n        maskType = 'mask';\r\n        maskRef = 'mask';\r\n        x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\r\n        filterID = createElementID();\r\n        expansor = createNS('filter');\r\n        expansor.setAttribute('id', filterID);\r\n        feMorph = createNS('feMorphology');\r\n        feMorph.setAttribute('operator', 'erode');\r\n        feMorph.setAttribute('in', 'SourceGraphic');\r\n        feMorph.setAttribute('radius', '0');\r\n        expansor.appendChild(feMorph);\r\n        defs.appendChild(expansor);\r\n        path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\r\n      } else {\r\n        feMorph = null;\r\n        x = null;\r\n      }\r\n\r\n      // TODO move this to a factory or to a constructor\r\n      this.storedData[i] = {\r\n        elem: path,\r\n        x: x,\r\n        expan: feMorph,\r\n        lastPath: '',\r\n        lastOperator: '',\r\n        filterId: filterID,\r\n        lastRadius: 0,\r\n      };\r\n      if (properties[i].mode === 'i') {\r\n        jLen = currentMasks.length;\r\n        var g = createNS('g');\r\n        for (j = 0; j < jLen; j += 1) {\r\n          g.appendChild(currentMasks[j]);\r\n        }\r\n        var mask = createNS('mask');\r\n        mask.setAttribute('mask-type', 'alpha');\r\n        mask.setAttribute('id', layerId + '_' + count);\r\n        mask.appendChild(path);\r\n        defs.appendChild(mask);\r\n        g.setAttribute('mask', 'url(' + locationHref + '#' + layerId + '_' + count + ')');\r\n\r\n        currentMasks.length = 0;\r\n        currentMasks.push(g);\r\n      } else {\r\n        currentMasks.push(path);\r\n      }\r\n      if (properties[i].inv && !this.solidPath) {\r\n        this.solidPath = this.createLayerSolidPath();\r\n      }\r\n      // TODO move this to a factory or to a constructor\r\n      this.viewData[i] = {\r\n        elem: path,\r\n        lastPath: '',\r\n        op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\r\n        prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\r\n        invRect: rect,\r\n      };\r\n      if (!this.viewData[i].prop.k) {\r\n        this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  this.maskElement = createNS(maskType);\r\n\r\n  len = currentMasks.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.maskElement.appendChild(currentMasks[i]);\r\n  }\r\n\r\n  if (count > 0) {\r\n    this.maskElement.setAttribute('id', layerId);\r\n    this.element.maskedElement.setAttribute(maskRef, 'url(' + locationHref + '#' + layerId + ')');\r\n    defs.appendChild(this.maskElement);\r\n  }\r\n  if (this.viewData.length) {\r\n    this.element.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nMaskElement.prototype.getMaskProperty = function (pos) {\r\n  return this.viewData[pos].prop;\r\n};\r\n\r\nMaskElement.prototype.renderFrame = function (isFirstFrame) {\r\n  var finalMat = this.element.finalTransform.mat;\r\n  var i;\r\n  var len = this.masksProperties.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.viewData[i].prop._mdf || isFirstFrame) {\r\n      this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\r\n    }\r\n    if (this.viewData[i].op._mdf || isFirstFrame) {\r\n      this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\r\n    }\r\n    if (this.masksProperties[i].mode !== 'n') {\r\n      if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\r\n        this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS());\r\n      }\r\n      if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\r\n        var feMorph = this.storedData[i].expan;\r\n        if (this.storedData[i].x.v < 0) {\r\n          if (this.storedData[i].lastOperator !== 'erode') {\r\n            this.storedData[i].lastOperator = 'erode';\r\n            this.storedData[i].elem.setAttribute('filter', 'url(' + locationHref + '#' + this.storedData[i].filterId + ')');\r\n          }\r\n          feMorph.setAttribute('radius', -this.storedData[i].x.v);\r\n        } else {\r\n          if (this.storedData[i].lastOperator !== 'dilate') {\r\n            this.storedData[i].lastOperator = 'dilate';\r\n            this.storedData[i].elem.setAttribute('filter', null);\r\n          }\r\n          this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nMaskElement.prototype.getMaskelement = function () {\r\n  return this.maskElement;\r\n};\r\n\r\nMaskElement.prototype.createLayerSolidPath = function () {\r\n  var path = 'M0,0 ';\r\n  path += ' h' + this.globalData.compSize.w;\r\n  path += ' v' + this.globalData.compSize.h;\r\n  path += ' h-' + this.globalData.compSize.w;\r\n  path += ' v-' + this.globalData.compSize.h + ' ';\r\n  return path;\r\n};\r\n\r\nMaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\r\n  var pathString = ' M' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n  var i;\r\n  var len;\r\n  len = pathNodes._length;\r\n  for (i = 1; i < len; i += 1) {\r\n    // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n    pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + ' ' + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\r\n  }\r\n  // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n  if (pathNodes.c && len > 1) {\r\n    pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + ' ' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\r\n  }\r\n  // pathNodes.__renderedString = pathString;\r\n\r\n  if (viewData.lastPath !== pathString) {\r\n    var pathShapeValue = '';\r\n    if (viewData.elem) {\r\n      if (pathNodes.c) {\r\n        pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n      }\r\n      viewData.elem.setAttribute('d', pathShapeValue);\r\n    }\r\n    viewData.lastPath = pathString;\r\n  }\r\n};\r\n\r\nMaskElement.prototype.destroy = function () {\r\n  this.element = null;\r\n  this.globalData = null;\r\n  this.maskElement = null;\r\n  this.data = null;\r\n  this.masksProperties = null;\r\n};\r\n\r\n/**\r\n * @file\r\n * Handles AE's layer parenting property.\r\n *\r\n */\r\n\r\nfunction HierarchyElement() {}\r\n\r\nHierarchyElement.prototype = {\r\n  /**\r\n     * @function\r\n     * Initializes hierarchy properties\r\n     *\r\n     */\r\n  initHierarchy: function () {\r\n    // element's parent list\r\n    this.hierarchy = [];\r\n    // if element is parent of another layer _isParent will be true\r\n    this._isParent = false;\r\n    this.checkParenting();\r\n  },\r\n  /**\r\n     * @function\r\n     * Sets layer's hierarchy.\r\n     * @param {array} hierarch\r\n     * layer's parent list\r\n     *\r\n     */\r\n  setHierarchy: function (hierarchy) {\r\n    this.hierarchy = hierarchy;\r\n  },\r\n  /**\r\n     * @function\r\n     * Sets layer as parent.\r\n     *\r\n     */\r\n  setAsParent: function () {\r\n    this._isParent = true;\r\n  },\r\n  /**\r\n     * @function\r\n     * Searches layer's parenting chain\r\n     *\r\n     */\r\n  checkParenting: function () {\r\n    if (this.data.parent !== undefined) {\r\n      this.comp.buildElementParenting(this, this.data.parent, []);\r\n    }\r\n  },\r\n};\r\n\r\n/**\r\n * @file\r\n * Handles element's layer frame update.\r\n * Checks layer in point and out point\r\n *\r\n */\r\n\r\nfunction FrameElement() {}\r\n\r\nFrameElement.prototype = {\r\n  /**\r\n     * @function\r\n     * Initializes frame related properties.\r\n     *\r\n     */\r\n  initFrame: function () {\r\n    // set to true when inpoint is rendered\r\n    this._isFirstFrame = false;\r\n    // list of animated properties\r\n    this.dynamicProperties = [];\r\n    // If layer has been modified in current tick this will be true\r\n    this._mdf = false;\r\n  },\r\n  /**\r\n     * @function\r\n     * Calculates all dynamic values\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * @param {boolean} isVisible\r\n     * if layers is currently in range\r\n     *\r\n     */\r\n  prepareProperties: function (num, isVisible) {\r\n    var i;\r\n    var len = this.dynamicProperties.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (isVisible || (this._isParent && this.dynamicProperties[i].propType === 'transform')) {\r\n        this.dynamicProperties[i].getValue();\r\n        if (this.dynamicProperties[i]._mdf) {\r\n          this.globalData._mdf = true;\r\n          this._mdf = true;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  addDynamicProperty: function (prop) {\r\n    if (this.dynamicProperties.indexOf(prop) === -1) {\r\n      this.dynamicProperties.push(prop);\r\n    }\r\n  },\r\n};\r\n\r\n/* global TransformPropertyFactory, Matrix */\r\n\r\nfunction TransformElement() {}\r\n\r\nTransformElement.prototype = {\r\n  initTransform: function () {\r\n    this.finalTransform = {\r\n      mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : { o: 0 },\r\n      _matMdf: false,\r\n      _opMdf: false,\r\n      mat: new Matrix(),\r\n    };\r\n    if (this.data.ao) {\r\n      this.finalTransform.mProp.autoOriented = true;\r\n    }\r\n\r\n    // TODO: check TYPE 11: Guided elements\r\n    if (this.data.ty !== 11) {\r\n      // this.createElements();\r\n    }\r\n  },\r\n  renderTransform: function () {\r\n    this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n    this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n    if (this.hierarchy) {\r\n      var mat;\r\n      var finalMat = this.finalTransform.mat;\r\n      var i = 0;\r\n      var len = this.hierarchy.length;\r\n      // Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n      if (!this.finalTransform._matMdf) {\r\n        while (i < len) {\r\n          if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n            this.finalTransform._matMdf = true;\r\n            break;\r\n          }\r\n          i += 1;\r\n        }\r\n      }\r\n\r\n      if (this.finalTransform._matMdf) {\r\n        mat = this.finalTransform.mProp.v.props;\r\n        finalMat.cloneFromProps(mat);\r\n        for (i = 0; i < len; i += 1) {\r\n          mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n          finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\r\n        }\r\n      }\r\n    }\r\n  },\r\n  globalToLocal: function (pt) {\r\n    var transforms = [];\r\n    transforms.push(this.finalTransform);\r\n    var flag = true;\r\n    var comp = this.comp;\r\n    while (flag) {\r\n      if (comp.finalTransform) {\r\n        if (comp.data.hasMask) {\r\n          transforms.splice(0, 0, comp.finalTransform);\r\n        }\r\n        comp = comp.comp;\r\n      } else {\r\n        flag = false;\r\n      }\r\n    }\r\n    var i;\r\n    var len = transforms.length;\r\n    var ptNew;\r\n    for (i = 0; i < len; i += 1) {\r\n      ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\r\n      // ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n      pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n    }\r\n    return pt;\r\n  },\r\n  mHelper: new Matrix(),\r\n};\r\n\r\nfunction RenderableElement() {\r\n\r\n}\r\n\r\nRenderableElement.prototype = {\r\n  initRenderable: function () {\r\n    // layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n    this.isInRange = false;\r\n    // layer's display state\r\n    this.hidden = false;\r\n    // If layer's transparency equals 0, it can be hidden\r\n    this.isTransparent = false;\r\n    // list of animated components\r\n    this.renderableComponents = [];\r\n  },\r\n  addRenderableComponent: function (component) {\r\n    if (this.renderableComponents.indexOf(component) === -1) {\r\n      this.renderableComponents.push(component);\r\n    }\r\n  },\r\n  removeRenderableComponent: function (component) {\r\n    if (this.renderableComponents.indexOf(component) !== -1) {\r\n      this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\r\n    }\r\n  },\r\n  prepareRenderableFrame: function (num) {\r\n    this.checkLayerLimits(num);\r\n  },\r\n  checkTransparency: function () {\r\n    if (this.finalTransform.mProp.o.v <= 0) {\r\n      if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\r\n        this.isTransparent = true;\r\n        this.hide();\r\n      }\r\n    } else if (this.isTransparent) {\r\n      this.isTransparent = false;\r\n      this.show();\r\n    }\r\n  },\r\n  /**\r\n     * @function\r\n     * Initializes frame related properties.\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     *\r\n     */\r\n  checkLayerLimits: function (num) {\r\n    if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\r\n      if (this.isInRange !== true) {\r\n        this.globalData._mdf = true;\r\n        this._mdf = true;\r\n        this.isInRange = true;\r\n        this.show();\r\n      }\r\n    } else if (this.isInRange !== false) {\r\n      this.globalData._mdf = true;\r\n      this.isInRange = false;\r\n      this.hide();\r\n    }\r\n  },\r\n  renderRenderable: function () {\r\n    var i;\r\n    var len = this.renderableComponents.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.renderableComponents[i].renderFrame(this._isFirstFrame);\r\n    }\r\n    /* this.maskManager.renderFrame(this.finalTransform.mat);\r\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame); */\r\n  },\r\n  sourceRectAtTime: function () {\r\n    return {\r\n      top: 0,\r\n      left: 0,\r\n      width: 100,\r\n      height: 100,\r\n    };\r\n  },\r\n  getLayerSize: function () {\r\n    if (this.data.ty === 5) {\r\n      return { w: this.data.textData.width, h: this.data.textData.height };\r\n    }\r\n    return { w: this.data.width, h: this.data.height };\r\n  },\r\n};\r\n\r\n/* global extendPrototype, RenderableElement, createProxyFunction */\r\n\r\nfunction RenderableDOMElement() {}\r\n\r\n(function () {\r\n  var _prototype = {\r\n    initElement: function (data, globalData, comp) {\r\n      this.initFrame();\r\n      this.initBaseData(data, globalData, comp);\r\n      this.initTransform(data, globalData, comp);\r\n      this.initHierarchy();\r\n      this.initRenderable();\r\n      this.initRendererElement();\r\n      this.createContainerElements();\r\n      this.createRenderableComponents();\r\n      this.createContent();\r\n      this.hide();\r\n    },\r\n    hide: function () {\r\n      if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n        var elem = this.baseElement || this.layerElement;\r\n        elem.style.display = 'none';\r\n        this.hidden = true;\r\n      }\r\n    },\r\n    show: function () {\r\n      if (this.isInRange && !this.isTransparent) {\r\n        if (!this.data.hd) {\r\n          var elem = this.baseElement || this.layerElement;\r\n          elem.style.display = 'block';\r\n        }\r\n        this.hidden = false;\r\n        this._isFirstFrame = true;\r\n      }\r\n    },\r\n    renderFrame: function () {\r\n      // If it is exported as hidden (data.hd === true) no need to render\r\n      // If it is not visible no need to render\r\n      if (this.data.hd || this.hidden) {\r\n        return;\r\n      }\r\n      this.renderTransform();\r\n      this.renderRenderable();\r\n      this.renderElement();\r\n      this.renderInnerContent();\r\n      if (this._isFirstFrame) {\r\n        this._isFirstFrame = false;\r\n      }\r\n    },\r\n    renderInnerContent: function () {},\r\n    prepareFrame: function (num) {\r\n      this._mdf = false;\r\n      this.prepareRenderableFrame(num);\r\n      this.prepareProperties(num, this.isInRange);\r\n      this.checkTransparency();\r\n    },\r\n    destroy: function () {\r\n      this.innerElem = null;\r\n      this.destroyBaseElement();\r\n    },\r\n  };\r\n  extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n}());\r\n\r\n/* exported ProcessedElement */\r\n\r\nfunction ProcessedElement(element, position) {\r\n  this.elem = element;\r\n  this.pos = position;\r\n}\r\n\r\n/* global createNS */\r\n\r\nfunction SVGStyleData(data, level) {\r\n  this.data = data;\r\n  this.type = data.ty;\r\n  this.d = '';\r\n  this.lvl = level;\r\n  this._mdf = false;\r\n  this.closed = data.hd === true;\r\n  this.pElem = createNS('path');\r\n  this.msElem = null;\r\n}\r\n\r\nSVGStyleData.prototype.reset = function () {\r\n  this.d = '';\r\n  this._mdf = false;\r\n};\r\n\r\nfunction SVGShapeData(transformers, level, shape) {\r\n  this.caches = [];\r\n  this.styles = [];\r\n  this.transformers = transformers;\r\n  this.lStr = '';\r\n  this.sh = shape;\r\n  this.lvl = level;\r\n  // TODO find if there are some cases where _isAnimated can be false.\r\n  // For now, since shapes add up with other shapes. They have to be calculated every time.\r\n  // One way of finding out is checking if all styles associated to this shape depend only of this shape\r\n  this._isAnimated = !!shape.k;\r\n  // TODO: commenting this for now since all shapes are animated\r\n  var i = 0;\r\n  var len = transformers.length;\r\n  while (i < len) {\r\n    if (transformers[i].mProps.dynamicProperties.length) {\r\n      this._isAnimated = true;\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n}\r\n\r\nSVGShapeData.prototype.setAsAnimated = function () {\r\n  this._isAnimated = true;\r\n};\r\n\r\n/* exported SVGTransformData */\r\n\r\nfunction SVGTransformData(mProps, op, container) {\r\n  this.transform = {\r\n    mProps: mProps,\r\n    op: op,\r\n    container: container,\r\n  };\r\n  this.elements = [];\r\n  this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\r\n}\r\n\r\n/* global DashProperty, PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\n\r\nfunction SVGStrokeStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n  this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n  this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n  this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n  this.style = styleOb;\r\n  this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\r\n\r\n/* global PropertyFactory, extendPrototype, DynamicPropertyContainer */\r\n\r\nfunction SVGFillStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n  this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\r\n  this.style = styleOb;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGFillStyleData);\r\n\r\n/* global PropertyFactory, degToRads, GradientProperty, createElementID, createNS, locationHref,\r\nextendPrototype, DynamicPropertyContainer */\r\n\r\nfunction SVGGradientFillStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.initGradientData(elem, data, styleOb);\r\n}\r\n\r\nSVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\r\n  this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\r\n  this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\r\n  this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\r\n  this.h = PropertyFactory.getProp(elem, data.h || { k: 0 }, 0, 0.01, this);\r\n  this.a = PropertyFactory.getProp(elem, data.a || { k: 0 }, 0, degToRads, this);\r\n  this.g = new GradientProperty(elem, data.g, this);\r\n  this.style = styleOb;\r\n  this.stops = [];\r\n  this.setGradientData(styleOb.pElem, data);\r\n  this.setGradientOpacity(data, styleOb);\r\n  this._isAnimated = !!this._isAnimated;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\r\n  var gradientId = createElementID();\r\n  var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n  gfill.setAttribute('id', gradientId);\r\n  gfill.setAttribute('spreadMethod', 'pad');\r\n  gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n  var stops = [];\r\n  var stop;\r\n  var j;\r\n  var jLen;\r\n  jLen = data.g.p * 4;\r\n  for (j = 0; j < jLen; j += 4) {\r\n    stop = createNS('stop');\r\n    gfill.appendChild(stop);\r\n    stops.push(stop);\r\n  }\r\n  pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + locationHref + '#' + gradientId + ')');\r\n\r\n  this.gf = gfill;\r\n  this.cst = stops;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\r\n  if (this.g._hasOpacity && !this.g._collapsable) {\r\n    var stop;\r\n    var j;\r\n    var jLen;\r\n    var mask = createNS('mask');\r\n    var maskElement = createNS('path');\r\n    mask.appendChild(maskElement);\r\n    var opacityId = createElementID();\r\n    var maskId = createElementID();\r\n    mask.setAttribute('id', maskId);\r\n    var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    opFill.setAttribute('id', opacityId);\r\n    opFill.setAttribute('spreadMethod', 'pad');\r\n    opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n    jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n    var stops = this.stops;\r\n    for (j = data.g.p * 4; j < jLen; j += 2) {\r\n      stop = createNS('stop');\r\n      stop.setAttribute('stop-color', 'rgb(255,255,255)');\r\n      opFill.appendChild(stop);\r\n      stops.push(stop);\r\n    }\r\n    maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + locationHref + '#' + opacityId + ')');\r\n    this.of = opFill;\r\n    this.ms = mask;\r\n    this.ost = stops;\r\n    this.maskId = maskId;\r\n    styleOb.msElem = maskElement;\r\n  }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\r\n\r\n/* global PropertyFactory, DashProperty, extendPrototype, SVGGradientFillStyleData, DynamicPropertyContainer */\r\n\r\nfunction SVGGradientStrokeStyleData(elem, data, styleOb) {\r\n  this.initDynamicPropertyContainer(elem);\r\n  this.getValue = this.iterateDynamicProperties;\r\n  this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\r\n  this.d = new DashProperty(elem, data.d || {}, 'svg', this);\r\n  this.initGradientData(elem, data, styleOb);\r\n  this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\r\n\r\n/* global createNS */\r\n/* exported ShapeGroupData */\r\n\r\nfunction ShapeGroupData() {\r\n  this.it = [];\r\n  this.prevViewData = [];\r\n  this.gr = createNS('g');\r\n}\r\n\r\n/* global Matrix, buildShapeString, bmFloor */\r\n/* exported SVGElementsRenderer */\r\n\r\nvar SVGElementsRenderer = (function () {\r\n  var _identityMatrix = new Matrix();\r\n  var _matrixHelper = new Matrix();\r\n\r\n  var ob = {\r\n    createRenderFunction: createRenderFunction,\r\n  };\r\n\r\n  function createRenderFunction(data) {\r\n    switch (data.ty) {\r\n      case 'fl':\r\n        return renderFill;\r\n      case 'gf':\r\n        return renderGradient;\r\n      case 'gs':\r\n        return renderGradientStroke;\r\n      case 'st':\r\n        return renderStroke;\r\n      case 'sh':\r\n      case 'el':\r\n      case 'rc':\r\n      case 'sr':\r\n        return renderPath;\r\n      case 'tr':\r\n        return renderContentTransform;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  function renderContentTransform(styleData, itemData, isFirstFrame) {\r\n    if (isFirstFrame || itemData.transform.op._mdf) {\r\n      itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\r\n    }\r\n    if (isFirstFrame || itemData.transform.mProps._mdf) {\r\n      itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\r\n    }\r\n  }\r\n\r\n  function renderPath(styleData, itemData, isFirstFrame) {\r\n    var j;\r\n    var jLen;\r\n    var pathStringTransformed;\r\n    var redraw;\r\n    var pathNodes;\r\n    var l;\r\n    var lLen = itemData.styles.length;\r\n    var lvl = itemData.lvl;\r\n    var paths;\r\n    var mat;\r\n    var props;\r\n    var iterations;\r\n    var k;\r\n    for (l = 0; l < lLen; l += 1) {\r\n      redraw = itemData.sh._mdf || isFirstFrame;\r\n      if (itemData.styles[l].lvl < lvl) {\r\n        mat = _matrixHelper.reset();\r\n        iterations = lvl - itemData.styles[l].lvl;\r\n        k = itemData.transformers.length - 1;\r\n        while (!redraw && iterations > 0) {\r\n          redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n          iterations -= 1;\r\n          k -= 1;\r\n        }\r\n        if (redraw) {\r\n          iterations = lvl - itemData.styles[l].lvl;\r\n          k = itemData.transformers.length - 1;\r\n          while (iterations > 0) {\r\n            props = itemData.transformers[k].mProps.v.props;\r\n            mat.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\r\n            iterations -= 1;\r\n            k -= 1;\r\n          }\r\n        }\r\n      } else {\r\n        mat = _identityMatrix;\r\n      }\r\n      paths = itemData.sh.paths;\r\n      jLen = paths._length;\r\n      if (redraw) {\r\n        pathStringTransformed = '';\r\n        for (j = 0; j < jLen; j += 1) {\r\n          pathNodes = paths.shapes[j];\r\n          if (pathNodes && pathNodes._length) {\r\n            pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n          }\r\n        }\r\n        itemData.caches[l] = pathStringTransformed;\r\n      } else {\r\n        pathStringTransformed = itemData.caches[l];\r\n      }\r\n      itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\r\n      itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n    }\r\n  }\r\n\r\n  function renderFill(styleData, itemData, isFirstFrame) {\r\n    var styleElem = itemData.style;\r\n\r\n    if (itemData.c._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('fill', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n    }\r\n    if (itemData.o._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\r\n    }\r\n  }\r\n\r\n  function renderGradientStroke(styleData, itemData, isFirstFrame) {\r\n    renderGradient(styleData, itemData, isFirstFrame);\r\n    renderStroke(styleData, itemData, isFirstFrame);\r\n  }\r\n\r\n  function renderGradient(styleData, itemData, isFirstFrame) {\r\n    var gfill = itemData.gf;\r\n    var hasOpacity = itemData.g._hasOpacity;\r\n    var pt1 = itemData.s.v;\r\n    var pt2 = itemData.e.v;\r\n\r\n    if (itemData.o._mdf || isFirstFrame) {\r\n      var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n      itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n    }\r\n    if (itemData.s._mdf || isFirstFrame) {\r\n      var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n      var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n      gfill.setAttribute(attr1, pt1[0]);\r\n      gfill.setAttribute(attr2, pt1[1]);\r\n      if (hasOpacity && !itemData.g._collapsable) {\r\n        itemData.of.setAttribute(attr1, pt1[0]);\r\n        itemData.of.setAttribute(attr2, pt1[1]);\r\n      }\r\n    }\r\n    var stops;\r\n    var i;\r\n    var len;\r\n    var stop;\r\n    if (itemData.g._cmdf || isFirstFrame) {\r\n      stops = itemData.cst;\r\n      var cValues = itemData.g.c;\r\n      len = stops.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        stop = stops[i];\r\n        stop.setAttribute('offset', cValues[i * 4] + '%');\r\n        stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\r\n      }\r\n    }\r\n    if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\r\n      var oValues = itemData.g.o;\r\n      if (itemData.g._collapsable) {\r\n        stops = itemData.cst;\r\n      } else {\r\n        stops = itemData.ost;\r\n      }\r\n      len = stops.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        stop = stops[i];\r\n        if (!itemData.g._collapsable) {\r\n          stop.setAttribute('offset', oValues[i * 2] + '%');\r\n        }\r\n        stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n      }\r\n    }\r\n    if (styleData.t === 1) {\r\n      if (itemData.e._mdf || isFirstFrame) {\r\n        gfill.setAttribute('x2', pt2[0]);\r\n        gfill.setAttribute('y2', pt2[1]);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute('x2', pt2[0]);\r\n          itemData.of.setAttribute('y2', pt2[1]);\r\n        }\r\n      }\r\n    } else {\r\n      var rad;\r\n      if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\r\n        rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n        gfill.setAttribute('r', rad);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute('r', rad);\r\n        }\r\n      }\r\n      if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\r\n        if (!rad) {\r\n          rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n        }\r\n        var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n        var percent = itemData.h.v;\r\n        if (percent >= 1) {\r\n          percent = 0.99;\r\n        } else if (percent <= -1) {\r\n          percent = -0.99;\r\n        }\r\n        var dist = rad * percent;\r\n        var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n        var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n        gfill.setAttribute('fx', x);\r\n        gfill.setAttribute('fy', y);\r\n        if (hasOpacity && !itemData.g._collapsable) {\r\n          itemData.of.setAttribute('fx', x);\r\n          itemData.of.setAttribute('fy', y);\r\n        }\r\n      }\r\n      // gfill.setAttribute('fy','200');\r\n    }\r\n  }\r\n\r\n  function renderStroke(styleData, itemData, isFirstFrame) {\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n    if (d && (d._mdf || isFirstFrame) && d.dashStr) {\r\n      styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n      styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n    }\r\n    if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\r\n      styleElem.pElem.setAttribute('stroke', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\r\n    }\r\n    if (itemData.o._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n    }\r\n    if (itemData.w._mdf || isFirstFrame) {\r\n      styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n      if (styleElem.msElem) {\r\n        styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n      }\r\n    }\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\n/* global Matrix */\r\n\r\nfunction ShapeTransformManager() {\r\n  this.sequences = {};\r\n  this.sequenceList = [];\r\n  this.transform_key_count = 0;\r\n}\r\n\r\nShapeTransformManager.prototype = {\r\n  addTransformSequence: function (transforms) {\r\n    var i;\r\n    var len = transforms.length;\r\n    var key = '_';\r\n    for (i = 0; i < len; i += 1) {\r\n      key += transforms[i].transform.key + '_';\r\n    }\r\n    var sequence = this.sequences[key];\r\n    if (!sequence) {\r\n      sequence = {\r\n        transforms: [].concat(transforms),\r\n        finalTransform: new Matrix(),\r\n        _mdf: false,\r\n      };\r\n      this.sequences[key] = sequence;\r\n      this.sequenceList.push(sequence);\r\n    }\r\n    return sequence;\r\n  },\r\n  processSequence: function (sequence, isFirstFrame) {\r\n    var i = 0;\r\n    var len = sequence.transforms.length;\r\n    var _mdf = isFirstFrame;\r\n    while (i < len && !isFirstFrame) {\r\n      if (sequence.transforms[i].transform.mProps._mdf) {\r\n        _mdf = true;\r\n        break;\r\n      }\r\n      i += 1;\r\n    }\r\n    if (_mdf) {\r\n      var props;\r\n      sequence.finalTransform.reset();\r\n      for (i = len - 1; i >= 0; i -= 1) {\r\n        props = sequence.transforms[i].transform.mProps.v.props;\r\n        sequence.finalTransform.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\r\n      }\r\n    }\r\n    sequence._mdf = _mdf;\r\n  },\r\n  processSequences: function (isFirstFrame) {\r\n    var i;\r\n    var len = this.sequenceList.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.processSequence(this.sequenceList[i], isFirstFrame);\r\n    }\r\n  },\r\n  getNewKey: function () {\r\n    this.transform_key_count += 1;\r\n    return '_' + this.transform_key_count;\r\n  },\r\n};\r\n\r\n/* global ShapePropertyFactory, SVGShapeData */\r\n\r\nfunction CVShapeData(element, data, styles, transformsManager) {\r\n  this.styledShapes = [];\r\n  this.tr = [0, 0, 0, 0, 0, 0];\r\n  var ty = 4;\r\n  if (data.ty === 'rc') {\r\n    ty = 5;\r\n  } else if (data.ty === 'el') {\r\n    ty = 6;\r\n  } else if (data.ty === 'sr') {\r\n    ty = 7;\r\n  }\r\n  this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\r\n  var i;\r\n  var len = styles.length;\r\n  var styledShape;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!styles[i].closed) {\r\n      styledShape = {\r\n        transforms: transformsManager.addTransformSequence(styles[i].transforms),\r\n        trNodes: [],\r\n      };\r\n      this.styledShapes.push(styledShape);\r\n      styles[i].elements.push(styledShape);\r\n    }\r\n  }\r\n}\r\n\r\nCVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\r\n\r\n/* global LayerExpressionInterface, EffectsExpressionInterface, CompExpressionInterface, ShapeExpressionInterface,\r\nTextExpressionInterface, getBlendMode,createElementID, EffectsManager */\r\n\r\nfunction BaseElement() {\r\n}\r\n\r\nBaseElement.prototype = {\r\n  checkMasks: function () {\r\n    if (!this.data.hasMask) {\r\n      return false;\r\n    }\r\n    var i = 0;\r\n    var len = this.data.masksProperties.length;\r\n    while (i < len) {\r\n      if ((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\r\n        return true;\r\n      }\r\n      i += 1;\r\n    }\r\n    return false;\r\n  },\r\n  initExpressions: function () {\r\n    this.layerInterface = LayerExpressionInterface(this);\r\n    if (this.data.hasMask && this.maskManager) {\r\n      this.layerInterface.registerMaskInterface(this.maskManager);\r\n    }\r\n    var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\r\n    this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n    if (this.data.ty === 0 || this.data.xt) {\r\n      this.compInterface = CompExpressionInterface(this);\r\n    } else if (this.data.ty === 4) {\r\n      this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\r\n      this.layerInterface.content = this.layerInterface.shapeInterface;\r\n    } else if (this.data.ty === 5) {\r\n      this.layerInterface.textInterface = TextExpressionInterface(this);\r\n      this.layerInterface.text = this.layerInterface.textInterface;\r\n    }\r\n  },\r\n  setBlendMode: function () {\r\n    var blendModeValue = getBlendMode(this.data.bm);\r\n    var elem = this.baseElement || this.layerElement;\r\n\r\n    elem.style['mix-blend-mode'] = blendModeValue;\r\n  },\r\n  initBaseData: function (data, globalData, comp) {\r\n    this.globalData = globalData;\r\n    this.comp = comp;\r\n    this.data = data;\r\n    this.layerId = createElementID();\r\n\r\n    // Stretch factor for old animations missing this property.\r\n    if (!this.data.sr) {\r\n      this.data.sr = 1;\r\n    }\r\n    // effects manager\r\n    this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\r\n  },\r\n  getType: function () {\r\n    return this.type;\r\n  },\r\n  sourceRectAtTime: function () {},\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HierarchyElement, FrameElement */\r\n\r\nfunction NullElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.initFrame();\r\n  this.initTransform(data, globalData, comp);\r\n  this.initHierarchy();\r\n}\r\n\r\nNullElement.prototype.prepareFrame = function (num) {\r\n  this.prepareProperties(num, true);\r\n};\r\n\r\nNullElement.prototype.renderFrame = function () {\r\n};\r\n\r\nNullElement.prototype.getBaseElement = function () {\r\n  return null;\r\n};\r\n\r\nNullElement.prototype.destroy = function () {\r\n};\r\n\r\nNullElement.prototype.sourceRectAtTime = function () {\r\n};\r\n\r\nNullElement.prototype.hide = function () {\r\n};\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\r\n\r\n/* global filtersFactory, featureSupport, filtersFactory, createElementID, createNS, MaskElement, SVGEffects, locationHref */\r\n\r\nfunction SVGBaseElement() {\r\n}\r\n\r\nSVGBaseElement.prototype = {\r\n  initRendererElement: function () {\r\n    this.layerElement = createNS('g');\r\n  },\r\n  createContainerElements: function () {\r\n    this.matteElement = createNS('g');\r\n    this.transformedElement = this.layerElement;\r\n    this.maskedElement = this.layerElement;\r\n    this._sizeChanged = false;\r\n    var layerElementParent = null;\r\n    // If this layer acts as a mask for the following layer\r\n    var filId;\r\n    var fil;\r\n    var gg;\r\n    if (this.data.td) {\r\n      if (this.data.td == 3 || this.data.td == 1) { // eslint-disable-line eqeqeq\r\n        var masker = createNS('mask');\r\n        masker.setAttribute('id', this.layerId);\r\n        masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha'); // eslint-disable-line eqeqeq\r\n        masker.appendChild(this.layerElement);\r\n        layerElementParent = masker;\r\n        this.globalData.defs.appendChild(masker);\r\n        // This is only for IE and Edge when mask if of type alpha\r\n        if (!featureSupport.maskType && this.data.td == 1) { // eslint-disable-line eqeqeq\r\n          masker.setAttribute('mask-type', 'luminance');\r\n          filId = createElementID();\r\n          fil = filtersFactory.createFilter(filId);\r\n          this.globalData.defs.appendChild(fil);\r\n          fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n          gg = createNS('g');\r\n          gg.appendChild(this.layerElement);\r\n          layerElementParent = gg;\r\n          masker.appendChild(gg);\r\n          gg.setAttribute('filter', 'url(' + locationHref + '#' + filId + ')');\r\n        }\r\n      } else if (this.data.td == 2) { // eslint-disable-line eqeqeq\r\n        var maskGroup = createNS('mask');\r\n        maskGroup.setAttribute('id', this.layerId);\r\n        maskGroup.setAttribute('mask-type', 'alpha');\r\n        var maskGrouper = createNS('g');\r\n        maskGroup.appendChild(maskGrouper);\r\n        filId = createElementID();\r\n        fil = filtersFactory.createFilter(filId);\r\n        /// /\r\n\r\n        // This solution doesn't work on Android when meta tag with viewport attribute is set\r\n        /* var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type', 'matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n                feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n                fil.appendChild(feColorMatrix); */\r\n        /// /\r\n        var feCTr = createNS('feComponentTransfer');\r\n        feCTr.setAttribute('in', 'SourceGraphic');\r\n        fil.appendChild(feCTr);\r\n        var feFunc = createNS('feFuncA');\r\n        feFunc.setAttribute('type', 'table');\r\n        feFunc.setAttribute('tableValues', '1.0 0.0');\r\n        feCTr.appendChild(feFunc);\r\n        /// /\r\n        this.globalData.defs.appendChild(fil);\r\n        var alphaRect = createNS('rect');\r\n        alphaRect.setAttribute('width', this.comp.data.w);\r\n        alphaRect.setAttribute('height', this.comp.data.h);\r\n        alphaRect.setAttribute('x', '0');\r\n        alphaRect.setAttribute('y', '0');\r\n        alphaRect.setAttribute('fill', '#ffffff');\r\n        alphaRect.setAttribute('opacity', '0');\r\n        maskGrouper.setAttribute('filter', 'url(' + locationHref + '#' + filId + ')');\r\n        maskGrouper.appendChild(alphaRect);\r\n        maskGrouper.appendChild(this.layerElement);\r\n        layerElementParent = maskGrouper;\r\n        if (!featureSupport.maskType) {\r\n          maskGroup.setAttribute('mask-type', 'luminance');\r\n          fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n          gg = createNS('g');\r\n          maskGrouper.appendChild(alphaRect);\r\n          gg.appendChild(this.layerElement);\r\n          layerElementParent = gg;\r\n          maskGrouper.appendChild(gg);\r\n        }\r\n        this.globalData.defs.appendChild(maskGroup);\r\n      }\r\n    } else if (this.data.tt) {\r\n      this.matteElement.appendChild(this.layerElement);\r\n      layerElementParent = this.matteElement;\r\n      this.baseElement = this.matteElement;\r\n    } else {\r\n      this.baseElement = this.layerElement;\r\n    }\r\n    if (this.data.ln) {\r\n      this.layerElement.setAttribute('id', this.data.ln);\r\n    }\r\n    if (this.data.cl) {\r\n      this.layerElement.setAttribute('class', this.data.cl);\r\n    }\r\n    // Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n    if (this.data.ty === 0 && !this.data.hd) {\r\n      var cp = createNS('clipPath');\r\n      var pt = createNS('path');\r\n      pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0 L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n      var clipId = createElementID();\r\n      cp.setAttribute('id', clipId);\r\n      cp.appendChild(pt);\r\n      this.globalData.defs.appendChild(cp);\r\n\r\n      if (this.checkMasks()) {\r\n        var cpGroup = createNS('g');\r\n        cpGroup.setAttribute('clip-path', 'url(' + locationHref + '#' + clipId + ')');\r\n        cpGroup.appendChild(this.layerElement);\r\n        this.transformedElement = cpGroup;\r\n        if (layerElementParent) {\r\n          layerElementParent.appendChild(this.transformedElement);\r\n        } else {\r\n          this.baseElement = this.transformedElement;\r\n        }\r\n      } else {\r\n        this.layerElement.setAttribute('clip-path', 'url(' + locationHref + '#' + clipId + ')');\r\n      }\r\n    }\r\n    if (this.data.bm !== 0) {\r\n      this.setBlendMode();\r\n    }\r\n  },\r\n  renderElement: function () {\r\n    if (this.finalTransform._matMdf) {\r\n      this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\r\n    }\r\n    if (this.finalTransform._opMdf) {\r\n      this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\r\n    }\r\n  },\r\n  destroyBaseElement: function () {\r\n    this.layerElement = null;\r\n    this.matteElement = null;\r\n    this.maskManager.destroy();\r\n  },\r\n  getBaseElement: function () {\r\n    if (this.data.hd) {\r\n      return null;\r\n    }\r\n    return this.baseElement;\r\n  },\r\n  createRenderableComponents: function () {\r\n    this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    this.renderableEffectsManager = new SVGEffects(this);\r\n  },\r\n  setMatte: function (id) {\r\n    if (!this.matteElement) {\r\n      return;\r\n    }\r\n    this.matteElement.setAttribute('mask', 'url(' + locationHref + '#' + id + ')');\r\n  },\r\n};\r\n\r\n/* global ProcessedElement */\r\n\r\nfunction IShapeElement() {\r\n}\r\n\r\nIShapeElement.prototype = {\r\n  addShapeToModifiers: function (data) {\r\n    var i;\r\n    var len = this.shapeModifiers.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.shapeModifiers[i].addShape(data);\r\n    }\r\n  },\r\n  isShapeInAnimatedModifiers: function (data) {\r\n    var i = 0;\r\n    var len = this.shapeModifiers.length;\r\n    while (i < len) {\r\n      if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  },\r\n  renderModifiers: function () {\r\n    if (!this.shapeModifiers.length) {\r\n      return;\r\n    }\r\n    var i;\r\n    var len = this.shapes.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.shapes[i].sh.reset();\r\n    }\r\n\r\n    len = this.shapeModifiers.length;\r\n    var shouldBreakProcess;\r\n    for (i = len - 1; i >= 0; i -= 1) {\r\n      shouldBreakProcess = this.shapeModifiers[i].processShapes(this._isFirstFrame);\r\n      // workaround to fix cases where a repeater resets the shape so the following processes get called twice\r\n      // TODO: find a better solution for this\r\n      if (shouldBreakProcess) {\r\n        break;\r\n      }\r\n    }\r\n  },\r\n  lcEnum: {\r\n    1: 'butt',\r\n    2: 'round',\r\n    3: 'square',\r\n  },\r\n  ljEnum: {\r\n    1: 'miter',\r\n    2: 'round',\r\n    3: 'bevel',\r\n  },\r\n  searchProcessedElement: function (elem) {\r\n    var elements = this.processedElements;\r\n    var i = 0;\r\n    var len = elements.length;\r\n    while (i < len) {\r\n      if (elements[i].elem === elem) {\r\n        return elements[i].pos;\r\n      }\r\n      i += 1;\r\n    }\r\n    return 0;\r\n  },\r\n  addProcessedElement: function (elem, pos) {\r\n    var elements = this.processedElements;\r\n    var i = elements.length;\r\n    while (i) {\r\n      i -= 1;\r\n      if (elements[i].elem === elem) {\r\n        elements[i].pos = pos;\r\n        return;\r\n      }\r\n    }\r\n    elements.push(new ProcessedElement(elem, pos));\r\n  },\r\n  prepareFrame: function (num) {\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n  },\r\n};\r\n\r\n/* global TextProperty, TextAnimatorProperty, buildShapeString, LetterProps */\r\n\r\nfunction ITextElement() {\r\n}\r\n\r\nITextElement.prototype.initElement = function (data, globalData, comp) {\r\n  this.lettersChangedFlag = true;\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n  this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n  this.initTransform(data, globalData, comp);\r\n  this.initHierarchy();\r\n  this.initRenderable();\r\n  this.initRendererElement();\r\n  this.createContainerElements();\r\n  this.createRenderableComponents();\r\n  this.createContent();\r\n  this.hide();\r\n  this.textAnimator.searchProperties(this.dynamicProperties);\r\n};\r\n\r\nITextElement.prototype.prepareFrame = function (num) {\r\n  this._mdf = false;\r\n  this.prepareRenderableFrame(num);\r\n  this.prepareProperties(num, this.isInRange);\r\n  if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n    this.buildNewText();\r\n    this.textProperty._isFirstFrame = false;\r\n    this.textProperty._mdf = false;\r\n  }\r\n};\r\n\r\nITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\r\n  var j;\r\n  var jLen = shapes.length;\r\n  var pathNodes;\r\n  var shapeStr = '';\r\n  for (j = 0; j < jLen; j += 1) {\r\n    pathNodes = shapes[j].ks.k;\r\n    shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n  }\r\n  return shapeStr;\r\n};\r\n\r\nITextElement.prototype.updateDocumentData = function (newData, index) {\r\n  this.textProperty.updateDocumentData(newData, index);\r\n};\r\n\r\nITextElement.prototype.canResizeFont = function (_canResize) {\r\n  this.textProperty.canResizeFont(_canResize);\r\n};\r\n\r\nITextElement.prototype.setMinimumFontSize = function (_fontSize) {\r\n  this.textProperty.setMinimumFontSize(_fontSize);\r\n};\r\n\r\nITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n  if (documentData.ps) {\r\n    matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\r\n  }\r\n  matrixHelper.translate(0, -documentData.ls, 0);\r\n  switch (documentData.j) {\r\n    case 1:\r\n      matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\r\n      break;\r\n    case 2:\r\n      matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n  matrixHelper.translate(xPos, yPos, 0);\r\n};\r\n\r\nITextElement.prototype.buildColor = function (colorData) {\r\n  return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\r\n};\r\n\r\nITextElement.prototype.emptyProp = new LetterProps();\r\n\r\nITextElement.prototype.destroy = function () {\r\n\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement */\r\n\r\nfunction ICompElement() {}\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\nICompElement.prototype.initElement = function (data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.initTransform(data, globalData, comp);\r\n  this.initRenderable();\r\n  this.initHierarchy();\r\n  this.initRendererElement();\r\n  this.createContainerElements();\r\n  this.createRenderableComponents();\r\n  if (this.data.xt || !globalData.progressiveLoad) {\r\n    this.buildAllItems();\r\n  }\r\n  this.hide();\r\n};\r\n\r\n/* ICompElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.hideElement();\r\n        var i,len = this.elements.length;\r\n        for( i = 0; i < len; i+=1 ){\r\n            if(this.elements[i]){\r\n                this.elements[i].hide();\r\n            }\r\n        }\r\n    }\r\n}; */\r\n\r\nICompElement.prototype.prepareFrame = function (num) {\r\n  this._mdf = false;\r\n  this.prepareRenderableFrame(num);\r\n  this.prepareProperties(num, this.isInRange);\r\n  if (!this.isInRange && !this.data.xt) {\r\n    return;\r\n  }\r\n\r\n  if (!this.tm._placeholder) {\r\n    var timeRemapped = this.tm.v;\r\n    if (timeRemapped === this.data.op) {\r\n      timeRemapped = this.data.op - 1;\r\n    }\r\n    this.renderedFrame = timeRemapped;\r\n  } else {\r\n    this.renderedFrame = num / this.data.sr;\r\n  }\r\n  var i;\r\n  var len = this.elements.length;\r\n  if (!this.completeLayers) {\r\n    this.checkLayers(this.renderedFrame);\r\n  }\r\n  // This iteration needs to be backwards because of how expressions connect between each other\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n      if (this.elements[i]._mdf) {\r\n        this._mdf = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nICompElement.prototype.renderInnerContent = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].renderFrame();\r\n    }\r\n  }\r\n};\r\n\r\nICompElement.prototype.setElements = function (elems) {\r\n  this.elements = elems;\r\n};\r\n\r\nICompElement.prototype.getElements = function () {\r\n  return this.elements;\r\n};\r\n\r\nICompElement.prototype.destroyElements = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n};\r\n\r\nICompElement.prototype.destroy = function () {\r\n  this.destroyElements();\r\n  this.destroyBaseElement();\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, createNS */\r\n\r\nfunction IImageElement(data, globalData, comp) {\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.initElement(data, globalData, comp);\r\n  this.sourceRect = {\r\n    top: 0, left: 0, width: this.assetData.w, height: this.assetData.h,\r\n  };\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\r\n\r\nIImageElement.prototype.createContent = function () {\r\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n\r\n  this.innerElem = createNS('image');\r\n  this.innerElem.setAttribute('width', this.assetData.w + 'px');\r\n  this.innerElem.setAttribute('height', this.assetData.h + 'px');\r\n  this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\r\n  this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n\r\n  this.layerElement.appendChild(this.innerElem);\r\n};\r\n\r\nIImageElement.prototype.sourceRectAtTime = function () {\r\n  return this.sourceRect;\r\n};\r\n\r\n/* global extendPrototype, IImageElement, createNS */\r\n\r\nfunction ISolidElement(data, globalData, comp) {\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([IImageElement], ISolidElement);\r\n\r\nISolidElement.prototype.createContent = function () {\r\n  var rect = createNS('rect');\r\n  /// /rect.style.width = this.data.sw;\r\n  /// /rect.style.height = this.data.sh;\r\n  /// /rect.style.fill = this.data.sc;\r\n  rect.setAttribute('width', this.data.sw);\r\n  rect.setAttribute('height', this.data.sh);\r\n  rect.setAttribute('fill', this.data.sc);\r\n  this.layerElement.appendChild(rect);\r\n};\r\n\r\n/* global PropertyFactory, extendPrototype, RenderableElement, BaseElement, FrameElement */\r\n\r\nfunction AudioElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initRenderable();\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.initBaseData(data, globalData, comp);\r\n  this._isPlaying = false;\r\n  this._canPlay = false;\r\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n  this.audio = this.globalData.audioController.createAudio(assetPath);\r\n  this._currentTime = 0;\r\n  this.globalData.audioController.addAudio(this);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nAudioElement.prototype.prepareFrame = function (num) {\r\n  this.prepareRenderableFrame(num, true);\r\n  this.prepareProperties(num, true);\r\n  if (!this.tm._placeholder) {\r\n    var timeRemapped = this.tm.v;\r\n    this._currentTime = timeRemapped;\r\n  } else {\r\n    this._currentTime = num / this.data.sr;\r\n  }\r\n};\r\n\r\nextendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement);\r\n\r\nAudioElement.prototype.renderFrame = function () {\r\n  if (this.isInRange && this._canPlay) {\r\n    if (!this._isPlaying) {\r\n      this.audio.play();\r\n      this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n      this._isPlaying = true;\r\n    } else if (!this.audio.playing()\r\n      || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > 0.1\r\n    ) {\r\n      this.audio.seek(this._currentTime / this.globalData.frameRate);\r\n    }\r\n  }\r\n};\r\n\r\nAudioElement.prototype.show = function () {\r\n  // this.audio.play()\r\n};\r\n\r\nAudioElement.prototype.hide = function () {\r\n  this.audio.pause();\r\n  this._isPlaying = false;\r\n};\r\n\r\nAudioElement.prototype.pause = function () {\r\n  this.audio.pause();\r\n  this._isPlaying = false;\r\n  this._canPlay = false;\r\n};\r\n\r\nAudioElement.prototype.resume = function () {\r\n  this._canPlay = true;\r\n};\r\n\r\nAudioElement.prototype.setRate = function (rateValue) {\r\n  this.audio.rate(rateValue);\r\n};\r\n\r\nAudioElement.prototype.volume = function (volumeValue) {\r\n  this.audio.volume(volumeValue);\r\n};\r\n\r\nAudioElement.prototype.getBaseElement = function () {\r\n  return null;\r\n};\r\n\r\nAudioElement.prototype.destroy = function () {\r\n};\r\n\r\nAudioElement.prototype.sourceRectAtTime = function () {\r\n};\r\n\r\nAudioElement.prototype.initExpressions = function () {\r\n};\r\n\r\n/* global extendPrototype, RenderableElement, BaseElement, FrameElement, FootageInterface */\r\n\r\nfunction FootageElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initRenderable();\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.footageData = globalData.imageLoader.getAsset(this.assetData);\r\n  this.initBaseData(data, globalData, comp);\r\n}\r\n\r\nFootageElement.prototype.prepareFrame = function () {\r\n};\r\n\r\nextendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement);\r\n\r\nFootageElement.prototype.getBaseElement = function () {\r\n  return null;\r\n};\r\n\r\nFootageElement.prototype.renderFrame = function () {\r\n};\r\n\r\nFootageElement.prototype.destroy = function () {\r\n};\r\n\r\nFootageElement.prototype.initExpressions = function () {\r\n  this.layerInterface = FootageInterface(this);\r\n};\r\n\r\nFootageElement.prototype.getFootageData = function () {\r\n  return this.footageData;\r\n};\r\n\r\n/* global createSizedArray, PropertyFactory, extendPrototype, SVGRenderer, ICompElement, SVGBaseElement */\r\n\r\nfunction SVGCompElement(data, globalData, comp) {\r\n  this.layers = data.layers;\r\n  this.supports3d = true;\r\n  this.completeLayers = false;\r\n  this.pendingElements = [];\r\n  this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n  // this.layerElement = createNS('g');\r\n  this.initElement(data, globalData, comp);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nextendPrototype([SVGRenderer, ICompElement, SVGBaseElement], SVGCompElement);\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement,\r\nRenderableDOMElement, ITextElement, createSizedArray, createNS */\r\n\r\nfunction SVGTextLottieElement(data, globalData, comp) {\r\n  this.textSpans = [];\r\n  this.renderType = 'svg';\r\n  this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement);\r\n\r\nSVGTextLottieElement.prototype.createContent = function () {\r\n  if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n    this.textContainer = createNS('text');\r\n  }\r\n};\r\n\r\nSVGTextLottieElement.prototype.buildTextContents = function (textArray) {\r\n  var i = 0;\r\n  var len = textArray.length;\r\n  var textContents = [];\r\n  var currentTextContent = '';\r\n  while (i < len) {\r\n    if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\r\n      textContents.push(currentTextContent);\r\n      currentTextContent = '';\r\n    } else {\r\n      currentTextContent += textArray[i];\r\n    }\r\n    i += 1;\r\n  }\r\n  textContents.push(currentTextContent);\r\n  return textContents;\r\n};\r\n\r\nSVGTextLottieElement.prototype.buildNewText = function () {\r\n  var i;\r\n  var len;\r\n\r\n  var documentData = this.textProperty.currentData;\r\n  this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n  if (documentData.fc) {\r\n    this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n  } else {\r\n    this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n  }\r\n  if (documentData.sc) {\r\n    this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n    this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n  }\r\n  this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n  if (fontData.fClass) {\r\n    this.layerElement.setAttribute('class', fontData.fClass);\r\n  } else {\r\n    this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n    var fWeight = documentData.fWeight;\r\n    var fStyle = documentData.fStyle;\r\n    this.layerElement.setAttribute('font-style', fStyle);\r\n    this.layerElement.setAttribute('font-weight', fWeight);\r\n  }\r\n  this.layerElement.setAttribute('aria-label', documentData.t);\r\n\r\n  var letters = documentData.l || [];\r\n  var usesGlyphs = !!this.globalData.fontManager.chars;\r\n  len = letters.length;\r\n\r\n  var tSpan;\r\n  var matrixHelper = this.mHelper;\r\n  var shapes;\r\n  var shapeStr = '';\r\n  var singleShape = this.data.singleShape;\r\n  var xPos = 0;\r\n  var yPos = 0;\r\n  var firstLine = true;\r\n  var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n  if (singleShape && !usesGlyphs && !documentData.sz) {\r\n    var tElement = this.textContainer;\r\n    var justify = 'start';\r\n    switch (documentData.j) {\r\n      case 1:\r\n        justify = 'end';\r\n        break;\r\n      case 2:\r\n        justify = 'middle';\r\n        break;\r\n      default:\r\n        justify = 'start';\r\n        break;\r\n    }\r\n    tElement.setAttribute('text-anchor', justify);\r\n    tElement.setAttribute('letter-spacing', trackingOffset);\r\n    var textContent = this.buildTextContents(documentData.finalText);\r\n    len = textContent.length;\r\n    yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      tSpan = this.textSpans[i] || createNS('tspan');\r\n      tSpan.textContent = textContent[i];\r\n      tSpan.setAttribute('x', 0);\r\n      tSpan.setAttribute('y', yPos);\r\n      tSpan.style.display = 'inherit';\r\n      tElement.appendChild(tSpan);\r\n      this.textSpans[i] = tSpan;\r\n      yPos += documentData.finalLineHeight;\r\n    }\r\n\r\n    this.layerElement.appendChild(tElement);\r\n  } else {\r\n    var cachedSpansLength = this.textSpans.length;\r\n    var shapeData;\r\n    var charData;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (!usesGlyphs || !singleShape || i === 0) {\r\n        tSpan = cachedSpansLength > i ? this.textSpans[i] : createNS(usesGlyphs ? 'path' : 'text');\r\n        if (cachedSpansLength <= i) {\r\n          tSpan.setAttribute('stroke-linecap', 'butt');\r\n          tSpan.setAttribute('stroke-linejoin', 'round');\r\n          tSpan.setAttribute('stroke-miterlimit', '4');\r\n          this.textSpans[i] = tSpan;\r\n          this.layerElement.appendChild(tSpan);\r\n        }\r\n        tSpan.style.display = 'inherit';\r\n      }\r\n\r\n      matrixHelper.reset();\r\n      matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n      if (singleShape) {\r\n        if (letters[i].n) {\r\n          xPos = -trackingOffset;\r\n          yPos += documentData.yOffset;\r\n          yPos += firstLine ? 1 : 0;\r\n          firstLine = false;\r\n        }\r\n        this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n        xPos += letters[i].l || 0;\r\n        // xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n        xPos += trackingOffset;\r\n      }\r\n      if (usesGlyphs) {\r\n        charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n        shapeData = (charData && charData.data) || {};\r\n        shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n        if (!singleShape) {\r\n          tSpan.setAttribute('d', this.createPathShape(matrixHelper, shapes));\r\n        } else {\r\n          shapeStr += this.createPathShape(matrixHelper, shapes);\r\n        }\r\n      } else {\r\n        if (singleShape) {\r\n          tSpan.setAttribute('transform', 'translate(' + matrixHelper.props[12] + ',' + matrixHelper.props[13] + ')');\r\n        }\r\n        tSpan.textContent = letters[i].val;\r\n        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n      }\r\n      //\r\n    }\r\n    if (singleShape && tSpan) {\r\n      tSpan.setAttribute('d', shapeStr);\r\n    }\r\n  }\r\n  while (i < this.textSpans.length) {\r\n    this.textSpans[i].style.display = 'none';\r\n    i += 1;\r\n  }\r\n\r\n  this._sizeChanged = true;\r\n};\r\n\r\nSVGTextLottieElement.prototype.sourceRectAtTime = function () {\r\n  this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n  this.renderInnerContent();\r\n  if (this._sizeChanged) {\r\n    this._sizeChanged = false;\r\n    var textBox = this.layerElement.getBBox();\r\n    this.bbox = {\r\n      top: textBox.y,\r\n      left: textBox.x,\r\n      width: textBox.width,\r\n      height: textBox.height,\r\n    };\r\n  }\r\n  return this.bbox;\r\n};\r\n\r\nSVGTextLottieElement.prototype.renderInnerContent = function () {\r\n  if (!this.data.singleShape) {\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\r\n      this._sizeChanged = true;\r\n      var i;\r\n      var len;\r\n      var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n      var letters = this.textProperty.currentData.l;\r\n\r\n      len = letters.length;\r\n      var renderedLetter;\r\n      var textSpan;\r\n      for (i = 0; i < len; i += 1) {\r\n        if (!letters[i].n) {\r\n          renderedLetter = renderedLetters[i];\r\n          textSpan = this.textSpans[i];\r\n          if (renderedLetter._mdf.m) {\r\n            textSpan.setAttribute('transform', renderedLetter.m);\r\n          }\r\n          if (renderedLetter._mdf.o) {\r\n            textSpan.setAttribute('opacity', renderedLetter.o);\r\n          }\r\n          if (renderedLetter._mdf.sw) {\r\n            textSpan.setAttribute('stroke-width', renderedLetter.sw);\r\n          }\r\n          if (renderedLetter._mdf.sc) {\r\n            textSpan.setAttribute('stroke', renderedLetter.sc);\r\n          }\r\n          if (renderedLetter._mdf.fc) {\r\n            textSpan.setAttribute('fill', renderedLetter.fc);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement,\r\nFrameElement, RenderableDOMElement, Matrix, SVGStyleData, SVGStrokeStyleData, SVGFillStyleData,\r\nSVGGradientFillStyleData, SVGGradientStrokeStyleData, locationHref, getBlendMode, ShapeGroupData,\r\nTransformPropertyFactory, SVGTransformData, ShapePropertyFactory, SVGShapeData, SVGElementsRenderer, ShapeModifiers */\r\n\r\nfunction SVGShapeElement(data, globalData, comp) {\r\n  // List of drawable elements\r\n  this.shapes = [];\r\n  // Full shape data\r\n  this.shapesData = data.shapes;\r\n  // List of styles that will be applied to shapes\r\n  this.stylesList = [];\r\n  // List of modifiers that will be applied to shapes\r\n  this.shapeModifiers = [];\r\n  // List of items in shape tree\r\n  this.itemsData = [];\r\n  // List of items in previous shape tree\r\n  this.processedElements = [];\r\n  // List of animated components\r\n  this.animatedContents = [];\r\n  this.initElement(data, globalData, comp);\r\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n  // List of elements that have been created\r\n  this.prevViewData = [];\r\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\r\n\r\nSVGShapeElement.prototype.initSecondaryElement = function () {\r\n};\r\n\r\nSVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\nSVGShapeElement.prototype.buildExpressionInterface = function () {};\r\n\r\nSVGShapeElement.prototype.createContent = function () {\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n  this.filterUniqueShapes();\r\n};\r\n\r\n/*\r\nThis method searches for multiple shapes that affect a single element and one of them is animated\r\n*/\r\nSVGShapeElement.prototype.filterUniqueShapes = function () {\r\n  var i;\r\n  var len = this.shapes.length;\r\n  var shape;\r\n  var j;\r\n  var jLen = this.stylesList.length;\r\n  var style;\r\n  var tempShapes = [];\r\n  var areAnimated = false;\r\n  for (j = 0; j < jLen; j += 1) {\r\n    style = this.stylesList[j];\r\n    areAnimated = false;\r\n    tempShapes.length = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      shape = this.shapes[i];\r\n      if (shape.styles.indexOf(style) !== -1) {\r\n        tempShapes.push(shape);\r\n        areAnimated = shape._isAnimated || areAnimated;\r\n      }\r\n    }\r\n    if (tempShapes.length > 1 && areAnimated) {\r\n      this.setShapesAsAnimated(tempShapes);\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\r\n  var i;\r\n  var len = shapes.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    shapes[i].setAsAnimated();\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.createStyleElement = function (data, level) {\r\n  // TODO: prevent drawing of hidden styles\r\n  var elementData;\r\n  var styleOb = new SVGStyleData(data, level);\r\n\r\n  var pathElement = styleOb.pElem;\r\n  if (data.ty === 'st') {\r\n    elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n  } else if (data.ty === 'fl') {\r\n    elementData = new SVGFillStyleData(this, data, styleOb);\r\n  } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n    var GradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n    elementData = new GradientConstructor(this, data, styleOb);\r\n    this.globalData.defs.appendChild(elementData.gf);\r\n    if (elementData.maskId) {\r\n      this.globalData.defs.appendChild(elementData.ms);\r\n      this.globalData.defs.appendChild(elementData.of);\r\n      pathElement.setAttribute('mask', 'url(' + locationHref + '#' + elementData.maskId + ')');\r\n    }\r\n  }\r\n\r\n  if (data.ty === 'st' || data.ty === 'gs') {\r\n    pathElement.setAttribute('stroke-linecap', this.lcEnum[data.lc] || 'round');\r\n    pathElement.setAttribute('stroke-linejoin', this.ljEnum[data.lj] || 'round');\r\n    pathElement.setAttribute('fill-opacity', '0');\r\n    if (data.lj === 1) {\r\n      pathElement.setAttribute('stroke-miterlimit', data.ml);\r\n    }\r\n  }\r\n\r\n  if (data.r === 2) {\r\n    pathElement.setAttribute('fill-rule', 'evenodd');\r\n  }\r\n\r\n  if (data.ln) {\r\n    pathElement.setAttribute('id', data.ln);\r\n  }\r\n  if (data.cl) {\r\n    pathElement.setAttribute('class', data.cl);\r\n  }\r\n  if (data.bm) {\r\n    pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n  }\r\n  this.stylesList.push(styleOb);\r\n  this.addToAnimatedContents(data, elementData);\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createGroupElement = function (data) {\r\n  var elementData = new ShapeGroupData();\r\n  if (data.ln) {\r\n    elementData.gr.setAttribute('id', data.ln);\r\n  }\r\n  if (data.cl) {\r\n    elementData.gr.setAttribute('class', data.cl);\r\n  }\r\n  if (data.bm) {\r\n    elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n  }\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createTransformElement = function (data, container) {\r\n  var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\r\n  var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\r\n  this.addToAnimatedContents(data, elementData);\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\r\n  var ty = 4;\r\n  if (data.ty === 'rc') {\r\n    ty = 5;\r\n  } else if (data.ty === 'el') {\r\n    ty = 6;\r\n  } else if (data.ty === 'sr') {\r\n    ty = 7;\r\n  }\r\n  var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\r\n  var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n  this.shapes.push(elementData);\r\n  this.addShapeToModifiers(elementData);\r\n  this.addToAnimatedContents(data, elementData);\r\n  return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\r\n  var i = 0;\r\n  var len = this.animatedContents.length;\r\n  while (i < len) {\r\n    if (this.animatedContents[i].element === element) {\r\n      return;\r\n    }\r\n    i += 1;\r\n  }\r\n  this.animatedContents.push({\r\n    fn: SVGElementsRenderer.createRenderFunction(data),\r\n    element: element,\r\n    data: data,\r\n  });\r\n};\r\n\r\nSVGShapeElement.prototype.setElementStyles = function (elementData) {\r\n  var arr = elementData.styles;\r\n  var j;\r\n  var jLen = this.stylesList.length;\r\n  for (j = 0; j < jLen; j += 1) {\r\n    if (!this.stylesList[j].closed) {\r\n      arr.push(this.stylesList[j]);\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.reloadShapes = function () {\r\n  this._isFirstFrame = true;\r\n  var i;\r\n  var len = this.itemsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.prevViewData[i] = this.itemsData[i];\r\n  }\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\r\n  this.filterUniqueShapes();\r\n  len = this.dynamicProperties.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.dynamicProperties[i].getValue();\r\n  }\r\n  this.renderModifiers();\r\n};\r\n\r\nSVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\r\n  var ownTransformers = [].concat(transformers);\r\n  var i;\r\n  var len = arr.length - 1;\r\n  var j;\r\n  var jLen;\r\n  var ownStyles = [];\r\n  var ownModifiers = [];\r\n  var currentTransform;\r\n  var modifier;\r\n  var processedPos;\r\n  for (i = len; i >= 0; i -= 1) {\r\n    processedPos = this.searchProcessedElement(arr[i]);\r\n    if (!processedPos) {\r\n      arr[i]._render = render;\r\n    } else {\r\n      itemsData[i] = prevViewData[processedPos - 1];\r\n    }\r\n    if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createStyleElement(arr[i], level);\r\n      } else {\r\n        itemsData[i].style.closed = false;\r\n      }\r\n      if (arr[i]._render) {\r\n        container.appendChild(itemsData[i].style.pElem);\r\n      }\r\n      ownStyles.push(itemsData[i].style);\r\n    } else if (arr[i].ty === 'gr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createGroupElement(arr[i]);\r\n      } else {\r\n        jLen = itemsData[i].it.length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n        }\r\n      }\r\n      this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\r\n      if (arr[i]._render) {\r\n        container.appendChild(itemsData[i].gr);\r\n      }\r\n    } else if (arr[i].ty === 'tr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createTransformElement(arr[i], container);\r\n      }\r\n      currentTransform = itemsData[i].transform;\r\n      ownTransformers.push(currentTransform);\r\n    } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n      }\r\n      this.setElementStyles(itemsData[i]);\r\n    } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'ms' || arr[i].ty === 'pb') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        modifier.init(this, arr[i]);\r\n        itemsData[i] = modifier;\r\n        this.shapeModifiers.push(modifier);\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = false;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    } else if (arr[i].ty === 'rp') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        itemsData[i] = modifier;\r\n        modifier.init(this, arr, i, itemsData);\r\n        this.shapeModifiers.push(modifier);\r\n        render = false;\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = true;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    }\r\n    this.addProcessedElement(arr[i], i + 1);\r\n  }\r\n  len = ownStyles.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    ownStyles[i].closed = true;\r\n  }\r\n  len = ownModifiers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    ownModifiers[i].closed = true;\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.renderInnerContent = function () {\r\n  this.renderModifiers();\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.stylesList[i].reset();\r\n  }\r\n  this.renderShape();\r\n\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n      if (this.stylesList[i].msElem) {\r\n        this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\r\n        // Adding M0 0 fixes same mask bug on all browsers\r\n        this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n      }\r\n      this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.renderShape = function () {\r\n  var i;\r\n  var len = this.animatedContents.length;\r\n  var animatedContent;\r\n  for (i = 0; i < len; i += 1) {\r\n    animatedContent = this.animatedContents[i];\r\n    if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\r\n      animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\r\n    }\r\n  }\r\n};\r\n\r\nSVGShapeElement.prototype.destroy = function () {\r\n  this.destroyBaseElement();\r\n  this.shapesData = null;\r\n  this.itemsData = null;\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGTintFilter(filter, filterManager) {\r\n  this.filterManager = filterManager;\r\n  var feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n  feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n  feColorMatrix.setAttribute('result', 'f1');\r\n  filter.appendChild(feColorMatrix);\r\n  feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n  feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n  feColorMatrix.setAttribute('result', 'f2');\r\n  filter.appendChild(feColorMatrix);\r\n  this.matrixFilter = feColorMatrix;\r\n  if (filterManager.effectElements[2].p.v !== 100 || filterManager.effectElements[2].p.k) {\r\n    var feMerge = createNS('feMerge');\r\n    filter.appendChild(feMerge);\r\n    var feMergeNode;\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMergeNode.setAttribute('in', 'SourceGraphic');\r\n    feMerge.appendChild(feMergeNode);\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMergeNode.setAttribute('in', 'f2');\r\n    feMerge.appendChild(feMergeNode);\r\n  }\r\n}\r\n\r\nSVGTintFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var colorBlack = this.filterManager.effectElements[0].p.v;\r\n    var colorWhite = this.filterManager.effectElements[1].p.v;\r\n    var opacity = this.filterManager.effectElements[2].p.v / 100;\r\n    this.matrixFilter.setAttribute('values', (colorWhite[0] - colorBlack[0]) + ' 0 0 0 ' + colorBlack[0] + ' ' + (colorWhite[1] - colorBlack[1]) + ' 0 0 0 ' + colorBlack[1] + ' ' + (colorWhite[2] - colorBlack[2]) + ' 0 0 0 ' + colorBlack[2] + ' 0 0 0 ' + opacity + ' 0');\r\n  }\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGFillFilter(filter, filterManager) {\r\n  this.filterManager = filterManager;\r\n  var feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n  feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n  filter.appendChild(feColorMatrix);\r\n  this.matrixFilter = feColorMatrix;\r\n}\r\nSVGFillFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var color = this.filterManager.effectElements[2].p.v;\r\n    var opacity = this.filterManager.effectElements[6].p.v;\r\n    this.matrixFilter.setAttribute('values', '0 0 0 0 ' + color[0] + ' 0 0 0 0 ' + color[1] + ' 0 0 0 0 ' + color[2] + ' 0 0 0 ' + opacity + ' 0');\r\n  }\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGGaussianBlurEffect(filter, filterManager) {\r\n  // Outset the filter region by 100% on all sides to accommodate blur expansion.\r\n  filter.setAttribute('x', '-100%');\r\n  filter.setAttribute('y', '-100%');\r\n  filter.setAttribute('width', '300%');\r\n  filter.setAttribute('height', '300%');\r\n\r\n  this.filterManager = filterManager;\r\n  var feGaussianBlur = createNS('feGaussianBlur');\r\n  filter.appendChild(feGaussianBlur);\r\n  this.feGaussianBlur = feGaussianBlur;\r\n}\r\n\r\nSVGGaussianBlurEffect.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    // Empirical value, matching AE's blur appearance.\r\n    var kBlurrinessToSigma = 0.3;\r\n    var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma;\r\n\r\n    // Dimensions mapping:\r\n    //\r\n    //   1 -> horizontal & vertical\r\n    //   2 -> horizontal only\r\n    //   3 -> vertical only\r\n    //\r\n    var dimensions = this.filterManager.effectElements[1].p.v;\r\n    var sigmaX = (dimensions == 3) ? 0 : sigma; // eslint-disable-line eqeqeq\r\n    var sigmaY = (dimensions == 2) ? 0 : sigma; // eslint-disable-line eqeqeq\r\n\r\n    this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + ' ' + sigmaY);\r\n\r\n    // Repeat edges mapping:\r\n    //\r\n    //   0 -> off -> duplicate\r\n    //   1 -> on  -> wrap\r\n    var edgeMode = (this.filterManager.effectElements[2].p.v == 1) ? 'wrap' : 'duplicate'; // eslint-disable-line eqeqeq\r\n    this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\r\n  }\r\n};\r\n\r\n/* global createNS, createElementID, locationHref, bmFloor */\r\n\r\nfunction SVGStrokeEffect(elem, filterManager) {\r\n  this.initialized = false;\r\n  this.filterManager = filterManager;\r\n  this.elem = elem;\r\n  this.paths = [];\r\n}\r\n\r\nSVGStrokeEffect.prototype.initialize = function () {\r\n  var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n  var path;\r\n  var groupPath;\r\n  var i;\r\n  var len;\r\n  if (this.filterManager.effectElements[1].p.v === 1) {\r\n    len = this.elem.maskManager.masksProperties.length;\r\n    i = 0;\r\n  } else {\r\n    i = this.filterManager.effectElements[0].p.v - 1;\r\n    len = i + 1;\r\n  }\r\n  groupPath = createNS('g');\r\n  groupPath.setAttribute('fill', 'none');\r\n  groupPath.setAttribute('stroke-linecap', 'round');\r\n  groupPath.setAttribute('stroke-dashoffset', 1);\r\n  for (i; i < len; i += 1) {\r\n    path = createNS('path');\r\n    groupPath.appendChild(path);\r\n    this.paths.push({ p: path, m: i });\r\n  }\r\n  if (this.filterManager.effectElements[10].p.v === 3) {\r\n    var mask = createNS('mask');\r\n    var id = createElementID();\r\n    mask.setAttribute('id', id);\r\n    mask.setAttribute('mask-type', 'alpha');\r\n    mask.appendChild(groupPath);\r\n    this.elem.globalData.defs.appendChild(mask);\r\n    var g = createNS('g');\r\n    g.setAttribute('mask', 'url(' + locationHref + '#' + id + ')');\r\n    while (elemChildren[0]) {\r\n      g.appendChild(elemChildren[0]);\r\n    }\r\n    this.elem.layerElement.appendChild(g);\r\n    this.masker = mask;\r\n    groupPath.setAttribute('stroke', '#fff');\r\n  } else if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n    if (this.filterManager.effectElements[10].p.v === 2) {\r\n      elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n      while (elemChildren.length) {\r\n        this.elem.layerElement.removeChild(elemChildren[0]);\r\n      }\r\n    }\r\n    this.elem.layerElement.appendChild(groupPath);\r\n    this.elem.layerElement.removeAttribute('mask');\r\n    groupPath.setAttribute('stroke', '#fff');\r\n  }\r\n  this.initialized = true;\r\n  this.pathMasker = groupPath;\r\n};\r\n\r\nSVGStrokeEffect.prototype.renderFrame = function (forceRender) {\r\n  if (!this.initialized) {\r\n    this.initialize();\r\n  }\r\n  var i;\r\n  var len = this.paths.length;\r\n  var mask;\r\n  var path;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.paths[i].m !== -1) {\r\n      mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n      path = this.paths[i].p;\r\n      if (forceRender || this.filterManager._mdf || mask.prop._mdf) {\r\n        path.setAttribute('d', mask.lastPath);\r\n      }\r\n      if (forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf) {\r\n        var dasharrayValue;\r\n        if (this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100) {\r\n          var s = Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n          var e = Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\r\n          var l = path.getTotalLength();\r\n          dasharrayValue = '0 0 0 ' + l * s + ' ';\r\n          var lineLength = l * (e - s);\r\n          var segment = 1 + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n          var units = Math.floor(lineLength / segment);\r\n          var j;\r\n          for (j = 0; j < units; j += 1) {\r\n            dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01 + ' ';\r\n          }\r\n          dasharrayValue += '0 ' + l * 10 + ' 0 0';\r\n        } else {\r\n          dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\r\n        }\r\n        path.setAttribute('stroke-dasharray', dasharrayValue);\r\n      }\r\n    }\r\n  }\r\n  if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n    this.pathMasker.setAttribute('stroke-width', this.filterManager.effectElements[4].p.v * 2);\r\n  }\r\n\r\n  if (forceRender || this.filterManager.effectElements[6].p._mdf) {\r\n    this.pathMasker.setAttribute('opacity', this.filterManager.effectElements[6].p.v);\r\n  }\r\n  if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\r\n    if (forceRender || this.filterManager.effectElements[3].p._mdf) {\r\n      var color = this.filterManager.effectElements[3].p.v;\r\n      this.pathMasker.setAttribute('stroke', 'rgb(' + bmFloor(color[0] * 255) + ',' + bmFloor(color[1] * 255) + ',' + bmFloor(color[2] * 255) + ')');\r\n    }\r\n  }\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGTritoneFilter(filter, filterManager) {\r\n  this.filterManager = filterManager;\r\n  var feColorMatrix = createNS('feColorMatrix');\r\n  feColorMatrix.setAttribute('type', 'matrix');\r\n  feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\r\n  feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n  feColorMatrix.setAttribute('result', 'f1');\r\n  filter.appendChild(feColorMatrix);\r\n  var feComponentTransfer = createNS('feComponentTransfer');\r\n  feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n  filter.appendChild(feComponentTransfer);\r\n  this.matrixFilter = feComponentTransfer;\r\n  var feFuncR = createNS('feFuncR');\r\n  feFuncR.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFuncR);\r\n  this.feFuncR = feFuncR;\r\n  var feFuncG = createNS('feFuncG');\r\n  feFuncG.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFuncG);\r\n  this.feFuncG = feFuncG;\r\n  var feFuncB = createNS('feFuncB');\r\n  feFuncB.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFuncB);\r\n  this.feFuncB = feFuncB;\r\n}\r\n\r\nSVGTritoneFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var color1 = this.filterManager.effectElements[0].p.v;\r\n    var color2 = this.filterManager.effectElements[1].p.v;\r\n    var color3 = this.filterManager.effectElements[2].p.v;\r\n    var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n    var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n    var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n    this.feFuncR.setAttribute('tableValues', tableR);\r\n    this.feFuncG.setAttribute('tableValues', tableG);\r\n    this.feFuncB.setAttribute('tableValues', tableB);\r\n    // var opacity = this.filterManager.effectElements[2].p.v/100;\r\n    // this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n  }\r\n};\r\n\r\n/* global createNS */\r\n\r\nfunction SVGProLevelsFilter(filter, filterManager) {\r\n  this.filterManager = filterManager;\r\n  var effectElements = this.filterManager.effectElements;\r\n  var feComponentTransfer = createNS('feComponentTransfer');\r\n\r\n  if (effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1) {\r\n    this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n  }\r\n  if (effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1) {\r\n    this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n  }\r\n  if (effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1) {\r\n    this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n  }\r\n  if (effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1) {\r\n    this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n  }\r\n\r\n  if (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) {\r\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    feComponentTransfer = createNS('feComponentTransfer');\r\n  }\r\n\r\n  if (effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1) {\r\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n  }\r\n}\r\n\r\nSVGProLevelsFilter.prototype.createFeFunc = function (type, feComponentTransfer) {\r\n  var feFunc = createNS(type);\r\n  feFunc.setAttribute('type', 'table');\r\n  feComponentTransfer.appendChild(feFunc);\r\n  return feFunc;\r\n};\r\n\r\nSVGProLevelsFilter.prototype.getTableValue = function (inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n  var cnt = 0;\r\n  var segments = 256;\r\n  var perc;\r\n  var min = Math.min(inputBlack, inputWhite);\r\n  var max = Math.max(inputBlack, inputWhite);\r\n  var table = Array.call(null, { length: segments });\r\n  var colorValue;\r\n  var pos = 0;\r\n  var outputDelta = outputWhite - outputBlack;\r\n  var inputDelta = inputWhite - inputBlack;\r\n  while (cnt <= 256) {\r\n    perc = cnt / 256;\r\n    if (perc <= min) {\r\n      colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n    } else if (perc >= max) {\r\n      colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n    } else {\r\n      colorValue = (outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma));\r\n    }\r\n    table[pos] = colorValue;\r\n    pos += 1;\r\n    cnt += 256 / (segments - 1);\r\n  }\r\n  return table.join(' ');\r\n};\r\n\r\nSVGProLevelsFilter.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    var val;\r\n    var effectElements = this.filterManager.effectElements;\r\n    if (this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)) {\r\n      val = this.getTableValue(effectElements[3].p.v, effectElements[4].p.v, effectElements[5].p.v, effectElements[6].p.v, effectElements[7].p.v);\r\n      this.feFuncRComposed.setAttribute('tableValues', val);\r\n      this.feFuncGComposed.setAttribute('tableValues', val);\r\n      this.feFuncBComposed.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)) {\r\n      val = this.getTableValue(effectElements[10].p.v, effectElements[11].p.v, effectElements[12].p.v, effectElements[13].p.v, effectElements[14].p.v);\r\n      this.feFuncR.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)) {\r\n      val = this.getTableValue(effectElements[17].p.v, effectElements[18].p.v, effectElements[19].p.v, effectElements[20].p.v, effectElements[21].p.v);\r\n      this.feFuncG.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)) {\r\n      val = this.getTableValue(effectElements[24].p.v, effectElements[25].p.v, effectElements[26].p.v, effectElements[27].p.v, effectElements[28].p.v);\r\n      this.feFuncB.setAttribute('tableValues', val);\r\n    }\r\n\r\n    if (this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)) {\r\n      val = this.getTableValue(effectElements[31].p.v, effectElements[32].p.v, effectElements[33].p.v, effectElements[34].p.v, effectElements[35].p.v);\r\n      this.feFuncA.setAttribute('tableValues', val);\r\n    }\r\n  }\r\n};\r\n\r\n/* global createNS, rgbToHex, degToRads */\r\n\r\nfunction SVGDropShadowEffect(filter, filterManager) {\r\n  var filterSize = filterManager.container.globalData.renderConfig.filterSize;\r\n  filter.setAttribute('x', filterSize.x);\r\n  filter.setAttribute('y', filterSize.y);\r\n  filter.setAttribute('width', filterSize.width);\r\n  filter.setAttribute('height', filterSize.height);\r\n  this.filterManager = filterManager;\r\n\r\n  var feGaussianBlur = createNS('feGaussianBlur');\r\n  feGaussianBlur.setAttribute('in', 'SourceAlpha');\r\n  feGaussianBlur.setAttribute('result', 'drop_shadow_1');\r\n  feGaussianBlur.setAttribute('stdDeviation', '0');\r\n  this.feGaussianBlur = feGaussianBlur;\r\n  filter.appendChild(feGaussianBlur);\r\n\r\n  var feOffset = createNS('feOffset');\r\n  feOffset.setAttribute('dx', '25');\r\n  feOffset.setAttribute('dy', '0');\r\n  feOffset.setAttribute('in', 'drop_shadow_1');\r\n  feOffset.setAttribute('result', 'drop_shadow_2');\r\n  this.feOffset = feOffset;\r\n  filter.appendChild(feOffset);\r\n  var feFlood = createNS('feFlood');\r\n  feFlood.setAttribute('flood-color', '#00ff00');\r\n  feFlood.setAttribute('flood-opacity', '1');\r\n  feFlood.setAttribute('result', 'drop_shadow_3');\r\n  this.feFlood = feFlood;\r\n  filter.appendChild(feFlood);\r\n\r\n  var feComposite = createNS('feComposite');\r\n  feComposite.setAttribute('in', 'drop_shadow_3');\r\n  feComposite.setAttribute('in2', 'drop_shadow_2');\r\n  feComposite.setAttribute('operator', 'in');\r\n  feComposite.setAttribute('result', 'drop_shadow_4');\r\n  filter.appendChild(feComposite);\r\n\r\n  var feMerge = createNS('feMerge');\r\n  filter.appendChild(feMerge);\r\n  var feMergeNode;\r\n  feMergeNode = createNS('feMergeNode');\r\n  feMerge.appendChild(feMergeNode);\r\n  feMergeNode = createNS('feMergeNode');\r\n  feMergeNode.setAttribute('in', 'SourceGraphic');\r\n  this.feMergeNode = feMergeNode;\r\n  this.feMerge = feMerge;\r\n  this.originalNodeAdded = false;\r\n  feMerge.appendChild(feMergeNode);\r\n}\r\n\r\nSVGDropShadowEffect.prototype.renderFrame = function (forceRender) {\r\n  if (forceRender || this.filterManager._mdf) {\r\n    if (forceRender || this.filterManager.effectElements[4].p._mdf) {\r\n      this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n    }\r\n    if (forceRender || this.filterManager.effectElements[0].p._mdf) {\r\n      var col = this.filterManager.effectElements[0].p.v;\r\n      this.feFlood.setAttribute('flood-color', rgbToHex(Math.round(col[0] * 255), Math.round(col[1] * 255), Math.round(col[2] * 255)));\r\n    }\r\n    if (forceRender || this.filterManager.effectElements[1].p._mdf) {\r\n      this.feFlood.setAttribute('flood-opacity', this.filterManager.effectElements[1].p.v / 255);\r\n    }\r\n    if (forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf) {\r\n      var distance = this.filterManager.effectElements[3].p.v;\r\n      var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n      var x = distance * Math.cos(angle);\r\n      var y = distance * Math.sin(angle);\r\n      this.feOffset.setAttribute('dx', x);\r\n      this.feOffset.setAttribute('dy', y);\r\n    }\r\n    /* if(forceRender || this.filterManager.effectElements[5].p._mdf){\r\n            if(this.filterManager.effectElements[5].p.v === 1 && this.originalNodeAdded) {\r\n                this.feMerge.removeChild(this.feMergeNode);\r\n                this.originalNodeAdded = false;\r\n            } else if(this.filterManager.effectElements[5].p.v === 0 && !this.originalNodeAdded) {\r\n                this.feMerge.appendChild(this.feMergeNode);\r\n                this.originalNodeAdded = true;\r\n            }\r\n        } */\r\n  }\r\n};\r\n\r\n/* global createElementID, createNS */\r\n\r\nvar _svgMatteSymbols = [];\r\n\r\nfunction SVGMatte3Effect(filterElem, filterManager, elem) {\r\n  this.initialized = false;\r\n  this.filterManager = filterManager;\r\n  this.filterElem = filterElem;\r\n  this.elem = elem;\r\n  elem.matteElement = createNS('g');\r\n  elem.matteElement.appendChild(elem.layerElement);\r\n  elem.matteElement.appendChild(elem.transformedElement);\r\n  elem.baseElement = elem.matteElement;\r\n}\r\n\r\nSVGMatte3Effect.prototype.findSymbol = function (mask) {\r\n  var i = 0;\r\n  var len = _svgMatteSymbols.length;\r\n  while (i < len) {\r\n    if (_svgMatteSymbols[i] === mask) {\r\n      return _svgMatteSymbols[i];\r\n    }\r\n    i += 1;\r\n  }\r\n  return null;\r\n};\r\n\r\nSVGMatte3Effect.prototype.replaceInParent = function (mask, symbolId) {\r\n  var parentNode = mask.layerElement.parentNode;\r\n  if (!parentNode) {\r\n    return;\r\n  }\r\n  var children = parentNode.children;\r\n  var i = 0;\r\n  var len = children.length;\r\n  while (i < len) {\r\n    if (children[i] === mask.layerElement) {\r\n      break;\r\n    }\r\n    i += 1;\r\n  }\r\n  var nextChild;\r\n  if (i <= len - 2) {\r\n    nextChild = children[i + 1];\r\n  }\r\n  var useElem = createNS('use');\r\n  useElem.setAttribute('href', '#' + symbolId);\r\n  if (nextChild) {\r\n    parentNode.insertBefore(useElem, nextChild);\r\n  } else {\r\n    parentNode.appendChild(useElem);\r\n  }\r\n};\r\n\r\nSVGMatte3Effect.prototype.setElementAsMask = function (elem, mask) {\r\n  if (!this.findSymbol(mask)) {\r\n    var symbolId = createElementID();\r\n    var masker = createNS('mask');\r\n    masker.setAttribute('id', mask.layerId);\r\n    masker.setAttribute('mask-type', 'alpha');\r\n    _svgMatteSymbols.push(mask);\r\n    var defs = elem.globalData.defs;\r\n    defs.appendChild(masker);\r\n    var symbol = createNS('symbol');\r\n    symbol.setAttribute('id', symbolId);\r\n    this.replaceInParent(mask, symbolId);\r\n    symbol.appendChild(mask.layerElement);\r\n    defs.appendChild(symbol);\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n    masker.appendChild(useElem);\r\n    mask.data.hd = false;\r\n    mask.show();\r\n  }\r\n  elem.setMatte(mask.layerId);\r\n};\r\n\r\nSVGMatte3Effect.prototype.initialize = function () {\r\n  var ind = this.filterManager.effectElements[0].p.v;\r\n  var elements = this.elem.comp.elements;\r\n  var i = 0;\r\n  var len = elements.length;\r\n  while (i < len) {\r\n    if (elements[i] && elements[i].data.ind === ind) {\r\n      this.setElementAsMask(this.elem, elements[i]);\r\n    }\r\n    i += 1;\r\n  }\r\n  this.initialized = true;\r\n};\r\n\r\nSVGMatte3Effect.prototype.renderFrame = function () {\r\n  if (!this.initialized) {\r\n    this.initialize();\r\n  }\r\n};\r\n\r\n/* global createElementID, filtersFactory, SVGTintFilter, SVGFillFilter, SVGStrokeEffect, SVGTritoneFilter,\r\nSVGProLevelsFilter, SVGDropShadowEffect, SVGMatte3Effect, SVGGaussianBlurEffect, locationHref */\r\n\r\nfunction SVGEffects(elem) {\r\n  var i;\r\n  var len = elem.data.ef ? elem.data.ef.length : 0;\r\n  var filId = createElementID();\r\n  var fil = filtersFactory.createFilter(filId, true);\r\n  var count = 0;\r\n  this.filters = [];\r\n  var filterManager;\r\n  for (i = 0; i < len; i += 1) {\r\n    filterManager = null;\r\n    if (elem.data.ef[i].ty === 20) {\r\n      count += 1;\r\n      filterManager = new SVGTintFilter(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 21) {\r\n      count += 1;\r\n      filterManager = new SVGFillFilter(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 22) {\r\n      filterManager = new SVGStrokeEffect(elem, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 23) {\r\n      count += 1;\r\n      filterManager = new SVGTritoneFilter(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 24) {\r\n      count += 1;\r\n      filterManager = new SVGProLevelsFilter(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 25) {\r\n      count += 1;\r\n      filterManager = new SVGDropShadowEffect(fil, elem.effectsManager.effectElements[i]);\r\n    } else if (elem.data.ef[i].ty === 28) {\r\n      // count += 1;\r\n      filterManager = new SVGMatte3Effect(fil, elem.effectsManager.effectElements[i], elem);\r\n    } else if (elem.data.ef[i].ty === 29) {\r\n      count += 1;\r\n      filterManager = new SVGGaussianBlurEffect(fil, elem.effectsManager.effectElements[i]);\r\n    }\r\n    if (filterManager) {\r\n      this.filters.push(filterManager);\r\n    }\r\n  }\r\n  if (count) {\r\n    elem.globalData.defs.appendChild(fil);\r\n    elem.layerElement.setAttribute('filter', 'url(' + locationHref + '#' + filId + ')');\r\n  }\r\n  if (this.filters.length) {\r\n    elem.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nSVGEffects.prototype.renderFrame = function (_isFirstFrame) {\r\n  var i;\r\n  var len = this.filters.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.filters[i].renderFrame(_isFirstFrame);\r\n  }\r\n};\r\n\r\n/* global Matrix, createTypedArray */\r\n\r\nfunction CVContextData() {\r\n  this.saved = [];\r\n  this.cArrPos = 0;\r\n  this.cTr = new Matrix();\r\n  this.cO = 1;\r\n  var i;\r\n  var len = 15;\r\n  this.savedOp = createTypedArray('float32', len);\r\n  for (i = 0; i < len; i += 1) {\r\n    this.saved[i] = createTypedArray('float32', 16);\r\n  }\r\n  this._length = len;\r\n}\r\n\r\nCVContextData.prototype.duplicate = function () {\r\n  var newLength = this._length * 2;\r\n  var currentSavedOp = this.savedOp;\r\n  this.savedOp = createTypedArray('float32', newLength);\r\n  this.savedOp.set(currentSavedOp);\r\n  var i = 0;\r\n  for (i = this._length; i < newLength; i += 1) {\r\n    this.saved[i] = createTypedArray('float32', 16);\r\n  }\r\n  this._length = newLength;\r\n};\r\n\r\nCVContextData.prototype.reset = function () {\r\n  this.cArrPos = 0;\r\n  this.cTr.reset();\r\n  this.cO = 1;\r\n};\r\n\r\n/* global CVEffects, getBlendMode, CVMaskElement, Matrix */\r\n\r\nfunction CVBaseElement() {\r\n}\r\n\r\nCVBaseElement.prototype = {\r\n  createElements: function () {},\r\n  initRendererElement: function () {},\r\n  createContainerElements: function () {\r\n    this.canvasContext = this.globalData.canvasContext;\r\n    this.renderableEffectsManager = new CVEffects(this);\r\n  },\r\n  createContent: function () {},\r\n  setBlendMode: function () {\r\n    var globalData = this.globalData;\r\n    if (globalData.blendMode !== this.data.bm) {\r\n      globalData.blendMode = this.data.bm;\r\n      var blendModeValue = getBlendMode(this.data.bm);\r\n      globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n    }\r\n  },\r\n  createRenderableComponents: function () {\r\n    this.maskManager = new CVMaskElement(this.data, this);\r\n  },\r\n  hideElement: function () {\r\n    if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n      this.hidden = true;\r\n    }\r\n  },\r\n  showElement: function () {\r\n    if (this.isInRange && !this.isTransparent) {\r\n      this.hidden = false;\r\n      this._isFirstFrame = true;\r\n      this.maskManager._isFirstFrame = true;\r\n    }\r\n  },\r\n  renderFrame: function () {\r\n    if (this.hidden || this.data.hd) {\r\n      return;\r\n    }\r\n    this.renderTransform();\r\n    this.renderRenderable();\r\n    this.setBlendMode();\r\n    var forceRealStack = this.data.ty === 0;\r\n    this.globalData.renderer.save(forceRealStack);\r\n    this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n    this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\r\n    this.renderInnerContent();\r\n    this.globalData.renderer.restore(forceRealStack);\r\n    if (this.maskManager.hasMasks) {\r\n      this.globalData.renderer.restore(true);\r\n    }\r\n    if (this._isFirstFrame) {\r\n      this._isFirstFrame = false;\r\n    }\r\n  },\r\n  destroy: function () {\r\n    this.canvasContext = null;\r\n    this.data = null;\r\n    this.globalData = null;\r\n    this.maskManager.destroy();\r\n  },\r\n  mHelper: new Matrix(),\r\n};\r\nCVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\r\nCVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, CVBaseElement,HierarchyElement, FrameElement,\r\nRenderableElement, SVGShapeElement, IImageElement, createTag */\r\n\r\nfunction CVImageElement(data, globalData, comp) {\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.img = globalData.imageLoader.getAsset(this.assetData);\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\r\n\r\nCVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVImageElement.prototype.createContent = function () {\r\n  if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\r\n    var canvas = createTag('canvas');\r\n    canvas.width = this.assetData.w;\r\n    canvas.height = this.assetData.h;\r\n    var ctx = canvas.getContext('2d');\r\n\r\n    var imgW = this.img.width;\r\n    var imgH = this.img.height;\r\n    var imgRel = imgW / imgH;\r\n    var canvasRel = this.assetData.w / this.assetData.h;\r\n    var widthCrop;\r\n    var heightCrop;\r\n    var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\r\n    if ((imgRel > canvasRel && par === 'xMidYMid slice') || (imgRel < canvasRel && par !== 'xMidYMid slice')) {\r\n      heightCrop = imgH;\r\n      widthCrop = heightCrop * canvasRel;\r\n    } else {\r\n      widthCrop = imgW;\r\n      heightCrop = widthCrop / canvasRel;\r\n    }\r\n    ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\r\n    this.img = canvas;\r\n  }\r\n};\r\n\r\nCVImageElement.prototype.renderInnerContent = function () {\r\n  this.canvasContext.drawImage(this.img, 0, 0);\r\n};\r\n\r\nCVImageElement.prototype.destroy = function () {\r\n  this.img = null;\r\n};\r\n\r\n/* global createSizedArray, PropertyFactory, extendPrototype, CanvasRenderer, ICompElement, CVBaseElement */\r\n\r\nfunction CVCompElement(data, globalData, comp) {\r\n  this.completeLayers = false;\r\n  this.layers = data.layers;\r\n  this.pendingElements = [];\r\n  this.elements = createSizedArray(this.layers.length);\r\n  this.initElement(data, globalData, comp);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nextendPrototype([CanvasRenderer, ICompElement, CVBaseElement], CVCompElement);\r\n\r\nCVCompElement.prototype.renderInnerContent = function () {\r\n  var ctx = this.canvasContext;\r\n  ctx.beginPath();\r\n  ctx.moveTo(0, 0);\r\n  ctx.lineTo(this.data.w, 0);\r\n  ctx.lineTo(this.data.w, this.data.h);\r\n  ctx.lineTo(0, this.data.h);\r\n  ctx.lineTo(0, 0);\r\n  ctx.clip();\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.completeLayers || this.elements[i]) {\r\n      this.elements[i].renderFrame();\r\n    }\r\n  }\r\n};\r\n\r\nCVCompElement.prototype.destroy = function () {\r\n  var i;\r\n  var len = this.layers.length;\r\n  for (i = len - 1; i >= 0; i -= 1) {\r\n    if (this.elements[i]) {\r\n      this.elements[i].destroy();\r\n    }\r\n  }\r\n  this.layers = null;\r\n  this.elements = null;\r\n};\r\n\r\n/* global createSizedArray, ShapePropertyFactory, MaskElement */\r\n\r\nfunction CVMaskElement(data, element) {\r\n  this.data = data;\r\n  this.element = element;\r\n  this.masksProperties = this.data.masksProperties || [];\r\n  this.viewData = createSizedArray(this.masksProperties.length);\r\n  var i;\r\n  var len = this.masksProperties.length;\r\n  var hasMasks = false;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.masksProperties[i].mode !== 'n') {\r\n      hasMasks = true;\r\n    }\r\n    this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\r\n  }\r\n  this.hasMasks = hasMasks;\r\n  if (hasMasks) {\r\n    this.element.addRenderableComponent(this);\r\n  }\r\n}\r\n\r\nCVMaskElement.prototype.renderFrame = function () {\r\n  if (!this.hasMasks) {\r\n    return;\r\n  }\r\n  var transform = this.element.finalTransform.mat;\r\n  var ctx = this.element.canvasContext;\r\n  var i;\r\n  var len = this.masksProperties.length;\r\n  var pt;\r\n  var pts;\r\n  var data;\r\n  ctx.beginPath();\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.masksProperties[i].mode !== 'n') {\r\n      if (this.masksProperties[i].inv) {\r\n        ctx.moveTo(0, 0);\r\n        ctx.lineTo(this.element.globalData.compSize.w, 0);\r\n        ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\r\n        ctx.lineTo(0, this.element.globalData.compSize.h);\r\n        ctx.lineTo(0, 0);\r\n      }\r\n      data = this.viewData[i].v;\r\n      pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\r\n      ctx.moveTo(pt[0], pt[1]);\r\n      var j;\r\n      var jLen = data._length;\r\n      for (j = 1; j < jLen; j += 1) {\r\n        pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\r\n        ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n      }\r\n      pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\r\n      ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n    }\r\n  }\r\n  this.element.globalData.renderer.save(true);\r\n  ctx.clip();\r\n};\r\n\r\nCVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\nCVMaskElement.prototype.destroy = function () {\r\n  this.element = null;\r\n};\r\n\r\n/* global ShapeTransformManager, extendPrototype, BaseElement, TransformElement, CVBaseElement, IShapeElement,\r\nHierarchyElement, FrameElement, RenderableElement, RenderableDOMElement, PropertyFactory, degToRads, GradientProperty,\r\nDashProperty, TransformPropertyFactory, CVShapeData, ShapeModifiers, bmFloor */\r\n\r\nfunction CVShapeElement(data, globalData, comp) {\r\n  this.shapes = [];\r\n  this.shapesData = data.shapes;\r\n  this.stylesList = [];\r\n  this.itemsData = [];\r\n  this.prevViewData = [];\r\n  this.shapeModifiers = [];\r\n  this.processedElements = [];\r\n  this.transformsManager = new ShapeTransformManager();\r\n  this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\r\n\r\nCVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\r\n\r\nCVShapeElement.prototype.transformHelper = { opacity: 1, _opMdf: false };\r\n\r\nCVShapeElement.prototype.dashResetter = [];\r\n\r\nCVShapeElement.prototype.createContent = function () {\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n};\r\n\r\nCVShapeElement.prototype.createStyleElement = function (data, transforms) {\r\n  var styleElem = {\r\n    data: data,\r\n    type: data.ty,\r\n    preTransforms: this.transformsManager.addTransformSequence(transforms),\r\n    transforms: [],\r\n    elements: [],\r\n    closed: data.hd === true,\r\n  };\r\n  var elementData = {};\r\n  if (data.ty === 'fl' || data.ty === 'st') {\r\n    elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\r\n    if (!elementData.c.k) {\r\n      styleElem.co = 'rgb(' + bmFloor(elementData.c.v[0]) + ',' + bmFloor(elementData.c.v[1]) + ',' + bmFloor(elementData.c.v[2]) + ')';\r\n    }\r\n  } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n    elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\r\n    elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\r\n    elementData.h = PropertyFactory.getProp(this, data.h || { k: 0 }, 0, 0.01, this);\r\n    elementData.a = PropertyFactory.getProp(this, data.a || { k: 0 }, 0, degToRads, this);\r\n    elementData.g = new GradientProperty(this, data.g, this);\r\n  }\r\n  elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\r\n  if (data.ty === 'st' || data.ty === 'gs') {\r\n    styleElem.lc = this.lcEnum[data.lc] || 'round';\r\n    styleElem.lj = this.ljEnum[data.lj] || 'round';\r\n    if (data.lj == 1) { // eslint-disable-line eqeqeq\r\n      styleElem.ml = data.ml;\r\n    }\r\n    elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\r\n    if (!elementData.w.k) {\r\n      styleElem.wi = elementData.w.v;\r\n    }\r\n    if (data.d) {\r\n      var d = new DashProperty(this, data.d, 'canvas', this);\r\n      elementData.d = d;\r\n      if (!elementData.d.k) {\r\n        styleElem.da = elementData.d.dashArray;\r\n        styleElem.do = elementData.d.dashoffset[0];\r\n      }\r\n    }\r\n  } else {\r\n    styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n  }\r\n  this.stylesList.push(styleElem);\r\n  elementData.style = styleElem;\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createGroupElement = function () {\r\n  var elementData = {\r\n    it: [],\r\n    prevViewData: [],\r\n  };\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createTransformElement = function (data) {\r\n  var elementData = {\r\n    transform: {\r\n      opacity: 1,\r\n      _opMdf: false,\r\n      key: this.transformsManager.getNewKey(),\r\n      op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\r\n      mProps: TransformPropertyFactory.getTransformProperty(this, data, this),\r\n    },\r\n  };\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createShapeElement = function (data) {\r\n  var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\r\n\r\n  this.shapes.push(elementData);\r\n  this.addShapeToModifiers(elementData);\r\n  return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.reloadShapes = function () {\r\n  this._isFirstFrame = true;\r\n  var i;\r\n  var len = this.itemsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.prevViewData[i] = this.itemsData[i];\r\n  }\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\r\n  len = this.dynamicProperties.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    this.dynamicProperties[i].getValue();\r\n  }\r\n  this.renderModifiers();\r\n  this.transformsManager.processSequences(this._isFirstFrame);\r\n};\r\n\r\nCVShapeElement.prototype.addTransformToStyleList = function (transform) {\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!this.stylesList[i].closed) {\r\n      this.stylesList[i].transforms.push(transform);\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.removeTransformFromStyleList = function () {\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!this.stylesList[i].closed) {\r\n      this.stylesList[i].transforms.pop();\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.closeStyles = function (styles) {\r\n  var i;\r\n  var len = styles.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    styles[i].closed = true;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\r\n  var i;\r\n  var len = arr.length - 1;\r\n  var j;\r\n  var jLen;\r\n  var ownStyles = [];\r\n  var ownModifiers = [];\r\n  var processedPos;\r\n  var modifier;\r\n  var currentTransform;\r\n  var ownTransforms = [].concat(transforms);\r\n  for (i = len; i >= 0; i -= 1) {\r\n    processedPos = this.searchProcessedElement(arr[i]);\r\n    if (!processedPos) {\r\n      arr[i]._shouldRender = shouldRender;\r\n    } else {\r\n      itemsData[i] = prevViewData[processedPos - 1];\r\n    }\r\n    if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\r\n      } else {\r\n        itemsData[i].style.closed = false;\r\n      }\r\n\r\n      ownStyles.push(itemsData[i].style);\r\n    } else if (arr[i].ty === 'gr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createGroupElement(arr[i]);\r\n      } else {\r\n        jLen = itemsData[i].it.length;\r\n        for (j = 0; j < jLen; j += 1) {\r\n          itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n        }\r\n      }\r\n      this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\r\n    } else if (arr[i].ty === 'tr') {\r\n      if (!processedPos) {\r\n        currentTransform = this.createTransformElement(arr[i]);\r\n        itemsData[i] = currentTransform;\r\n      }\r\n      ownTransforms.push(itemsData[i]);\r\n      this.addTransformToStyleList(itemsData[i]);\r\n    } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\r\n      if (!processedPos) {\r\n        itemsData[i] = this.createShapeElement(arr[i]);\r\n      }\r\n    } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'pb') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        modifier.init(this, arr[i]);\r\n        itemsData[i] = modifier;\r\n        this.shapeModifiers.push(modifier);\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = false;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    } else if (arr[i].ty === 'rp') {\r\n      if (!processedPos) {\r\n        modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n        itemsData[i] = modifier;\r\n        modifier.init(this, arr, i, itemsData);\r\n        this.shapeModifiers.push(modifier);\r\n        shouldRender = false;\r\n      } else {\r\n        modifier = itemsData[i];\r\n        modifier.closed = true;\r\n      }\r\n      ownModifiers.push(modifier);\r\n    }\r\n    this.addProcessedElement(arr[i], i + 1);\r\n  }\r\n  this.removeTransformFromStyleList();\r\n  this.closeStyles(ownStyles);\r\n  len = ownModifiers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    ownModifiers[i].closed = true;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderInnerContent = function () {\r\n  this.transformHelper.opacity = 1;\r\n  this.transformHelper._opMdf = false;\r\n  this.renderModifiers();\r\n  this.transformsManager.processSequences(this._isFirstFrame);\r\n  this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\r\n};\r\n\r\nCVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\r\n  if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\r\n    groupTransform.opacity = parentTransform.opacity;\r\n    groupTransform.opacity *= groupTransform.op.v;\r\n    groupTransform._opMdf = true;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.drawLayer = function () {\r\n  var i;\r\n  var len = this.stylesList.length;\r\n  var j;\r\n  var jLen;\r\n  var k;\r\n  var kLen;\r\n  var elems;\r\n  var nodes;\r\n  var renderer = this.globalData.renderer;\r\n  var ctx = this.globalData.canvasContext;\r\n  var type;\r\n  var currentStyle;\r\n  for (i = 0; i < len; i += 1) {\r\n    currentStyle = this.stylesList[i];\r\n    type = currentStyle.type;\r\n\r\n    // Skipping style when\r\n    // Stroke width equals 0\r\n    // style should not be rendered (extra unused repeaters)\r\n    // current opacity equals 0\r\n    // global opacity equals 0\r\n    if (!(((type === 'st' || type === 'gs') && currentStyle.wi === 0) || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0)) {\r\n      renderer.save();\r\n      elems = currentStyle.elements;\r\n      if (type === 'st' || type === 'gs') {\r\n        ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\r\n        ctx.lineWidth = currentStyle.wi;\r\n        ctx.lineCap = currentStyle.lc;\r\n        ctx.lineJoin = currentStyle.lj;\r\n        ctx.miterLimit = currentStyle.ml || 0;\r\n      } else {\r\n        ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\r\n      }\r\n      renderer.ctxOpacity(currentStyle.coOp);\r\n      if (type !== 'st' && type !== 'gs') {\r\n        ctx.beginPath();\r\n      }\r\n      renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\r\n      jLen = elems.length;\r\n      for (j = 0; j < jLen; j += 1) {\r\n        if (type === 'st' || type === 'gs') {\r\n          ctx.beginPath();\r\n          if (currentStyle.da) {\r\n            ctx.setLineDash(currentStyle.da);\r\n            ctx.lineDashOffset = currentStyle.do;\r\n          }\r\n        }\r\n        nodes = elems[j].trNodes;\r\n        kLen = nodes.length;\r\n\r\n        for (k = 0; k < kLen; k += 1) {\r\n          if (nodes[k].t === 'm') {\r\n            ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\r\n          } else if (nodes[k].t === 'c') {\r\n            ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\r\n          } else {\r\n            ctx.closePath();\r\n          }\r\n        }\r\n        if (type === 'st' || type === 'gs') {\r\n          ctx.stroke();\r\n          if (currentStyle.da) {\r\n            ctx.setLineDash(this.dashResetter);\r\n          }\r\n        }\r\n      }\r\n      if (type !== 'st' && type !== 'gs') {\r\n        ctx.fill(currentStyle.r);\r\n      }\r\n      renderer.restore();\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\r\n  var i;\r\n  var len = items.length - 1;\r\n  var groupTransform;\r\n  groupTransform = parentTransform;\r\n  for (i = len; i >= 0; i -= 1) {\r\n    if (items[i].ty === 'tr') {\r\n      groupTransform = data[i].transform;\r\n      this.renderShapeTransform(parentTransform, groupTransform);\r\n    } else if (items[i].ty === 'sh' || items[i].ty === 'el' || items[i].ty === 'rc' || items[i].ty === 'sr') {\r\n      this.renderPath(items[i], data[i]);\r\n    } else if (items[i].ty === 'fl') {\r\n      this.renderFill(items[i], data[i], groupTransform);\r\n    } else if (items[i].ty === 'st') {\r\n      this.renderStroke(items[i], data[i], groupTransform);\r\n    } else if (items[i].ty === 'gf' || items[i].ty === 'gs') {\r\n      this.renderGradientFill(items[i], data[i], groupTransform);\r\n    } else if (items[i].ty === 'gr') {\r\n      this.renderShape(groupTransform, items[i].it, data[i].it);\r\n    } else if (items[i].ty === 'tm') {\r\n      //\r\n    }\r\n  }\r\n  if (isMain) {\r\n    this.drawLayer();\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\r\n  if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\r\n    var shapeNodes = styledShape.trNodes;\r\n    var paths = shape.paths;\r\n    var i;\r\n    var len;\r\n    var j;\r\n    var jLen = paths._length;\r\n    shapeNodes.length = 0;\r\n    var groupTransformMat = styledShape.transforms.finalTransform;\r\n    for (j = 0; j < jLen; j += 1) {\r\n      var pathNodes = paths.shapes[j];\r\n      if (pathNodes && pathNodes.v) {\r\n        len = pathNodes._length;\r\n        for (i = 1; i < len; i += 1) {\r\n          if (i === 1) {\r\n            shapeNodes.push({\r\n              t: 'm',\r\n              p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0),\r\n            });\r\n          }\r\n          shapeNodes.push({\r\n            t: 'c',\r\n            pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i]),\r\n          });\r\n        }\r\n        if (len === 1) {\r\n          shapeNodes.push({\r\n            t: 'm',\r\n            p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0),\r\n          });\r\n        }\r\n        if (pathNodes.c && len) {\r\n          shapeNodes.push({\r\n            t: 'c',\r\n            pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0]),\r\n          });\r\n          shapeNodes.push({\r\n            t: 'z',\r\n          });\r\n        }\r\n      }\r\n    }\r\n    styledShape.trNodes = shapeNodes;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderPath = function (pathData, itemData) {\r\n  if (pathData.hd !== true && pathData._shouldRender) {\r\n    var i;\r\n    var len = itemData.styledShapes.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\r\n    }\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\r\n  var styleElem = itemData.style;\r\n\r\n  if (itemData.c._mdf || this._isFirstFrame) {\r\n    styleElem.co = 'rgb('\r\n        + bmFloor(itemData.c.v[0]) + ','\r\n        + bmFloor(itemData.c.v[1]) + ','\r\n        + bmFloor(itemData.c.v[2]) + ')';\r\n  }\r\n  if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\r\n  var styleElem = itemData.style;\r\n  var grd;\r\n  if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || (styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf))) {\r\n    var ctx = this.globalData.canvasContext;\r\n    var pt1 = itemData.s.v;\r\n    var pt2 = itemData.e.v;\r\n    if (styleData.t === 1) {\r\n      grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\r\n    } else {\r\n      var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n      var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n      var percent = itemData.h.v;\r\n      if (percent >= 1) {\r\n        percent = 0.99;\r\n      } else if (percent <= -1) {\r\n        percent = -0.99;\r\n      }\r\n      var dist = rad * percent;\r\n      var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n      var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n      grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\r\n    }\r\n\r\n    var i;\r\n    var len = styleData.g.p;\r\n    var cValues = itemData.g.c;\r\n    var opacity = 1;\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n      if (itemData.g._hasOpacity && itemData.g._collapsable) {\r\n        opacity = itemData.g.o[i * 2 + 1];\r\n      }\r\n      grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\r\n    }\r\n    styleElem.grd = grd;\r\n  }\r\n  styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n};\r\n\r\nCVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\r\n  var styleElem = itemData.style;\r\n  var d = itemData.d;\r\n  if (d && (d._mdf || this._isFirstFrame)) {\r\n    styleElem.da = d.dashArray;\r\n    styleElem.do = d.dashoffset[0];\r\n  }\r\n  if (itemData.c._mdf || this._isFirstFrame) {\r\n    styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\r\n  }\r\n  if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n  }\r\n  if (itemData.w._mdf || this._isFirstFrame) {\r\n    styleElem.wi = itemData.w.v;\r\n  }\r\n};\r\n\r\nCVShapeElement.prototype.destroy = function () {\r\n  this.shapesData = null;\r\n  this.globalData = null;\r\n  this.canvasContext = null;\r\n  this.stylesList.length = 0;\r\n  this.itemsData.length = 0;\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement,\r\nSVGShapeElement, IImageElement */\r\n\r\nfunction CVSolidElement(data, globalData, comp) {\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\r\n\r\nCVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVSolidElement.prototype.renderInnerContent = function () {\r\n  var ctx = this.canvasContext;\r\n  ctx.fillStyle = this.data.sc;\r\n  ctx.fillRect(0, 0, this.data.sw, this.data.sh);\r\n  //\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement,\r\nRenderableElement, ITextElement, createTag, createSizedArray */\r\n\r\nfunction CVTextElement(data, globalData, comp) {\r\n  this.textSpans = [];\r\n  this.yOffset = 0;\r\n  this.fillColorAnim = false;\r\n  this.strokeColorAnim = false;\r\n  this.strokeWidthAnim = false;\r\n  this.stroke = false;\r\n  this.fill = false;\r\n  this.justifyOffset = 0;\r\n  this.currentRender = null;\r\n  this.renderType = 'canvas';\r\n  this.values = {\r\n    fill: 'rgba(0,0,0,0)',\r\n    stroke: 'rgba(0,0,0,0)',\r\n    sWidth: 0,\r\n    fValue: '',\r\n  };\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\r\n\r\nCVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\r\n\r\nCVTextElement.prototype.buildNewText = function () {\r\n  var documentData = this.textProperty.currentData;\r\n  this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n\r\n  var hasFill = false;\r\n  if (documentData.fc) {\r\n    hasFill = true;\r\n    this.values.fill = this.buildColor(documentData.fc);\r\n  } else {\r\n    this.values.fill = 'rgba(0,0,0,0)';\r\n  }\r\n  this.fill = hasFill;\r\n  var hasStroke = false;\r\n  if (documentData.sc) {\r\n    hasStroke = true;\r\n    this.values.stroke = this.buildColor(documentData.sc);\r\n    this.values.sWidth = documentData.sw;\r\n  }\r\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n  var i;\r\n  var len;\r\n  var letters = documentData.l;\r\n  var matrixHelper = this.mHelper;\r\n  this.stroke = hasStroke;\r\n  this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n  len = documentData.finalText.length;\r\n  // this.tHelper.font = this.values.fValue;\r\n  var charData;\r\n  var shapeData;\r\n  var k;\r\n  var kLen;\r\n  var shapes;\r\n  var j;\r\n  var jLen;\r\n  var pathNodes;\r\n  var commands;\r\n  var pathArr;\r\n  var singleShape = this.data.singleShape;\r\n  var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\r\n  var xPos = 0;\r\n  var yPos = 0;\r\n  var firstLine = true;\r\n  var cnt = 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n    shapeData = (charData && charData.data) || {};\r\n    matrixHelper.reset();\r\n    if (singleShape && letters[i].n) {\r\n      xPos = -trackingOffset;\r\n      yPos += documentData.yOffset;\r\n      yPos += firstLine ? 1 : 0;\r\n      firstLine = false;\r\n    }\r\n\r\n    shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n    jLen = shapes.length;\r\n    matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n    if (singleShape) {\r\n      this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n    }\r\n    commands = createSizedArray(jLen);\r\n    for (j = 0; j < jLen; j += 1) {\r\n      kLen = shapes[j].ks.k.i.length;\r\n      pathNodes = shapes[j].ks.k;\r\n      pathArr = [];\r\n      for (k = 1; k < kLen; k += 1) {\r\n        if (k === 1) {\r\n          pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n        }\r\n        pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\r\n      }\r\n      pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\r\n      commands[j] = pathArr;\r\n    }\r\n    if (singleShape) {\r\n      xPos += letters[i].l;\r\n      xPos += trackingOffset;\r\n    }\r\n    if (this.textSpans[cnt]) {\r\n      this.textSpans[cnt].elem = commands;\r\n    } else {\r\n      this.textSpans[cnt] = { elem: commands };\r\n    }\r\n    cnt += 1;\r\n  }\r\n};\r\n\r\nCVTextElement.prototype.renderInnerContent = function () {\r\n  var ctx = this.canvasContext;\r\n  ctx.font = this.values.fValue;\r\n  ctx.lineCap = 'butt';\r\n  ctx.lineJoin = 'miter';\r\n  ctx.miterLimit = 4;\r\n\r\n  if (!this.data.singleShape) {\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n  }\r\n\r\n  var i;\r\n  var len;\r\n  var j;\r\n  var jLen;\r\n  var k;\r\n  var kLen;\r\n  var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n  var letters = this.textProperty.currentData.l;\r\n\r\n  len = letters.length;\r\n  var renderedLetter;\r\n  var lastFill = null;\r\n  var lastStroke = null;\r\n  var lastStrokeW = null;\r\n  var commands;\r\n  var pathArr;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (!letters[i].n) {\r\n      renderedLetter = renderedLetters[i];\r\n      if (renderedLetter) {\r\n        this.globalData.renderer.save();\r\n        this.globalData.renderer.ctxTransform(renderedLetter.p);\r\n        this.globalData.renderer.ctxOpacity(renderedLetter.o);\r\n      }\r\n      if (this.fill) {\r\n        if (renderedLetter && renderedLetter.fc) {\r\n          if (lastFill !== renderedLetter.fc) {\r\n            lastFill = renderedLetter.fc;\r\n            ctx.fillStyle = renderedLetter.fc;\r\n          }\r\n        } else if (lastFill !== this.values.fill) {\r\n          lastFill = this.values.fill;\r\n          ctx.fillStyle = this.values.fill;\r\n        }\r\n        commands = this.textSpans[i].elem;\r\n        jLen = commands.length;\r\n        this.globalData.canvasContext.beginPath();\r\n        for (j = 0; j < jLen; j += 1) {\r\n          pathArr = commands[j];\r\n          kLen = pathArr.length;\r\n          this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n          for (k = 2; k < kLen; k += 6) {\r\n            this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n          }\r\n        }\r\n        this.globalData.canvasContext.closePath();\r\n        this.globalData.canvasContext.fill();\r\n        /// ctx.fillText(this.textSpans[i].val,0,0);\r\n      }\r\n      if (this.stroke) {\r\n        if (renderedLetter && renderedLetter.sw) {\r\n          if (lastStrokeW !== renderedLetter.sw) {\r\n            lastStrokeW = renderedLetter.sw;\r\n            ctx.lineWidth = renderedLetter.sw;\r\n          }\r\n        } else if (lastStrokeW !== this.values.sWidth) {\r\n          lastStrokeW = this.values.sWidth;\r\n          ctx.lineWidth = this.values.sWidth;\r\n        }\r\n        if (renderedLetter && renderedLetter.sc) {\r\n          if (lastStroke !== renderedLetter.sc) {\r\n            lastStroke = renderedLetter.sc;\r\n            ctx.strokeStyle = renderedLetter.sc;\r\n          }\r\n        } else if (lastStroke !== this.values.stroke) {\r\n          lastStroke = this.values.stroke;\r\n          ctx.strokeStyle = this.values.stroke;\r\n        }\r\n        commands = this.textSpans[i].elem;\r\n        jLen = commands.length;\r\n        this.globalData.canvasContext.beginPath();\r\n        for (j = 0; j < jLen; j += 1) {\r\n          pathArr = commands[j];\r\n          kLen = pathArr.length;\r\n          this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n          for (k = 2; k < kLen; k += 6) {\r\n            this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n          }\r\n        }\r\n        this.globalData.canvasContext.closePath();\r\n        this.globalData.canvasContext.stroke();\r\n        /// ctx.strokeText(letters[i].val,0,0);\r\n      }\r\n      if (renderedLetter) {\r\n        this.globalData.renderer.restore();\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nfunction CVEffects() {\r\n\r\n}\r\nCVEffects.prototype.renderFrame = function () {};\r\n\r\n/* global createTag, createNS, styleDiv, CVEffects, MaskElement, SVGBaseElement, HybridRenderer */\r\n\r\nfunction HBaseElement() {}\r\nHBaseElement.prototype = {\r\n  checkBlendMode: function () {},\r\n  initRendererElement: function () {\r\n    this.baseElement = createTag(this.data.tg || 'div');\r\n    if (this.data.hasMask) {\r\n      this.svgElement = createNS('svg');\r\n      this.layerElement = createNS('g');\r\n      this.maskedElement = this.layerElement;\r\n      this.svgElement.appendChild(this.layerElement);\r\n      this.baseElement.appendChild(this.svgElement);\r\n    } else {\r\n      this.layerElement = this.baseElement;\r\n    }\r\n    styleDiv(this.baseElement);\r\n  },\r\n  createContainerElements: function () {\r\n    this.renderableEffectsManager = new CVEffects(this);\r\n    this.transformedElement = this.baseElement;\r\n    this.maskedElement = this.layerElement;\r\n    if (this.data.ln) {\r\n      this.layerElement.setAttribute('id', this.data.ln);\r\n    }\r\n    if (this.data.cl) {\r\n      this.layerElement.setAttribute('class', this.data.cl);\r\n    }\r\n    if (this.data.bm !== 0) {\r\n      this.setBlendMode();\r\n    }\r\n  },\r\n  renderElement: function () {\r\n    var transformedElementStyle = this.transformedElement ? this.transformedElement.style : {};\r\n    if (this.finalTransform._matMdf) {\r\n      var matrixValue = this.finalTransform.mat.toCSS();\r\n      transformedElementStyle.transform = matrixValue;\r\n      transformedElementStyle.webkitTransform = matrixValue;\r\n    }\r\n    if (this.finalTransform._opMdf) {\r\n      transformedElementStyle.opacity = this.finalTransform.mProp.o.v;\r\n    }\r\n  },\r\n  renderFrame: function () {\r\n    // If it is exported as hidden (data.hd === true) no need to render\r\n    // If it is not visible no need to render\r\n    if (this.data.hd || this.hidden) {\r\n      return;\r\n    }\r\n    this.renderTransform();\r\n    this.renderRenderable();\r\n    this.renderElement();\r\n    this.renderInnerContent();\r\n    if (this._isFirstFrame) {\r\n      this._isFirstFrame = false;\r\n    }\r\n  },\r\n  destroy: function () {\r\n    this.layerElement = null;\r\n    this.transformedElement = null;\r\n    if (this.matteElement) {\r\n      this.matteElement = null;\r\n    }\r\n    if (this.maskManager) {\r\n      this.maskManager.destroy();\r\n      this.maskManager = null;\r\n    }\r\n  },\r\n  createRenderableComponents: function () {\r\n    this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n  },\r\n  addEffects: function () {\r\n  },\r\n  setMatte: function () {},\r\n};\r\nHBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\r\nHBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\r\nHBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting;\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement,\r\nRenderableDOMElement, createNS, createTag */\r\n\r\nfunction HSolidElement(data, globalData, comp) {\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], HSolidElement);\r\n\r\nHSolidElement.prototype.createContent = function () {\r\n  var rect;\r\n  if (this.data.hasMask) {\r\n    rect = createNS('rect');\r\n    rect.setAttribute('width', this.data.sw);\r\n    rect.setAttribute('height', this.data.sh);\r\n    rect.setAttribute('fill', this.data.sc);\r\n    this.svgElement.setAttribute('width', this.data.sw);\r\n    this.svgElement.setAttribute('height', this.data.sh);\r\n  } else {\r\n    rect = createTag('div');\r\n    rect.style.width = this.data.sw + 'px';\r\n    rect.style.height = this.data.sh + 'px';\r\n    rect.style.backgroundColor = this.data.sc;\r\n  }\r\n  this.layerElement.appendChild(rect);\r\n};\r\n\r\n/* global createSizedArray, PropertyFactory, extendPrototype, HybridRenderer, ICompElement, HBaseElement */\r\n\r\nfunction HCompElement(data, globalData, comp) {\r\n  this.layers = data.layers;\r\n  this.supports3d = !data.hasMask;\r\n  this.completeLayers = false;\r\n  this.pendingElements = [];\r\n  this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n  this.initElement(data, globalData, comp);\r\n  this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : { _placeholder: true };\r\n}\r\n\r\nextendPrototype([HybridRenderer, ICompElement, HBaseElement], HCompElement);\r\nHCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\r\n\r\nHCompElement.prototype.createContainerElements = function () {\r\n  this._createBaseContainerElements();\r\n  // divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n  if (this.data.hasMask) {\r\n    this.svgElement.setAttribute('width', this.data.w);\r\n    this.svgElement.setAttribute('height', this.data.h);\r\n    this.transformedElement = this.baseElement;\r\n  } else {\r\n    this.transformedElement = this.layerElement;\r\n  }\r\n};\r\n\r\nHCompElement.prototype.addTo3dContainer = function (elem, pos) {\r\n  var j = 0;\r\n  var nextElement;\r\n  while (j < pos) {\r\n    if (this.elements[j] && this.elements[j].getBaseElement) {\r\n      nextElement = this.elements[j].getBaseElement();\r\n    }\r\n    j += 1;\r\n  }\r\n  if (nextElement) {\r\n    this.layerElement.insertBefore(elem, nextElement);\r\n  } else {\r\n    this.layerElement.appendChild(elem);\r\n  }\r\n};\r\n\r\n/* global createNS, extendPrototype, BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement,\r\nHierarchyElement, FrameElement, RenderableElement, createNS, bmMin, bmSqrt, bmMin, bmMax, bmPow */\r\n\r\nfunction HShapeElement(data, globalData, comp) {\r\n  // List of drawable elements\r\n  this.shapes = [];\r\n  // Full shape data\r\n  this.shapesData = data.shapes;\r\n  // List of styles that will be applied to shapes\r\n  this.stylesList = [];\r\n  // List of modifiers that will be applied to shapes\r\n  this.shapeModifiers = [];\r\n  // List of items in shape tree\r\n  this.itemsData = [];\r\n  // List of items in previous shape tree\r\n  this.processedElements = [];\r\n  // List of animated components\r\n  this.animatedContents = [];\r\n  this.shapesContainer = createNS('g');\r\n  this.initElement(data, globalData, comp);\r\n  // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n  // List of elements that have been created\r\n  this.prevViewData = [];\r\n  this.currentBBox = {\r\n    x: 999999,\r\n    y: -999999,\r\n    h: 0,\r\n    w: 0,\r\n  };\r\n}\r\nextendPrototype([BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement, HierarchyElement, FrameElement, RenderableElement], HShapeElement);\r\nHShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\r\n\r\nHShapeElement.prototype.createContent = function () {\r\n  var cont;\r\n  this.baseElement.style.fontSize = 0;\r\n  if (this.data.hasMask) {\r\n    this.layerElement.appendChild(this.shapesContainer);\r\n    cont = this.svgElement;\r\n  } else {\r\n    cont = createNS('svg');\r\n    var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n    cont.setAttribute('width', size.w);\r\n    cont.setAttribute('height', size.h);\r\n    cont.appendChild(this.shapesContainer);\r\n    this.layerElement.appendChild(cont);\r\n  }\r\n\r\n  this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.shapesContainer, 0, [], true);\r\n  this.filterUniqueShapes();\r\n  this.shapeCont = cont;\r\n};\r\n\r\nHShapeElement.prototype.getTransformedPoint = function (transformers, point) {\r\n  var i;\r\n  var len = transformers.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\r\n  }\r\n  return point;\r\n};\r\n\r\nHShapeElement.prototype.calculateShapeBoundingBox = function (item, boundingBox) {\r\n  var shape = item.sh.v;\r\n  var transformers = item.transformers;\r\n  var i;\r\n  var len = shape._length;\r\n  var vPoint;\r\n  var oPoint;\r\n  var nextIPoint;\r\n  var nextVPoint;\r\n  if (len <= 1) {\r\n    return;\r\n  }\r\n  for (i = 0; i < len - 1; i += 1) {\r\n    vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n    oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n    nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\r\n    nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\r\n    this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n  }\r\n  if (shape.c) {\r\n    vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n    oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n    nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\r\n    nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\r\n    this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n  }\r\n};\r\n\r\nHShapeElement.prototype.checkBounds = function (vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\r\n  this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\r\n  var bounds = this.shapeBoundingBox;\r\n  boundingBox.x = bmMin(bounds.left, boundingBox.x);\r\n  boundingBox.xMax = bmMax(bounds.right, boundingBox.xMax);\r\n  boundingBox.y = bmMin(bounds.top, boundingBox.y);\r\n  boundingBox.yMax = bmMax(bounds.bottom, boundingBox.yMax);\r\n};\r\n\r\nHShapeElement.prototype.shapeBoundingBox = {\r\n  left: 0,\r\n  right: 0,\r\n  top: 0,\r\n  bottom: 0,\r\n};\r\n\r\nHShapeElement.prototype.tempBoundingBox = {\r\n  x: 0,\r\n  xMax: 0,\r\n  y: 0,\r\n  yMax: 0,\r\n  width: 0,\r\n  height: 0,\r\n};\r\n\r\nHShapeElement.prototype.getBoundsOfCurve = function (p0, p1, p2, p3) {\r\n  var bounds = [[p0[0], p3[0]], [p0[1], p3[1]]];\r\n\r\n  for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) { // eslint-disable-line no-plusplus\r\n    b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n    a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n    c = 3 * p1[i] - 3 * p0[i];\r\n\r\n    b |= 0; // eslint-disable-line no-bitwise\r\n    a |= 0; // eslint-disable-line no-bitwise\r\n    c |= 0; // eslint-disable-line no-bitwise\r\n\r\n    if (a === 0 && b === 0) {\r\n      //\r\n    } else if (a === 0) {\r\n      t = -c / b;\r\n\r\n      if (t > 0 && t < 1) {\r\n        bounds[i].push(this.calculateF(t, p0, p1, p2, p3, i));\r\n      }\r\n    } else {\r\n      b2ac = b * b - 4 * c * a;\r\n\r\n      if (b2ac >= 0) {\r\n        t1 = (-b + bmSqrt(b2ac)) / (2 * a);\r\n        if (t1 > 0 && t1 < 1) bounds[i].push(this.calculateF(t1, p0, p1, p2, p3, i));\r\n        t2 = (-b - bmSqrt(b2ac)) / (2 * a);\r\n        if (t2 > 0 && t2 < 1) bounds[i].push(this.calculateF(t2, p0, p1, p2, p3, i));\r\n      }\r\n    }\r\n  }\r\n\r\n  this.shapeBoundingBox.left = bmMin.apply(null, bounds[0]);\r\n  this.shapeBoundingBox.top = bmMin.apply(null, bounds[1]);\r\n  this.shapeBoundingBox.right = bmMax.apply(null, bounds[0]);\r\n  this.shapeBoundingBox.bottom = bmMax.apply(null, bounds[1]);\r\n};\r\n\r\nHShapeElement.prototype.calculateF = function (t, p0, p1, p2, p3, i) {\r\n  return bmPow(1 - t, 3) * p0[i]\r\n        + 3 * bmPow(1 - t, 2) * t * p1[i]\r\n        + 3 * (1 - t) * bmPow(t, 2) * p2[i]\r\n        + bmPow(t, 3) * p3[i];\r\n};\r\n\r\nHShapeElement.prototype.calculateBoundingBox = function (itemsData, boundingBox) {\r\n  var i;\r\n  var len = itemsData.length;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (itemsData[i] && itemsData[i].sh) {\r\n      this.calculateShapeBoundingBox(itemsData[i], boundingBox);\r\n    } else if (itemsData[i] && itemsData[i].it) {\r\n      this.calculateBoundingBox(itemsData[i].it, boundingBox);\r\n    }\r\n  }\r\n};\r\n\r\nHShapeElement.prototype.currentBoxContains = function (box) {\r\n  return this.currentBBox.x <= box.x\r\n    && this.currentBBox.y <= box.y\r\n    && this.currentBBox.width + this.currentBBox.x >= box.x + box.width\r\n    && this.currentBBox.height + this.currentBBox.y >= box.y + box.height;\r\n};\r\n\r\nHShapeElement.prototype.renderInnerContent = function () {\r\n  this._renderShapeFrame();\r\n\r\n  if (!this.hidden && (this._isFirstFrame || this._mdf)) {\r\n    var tempBoundingBox = this.tempBoundingBox;\r\n    var max = 999999;\r\n    tempBoundingBox.x = max;\r\n    tempBoundingBox.xMax = -max;\r\n    tempBoundingBox.y = max;\r\n    tempBoundingBox.yMax = -max;\r\n    this.calculateBoundingBox(this.itemsData, tempBoundingBox);\r\n    tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\r\n    tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y;\r\n    // var tempBoundingBox = this.shapeCont.getBBox();\r\n    if (this.currentBoxContains(tempBoundingBox)) {\r\n      return;\r\n    }\r\n    var changed = false;\r\n    if (this.currentBBox.w !== tempBoundingBox.width) {\r\n      this.currentBBox.w = tempBoundingBox.width;\r\n      this.shapeCont.setAttribute('width', tempBoundingBox.width);\r\n      changed = true;\r\n    }\r\n    if (this.currentBBox.h !== tempBoundingBox.height) {\r\n      this.currentBBox.h = tempBoundingBox.height;\r\n      this.shapeCont.setAttribute('height', tempBoundingBox.height);\r\n      changed = true;\r\n    }\r\n    if (changed || this.currentBBox.x !== tempBoundingBox.x || this.currentBBox.y !== tempBoundingBox.y) {\r\n      this.currentBBox.w = tempBoundingBox.width;\r\n      this.currentBBox.h = tempBoundingBox.height;\r\n      this.currentBBox.x = tempBoundingBox.x;\r\n      this.currentBBox.y = tempBoundingBox.y;\r\n\r\n      this.shapeCont.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n      var shapeStyle = this.shapeCont.style;\r\n      var shapeTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n      shapeStyle.transform = shapeTransform;\r\n      shapeStyle.webkitTransform = shapeTransform;\r\n    }\r\n  }\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement,\r\nRenderableDOMElement, ITextElement, createSizedArray, createTag, styleDiv, createNS */\r\n\r\nfunction HTextElement(data, globalData, comp) {\r\n  this.textSpans = [];\r\n  this.textPaths = [];\r\n  this.currentBBox = {\r\n    x: 999999,\r\n    y: -999999,\r\n    h: 0,\r\n    w: 0,\r\n  };\r\n  this.renderType = 'svg';\r\n  this.isMasked = false;\r\n  this.initElement(data, globalData, comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], HTextElement);\r\n\r\nHTextElement.prototype.createContent = function () {\r\n  this.isMasked = this.checkMasks();\r\n  if (this.isMasked) {\r\n    this.renderType = 'svg';\r\n    this.compW = this.comp.data.w;\r\n    this.compH = this.comp.data.h;\r\n    this.svgElement.setAttribute('width', this.compW);\r\n    this.svgElement.setAttribute('height', this.compH);\r\n    var g = createNS('g');\r\n    this.maskedElement.appendChild(g);\r\n    this.innerElem = g;\r\n  } else {\r\n    this.renderType = 'html';\r\n    this.innerElem = this.layerElement;\r\n  }\r\n\r\n  this.checkParenting();\r\n};\r\n\r\nHTextElement.prototype.buildNewText = function () {\r\n  var documentData = this.textProperty.currentData;\r\n  this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n  var innerElemStyle = this.innerElem.style;\r\n  var textColor = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n  innerElemStyle.fill = textColor;\r\n  innerElemStyle.color = textColor;\r\n  if (documentData.sc) {\r\n    innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n    innerElemStyle.strokeWidth = documentData.sw + 'px';\r\n  }\r\n  var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n  if (!this.globalData.fontManager.chars) {\r\n    innerElemStyle.fontSize = documentData.finalSize + 'px';\r\n    innerElemStyle.lineHeight = documentData.finalSize + 'px';\r\n    if (fontData.fClass) {\r\n      this.innerElem.className = fontData.fClass;\r\n    } else {\r\n      innerElemStyle.fontFamily = fontData.fFamily;\r\n      var fWeight = documentData.fWeight;\r\n      var fStyle = documentData.fStyle;\r\n      innerElemStyle.fontStyle = fStyle;\r\n      innerElemStyle.fontWeight = fWeight;\r\n    }\r\n  }\r\n  var i;\r\n  var len;\r\n\r\n  var letters = documentData.l;\r\n  len = letters.length;\r\n  var tSpan;\r\n  var tParent;\r\n  var tCont;\r\n  var matrixHelper = this.mHelper;\r\n  var shapes;\r\n  var shapeStr = '';\r\n  var cnt = 0;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (this.globalData.fontManager.chars) {\r\n      if (!this.textPaths[cnt]) {\r\n        tSpan = createNS('path');\r\n        tSpan.setAttribute('stroke-linecap', 'butt');\r\n        tSpan.setAttribute('stroke-linejoin', 'round');\r\n        tSpan.setAttribute('stroke-miterlimit', '4');\r\n      } else {\r\n        tSpan = this.textPaths[cnt];\r\n      }\r\n      if (!this.isMasked) {\r\n        if (this.textSpans[cnt]) {\r\n          tParent = this.textSpans[cnt];\r\n          tCont = tParent.children[0];\r\n        } else {\r\n          tParent = createTag('div');\r\n          tParent.style.lineHeight = 0;\r\n          tCont = createNS('svg');\r\n          tCont.appendChild(tSpan);\r\n          styleDiv(tParent);\r\n        }\r\n      }\r\n    } else if (!this.isMasked) {\r\n      if (this.textSpans[cnt]) {\r\n        tParent = this.textSpans[cnt];\r\n        tSpan = this.textPaths[cnt];\r\n      } else {\r\n        tParent = createTag('span');\r\n        styleDiv(tParent);\r\n        tSpan = createTag('span');\r\n        styleDiv(tSpan);\r\n        tParent.appendChild(tSpan);\r\n      }\r\n    } else {\r\n      tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\r\n    }\r\n    // tSpan.setAttribute('visibility', 'hidden');\r\n    if (this.globalData.fontManager.chars) {\r\n      var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n      var shapeData;\r\n      if (charData) {\r\n        shapeData = charData.data;\r\n      } else {\r\n        shapeData = null;\r\n      }\r\n      matrixHelper.reset();\r\n      if (shapeData && shapeData.shapes) {\r\n        shapes = shapeData.shapes[0].it;\r\n        matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n        shapeStr = this.createPathShape(matrixHelper, shapes);\r\n        tSpan.setAttribute('d', shapeStr);\r\n      }\r\n      if (!this.isMasked) {\r\n        this.innerElem.appendChild(tParent);\r\n        if (shapeData && shapeData.shapes) {\r\n          // document.body.appendChild is needed to get exact measure of shape\r\n          document.body.appendChild(tCont);\r\n          var boundingBox = tCont.getBBox();\r\n          tCont.setAttribute('width', boundingBox.width + 2);\r\n          tCont.setAttribute('height', boundingBox.height + 2);\r\n          tCont.setAttribute('viewBox', (boundingBox.x - 1) + ' ' + (boundingBox.y - 1) + ' ' + (boundingBox.width + 2) + ' ' + (boundingBox.height + 2));\r\n          var tContStyle = tCont.style;\r\n          var tContTranslation = 'translate(' + (boundingBox.x - 1) + 'px,' + (boundingBox.y - 1) + 'px)';\r\n          tContStyle.transform = tContTranslation;\r\n          tContStyle.webkitTransform = tContTranslation;\r\n\r\n          letters[i].yOffset = boundingBox.y - 1;\r\n        } else {\r\n          tCont.setAttribute('width', 1);\r\n          tCont.setAttribute('height', 1);\r\n        }\r\n        tParent.appendChild(tCont);\r\n      } else {\r\n        this.innerElem.appendChild(tSpan);\r\n      }\r\n    } else {\r\n      tSpan.textContent = letters[i].val;\r\n      tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\r\n      if (!this.isMasked) {\r\n        this.innerElem.appendChild(tParent);\r\n        //\r\n        var tStyle = tSpan.style;\r\n        var tSpanTranslation = 'translate3d(0,' + -documentData.finalSize / 1.2 + 'px,0)';\r\n        tStyle.transform = tSpanTranslation;\r\n        tStyle.webkitTransform = tSpanTranslation;\r\n      } else {\r\n        this.innerElem.appendChild(tSpan);\r\n      }\r\n    }\r\n    //\r\n    if (!this.isMasked) {\r\n      this.textSpans[cnt] = tParent;\r\n    } else {\r\n      this.textSpans[cnt] = tSpan;\r\n    }\r\n    this.textSpans[cnt].style.display = 'block';\r\n    this.textPaths[cnt] = tSpan;\r\n    cnt += 1;\r\n  }\r\n  while (cnt < this.textSpans.length) {\r\n    this.textSpans[cnt].style.display = 'none';\r\n    cnt += 1;\r\n  }\r\n};\r\n\r\nHTextElement.prototype.renderInnerContent = function () {\r\n  var svgStyle;\r\n  if (this.data.singleShape) {\r\n    if (!this._isFirstFrame && !this.lettersChangedFlag) {\r\n      return;\r\n    } if (this.isMasked && this.finalTransform._matMdf) {\r\n      // Todo Benchmark if using this is better than getBBox\r\n      this.svgElement.setAttribute('viewBox', -this.finalTransform.mProp.p.v[0] + ' ' + -this.finalTransform.mProp.p.v[1] + ' ' + this.compW + ' ' + this.compH);\r\n      svgStyle = this.svgElement.style;\r\n      var translation = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n      svgStyle.transform = translation;\r\n      svgStyle.webkitTransform = translation;\r\n    }\r\n  }\r\n\r\n  this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n  if (!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag) {\r\n    return;\r\n  }\r\n  var i;\r\n  var len;\r\n  var count = 0;\r\n  var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n  var letters = this.textProperty.currentData.l;\r\n\r\n  len = letters.length;\r\n  var renderedLetter;\r\n  var textSpan;\r\n  var textPath;\r\n  for (i = 0; i < len; i += 1) {\r\n    if (letters[i].n) {\r\n      count += 1;\r\n    } else {\r\n      textSpan = this.textSpans[i];\r\n      textPath = this.textPaths[i];\r\n      renderedLetter = renderedLetters[count];\r\n      count += 1;\r\n      if (renderedLetter._mdf.m) {\r\n        if (!this.isMasked) {\r\n          textSpan.style.webkitTransform = renderedLetter.m;\r\n          textSpan.style.transform = renderedLetter.m;\r\n        } else {\r\n          textSpan.setAttribute('transform', renderedLetter.m);\r\n        }\r\n      }\r\n      /// /textSpan.setAttribute('opacity',renderedLetter.o);\r\n      textSpan.style.opacity = renderedLetter.o;\r\n      if (renderedLetter.sw && renderedLetter._mdf.sw) {\r\n        textPath.setAttribute('stroke-width', renderedLetter.sw);\r\n      }\r\n      if (renderedLetter.sc && renderedLetter._mdf.sc) {\r\n        textPath.setAttribute('stroke', renderedLetter.sc);\r\n      }\r\n      if (renderedLetter.fc && renderedLetter._mdf.fc) {\r\n        textPath.setAttribute('fill', renderedLetter.fc);\r\n        textPath.style.color = renderedLetter.fc;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)) {\r\n    var boundingBox = this.innerElem.getBBox();\r\n\r\n    if (this.currentBBox.w !== boundingBox.width) {\r\n      this.currentBBox.w = boundingBox.width;\r\n      this.svgElement.setAttribute('width', boundingBox.width);\r\n    }\r\n    if (this.currentBBox.h !== boundingBox.height) {\r\n      this.currentBBox.h = boundingBox.height;\r\n      this.svgElement.setAttribute('height', boundingBox.height);\r\n    }\r\n\r\n    var margin = 1;\r\n    if (this.currentBBox.w !== (boundingBox.width + margin * 2) || this.currentBBox.h !== (boundingBox.height + margin * 2) || this.currentBBox.x !== (boundingBox.x - margin) || this.currentBBox.y !== (boundingBox.y - margin)) {\r\n      this.currentBBox.w = boundingBox.width + margin * 2;\r\n      this.currentBBox.h = boundingBox.height + margin * 2;\r\n      this.currentBBox.x = boundingBox.x - margin;\r\n      this.currentBBox.y = boundingBox.y - margin;\r\n\r\n      this.svgElement.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\r\n      svgStyle = this.svgElement.style;\r\n      var svgTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n      svgStyle.transform = svgTransform;\r\n      svgStyle.webkitTransform = svgTransform;\r\n    }\r\n  }\r\n};\r\n\r\n/* global extendPrototype, BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement,\r\nFrameElement, RenderableElement, createNS */\r\n\r\nfunction HImageElement(data, globalData, comp) {\r\n  this.assetData = globalData.getAssetData(data.refId);\r\n  this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement, FrameElement, RenderableElement], HImageElement);\r\n\r\nHImageElement.prototype.createContent = function () {\r\n  var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n  var img = new Image();\r\n\r\n  if (this.data.hasMask) {\r\n    this.imageElem = createNS('image');\r\n    this.imageElem.setAttribute('width', this.assetData.w + 'px');\r\n    this.imageElem.setAttribute('height', this.assetData.h + 'px');\r\n    this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\r\n    this.layerElement.appendChild(this.imageElem);\r\n    this.baseElement.setAttribute('width', this.assetData.w);\r\n    this.baseElement.setAttribute('height', this.assetData.h);\r\n  } else {\r\n    this.layerElement.appendChild(img);\r\n  }\r\n  img.crossOrigin = 'anonymous';\r\n  img.src = assetPath;\r\n  if (this.data.ln) {\r\n    this.baseElement.setAttribute('id', this.data.ln);\r\n  }\r\n};\r\n\r\n/* global PropertyFactory, degToRads, Matrix, extendPrototype, BaseElement, FrameElement, HierarchyElement */\r\n\r\nfunction HCameraElement(data, globalData, comp) {\r\n  this.initFrame();\r\n  this.initBaseData(data, globalData, comp);\r\n  this.initHierarchy();\r\n  var getProp = PropertyFactory.getProp;\r\n  this.pe = getProp(this, data.pe, 0, 0, this);\r\n  if (data.ks.p.s) {\r\n    this.px = getProp(this, data.ks.p.x, 1, 0, this);\r\n    this.py = getProp(this, data.ks.p.y, 1, 0, this);\r\n    this.pz = getProp(this, data.ks.p.z, 1, 0, this);\r\n  } else {\r\n    this.p = getProp(this, data.ks.p, 1, 0, this);\r\n  }\r\n  if (data.ks.a) {\r\n    this.a = getProp(this, data.ks.a, 1, 0, this);\r\n  }\r\n  if (data.ks.or.k.length && data.ks.or.k[0].to) {\r\n    var i;\r\n    var len = data.ks.or.k.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      data.ks.or.k[i].to = null;\r\n      data.ks.or.k[i].ti = null;\r\n    }\r\n  }\r\n  this.or = getProp(this, data.ks.or, 1, degToRads, this);\r\n  this.or.sh = true;\r\n  this.rx = getProp(this, data.ks.rx, 0, degToRads, this);\r\n  this.ry = getProp(this, data.ks.ry, 0, degToRads, this);\r\n  this.rz = getProp(this, data.ks.rz, 0, degToRads, this);\r\n  this.mat = new Matrix();\r\n  this._prevMat = new Matrix();\r\n  this._isFirstFrame = true;\r\n\r\n  // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\r\n  this.finalTransform = {\r\n    mProp: this,\r\n  };\r\n}\r\nextendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\r\n\r\nHCameraElement.prototype.setup = function () {\r\n  var i;\r\n  var len = this.comp.threeDElements.length;\r\n  var comp;\r\n  var perspectiveStyle;\r\n  var containerStyle;\r\n  for (i = 0; i < len; i += 1) {\r\n    // [perspectiveElem,container]\r\n    comp = this.comp.threeDElements[i];\r\n    if (comp.type === '3d') {\r\n      perspectiveStyle = comp.perspectiveElem.style;\r\n      containerStyle = comp.container.style;\r\n      var perspective = this.pe.v + 'px';\r\n      var origin = '0px 0px 0px';\r\n      var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n      perspectiveStyle.perspective = perspective;\r\n      perspectiveStyle.webkitPerspective = perspective;\r\n      containerStyle.transformOrigin = origin;\r\n      containerStyle.mozTransformOrigin = origin;\r\n      containerStyle.webkitTransformOrigin = origin;\r\n      perspectiveStyle.transform = matrix;\r\n      perspectiveStyle.webkitTransform = matrix;\r\n    }\r\n  }\r\n};\r\n\r\nHCameraElement.prototype.createElements = function () {\r\n};\r\n\r\nHCameraElement.prototype.hide = function () {\r\n};\r\n\r\nHCameraElement.prototype.renderFrame = function () {\r\n  var _mdf = this._isFirstFrame;\r\n  var i;\r\n  var len;\r\n  if (this.hierarchy) {\r\n    len = this.hierarchy.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\r\n    }\r\n  }\r\n  if (_mdf || this.pe._mdf || (this.p && this.p._mdf) || (this.px && (this.px._mdf || this.py._mdf || this.pz._mdf)) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || (this.a && this.a._mdf)) {\r\n    this.mat.reset();\r\n\r\n    if (this.hierarchy) {\r\n      len = this.hierarchy.length - 1;\r\n      for (i = len; i >= 0; i -= 1) {\r\n        var mTransf = this.hierarchy[i].finalTransform.mProp;\r\n        this.mat.translate(-mTransf.p.v[0], -mTransf.p.v[1], mTransf.p.v[2]);\r\n        this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\r\n        this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\r\n        this.mat.scale(1 / mTransf.s.v[0], 1 / mTransf.s.v[1], 1 / mTransf.s.v[2]);\r\n        this.mat.translate(mTransf.a.v[0], mTransf.a.v[1], mTransf.a.v[2]);\r\n      }\r\n    }\r\n    if (this.p) {\r\n      this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]);\r\n    } else {\r\n      this.mat.translate(-this.px.v, -this.py.v, this.pz.v);\r\n    }\r\n    if (this.a) {\r\n      var diffVector;\r\n      if (this.p) {\r\n        diffVector = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]];\r\n      } else {\r\n        diffVector = [this.px.v - this.a.v[0], this.py.v - this.a.v[1], this.pz.v - this.a.v[2]];\r\n      }\r\n      var mag = Math.sqrt(Math.pow(diffVector[0], 2) + Math.pow(diffVector[1], 2) + Math.pow(diffVector[2], 2));\r\n      // var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n      var lookDir = [diffVector[0] / mag, diffVector[1] / mag, diffVector[2] / mag];\r\n      var lookLengthOnXZ = Math.sqrt(lookDir[2] * lookDir[2] + lookDir[0] * lookDir[0]);\r\n      var mRotationX = (Math.atan2(lookDir[1], lookLengthOnXZ));\r\n      var mRotationY = (Math.atan2(lookDir[0], -lookDir[2]));\r\n      this.mat.rotateY(mRotationY).rotateX(-mRotationX);\r\n    }\r\n    this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n    this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n    this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0);\r\n    this.mat.translate(0, 0, this.pe.v);\r\n\r\n    var hasMatrixChanged = !this._prevMat.equals(this.mat);\r\n    if ((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\r\n      len = this.comp.threeDElements.length;\r\n      var comp;\r\n      var perspectiveStyle;\r\n      var containerStyle;\r\n      for (i = 0; i < len; i += 1) {\r\n        comp = this.comp.threeDElements[i];\r\n        if (comp.type === '3d') {\r\n          if (hasMatrixChanged) {\r\n            var matValue = this.mat.toCSS();\r\n            containerStyle = comp.container.style;\r\n            containerStyle.transform = matValue;\r\n            containerStyle.webkitTransform = matValue;\r\n          }\r\n          if (this.pe._mdf) {\r\n            perspectiveStyle = comp.perspectiveElem.style;\r\n            perspectiveStyle.perspective = this.pe.v + 'px';\r\n            perspectiveStyle.webkitPerspective = this.pe.v + 'px';\r\n          }\r\n        }\r\n      }\r\n      this.mat.clone(this._prevMat);\r\n    }\r\n  }\r\n  this._isFirstFrame = false;\r\n};\r\n\r\nHCameraElement.prototype.prepareFrame = function (num) {\r\n  this.prepareProperties(num, true);\r\n};\r\n\r\nHCameraElement.prototype.destroy = function () {\r\n};\r\nHCameraElement.prototype.getBaseElement = function () { return null; };\r\n\r\nfunction HEffects() {\r\n}\r\nHEffects.prototype.renderFrame = function () {};\r\n\r\n/* global createTag, AnimationItem */\r\n/* exported animationManager */\r\n\r\nvar animationManager = (function () {\r\n  var moduleOb = {};\r\n  var registeredAnimations = [];\r\n  var initTime = 0;\r\n  var len = 0;\r\n  var playingAnimationsNum = 0;\r\n  var _stopped = true;\r\n  var _isFrozen = false;\r\n\r\n  function removeElement(ev) {\r\n    var i = 0;\r\n    var animItem = ev.target;\r\n    while (i < len) {\r\n      if (registeredAnimations[i].animation === animItem) {\r\n        registeredAnimations.splice(i, 1);\r\n        i -= 1;\r\n        len -= 1;\r\n        if (!animItem.isPaused) {\r\n          subtractPlayingCount();\r\n        }\r\n      }\r\n      i += 1;\r\n    }\r\n  }\r\n\r\n  function registerAnimation(element, animationData) {\r\n    if (!element) {\r\n      return null;\r\n    }\r\n    var i = 0;\r\n    while (i < len) {\r\n      if (registeredAnimations[i].elem === element && registeredAnimations[i].elem !== null) {\r\n        return registeredAnimations[i].animation;\r\n      }\r\n      i += 1;\r\n    }\r\n    var animItem = new AnimationItem();\r\n    setupAnimation(animItem, element);\r\n    animItem.setData(element, animationData);\r\n    return animItem;\r\n  }\r\n\r\n  function getRegisteredAnimations() {\r\n    var i;\r\n    var lenAnims = registeredAnimations.length;\r\n    var animations = [];\r\n    for (i = 0; i < lenAnims; i += 1) {\r\n      animations.push(registeredAnimations[i].animation);\r\n    }\r\n    return animations;\r\n  }\r\n\r\n  function addPlayingCount() {\r\n    playingAnimationsNum += 1;\r\n    activate();\r\n  }\r\n\r\n  function subtractPlayingCount() {\r\n    playingAnimationsNum -= 1;\r\n  }\r\n\r\n  function setupAnimation(animItem, element) {\r\n    animItem.addEventListener('destroy', removeElement);\r\n    animItem.addEventListener('_active', addPlayingCount);\r\n    animItem.addEventListener('_idle', subtractPlayingCount);\r\n    registeredAnimations.push({ elem: element, animation: animItem });\r\n    len += 1;\r\n  }\r\n\r\n  function loadAnimation(params) {\r\n    var animItem = new AnimationItem();\r\n    setupAnimation(animItem, null);\r\n    animItem.setParams(params);\r\n    return animItem;\r\n  }\r\n\r\n  function setSpeed(val, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.setSpeed(val, animation);\r\n    }\r\n  }\r\n\r\n  function setDirection(val, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.setDirection(val, animation);\r\n    }\r\n  }\r\n\r\n  function play(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.play(animation);\r\n    }\r\n  }\r\n  function resume(nowTime) {\r\n    var elapsedTime = nowTime - initTime;\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n    }\r\n    initTime = nowTime;\r\n    if (playingAnimationsNum && !_isFrozen) {\r\n      window.requestAnimationFrame(resume);\r\n    } else {\r\n      _stopped = true;\r\n    }\r\n  }\r\n\r\n  function first(nowTime) {\r\n    initTime = nowTime;\r\n    window.requestAnimationFrame(resume);\r\n  }\r\n\r\n  function pause(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.pause(animation);\r\n    }\r\n  }\r\n\r\n  function goToAndStop(value, isFrame, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\r\n    }\r\n  }\r\n\r\n  function stop(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.stop(animation);\r\n    }\r\n  }\r\n\r\n  function togglePause(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.togglePause(animation);\r\n    }\r\n  }\r\n\r\n  function destroy(animation) {\r\n    var i;\r\n    for (i = (len - 1); i >= 0; i -= 1) {\r\n      registeredAnimations[i].animation.destroy(animation);\r\n    }\r\n  }\r\n\r\n  function searchAnimations(animationData, standalone, renderer) {\r\n    var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')),\r\n      [].slice.call(document.getElementsByClassName('bodymovin')));\r\n    var i;\r\n    var lenAnims = animElements.length;\r\n    for (i = 0; i < lenAnims; i += 1) {\r\n      if (renderer) {\r\n        animElements[i].setAttribute('data-bm-type', renderer);\r\n      }\r\n      registerAnimation(animElements[i], animationData);\r\n    }\r\n    if (standalone && lenAnims === 0) {\r\n      if (!renderer) {\r\n        renderer = 'svg';\r\n      }\r\n      var body = document.getElementsByTagName('body')[0];\r\n      body.innerText = '';\r\n      var div = createTag('div');\r\n      div.style.width = '100%';\r\n      div.style.height = '100%';\r\n      div.setAttribute('data-bm-type', renderer);\r\n      body.appendChild(div);\r\n      registerAnimation(div, animationData);\r\n    }\r\n  }\r\n\r\n  function resize() {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.resize();\r\n    }\r\n  }\r\n\r\n  function activate() {\r\n    if (!_isFrozen && playingAnimationsNum) {\r\n      if (_stopped) {\r\n        window.requestAnimationFrame(first);\r\n        _stopped = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  function freeze() {\r\n    _isFrozen = true;\r\n  }\r\n\r\n  function unfreeze() {\r\n    _isFrozen = false;\r\n    activate();\r\n  }\r\n\r\n  function setVolume(val, animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.setVolume(val, animation);\r\n    }\r\n  }\r\n\r\n  function mute(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.mute(animation);\r\n    }\r\n  }\r\n\r\n  function unmute(animation) {\r\n    var i;\r\n    for (i = 0; i < len; i += 1) {\r\n      registeredAnimations[i].animation.unmute(animation);\r\n    }\r\n  }\r\n\r\n  moduleOb.registerAnimation = registerAnimation;\r\n  moduleOb.loadAnimation = loadAnimation;\r\n  moduleOb.setSpeed = setSpeed;\r\n  moduleOb.setDirection = setDirection;\r\n  moduleOb.play = play;\r\n  moduleOb.pause = pause;\r\n  moduleOb.stop = stop;\r\n  moduleOb.togglePause = togglePause;\r\n  moduleOb.searchAnimations = searchAnimations;\r\n  moduleOb.resize = resize;\r\n  // moduleOb.start = start;\r\n  moduleOb.goToAndStop = goToAndStop;\r\n  moduleOb.destroy = destroy;\r\n  moduleOb.freeze = freeze;\r\n  moduleOb.unfreeze = unfreeze;\r\n  moduleOb.setVolume = setVolume;\r\n  moduleOb.mute = mute;\r\n  moduleOb.unmute = unmute;\r\n  moduleOb.getRegisteredAnimations = getRegisteredAnimations;\r\n  return moduleOb;\r\n}());\r\n\r\n/* global createElementID, subframeEnabled, ProjectInterface, ImagePreloader, audioControllerFactory, extendPrototype, BaseEvent,\r\nCanvasRenderer, SVGRenderer, HybridRenderer, assetLoader, dataManager, expressionsPlugin, BMEnterFrameEvent, BMCompleteLoopEvent,\r\nBMCompleteEvent, BMSegmentStartEvent, BMDestroyEvent, BMEnterFrameEvent, BMCompleteLoopEvent, BMCompleteEvent, BMSegmentStartEvent,\r\nBMDestroyEvent, BMRenderFrameErrorEvent, BMConfigErrorEvent, markerParser */\r\n\r\nvar AnimationItem = function () {\r\n  this._cbs = [];\r\n  this.name = '';\r\n  this.path = '';\r\n  this.isLoaded = false;\r\n  this.currentFrame = 0;\r\n  this.currentRawFrame = 0;\r\n  this.firstFrame = 0;\r\n  this.totalFrames = 0;\r\n  this.frameRate = 0;\r\n  this.frameMult = 0;\r\n  this.playSpeed = 1;\r\n  this.playDirection = 1;\r\n  this.playCount = 0;\r\n  this.animationData = {};\r\n  this.assets = [];\r\n  this.isPaused = true;\r\n  this.autoplay = false;\r\n  this.loop = true;\r\n  this.renderer = null;\r\n  this.animationID = createElementID();\r\n  this.assetsPath = '';\r\n  this.timeCompleted = 0;\r\n  this.segmentPos = 0;\r\n  this.isSubframeEnabled = subframeEnabled;\r\n  this.segments = [];\r\n  this._idle = true;\r\n  this._completedLoop = false;\r\n  this.projectInterface = ProjectInterface();\r\n  this.imagePreloader = new ImagePreloader();\r\n  this.audioController = audioControllerFactory();\r\n  this.markers = [];\r\n};\r\n\r\nextendPrototype([BaseEvent], AnimationItem);\r\n\r\nAnimationItem.prototype.setParams = function (params) {\r\n  if (params.wrapper || params.container) {\r\n    this.wrapper = params.wrapper || params.container;\r\n  }\r\n  var animType = 'svg';\r\n  if (params.animType) {\r\n    animType = params.animType;\r\n  } else if (params.renderer) {\r\n    animType = params.renderer;\r\n  }\r\n  switch (animType) {\r\n    case 'canvas':\r\n      this.renderer = new CanvasRenderer(this, params.rendererSettings);\r\n      break;\r\n    case 'svg':\r\n      this.renderer = new SVGRenderer(this, params.rendererSettings);\r\n      break;\r\n    default:\r\n      this.renderer = new HybridRenderer(this, params.rendererSettings);\r\n      break;\r\n  }\r\n  this.imagePreloader.setCacheType(animType, this.renderer.globalData.defs);\r\n  this.renderer.setProjectInterface(this.projectInterface);\r\n  this.animType = animType;\r\n  if (params.loop === ''\r\n        || params.loop === null\r\n        || params.loop === undefined\r\n        || params.loop === true) {\r\n    this.loop = true;\r\n  } else if (params.loop === false) {\r\n    this.loop = false;\r\n  } else {\r\n    this.loop = parseInt(params.loop, 10);\r\n  }\r\n  this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n  this.name = params.name ? params.name : '';\r\n  this.autoloadSegments = Object.prototype.hasOwnProperty.call(params, 'autoloadSegments') ? params.autoloadSegments : true;\r\n  this.assetsPath = params.assetsPath;\r\n  this.initialSegment = params.initialSegment;\r\n  if (params.audioFactory) {\r\n    this.audioController.setAudioFactory(params.audioFactory);\r\n  }\r\n  if (params.animationData) {\r\n    this.configAnimation(params.animationData);\r\n  } else if (params.path) {\r\n    if (params.path.lastIndexOf('\\\\') !== -1) {\r\n      this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\r\n    } else {\r\n      this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\r\n    }\r\n    this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\r\n    this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\r\n\r\n    assetLoader.load(params.path, this.configAnimation.bind(this), function () {\r\n      this.trigger('data_failed');\r\n    }.bind(this));\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.setData = function (wrapper, animationData) {\r\n  if (animationData) {\r\n    if (typeof animationData !== 'object') {\r\n      animationData = JSON.parse(animationData);\r\n    }\r\n  }\r\n  var params = {\r\n    wrapper: wrapper,\r\n    animationData: animationData,\r\n  };\r\n  var wrapperAttributes = wrapper.attributes;\r\n\r\n  params.path = wrapperAttributes.getNamedItem('data-animation-path') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-animation-path').value\r\n    : wrapperAttributes.getNamedItem('data-bm-path') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-path').value\r\n      : wrapperAttributes.getNamedItem('bm-path')\r\n        ? wrapperAttributes.getNamedItem('bm-path').value\r\n        : '';\r\n  params.animType = wrapperAttributes.getNamedItem('data-anim-type') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-type').value\r\n    : wrapperAttributes.getNamedItem('data-bm-type') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-type').value\r\n      : wrapperAttributes.getNamedItem('bm-type') // eslint-disable-line no-nested-ternary\r\n        ? wrapperAttributes.getNamedItem('bm-type').value\r\n        : wrapperAttributes.getNamedItem('data-bm-renderer') // eslint-disable-line no-nested-ternary\r\n          ? wrapperAttributes.getNamedItem('data-bm-renderer').value\r\n          : wrapperAttributes.getNamedItem('bm-renderer')\r\n            ? wrapperAttributes.getNamedItem('bm-renderer').value\r\n            : 'canvas';\r\n\r\n  var loop = wrapperAttributes.getNamedItem('data-anim-loop') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-loop').value\r\n    : wrapperAttributes.getNamedItem('data-bm-loop') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-loop').value\r\n      : wrapperAttributes.getNamedItem('bm-loop')\r\n        ? wrapperAttributes.getNamedItem('bm-loop').value\r\n        : '';\r\n  if (loop === 'false') {\r\n    params.loop = false;\r\n  } else if (loop === 'true') {\r\n    params.loop = true;\r\n  } else if (loop !== '') {\r\n    params.loop = parseInt(loop, 10);\r\n  }\r\n  var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-autoplay').value\r\n    : wrapperAttributes.getNamedItem('data-bm-autoplay') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-autoplay').value\r\n      : wrapperAttributes.getNamedItem('bm-autoplay')\r\n        ? wrapperAttributes.getNamedItem('bm-autoplay').value\r\n        : true;\r\n  params.autoplay = autoplay !== 'false';\r\n\r\n  params.name = wrapperAttributes.getNamedItem('data-name') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-name').value\r\n    : wrapperAttributes.getNamedItem('data-bm-name') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-name').value\r\n      : wrapperAttributes.getNamedItem('bm-name')\r\n        ? wrapperAttributes.getNamedItem('bm-name').value\r\n        : '';\r\n  var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') // eslint-disable-line no-nested-ternary\r\n    ? wrapperAttributes.getNamedItem('data-anim-prerender').value\r\n    : wrapperAttributes.getNamedItem('data-bm-prerender') // eslint-disable-line no-nested-ternary\r\n      ? wrapperAttributes.getNamedItem('data-bm-prerender').value\r\n      : wrapperAttributes.getNamedItem('bm-prerender')\r\n        ? wrapperAttributes.getNamedItem('bm-prerender').value\r\n        : '';\r\n\r\n  if (prerender === 'false') {\r\n    params.prerender = false;\r\n  }\r\n  this.setParams(params);\r\n};\r\n\r\nAnimationItem.prototype.includeLayers = function (data) {\r\n  if (data.op > this.animationData.op) {\r\n    this.animationData.op = data.op;\r\n    this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n  }\r\n  var layers = this.animationData.layers;\r\n  var i;\r\n  var len = layers.length;\r\n  var newLayers = data.layers;\r\n  var j;\r\n  var jLen = newLayers.length;\r\n  for (j = 0; j < jLen; j += 1) {\r\n    i = 0;\r\n    while (i < len) {\r\n      if (layers[i].id === newLayers[j].id) {\r\n        layers[i] = newLayers[j];\r\n        break;\r\n      }\r\n      i += 1;\r\n    }\r\n  }\r\n  if (data.chars || data.fonts) {\r\n    this.renderer.globalData.fontManager.addChars(data.chars);\r\n    this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n  }\r\n  if (data.assets) {\r\n    len = data.assets.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.animationData.assets.push(data.assets[i]);\r\n    }\r\n  }\r\n  this.animationData.__complete = false;\r\n  dataManager.completeData(this.animationData, this.renderer.globalData.fontManager);\r\n  this.renderer.includeLayers(data.layers);\r\n  if (expressionsPlugin) {\r\n    expressionsPlugin.initExpressions(this);\r\n  }\r\n  this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.loadNextSegment = function () {\r\n  var segments = this.animationData.segments;\r\n  if (!segments || segments.length === 0 || !this.autoloadSegments) {\r\n    this.trigger('data_ready');\r\n    this.timeCompleted = this.totalFrames;\r\n    return;\r\n  }\r\n  var segment = segments.shift();\r\n  this.timeCompleted = segment.time * this.frameRate;\r\n  var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\r\n  this.segmentPos += 1;\r\n  assetLoader.load(segmentPath, this.includeLayers.bind(this), function () {\r\n    this.trigger('data_failed');\r\n  }.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.loadSegments = function () {\r\n  var segments = this.animationData.segments;\r\n  if (!segments) {\r\n    this.timeCompleted = this.totalFrames;\r\n  }\r\n  this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.imagesLoaded = function () {\r\n  this.trigger('loaded_images');\r\n  this.checkLoaded();\r\n};\r\n\r\nAnimationItem.prototype.preloadImages = function () {\r\n  this.imagePreloader.setAssetsPath(this.assetsPath);\r\n  this.imagePreloader.setPath(this.path);\r\n  this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.configAnimation = function (animData) {\r\n  if (!this.renderer) {\r\n    return;\r\n  }\r\n  try {\r\n    this.animationData = animData;\r\n\r\n    if (this.initialSegment) {\r\n      this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]);\r\n      this.firstFrame = Math.round(this.initialSegment[0]);\r\n    } else {\r\n      this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n      this.firstFrame = Math.round(this.animationData.ip);\r\n    }\r\n    this.renderer.configAnimation(animData);\r\n    if (!animData.assets) {\r\n      animData.assets = [];\r\n    }\r\n\r\n    this.assets = this.animationData.assets;\r\n    this.frameRate = this.animationData.fr;\r\n    this.frameMult = this.animationData.fr / 1000;\r\n    this.renderer.searchExtraCompositions(animData.assets);\r\n    this.markers = markerParser(animData.markers || []);\r\n    this.trigger('config_ready');\r\n    this.preloadImages();\r\n    this.loadSegments();\r\n    this.updaFrameModifier();\r\n    this.waitForFontsLoaded();\r\n    if (this.isPaused) {\r\n      this.audioController.pause();\r\n    }\r\n  } catch (error) {\r\n    this.triggerConfigError(error);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.waitForFontsLoaded = function () {\r\n  if (!this.renderer) {\r\n    return;\r\n  }\r\n  if (this.renderer.globalData.fontManager.isLoaded) {\r\n    this.checkLoaded();\r\n  } else {\r\n    setTimeout(this.waitForFontsLoaded.bind(this), 20);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.checkLoaded = function () {\r\n  if (!this.isLoaded\r\n        && this.renderer.globalData.fontManager.isLoaded\r\n        && (this.imagePreloader.loadedImages() || this.renderer.rendererType !== 'canvas')\r\n        && (this.imagePreloader.loadedFootages())\r\n  ) {\r\n    this.isLoaded = true;\r\n    dataManager.completeData(this.animationData, this.renderer.globalData.fontManager);\r\n    if (expressionsPlugin) {\r\n      expressionsPlugin.initExpressions(this);\r\n    }\r\n    this.renderer.initItems();\r\n    setTimeout(function () {\r\n      this.trigger('DOMLoaded');\r\n    }.bind(this), 0);\r\n    this.gotoFrame();\r\n    if (this.autoplay) {\r\n      this.play();\r\n    }\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.resize = function () {\r\n  this.renderer.updateContainerSize();\r\n};\r\n\r\nAnimationItem.prototype.setSubframe = function (flag) {\r\n  this.isSubframeEnabled = !!flag;\r\n};\r\n\r\nAnimationItem.prototype.gotoFrame = function () {\r\n  this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame; // eslint-disable-line no-bitwise\r\n\r\n  if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\r\n    this.currentFrame = this.timeCompleted;\r\n  }\r\n  this.trigger('enterFrame');\r\n  this.renderFrame();\r\n};\r\n\r\nAnimationItem.prototype.renderFrame = function () {\r\n  if (this.isLoaded === false || !this.renderer) {\r\n    return;\r\n  }\r\n  try {\r\n    this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n  } catch (error) {\r\n    this.triggerRenderFrameError(error);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.play = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  if (this.isPaused === true) {\r\n    this.isPaused = false;\r\n    this.audioController.resume();\r\n    if (this._idle) {\r\n      this._idle = false;\r\n      this.trigger('_active');\r\n    }\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.pause = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  if (this.isPaused === false) {\r\n    this.isPaused = true;\r\n    this._idle = true;\r\n    this.trigger('_idle');\r\n    this.audioController.pause();\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.togglePause = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  if (this.isPaused === true) {\r\n    this.play();\r\n  } else {\r\n    this.pause();\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.stop = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.pause();\r\n  this.playCount = 0;\r\n  this._completedLoop = false;\r\n  this.setCurrentRawFrameValue(0);\r\n};\r\n\r\nAnimationItem.prototype.getMarkerData = function (markerName) {\r\n  var marker;\r\n  for (var i = 0; i < this.markers.length; i += 1) {\r\n    marker = this.markers[i];\r\n    if (marker.payload && marker.payload.name === markerName) {\r\n      return marker;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  var numValue = Number(value);\r\n  if (isNaN(numValue)) {\r\n    var marker = this.getMarkerData(value);\r\n    if (marker) {\r\n      this.goToAndStop(marker.time, true);\r\n    }\r\n  } else if (isFrame) {\r\n    this.setCurrentRawFrameValue(value);\r\n  } else {\r\n    this.setCurrentRawFrameValue(value * this.frameModifier);\r\n  }\r\n  this.pause();\r\n};\r\n\r\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  var numValue = Number(value);\r\n  if (isNaN(numValue)) {\r\n    var marker = this.getMarkerData(value);\r\n    if (marker) {\r\n      if (!marker.duration) {\r\n        this.goToAndStop(marker.time, true);\r\n      } else {\r\n        this.playSegments([marker.time, marker.time + marker.duration], true);\r\n      }\r\n    }\r\n  } else {\r\n    this.goToAndStop(numValue, isFrame, name);\r\n  }\r\n  this.play();\r\n};\r\n\r\nAnimationItem.prototype.advanceTime = function (value) {\r\n  if (this.isPaused === true || this.isLoaded === false) {\r\n    return;\r\n  }\r\n  var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n  var _isComplete = false;\r\n  // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n  // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n  if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n    if (!this.loop || this.playCount === this.loop) {\r\n      if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\r\n        _isComplete = true;\r\n        nextValue = this.totalFrames - 1;\r\n      }\r\n    } else if (nextValue >= this.totalFrames) {\r\n      this.playCount += 1;\r\n      if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n        this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n        this._completedLoop = true;\r\n        this.trigger('loopComplete');\r\n      }\r\n    } else {\r\n      this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n  } else if (nextValue < 0) {\r\n    if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n      if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) { // eslint-disable-line no-plusplus\r\n        this.setCurrentRawFrameValue(this.totalFrames + (nextValue % this.totalFrames));\r\n        if (!this._completedLoop) {\r\n          this._completedLoop = true;\r\n        } else {\r\n          this.trigger('loopComplete');\r\n        }\r\n      } else {\r\n        _isComplete = true;\r\n        nextValue = 0;\r\n      }\r\n    }\r\n  } else {\r\n    this.setCurrentRawFrameValue(nextValue);\r\n  }\r\n  if (_isComplete) {\r\n    this.setCurrentRawFrameValue(nextValue);\r\n    this.pause();\r\n    this.trigger('complete');\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.adjustSegment = function (arr, offset) {\r\n  this.playCount = 0;\r\n  if (arr[1] < arr[0]) {\r\n    if (this.frameModifier > 0) {\r\n      if (this.playSpeed < 0) {\r\n        this.setSpeed(-this.playSpeed);\r\n      } else {\r\n        this.setDirection(-1);\r\n      }\r\n    }\r\n    this.totalFrames = arr[0] - arr[1];\r\n    this.timeCompleted = this.totalFrames;\r\n    this.firstFrame = arr[1];\r\n    this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n  } else if (arr[1] > arr[0]) {\r\n    if (this.frameModifier < 0) {\r\n      if (this.playSpeed < 0) {\r\n        this.setSpeed(-this.playSpeed);\r\n      } else {\r\n        this.setDirection(1);\r\n      }\r\n    }\r\n    this.totalFrames = arr[1] - arr[0];\r\n    this.timeCompleted = this.totalFrames;\r\n    this.firstFrame = arr[0];\r\n    this.setCurrentRawFrameValue(0.001 + offset);\r\n  }\r\n  this.trigger('segmentStart');\r\n};\r\nAnimationItem.prototype.setSegment = function (init, end) {\r\n  var pendingFrame = -1;\r\n  if (this.isPaused) {\r\n    if (this.currentRawFrame + this.firstFrame < init) {\r\n      pendingFrame = init;\r\n    } else if (this.currentRawFrame + this.firstFrame > end) {\r\n      pendingFrame = end - init;\r\n    }\r\n  }\r\n\r\n  this.firstFrame = init;\r\n  this.totalFrames = end - init;\r\n  this.timeCompleted = this.totalFrames;\r\n  if (pendingFrame !== -1) {\r\n    this.goToAndStop(pendingFrame, true);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.playSegments = function (arr, forceFlag) {\r\n  if (forceFlag) {\r\n    this.segments.length = 0;\r\n  }\r\n  if (typeof arr[0] === 'object') {\r\n    var i;\r\n    var len = arr.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      this.segments.push(arr[i]);\r\n    }\r\n  } else {\r\n    this.segments.push(arr);\r\n  }\r\n  if (this.segments.length && forceFlag) {\r\n    this.adjustSegment(this.segments.shift(), 0);\r\n  }\r\n  if (this.isPaused) {\r\n    this.play();\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.resetSegments = function (forceFlag) {\r\n  this.segments.length = 0;\r\n  this.segments.push([this.animationData.ip, this.animationData.op]);\r\n  // this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op - this.animationData.ip+this.animationData.ip*this.frameRate)]);\r\n  if (forceFlag) {\r\n    this.checkSegments(0);\r\n  }\r\n};\r\nAnimationItem.prototype.checkSegments = function (offset) {\r\n  if (this.segments.length) {\r\n    this.adjustSegment(this.segments.shift(), offset);\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nAnimationItem.prototype.destroy = function (name) {\r\n  if ((name && this.name !== name) || !this.renderer) {\r\n    return;\r\n  }\r\n  this.renderer.destroy();\r\n  this.imagePreloader.destroy();\r\n  this.trigger('destroy');\r\n  this._cbs = null;\r\n  this.onEnterFrame = null;\r\n  this.onLoopComplete = null;\r\n  this.onComplete = null;\r\n  this.onSegmentStart = null;\r\n  this.onDestroy = null;\r\n  this.renderer = null;\r\n  this.renderer = null;\r\n  this.imagePreloader = null;\r\n  this.projectInterface = null;\r\n};\r\n\r\nAnimationItem.prototype.setCurrentRawFrameValue = function (value) {\r\n  this.currentRawFrame = value;\r\n  this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.setSpeed = function (val) {\r\n  this.playSpeed = val;\r\n  this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setDirection = function (val) {\r\n  this.playDirection = val < 0 ? -1 : 1;\r\n  this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setVolume = function (val, name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.audioController.setVolume(val);\r\n};\r\n\r\nAnimationItem.prototype.getVolume = function () {\r\n  return this.audioController.getVolume();\r\n};\r\n\r\nAnimationItem.prototype.mute = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.audioController.mute();\r\n};\r\n\r\nAnimationItem.prototype.unmute = function (name) {\r\n  if (name && this.name !== name) {\r\n    return;\r\n  }\r\n  this.audioController.unmute();\r\n};\r\n\r\nAnimationItem.prototype.updaFrameModifier = function () {\r\n  this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n  this.audioController.setRate(this.playSpeed * this.playDirection);\r\n};\r\n\r\nAnimationItem.prototype.getPath = function () {\r\n  return this.path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetsPath = function (assetData) {\r\n  var path = '';\r\n  if (assetData.e) {\r\n    path = assetData.p;\r\n  } else if (this.assetsPath) {\r\n    var imagePath = assetData.p;\r\n    if (imagePath.indexOf('images/') !== -1) {\r\n      imagePath = imagePath.split('/')[1];\r\n    }\r\n    path = this.assetsPath + imagePath;\r\n  } else {\r\n    path = this.path;\r\n    path += assetData.u ? assetData.u : '';\r\n    path += assetData.p;\r\n  }\r\n  return path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetData = function (id) {\r\n  var i = 0;\r\n  var len = this.assets.length;\r\n  while (i < len) {\r\n    if (id === this.assets[i].id) {\r\n      return this.assets[i];\r\n    }\r\n    i += 1;\r\n  }\r\n  return null;\r\n};\r\n\r\nAnimationItem.prototype.hide = function () {\r\n  this.renderer.hide();\r\n};\r\n\r\nAnimationItem.prototype.show = function () {\r\n  this.renderer.show();\r\n};\r\n\r\nAnimationItem.prototype.getDuration = function (isFrame) {\r\n  return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n};\r\n\r\nAnimationItem.prototype.trigger = function (name) {\r\n  if (this._cbs && this._cbs[name]) {\r\n    switch (name) {\r\n      case 'enterFrame':\r\n        this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\r\n        break;\r\n      case 'loopComplete':\r\n        this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n        break;\r\n      case 'complete':\r\n        this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\r\n        break;\r\n      case 'segmentStart':\r\n        this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n        break;\r\n      case 'destroy':\r\n        this.triggerEvent(name, new BMDestroyEvent(name, this));\r\n        break;\r\n      default:\r\n        this.triggerEvent(name);\r\n    }\r\n  }\r\n  if (name === 'enterFrame' && this.onEnterFrame) {\r\n    this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\r\n  }\r\n  if (name === 'loopComplete' && this.onLoopComplete) {\r\n    this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\r\n  }\r\n  if (name === 'complete' && this.onComplete) {\r\n    this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\r\n  }\r\n  if (name === 'segmentStart' && this.onSegmentStart) {\r\n    this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\r\n  }\r\n  if (name === 'destroy' && this.onDestroy) {\r\n    this.onDestroy.call(this, new BMDestroyEvent(name, this));\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.triggerRenderFrameError = function (nativeError) {\r\n  var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\r\n  this.triggerEvent('error', error);\r\n\r\n  if (this.onError) {\r\n    this.onError.call(this, error);\r\n  }\r\n};\r\n\r\nAnimationItem.prototype.triggerConfigError = function (nativeError) {\r\n  var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\r\n  this.triggerEvent('error', error);\r\n\r\n  if (this.onError) {\r\n    this.onError.call(this, error);\r\n  }\r\n};\r\n\r\n/* global CompExpressionInterface, expressionsPlugin: writable */\r\n/* exported expressionsPlugin */\r\n\r\nvar Expressions = (function () {\r\n  var ob = {};\r\n  ob.initExpressions = initExpressions;\r\n\r\n  function initExpressions(animation) {\r\n    var stackCount = 0;\r\n    var registers = [];\r\n\r\n    function pushExpression() {\r\n      stackCount += 1;\r\n    }\r\n\r\n    function popExpression() {\r\n      stackCount -= 1;\r\n      if (stackCount === 0) {\r\n        releaseInstances();\r\n      }\r\n    }\r\n\r\n    function registerExpressionProperty(expression) {\r\n      if (registers.indexOf(expression) === -1) {\r\n        registers.push(expression);\r\n      }\r\n    }\r\n\r\n    function releaseInstances() {\r\n      var i;\r\n      var len = registers.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        registers[i].release();\r\n      }\r\n      registers.length = 0;\r\n    }\r\n\r\n    animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n    animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n    animation.renderer.globalData.pushExpression = pushExpression;\r\n    animation.renderer.globalData.popExpression = popExpression;\r\n    animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\r\n  }\r\n  return ob;\r\n}());\r\n\r\nexpressionsPlugin = Expressions;\r\n\r\n/* eslint-disable camelcase, no-unused-vars */\r\n/* global BMMath, BezierFactory, createTypedArray, degToRads, shapePool */\r\n\r\nvar ExpressionManager = (function () {\r\n  'use strict';\r\n\r\n  var ob = {};\r\n  var Math = BMMath;\r\n  var window = null;\r\n  var document = null;\r\n\r\n  function $bm_isInstanceOfArray(arr) {\r\n    return arr.constructor === Array || arr.constructor === Float32Array;\r\n  }\r\n\r\n  function isNumerable(tOfV, v) {\r\n    return tOfV === 'number' || tOfV === 'boolean' || tOfV === 'string' || v instanceof Number;\r\n  }\r\n\r\n  function $bm_neg(a) {\r\n    var tOfA = typeof a;\r\n    if (tOfA === 'number' || tOfA === 'boolean' || a instanceof Number) {\r\n      return -a;\r\n    }\r\n    if ($bm_isInstanceOfArray(a)) {\r\n      var i;\r\n      var lenA = a.length;\r\n      var retArr = [];\r\n      for (i = 0; i < lenA; i += 1) {\r\n        retArr[i] = -a[i];\r\n      }\r\n      return retArr;\r\n    }\r\n    if (a.propType) {\r\n      return a.v;\r\n    }\r\n    return -a;\r\n  }\r\n\r\n  var easeInBez = BezierFactory.getBezierEasing(0.333, 0, 0.833, 0.833, 'easeIn').get;\r\n  var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, 0.667, 1, 'easeOut').get;\r\n  var easeInOutBez = BezierFactory.getBezierEasing(0.33, 0, 0.667, 1, 'easeInOut').get;\r\n\r\n  function sum(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    if (tOfA === 'string' || tOfB === 'string') {\r\n      return a + b;\r\n    }\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      return a + b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      a = a.slice(0);\r\n      a[0] += b;\r\n      return a;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      b = b.slice(0);\r\n      b[0] = a + b[0];\r\n      return b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n      var i = 0;\r\n      var lenA = a.length;\r\n      var lenB = b.length;\r\n      var retArr = [];\r\n      while (i < lenA || i < lenB) {\r\n        if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n          retArr[i] = a[i] + b[i];\r\n        } else {\r\n          retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return retArr;\r\n    }\r\n    return 0;\r\n  }\r\n  var add = sum;\r\n\r\n  function sub(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      if (tOfA === 'string') {\r\n        a = parseInt(a, 10);\r\n      }\r\n      if (tOfB === 'string') {\r\n        b = parseInt(b, 10);\r\n      }\r\n      return a - b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      a = a.slice(0);\r\n      a[0] -= b;\r\n      return a;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      b = b.slice(0);\r\n      b[0] = a - b[0];\r\n      return b;\r\n    }\r\n    if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\r\n      var i = 0;\r\n      var lenA = a.length;\r\n      var lenB = b.length;\r\n      var retArr = [];\r\n      while (i < lenA || i < lenB) {\r\n        if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\r\n          retArr[i] = a[i] - b[i];\r\n        } else {\r\n          retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return retArr;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  function mul(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    var arr;\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      return a * b;\r\n    }\r\n\r\n    var i;\r\n    var len;\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      len = a.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a[i] * b;\r\n      }\r\n      return arr;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      len = b.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a * b[i];\r\n      }\r\n      return arr;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  function div(a, b) {\r\n    var tOfA = typeof a;\r\n    var tOfB = typeof b;\r\n    var arr;\r\n    if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\r\n      return a / b;\r\n    }\r\n    var i;\r\n    var len;\r\n    if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\r\n      len = a.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a[i] / b;\r\n      }\r\n      return arr;\r\n    }\r\n    if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\r\n      len = b.length;\r\n      arr = createTypedArray('float32', len);\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = a / b[i];\r\n      }\r\n      return arr;\r\n    }\r\n    return 0;\r\n  }\r\n  function mod(a, b) {\r\n    if (typeof a === 'string') {\r\n      a = parseInt(a, 10);\r\n    }\r\n    if (typeof b === 'string') {\r\n      b = parseInt(b, 10);\r\n    }\r\n    return a % b;\r\n  }\r\n  var $bm_sum = sum;\r\n  var $bm_sub = sub;\r\n  var $bm_mul = mul;\r\n  var $bm_div = div;\r\n  var $bm_mod = mod;\r\n\r\n  function clamp(num, min, max) {\r\n    if (min > max) {\r\n      var mm = max;\r\n      max = min;\r\n      min = mm;\r\n    }\r\n    return Math.min(Math.max(num, min), max);\r\n  }\r\n\r\n  function radiansToDegrees(val) {\r\n    return val / degToRads;\r\n  }\r\n  var radians_to_degrees = radiansToDegrees;\r\n\r\n  function degreesToRadians(val) {\r\n    return val * degToRads;\r\n  }\r\n  var degrees_to_radians = radiansToDegrees;\r\n\r\n  var helperLengthArray = [0, 0, 0, 0, 0, 0];\r\n\r\n  function length(arr1, arr2) {\r\n    if (typeof arr1 === 'number' || arr1 instanceof Number) {\r\n      arr2 = arr2 || 0;\r\n      return Math.abs(arr1 - arr2);\r\n    }\r\n    if (!arr2) {\r\n      arr2 = helperLengthArray;\r\n    }\r\n    var i;\r\n    var len = Math.min(arr1.length, arr2.length);\r\n    var addedLength = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      addedLength += Math.pow(arr2[i] - arr1[i], 2);\r\n    }\r\n    return Math.sqrt(addedLength);\r\n  }\r\n\r\n  function normalize(vec) {\r\n    return div(vec, length(vec));\r\n  }\r\n\r\n  function rgbToHsl(val) {\r\n    var r = val[0]; var g = val[1]; var b = val[2];\r\n    var max = Math.max(r, g, b);\r\n    var min = Math.min(r, g, b);\r\n    var h;\r\n    var s;\r\n    var l = (max + min) / 2;\r\n\r\n    if (max === min) {\r\n      h = 0; // achromatic\r\n      s = 0; // achromatic\r\n    } else {\r\n      var d = max - min;\r\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n      switch (max) {\r\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n        case g: h = (b - r) / d + 2; break;\r\n        case b: h = (r - g) / d + 4; break;\r\n        default: break;\r\n      }\r\n      h /= 6;\r\n    }\r\n\r\n    return [h, s, l, val[3]];\r\n  }\r\n\r\n  function hue2rgb(p, q, t) {\r\n    if (t < 0) t += 1;\r\n    if (t > 1) t -= 1;\r\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n    if (t < 1 / 2) return q;\r\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n    return p;\r\n  }\r\n\r\n  function hslToRgb(val) {\r\n    var h = val[0];\r\n    var s = val[1];\r\n    var l = val[2];\r\n\r\n    var r;\r\n    var g;\r\n    var b;\r\n\r\n    if (s === 0) {\r\n      r = l; // achromatic\r\n      b = l; // achromatic\r\n      g = l; // achromatic\r\n    } else {\r\n      var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n      var p = 2 * l - q;\r\n      r = hue2rgb(p, q, h + 1 / 3);\r\n      g = hue2rgb(p, q, h);\r\n      b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n\r\n    return [r, g, b, val[3]];\r\n  }\r\n\r\n  function linear(t, tMin, tMax, value1, value2) {\r\n    if (value1 === undefined || value2 === undefined) {\r\n      value1 = tMin;\r\n      value2 = tMax;\r\n      tMin = 0;\r\n      tMax = 1;\r\n    }\r\n    if (tMax < tMin) {\r\n      var _tMin = tMax;\r\n      tMax = tMin;\r\n      tMin = _tMin;\r\n    }\r\n    if (t <= tMin) {\r\n      return value1;\r\n    } if (t >= tMax) {\r\n      return value2;\r\n    }\r\n    var perc = tMax === tMin ? 0 : (t - tMin) / (tMax - tMin);\r\n    if (!value1.length) {\r\n      return value1 + (value2 - value1) * perc;\r\n    }\r\n    var i;\r\n    var len = value1.length;\r\n    var arr = createTypedArray('float32', len);\r\n    for (i = 0; i < len; i += 1) {\r\n      arr[i] = value1[i] + (value2[i] - value1[i]) * perc;\r\n    }\r\n    return arr;\r\n  }\r\n  function random(min, max) {\r\n    if (max === undefined) {\r\n      if (min === undefined) {\r\n        min = 0;\r\n        max = 1;\r\n      } else {\r\n        max = min;\r\n        min = undefined;\r\n      }\r\n    }\r\n    if (max.length) {\r\n      var i;\r\n      var len = max.length;\r\n      if (!min) {\r\n        min = createTypedArray('float32', len);\r\n      }\r\n      var arr = createTypedArray('float32', len);\r\n      var rnd = BMMath.random();\r\n      for (i = 0; i < len; i += 1) {\r\n        arr[i] = min[i] + rnd * (max[i] - min[i]);\r\n      }\r\n      return arr;\r\n    }\r\n    if (min === undefined) {\r\n      min = 0;\r\n    }\r\n    var rndm = BMMath.random();\r\n    return min + rndm * (max - min);\r\n  }\r\n\r\n  function createPath(points, inTangents, outTangents, closed) {\r\n    var i;\r\n    var len = points.length;\r\n    var path = shapePool.newElement();\r\n    path.setPathData(!!closed, len);\r\n    var arrPlaceholder = [0, 0];\r\n    var inVertexPoint;\r\n    var outVertexPoint;\r\n    for (i = 0; i < len; i += 1) {\r\n      inVertexPoint = (inTangents && inTangents[i]) ? inTangents[i] : arrPlaceholder;\r\n      outVertexPoint = (outTangents && outTangents[i]) ? outTangents[i] : arrPlaceholder;\r\n      path.setTripleAt(points[i][0], points[i][1], outVertexPoint[0] + points[i][0], outVertexPoint[1] + points[i][1], inVertexPoint[0] + points[i][0], inVertexPoint[1] + points[i][1], i, true);\r\n    }\r\n    return path;\r\n  }\r\n\r\n  function initiateExpression(elem, data, property) {\r\n    var val = data.x;\r\n    var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n    var _needsRandom = val.indexOf('random') !== -1;\r\n    var elemType = elem.data.ty;\r\n    var transform;\r\n    var $bm_transform;\r\n    var content;\r\n    var effect;\r\n    var thisProperty = property;\r\n    thisProperty.valueAtTime = thisProperty.getValueAtTime;\r\n    Object.defineProperty(thisProperty, 'value', {\r\n      get: function () {\r\n        return thisProperty.v;\r\n      },\r\n    });\r\n    elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\r\n    elem.comp.displayStartTime = 0;\r\n    var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n    var outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n    var width = elem.data.sw ? elem.data.sw : 0;\r\n    var height = elem.data.sh ? elem.data.sh : 0;\r\n    var name = elem.data.nm;\r\n    var loopIn;\r\n    var loop_in;\r\n    var loopOut;\r\n    var loop_out;\r\n    var smooth;\r\n    var toWorld;\r\n    var fromWorld;\r\n    var fromComp;\r\n    var toComp;\r\n    var fromCompToSurface;\r\n    var position;\r\n    var rotation;\r\n    var anchorPoint;\r\n    var scale;\r\n    var thisLayer;\r\n    var thisComp;\r\n    var mask;\r\n    var valueAtTime;\r\n    var velocityAtTime;\r\n\r\n    var scoped_bm_rt;\r\n    var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}]')[0]; // eslint-disable-line no-eval\r\n    var numKeys = property.kf ? data.k.length : 0;\r\n\r\n    var active = !this.data || this.data.hd !== true;\r\n\r\n    var wiggle = function wiggle(freq, amp) {\r\n      var iWiggle;\r\n      var j;\r\n      var lenWiggle = this.pv.length ? this.pv.length : 1;\r\n      var addedAmps = createTypedArray('float32', lenWiggle);\r\n      freq = 5;\r\n      var iterations = Math.floor(time * freq);\r\n      iWiggle = 0;\r\n      j = 0;\r\n      while (iWiggle < iterations) {\r\n        // var rnd = BMMath.random();\r\n        for (j = 0; j < lenWiggle; j += 1) {\r\n          addedAmps[j] += -amp + amp * 2 * BMMath.random();\r\n          // addedAmps[j] += -amp + amp*2*rnd;\r\n        }\r\n        iWiggle += 1;\r\n      }\r\n      // var rnd2 = BMMath.random();\r\n      var periods = time * freq;\r\n      var perc = periods - Math.floor(periods);\r\n      var arr = createTypedArray('float32', lenWiggle);\r\n      if (lenWiggle > 1) {\r\n        for (j = 0; j < lenWiggle; j += 1) {\r\n          arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc;\r\n          // arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n          // arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n        }\r\n        return arr;\r\n      }\r\n      return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\r\n    }.bind(this);\r\n\r\n    if (thisProperty.loopIn) {\r\n      loopIn = thisProperty.loopIn.bind(thisProperty);\r\n      loop_in = loopIn;\r\n    }\r\n\r\n    if (thisProperty.loopOut) {\r\n      loopOut = thisProperty.loopOut.bind(thisProperty);\r\n      loop_out = loopOut;\r\n    }\r\n\r\n    if (thisProperty.smooth) {\r\n      smooth = thisProperty.smooth.bind(thisProperty);\r\n    }\r\n\r\n    function loopInDuration(type, duration) {\r\n      return loopIn(type, duration, true);\r\n    }\r\n\r\n    function loopOutDuration(type, duration) {\r\n      return loopOut(type, duration, true);\r\n    }\r\n\r\n    if (this.getValueAtTime) {\r\n      valueAtTime = this.getValueAtTime.bind(this);\r\n    }\r\n\r\n    if (this.getVelocityAtTime) {\r\n      velocityAtTime = this.getVelocityAtTime.bind(this);\r\n    }\r\n\r\n    var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n    function lookAt(elem1, elem2) {\r\n      var fVec = [elem2[0] - elem1[0], elem2[1] - elem1[1], elem2[2] - elem1[2]];\r\n      var pitch = Math.atan2(fVec[0], Math.sqrt(fVec[1] * fVec[1] + fVec[2] * fVec[2])) / degToRads;\r\n      var yaw = -Math.atan2(fVec[1], fVec[2]) / degToRads;\r\n      return [yaw, pitch, 0];\r\n    }\r\n\r\n    function easeOut(t, tMin, tMax, val1, val2) {\r\n      return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\r\n    }\r\n\r\n    function easeIn(t, tMin, tMax, val1, val2) {\r\n      return applyEase(easeInBez, t, tMin, tMax, val1, val2);\r\n    }\r\n\r\n    function ease(t, tMin, tMax, val1, val2) {\r\n      return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\r\n    }\r\n\r\n    function applyEase(fn, t, tMin, tMax, val1, val2) {\r\n      if (val1 === undefined) {\r\n        val1 = tMin;\r\n        val2 = tMax;\r\n      } else {\r\n        t = (t - tMin) / (tMax - tMin);\r\n      }\r\n      if (t > 1) {\r\n        t = 1;\r\n      } else if (t < 0) {\r\n        t = 0;\r\n      }\r\n      var mult = fn(t);\r\n      if ($bm_isInstanceOfArray(val1)) {\r\n        var iKey;\r\n        var lenKey = val1.length;\r\n        var arr = createTypedArray('float32', lenKey);\r\n        for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n          arr[iKey] = (val2[iKey] - val1[iKey]) * mult + val1[iKey];\r\n        }\r\n        return arr;\r\n      }\r\n      return (val2 - val1) * mult + val1;\r\n    }\r\n\r\n    function nearestKey(time) {\r\n      var iKey;\r\n      var lenKey = data.k.length;\r\n      var index;\r\n      var keyTime;\r\n      if (!data.k.length || typeof (data.k[0]) === 'number') {\r\n        index = 0;\r\n        keyTime = 0;\r\n      } else {\r\n        index = -1;\r\n        time *= elem.comp.globalData.frameRate;\r\n        if (time < data.k[0].t) {\r\n          index = 1;\r\n          keyTime = data.k[0].t;\r\n        } else {\r\n          for (iKey = 0; iKey < lenKey - 1; iKey += 1) {\r\n            if (time === data.k[iKey].t) {\r\n              index = iKey + 1;\r\n              keyTime = data.k[iKey].t;\r\n              break;\r\n            } else if (time > data.k[iKey].t && time < data.k[iKey + 1].t) {\r\n              if (time - data.k[iKey].t > data.k[iKey + 1].t - time) {\r\n                index = iKey + 2;\r\n                keyTime = data.k[iKey + 1].t;\r\n              } else {\r\n                index = iKey + 1;\r\n                keyTime = data.k[iKey].t;\r\n              }\r\n              break;\r\n            }\r\n          }\r\n          if (index === -1) {\r\n            index = iKey + 1;\r\n            keyTime = data.k[iKey].t;\r\n          }\r\n        }\r\n      }\r\n      var obKey = {};\r\n      obKey.index = index;\r\n      obKey.time = keyTime / elem.comp.globalData.frameRate;\r\n      return obKey;\r\n    }\r\n\r\n    function key(ind) {\r\n      var obKey;\r\n      var iKey;\r\n      var lenKey;\r\n      if (!data.k.length || typeof (data.k[0]) === 'number') {\r\n        throw new Error('The property has no keyframe at index ' + ind);\r\n      }\r\n      ind -= 1;\r\n      obKey = {\r\n        time: data.k[ind].t / elem.comp.globalData.frameRate,\r\n        value: [],\r\n      };\r\n      var arr = Object.prototype.hasOwnProperty.call(data.k[ind], 's') ? data.k[ind].s : data.k[ind - 1].e;\r\n\r\n      lenKey = arr.length;\r\n      for (iKey = 0; iKey < lenKey; iKey += 1) {\r\n        obKey[iKey] = arr[iKey];\r\n        obKey.value[iKey] = arr[iKey];\r\n      }\r\n      return obKey;\r\n    }\r\n\r\n    function framesToTime(frames, fps) {\r\n      if (!fps) {\r\n        fps = elem.comp.globalData.frameRate;\r\n      }\r\n      return frames / fps;\r\n    }\r\n\r\n    function timeToFrames(t, fps) {\r\n      if (!t && t !== 0) {\r\n        t = time;\r\n      }\r\n      if (!fps) {\r\n        fps = elem.comp.globalData.frameRate;\r\n      }\r\n      return t * fps;\r\n    }\r\n\r\n    function seedRandom(seed) {\r\n      BMMath.seedrandom(randSeed + seed);\r\n    }\r\n\r\n    function sourceRectAtTime() {\r\n      return elem.sourceRectAtTime();\r\n    }\r\n\r\n    function substring(init, end) {\r\n      if (typeof value === 'string') {\r\n        if (end === undefined) {\r\n          return value.substring(init);\r\n        }\r\n        return value.substring(init, end);\r\n      }\r\n      return '';\r\n    }\r\n\r\n    function substr(init, end) {\r\n      if (typeof value === 'string') {\r\n        if (end === undefined) {\r\n          return value.substr(init);\r\n        }\r\n        return value.substr(init, end);\r\n      }\r\n      return '';\r\n    }\r\n\r\n    function posterizeTime(framesPerSecond) {\r\n      time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond;\r\n      value = valueAtTime(time);\r\n    }\r\n\r\n    var time;\r\n    var velocity;\r\n    var value;\r\n    var text;\r\n    var textIndex;\r\n    var textTotal;\r\n    var selectorValue;\r\n    var index = elem.data.ind;\r\n    var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n    var parent;\r\n    var randSeed = Math.floor(Math.random() * 1000000);\r\n    var globalData = elem.globalData;\r\n    function executeExpression(_value) {\r\n      // globalData.pushExpression();\r\n      value = _value;\r\n      if (_needsRandom) {\r\n        seedRandom(randSeed);\r\n      }\r\n      if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\r\n        return value;\r\n      }\r\n      if (this.propType === 'textSelector') {\r\n        textIndex = this.textIndex;\r\n        textTotal = this.textTotal;\r\n        selectorValue = this.selectorValue;\r\n      }\r\n      if (!thisLayer) {\r\n        text = elem.layerInterface.text;\r\n        thisLayer = elem.layerInterface;\r\n        thisComp = elem.comp.compInterface;\r\n        toWorld = thisLayer.toWorld.bind(thisLayer);\r\n        fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n        fromComp = thisLayer.fromComp.bind(thisLayer);\r\n        toComp = thisLayer.toComp.bind(thisLayer);\r\n        mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\r\n        fromCompToSurface = fromComp;\r\n      }\r\n      if (!transform) {\r\n        transform = elem.layerInterface('ADBE Transform Group');\r\n        $bm_transform = transform;\r\n        if (transform) {\r\n          anchorPoint = transform.anchorPoint;\r\n          /* position = transform.position;\r\n                    rotation = transform.rotation;\r\n                    scale = transform.scale; */\r\n        }\r\n      }\r\n\r\n      if (elemType === 4 && !content) {\r\n        content = thisLayer('ADBE Root Vectors Group');\r\n      }\r\n      if (!effect) {\r\n        effect = thisLayer(4);\r\n      }\r\n      hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n      if (hasParent && !parent) {\r\n        parent = elem.hierarchy[0].layerInterface;\r\n      }\r\n      time = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n      if (needsVelocity) {\r\n        velocity = velocityAtTime(time);\r\n      }\r\n      expression_function();\r\n      this.frameExpressionId = elem.globalData.frameId;\r\n\r\n      // TODO: Check if it's possible to return on ShapeInterface the .v value\r\n      if (scoped_bm_rt.propType === 'shape') {\r\n        scoped_bm_rt = scoped_bm_rt.v;\r\n      }\r\n      // globalData.popExpression();\r\n      return scoped_bm_rt;\r\n    }\r\n    return executeExpression;\r\n  }\r\n\r\n  ob.initiateExpression = initiateExpression;\r\n  return ob;\r\n}());\r\n\r\n/* global ExpressionManager, createTypedArray */\r\n/* exported expressionHelpers */\r\n\r\nvar expressionHelpers = (function () {\r\n  function searchExpressions(elem, data, prop) {\r\n    if (data.x) {\r\n      prop.k = true;\r\n      prop.x = true;\r\n      prop.initiateExpression = ExpressionManager.initiateExpression;\r\n      prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\r\n    }\r\n  }\r\n\r\n  function getValueAtTime(frameNum) {\r\n    frameNum *= this.elem.globalData.frameRate;\r\n    frameNum -= this.offsetTime;\r\n    if (frameNum !== this._cachingAtTime.lastFrame) {\r\n      this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n      this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n      this._cachingAtTime.lastFrame = frameNum;\r\n    }\r\n    return this._cachingAtTime.value;\r\n  }\r\n\r\n  function getSpeedAtTime(frameNum) {\r\n    var delta = -0.01;\r\n    var v1 = this.getValueAtTime(frameNum);\r\n    var v2 = this.getValueAtTime(frameNum + delta);\r\n    var speed = 0;\r\n    if (v1.length) {\r\n      var i;\r\n      for (i = 0; i < v1.length; i += 1) {\r\n        speed += Math.pow(v2[i] - v1[i], 2);\r\n      }\r\n      speed = Math.sqrt(speed) * 100;\r\n    } else {\r\n      speed = 0;\r\n    }\r\n    return speed;\r\n  }\r\n\r\n  function getVelocityAtTime(frameNum) {\r\n    if (this.vel !== undefined) {\r\n      return this.vel;\r\n    }\r\n    var delta = -0.001;\r\n    // frameNum += this.elem.data.st;\r\n    var v1 = this.getValueAtTime(frameNum);\r\n    var v2 = this.getValueAtTime(frameNum + delta);\r\n    var velocity;\r\n    if (v1.length) {\r\n      velocity = createTypedArray('float32', v1.length);\r\n      var i;\r\n      for (i = 0; i < v1.length; i += 1) {\r\n        // removing frameRate\r\n        // if needed, don't add it here\r\n        // velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n        velocity[i] = (v2[i] - v1[i]) / delta;\r\n      }\r\n    } else {\r\n      velocity = (v2 - v1) / delta;\r\n    }\r\n    return velocity;\r\n  }\r\n\r\n  function getStaticValueAtTime() {\r\n    return this.pv;\r\n  }\r\n\r\n  function setGroupProperty(propertyGroup) {\r\n    this.propertyGroup = propertyGroup;\r\n  }\r\n\r\n  return {\r\n    searchExpressions: searchExpressions,\r\n    getSpeedAtTime: getSpeedAtTime,\r\n    getVelocityAtTime: getVelocityAtTime,\r\n    getValueAtTime: getValueAtTime,\r\n    getStaticValueAtTime: getStaticValueAtTime,\r\n    setGroupProperty: setGroupProperty,\r\n  };\r\n}());\r\n\r\n/* global createTypedArray, Matrix, TransformPropertyFactory, expressionHelpers, PropertyFactory, expressionHelpers,\r\ninitialDefaultFrame, shapePool, ShapePropertyFactory, bez, extendPrototype, ExpressionManager, createSizedArray */\r\n\r\n(function addPropertyDecorator() {\r\n  function loopOut(type, duration, durationFlag) {\r\n    if (!this.k || !this.keyframes) {\r\n      return this.pv;\r\n    }\r\n    type = type ? type.toLowerCase() : '';\r\n    var currentFrame = this.comp.renderedFrame;\r\n    var keyframes = this.keyframes;\r\n    var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n    if (currentFrame <= lastKeyFrame) {\r\n      return this.pv;\r\n    }\r\n    var cycleDuration;\r\n    var firstKeyFrame;\r\n    if (!durationFlag) {\r\n      if (!duration || duration > keyframes.length - 1) {\r\n        duration = keyframes.length - 1;\r\n      }\r\n      firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n      cycleDuration = lastKeyFrame - firstKeyFrame;\r\n    } else {\r\n      if (!duration) {\r\n        cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\r\n      } else {\r\n        cycleDuration = Math.abs(lastKeyFrame - this.elem.comp.globalData.frameRate * duration);\r\n      }\r\n      firstKeyFrame = lastKeyFrame - cycleDuration;\r\n    }\r\n    var i;\r\n    var len;\r\n    var ret;\r\n    if (type === 'pingpong') {\r\n      var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n      if (iterations % 2 !== 0) {\r\n          return this.getValueAtTime(((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n      }\r\n    } else if (type === 'offset') {\r\n      var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n        var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n      var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\r\n      if (this.pv.length) {\r\n        ret = new Array(initV.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          ret[i] = (endV[i] - initV[i]) * repeats + current[i];\r\n        }\r\n        return ret;\r\n      }\r\n      return (endV - initV) * repeats + current;\r\n    } else if (type === 'continue') {\r\n      var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n      if (this.pv.length) {\r\n        ret = new Array(lastValue.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005; // eslint-disable-line\r\n        }\r\n        return ret;\r\n      }\r\n      return lastValue + (lastValue - nextLastValue) * (((currentFrame - lastKeyFrame)) / 0.001);\r\n    }\r\n      return this.getValueAtTime((((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n\r\n  }\r\n\r\n  function loopIn(type, duration, durationFlag) {\r\n    if (!this.k) {\r\n      return this.pv;\r\n    }\r\n    type = type ? type.toLowerCase() : '';\r\n    var currentFrame = this.comp.renderedFrame;\r\n    var keyframes = this.keyframes;\r\n    var firstKeyFrame = keyframes[0].t;\r\n    if (currentFrame >= firstKeyFrame) {\r\n      return this.pv;\r\n    }\r\n    var cycleDuration;\r\n    var lastKeyFrame;\r\n    if (!durationFlag) {\r\n      if (!duration || duration > keyframes.length - 1) {\r\n        duration = keyframes.length - 1;\r\n      }\r\n      lastKeyFrame = keyframes[duration].t;\r\n      cycleDuration = lastKeyFrame - firstKeyFrame;\r\n    } else {\r\n      if (!duration) {\r\n        cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\r\n      } else {\r\n        cycleDuration = Math.abs(this.elem.comp.globalData.frameRate * duration);\r\n      }\r\n      lastKeyFrame = firstKeyFrame + cycleDuration;\r\n    }\r\n    var i;\r\n    var len;\r\n    var ret;\r\n    if (type === 'pingpong') {\r\n      var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\r\n      if (iterations % 2 === 0) {\r\n          return this.getValueAtTime((((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n      }\r\n    } else if (type === 'offset') {\r\n      var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var current = this.getValueAtTime((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration) + firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n      var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\r\n      if (this.pv.length) {\r\n        ret = new Array(initV.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\r\n        }\r\n        return ret;\r\n      }\r\n      return current - (endV - initV) * repeats;\r\n    } else if (type === 'continue') {\r\n      var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n      var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n      if (this.pv.length) {\r\n        ret = new Array(firstValue.length);\r\n        len = ret.length;\r\n        for (i = 0; i < len; i += 1) {\r\n          ret[i] = firstValue[i] + ((firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame)) / 0.001;\r\n        }\r\n        return ret;\r\n      }\r\n      return firstValue + ((firstValue - nextFirstValue) * (firstKeyFrame - currentFrame)) / 0.001;\r\n    }\r\n      return this.getValueAtTime(((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame))) / this.comp.globalData.frameRate, 0); // eslint-disable-line\r\n\r\n  }\r\n\r\n  function smooth(width, samples) {\r\n    if (!this.k) {\r\n      return this.pv;\r\n    }\r\n    width = (width || 0.4) * 0.5;\r\n    samples = Math.floor(samples || 5);\r\n    if (samples <= 1) {\r\n      return this.pv;\r\n    }\r\n    var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n    var initFrame = currentTime - width;\r\n    var endFrame = currentTime + width;\r\n    var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\r\n    var i = 0;\r\n    var j = 0;\r\n    var value;\r\n    if (this.pv.length) {\r\n      value = createTypedArray('float32', this.pv.length);\r\n    } else {\r\n      value = 0;\r\n    }\r\n    var sampleValue;\r\n    while (i < samples) {\r\n      sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\r\n      if (this.pv.length) {\r\n        for (j = 0; j < this.pv.length; j += 1) {\r\n          value[j] += sampleValue[j];\r\n        }\r\n      } else {\r\n        value += sampleValue;\r\n      }\r\n      i += 1;\r\n    }\r\n    if (this.pv.length) {\r\n      for (j = 0; j < this.pv.length; j += 1) {\r\n        value[j] /= samples;\r\n      }\r\n    } else {\r\n      value /= samples;\r\n    }\r\n    return value;\r\n  }\r\n\r\n  function getTransformValueAtTime(time) {\r\n    if (!this._transformCachingAtTime) {\r\n      this._transformCachingAtTime = {\r\n        v: new Matrix(),\r\n      };\r\n    }\r\n    /// /\r\n    var matrix = this._transformCachingAtTime.v;\r\n    matrix.cloneFromProps(this.pre.props);\r\n    if (this.appliedTransformations < 1) {\r\n      var anchor = this.a.getValueAtTime(time);\r\n      matrix.translate(\r\n        -anchor[0] * this.a.mult,\r\n        -anchor[1] * this.a.mult,\r\n        anchor[2] * this.a.mult\r\n      );\r\n    }\r\n    if (this.appliedTransformations < 2) {\r\n      var scale = this.s.getValueAtTime(time);\r\n      matrix.scale(\r\n        scale[0] * this.s.mult,\r\n        scale[1] * this.s.mult,\r\n        scale[2] * this.s.mult\r\n      );\r\n    }\r\n    if (this.sk && this.appliedTransformations < 3) {\r\n      var skew = this.sk.getValueAtTime(time);\r\n      var skewAxis = this.sa.getValueAtTime(time);\r\n      matrix.skewFromAxis(-skew * this.sk.mult, skewAxis * this.sa.mult);\r\n    }\r\n    if (this.r && this.appliedTransformations < 4) {\r\n      var rotation = this.r.getValueAtTime(time);\r\n      matrix.rotate(-rotation * this.r.mult);\r\n    } else if (!this.r && this.appliedTransformations < 4) {\r\n      var rotationZ = this.rz.getValueAtTime(time);\r\n      var rotationY = this.ry.getValueAtTime(time);\r\n      var rotationX = this.rx.getValueAtTime(time);\r\n      var orientation = this.or.getValueAtTime(time);\r\n      matrix.rotateZ(-rotationZ * this.rz.mult)\r\n        .rotateY(rotationY * this.ry.mult)\r\n        .rotateX(rotationX * this.rx.mult)\r\n        .rotateZ(-orientation[2] * this.or.mult)\r\n        .rotateY(orientation[1] * this.or.mult)\r\n        .rotateX(orientation[0] * this.or.mult);\r\n    }\r\n    if (this.data.p && this.data.p.s) {\r\n      var positionX = this.px.getValueAtTime(time);\r\n      var positionY = this.py.getValueAtTime(time);\r\n      if (this.data.p.z) {\r\n        var positionZ = this.pz.getValueAtTime(time);\r\n        matrix.translate(\r\n          positionX * this.px.mult,\r\n          positionY * this.py.mult,\r\n          -positionZ * this.pz.mult\r\n        );\r\n      } else {\r\n        matrix.translate(positionX * this.px.mult, positionY * this.py.mult, 0);\r\n      }\r\n    } else {\r\n      var position = this.p.getValueAtTime(time);\r\n      matrix.translate(\r\n        position[0] * this.p.mult,\r\n        position[1] * this.p.mult,\r\n        -position[2] * this.p.mult\r\n      );\r\n    }\r\n    return matrix;\r\n    /// /\r\n  }\r\n\r\n  function getTransformStaticValueAtTime() {\r\n    return this.v.clone(new Matrix());\r\n  }\r\n\r\n  var getTransformProperty = TransformPropertyFactory.getTransformProperty;\r\n  TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\r\n    var prop = getTransformProperty(elem, data, container);\r\n    if (prop.dynamicProperties.length) {\r\n      prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n    } else {\r\n      prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n    }\r\n    prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n    return prop;\r\n  };\r\n\r\n  var propertyGetProp = PropertyFactory.getProp;\r\n  PropertyFactory.getProp = function (elem, data, type, mult, container) {\r\n    var prop = propertyGetProp(elem, data, type, mult, container);\r\n    // prop.getVelocityAtTime = getVelocityAtTime;\r\n    // prop.loopOut = loopOut;\r\n    // prop.loopIn = loopIn;\r\n    if (prop.kf) {\r\n      prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\r\n    } else {\r\n      prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\r\n    }\r\n    prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n    prop.loopOut = loopOut;\r\n    prop.loopIn = loopIn;\r\n    prop.smooth = smooth;\r\n    prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\r\n    prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\r\n    prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n    prop.propertyIndex = data.ix;\r\n    var value = 0;\r\n    if (type !== 0) {\r\n      value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\r\n    }\r\n    prop._cachingAtTime = {\r\n      lastFrame: initialDefaultFrame,\r\n      lastIndex: 0,\r\n      value: value,\r\n    };\r\n    expressionHelpers.searchExpressions(elem, data, prop);\r\n    if (prop.k) {\r\n      container.addDynamicProperty(prop);\r\n    }\r\n\r\n    return prop;\r\n  };\r\n\r\n  function getShapeValueAtTime(frameNum) {\r\n    // For now this caching object is created only when needed instead of creating it when the shape is initialized.\r\n    if (!this._cachingAtTime) {\r\n      this._cachingAtTime = {\r\n        shapeValue: shapePool.clone(this.pv),\r\n        lastIndex: 0,\r\n        lastTime: initialDefaultFrame,\r\n      };\r\n    }\r\n\r\n    frameNum *= this.elem.globalData.frameRate;\r\n    frameNum -= this.offsetTime;\r\n    if (frameNum !== this._cachingAtTime.lastTime) {\r\n      this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\r\n      this._cachingAtTime.lastTime = frameNum;\r\n      this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\r\n    }\r\n    return this._cachingAtTime.shapeValue;\r\n  }\r\n\r\n  var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n  var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n  function ShapeExpressions() {}\r\n  ShapeExpressions.prototype = {\r\n    vertices: function (prop, time) {\r\n      if (this.k) {\r\n        this.getValue();\r\n      }\r\n      var shapePath = this.v;\r\n      if (time !== undefined) {\r\n        shapePath = this.getValueAtTime(time, 0);\r\n      }\r\n      var i;\r\n      var len = shapePath._length;\r\n      var vertices = shapePath[prop];\r\n      var points = shapePath.v;\r\n      var arr = createSizedArray(len);\r\n      for (i = 0; i < len; i += 1) {\r\n        if (prop === 'i' || prop === 'o') {\r\n          arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\r\n        } else {\r\n          arr[i] = [vertices[i][0], vertices[i][1]];\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n    points: function (time) {\r\n      return this.vertices('v', time);\r\n    },\r\n    inTangents: function (time) {\r\n      return this.vertices('i', time);\r\n    },\r\n    outTangents: function (time) {\r\n      return this.vertices('o', time);\r\n    },\r\n    isClosed: function () {\r\n      return this.v.c;\r\n    },\r\n    pointOnPath: function (perc, time) {\r\n      var shapePath = this.v;\r\n      if (time !== undefined) {\r\n        shapePath = this.getValueAtTime(time, 0);\r\n      }\r\n      if (!this._segmentsLength) {\r\n        this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n      }\r\n\r\n      var segmentsLength = this._segmentsLength;\r\n      var lengths = segmentsLength.lengths;\r\n      var lengthPos = segmentsLength.totalLength * perc;\r\n      var i = 0;\r\n      var len = lengths.length;\r\n      var accumulatedLength = 0;\r\n      var pt;\r\n      while (i < len) {\r\n        if (accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n          var initIndex = i;\r\n          var endIndex = (shapePath.c && i === len - 1) ? 0 : i + 1;\r\n          var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\r\n          pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\r\n          break;\r\n        } else {\r\n          accumulatedLength += lengths[i].addedLength;\r\n        }\r\n        i += 1;\r\n      }\r\n      if (!pt) {\r\n        pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\r\n      }\r\n      return pt;\r\n    },\r\n    vectorOnPath: function (perc, time, vectorType) {\r\n      // perc doesn't use triple equality because it can be a Number object as well as a primitive.\r\n      if (perc == 1) { // eslint-disable-line eqeqeq\r\n        perc = this.v.c;\r\n      } else if (perc == 0) { // eslint-disable-line eqeqeq\r\n        perc = 0.999;\r\n      }\r\n      var pt1 = this.pointOnPath(perc, time);\r\n      var pt2 = this.pointOnPath(perc + 0.001, time);\r\n      var xLength = pt2[0] - pt1[0];\r\n      var yLength = pt2[1] - pt1[1];\r\n      var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\r\n      if (magnitude === 0) {\r\n        return [0, 0];\r\n      }\r\n      var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\r\n      return unitVector;\r\n    },\r\n    tangentOnPath: function (perc, time) {\r\n      return this.vectorOnPath(perc, time, 'tangent');\r\n    },\r\n    normalOnPath: function (perc, time) {\r\n      return this.vectorOnPath(perc, time, 'normal');\r\n    },\r\n    setGroupProperty: expressionHelpers.setGroupProperty,\r\n    getValueAtTime: expressionHelpers.getStaticValueAtTime,\r\n  };\r\n  extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\r\n  extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\r\n  KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n  KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\r\n\r\n  var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n  ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\r\n    var prop = propertyGetShapeProp(elem, data, type, arr, trims);\r\n    prop.propertyIndex = data.ix;\r\n    prop.lock = false;\r\n    if (type === 3) {\r\n      expressionHelpers.searchExpressions(elem, data.pt, prop);\r\n    } else if (type === 4) {\r\n      expressionHelpers.searchExpressions(elem, data.ks, prop);\r\n    }\r\n    if (prop.k) {\r\n      elem.addDynamicProperty(prop);\r\n    }\r\n    return prop;\r\n  };\r\n}());\r\n\r\n/* global ExpressionManager, TextProperty */\r\n\r\n(function addDecorator() {\r\n  function searchExpressions() {\r\n    if (this.data.d.x) {\r\n      this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\r\n      this.addEffect(this.getExpressionValue.bind(this));\r\n      return true;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  TextProperty.prototype.getExpressionValue = function (currentValue, text) {\r\n    var newValue = this.calculateExpression(text);\r\n    if (currentValue.t !== newValue) {\r\n      var newData = {};\r\n      this.copyData(newData, currentValue);\r\n      newData.t = newValue.toString();\r\n      newData.__complete = false;\r\n      return newData;\r\n    }\r\n    return currentValue;\r\n  };\r\n\r\n  TextProperty.prototype.searchProperty = function () {\r\n    var isKeyframed = this.searchKeyframes();\r\n    var hasExpressions = this.searchExpressions();\r\n    this.kf = isKeyframed || hasExpressions;\r\n    return this.kf;\r\n  };\r\n\r\n  TextProperty.prototype.searchExpressions = searchExpressions;\r\n}());\r\n\r\n/* global propertyGroupFactory, PropertyInterface */\r\n/* exported ShapePathInterface */\r\n\r\nvar ShapePathInterface = (\r\n\r\n  function () {\r\n    return function pathInterfaceFactory(shape, view, propertyGroup) {\r\n      var prop = view.sh;\r\n\r\n      function interfaceFunction(val) {\r\n        if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\r\n          return interfaceFunction.path;\r\n        }\r\n        return null;\r\n      }\r\n\r\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n      prop.setGroupProperty(PropertyInterface('Path', _propertyGroup));\r\n      Object.defineProperties(interfaceFunction, {\r\n        path: {\r\n          get: function () {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n            return prop;\r\n          },\r\n        },\r\n        shape: {\r\n          get: function () {\r\n            if (prop.k) {\r\n              prop.getValue();\r\n            }\r\n            return prop;\r\n          },\r\n        },\r\n        _name: { value: shape.nm },\r\n        ix: { value: shape.ix },\r\n        propertyIndex: { value: shape.ix },\r\n        mn: { value: shape.mn },\r\n        propertyGroup: { value: propertyGroup },\r\n      });\r\n      return interfaceFunction;\r\n    };\r\n  }()\r\n);\r\n\r\n/* exported propertyGroupFactory */\r\n\r\nvar propertyGroupFactory = (function () {\r\n  return function (interfaceFunction, parentPropertyGroup) {\r\n    return function (val) {\r\n      val = val === undefined ? 1 : val;\r\n      if (val <= 0) {\r\n        return interfaceFunction;\r\n      }\r\n      return parentPropertyGroup(val - 1);\r\n    };\r\n  };\r\n}());\r\n\r\n/* exported PropertyInterface */\r\n\r\nvar PropertyInterface = (function () {\r\n  return function (propertyName, propertyGroup) {\r\n    var interfaceFunction = {\r\n      _name: propertyName,\r\n    };\r\n\r\n    function _propertyGroup(val) {\r\n      val = val === undefined ? 1 : val;\r\n      if (val <= 0) {\r\n        return interfaceFunction;\r\n      }\r\n      return propertyGroup(val - 1);\r\n    }\r\n\r\n    return _propertyGroup;\r\n  };\r\n}());\r\n\r\n/* global ExpressionPropertyInterface, PropertyInterface, propertyGroupFactory, ShapePathInterface */\r\n/* exported ShapeExpressionInterface */\r\n\r\nvar ShapeExpressionInterface = (function () {\r\n  function iterateElements(shapes, view, propertyGroup) {\r\n    var arr = [];\r\n    var i;\r\n    var len = shapes ? shapes.length : 0;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (shapes[i].ty === 'gr') {\r\n        arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'fl') {\r\n        arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'st') {\r\n        arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'tm') {\r\n        arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'tr') {\r\n        // arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n      } else if (shapes[i].ty === 'el') {\r\n        arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'sr') {\r\n        arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'sh') {\r\n        arr.push(ShapePathInterface(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'rc') {\r\n        arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'rd') {\r\n        arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      } else if (shapes[i].ty === 'rp') {\r\n        arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\r\n      }\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  function contentsInterfaceFactory(shape, view, propertyGroup) {\r\n    var interfaces;\r\n    var interfaceFunction = function _interfaceFunction(value) {\r\n      var i = 0;\r\n      var len = interfaces.length;\r\n      while (i < len) {\r\n        if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\r\n          return interfaces[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      if (typeof value === 'number') {\r\n        return interfaces[value - 1];\r\n      }\r\n      return null;\r\n    };\r\n\r\n    interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n    interfaceFunction.numProperties = interfaces.length;\r\n    var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n    interfaceFunction.transform = transformInterface;\r\n    interfaceFunction.propertyIndex = shape.cix;\r\n    interfaceFunction._name = shape.nm;\r\n\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function groupInterfaceFactory(shape, view, propertyGroup) {\r\n    var interfaceFunction = function _interfaceFunction(value) {\r\n      switch (value) {\r\n        case 'ADBE Vectors Group':\r\n        case 'Contents':\r\n        case 2:\r\n          return interfaceFunction.content;\r\n          // Not necessary for now. Keeping them here in case a new case appears\r\n          // case 'ADBE Vector Transform Group':\r\n          // case 3:\r\n        default:\r\n          return interfaceFunction.transform;\r\n      }\r\n    };\r\n    interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\r\n    var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\r\n    interfaceFunction.content = content;\r\n    interfaceFunction.transform = transformInterface;\r\n    Object.defineProperty(interfaceFunction, '_name', {\r\n      get: function () {\r\n        return shape.nm;\r\n      },\r\n    });\r\n    // interfaceFunction.content = interfaceFunction;\r\n    interfaceFunction.numProperties = shape.np;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    interfaceFunction.nm = shape.nm;\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function fillInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(val) {\r\n      if (val === 'Color' || val === 'color') {\r\n        return interfaceFunction.color;\r\n      } if (val === 'Opacity' || val === 'opacity') {\r\n        return interfaceFunction.opacity;\r\n      }\r\n      return null;\r\n    }\r\n    Object.defineProperties(interfaceFunction, {\r\n      color: {\r\n        get: ExpressionPropertyInterface(view.c),\r\n      },\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      _name: { value: shape.nm },\r\n      mn: { value: shape.mn },\r\n    });\r\n\r\n    view.c.setGroupProperty(PropertyInterface('Color', propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function strokeInterfaceFactory(shape, view, propertyGroup) {\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var _dashPropertyGroup = propertyGroupFactory(dashOb, _propertyGroup);\r\n    function addPropertyToDashOb(i) {\r\n      Object.defineProperty(dashOb, shape.d[i].nm, {\r\n        get: ExpressionPropertyInterface(view.d.dataProps[i].p),\r\n      });\r\n    }\r\n    var i;\r\n    var len = shape.d ? shape.d.length : 0;\r\n    var dashOb = {};\r\n    for (i = 0; i < len; i += 1) {\r\n      addPropertyToDashOb(i);\r\n      view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n    }\r\n\r\n    function interfaceFunction(val) {\r\n      if (val === 'Color' || val === 'color') {\r\n        return interfaceFunction.color;\r\n      } if (val === 'Opacity' || val === 'opacity') {\r\n        return interfaceFunction.opacity;\r\n      } if (val === 'Stroke Width' || val === 'stroke width') {\r\n        return interfaceFunction.strokeWidth;\r\n      }\r\n      return null;\r\n    }\r\n    Object.defineProperties(interfaceFunction, {\r\n      color: {\r\n        get: ExpressionPropertyInterface(view.c),\r\n      },\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      strokeWidth: {\r\n        get: ExpressionPropertyInterface(view.w),\r\n      },\r\n      dash: {\r\n        get: function () {\r\n          return dashOb;\r\n        },\r\n      },\r\n      _name: { value: shape.nm },\r\n      mn: { value: shape.mn },\r\n    });\r\n\r\n    view.c.setGroupProperty(PropertyInterface('Color', _propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n    view.w.setGroupProperty(PropertyInterface('Stroke Width', _propertyGroup));\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function trimInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(val) {\r\n      if (val === shape.e.ix || val === 'End' || val === 'end') {\r\n        return interfaceFunction.end;\r\n      }\r\n      if (val === shape.s.ix) {\r\n        return interfaceFunction.start;\r\n      }\r\n      if (val === shape.o.ix) {\r\n        return interfaceFunction.offset;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n\r\n    view.s.setGroupProperty(PropertyInterface('Start', _propertyGroup));\r\n    view.e.setGroupProperty(PropertyInterface('End', _propertyGroup));\r\n    view.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    interfaceFunction.propertyGroup = propertyGroup;\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      start: {\r\n        get: ExpressionPropertyInterface(view.s),\r\n      },\r\n      end: {\r\n        get: ExpressionPropertyInterface(view.e),\r\n      },\r\n      offset: {\r\n        get: ExpressionPropertyInterface(view.o),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function transformInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.a.ix === value || value === 'Anchor Point') {\r\n        return interfaceFunction.anchorPoint;\r\n      }\r\n      if (shape.o.ix === value || value === 'Opacity') {\r\n        return interfaceFunction.opacity;\r\n      }\r\n      if (shape.p.ix === value || value === 'Position') {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\r\n        return interfaceFunction.rotation;\r\n      }\r\n      if (shape.s.ix === value || value === 'Scale') {\r\n        return interfaceFunction.scale;\r\n      }\r\n      if ((shape.sk && shape.sk.ix === value) || value === 'Skew') {\r\n        return interfaceFunction.skew;\r\n      }\r\n      if ((shape.sa && shape.sa.ix === value) || value === 'Skew Axis') {\r\n        return interfaceFunction.skewAxis;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    view.transform.mProps.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n    view.transform.mProps.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n    view.transform.mProps.a.setGroupProperty(PropertyInterface('Anchor Point', _propertyGroup));\r\n    view.transform.mProps.s.setGroupProperty(PropertyInterface('Scale', _propertyGroup));\r\n    view.transform.mProps.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n    if (view.transform.mProps.sk) {\r\n      view.transform.mProps.sk.setGroupProperty(PropertyInterface('Skew', _propertyGroup));\r\n      view.transform.mProps.sa.setGroupProperty(PropertyInterface('Skew Angle', _propertyGroup));\r\n    }\r\n    view.transform.op.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\r\n    Object.defineProperties(interfaceFunction, {\r\n      opacity: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.o),\r\n      },\r\n      position: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.p),\r\n      },\r\n      anchorPoint: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.a),\r\n      },\r\n      scale: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.s),\r\n      },\r\n      rotation: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.r),\r\n      },\r\n      skew: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.sk),\r\n      },\r\n      skewAxis: {\r\n        get: ExpressionPropertyInterface(view.transform.mProps.sa),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.ty = 'tr';\r\n    interfaceFunction.mn = shape.mn;\r\n    interfaceFunction.propertyGroup = propertyGroup;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function ellipseInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.p.ix === value) {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.s.ix === value) {\r\n        return interfaceFunction.size;\r\n      }\r\n      return null;\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n    prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      size: {\r\n        get: ExpressionPropertyInterface(prop.s),\r\n      },\r\n      position: {\r\n        get: ExpressionPropertyInterface(prop.p),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function starInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.p.ix === value) {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.r.ix === value) {\r\n        return interfaceFunction.rotation;\r\n      }\r\n      if (shape.pt.ix === value) {\r\n        return interfaceFunction.points;\r\n      }\r\n      if (shape.or.ix === value || value === 'ADBE Vector Star Outer Radius') {\r\n        return interfaceFunction.outerRadius;\r\n      }\r\n      if (shape.os.ix === value) {\r\n        return interfaceFunction.outerRoundness;\r\n      }\r\n      if (shape.ir && (shape.ir.ix === value || value === 'ADBE Vector Star Inner Radius')) {\r\n        return interfaceFunction.innerRadius;\r\n      }\r\n      if (shape.is && shape.is.ix === value) {\r\n        return interfaceFunction.innerRoundness;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.or.setGroupProperty(PropertyInterface('Outer Radius', _propertyGroup));\r\n    prop.os.setGroupProperty(PropertyInterface('Outer Roundness', _propertyGroup));\r\n    prop.pt.setGroupProperty(PropertyInterface('Points', _propertyGroup));\r\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n    prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n    if (shape.ir) {\r\n      prop.ir.setGroupProperty(PropertyInterface('Inner Radius', _propertyGroup));\r\n      prop.is.setGroupProperty(PropertyInterface('Inner Roundness', _propertyGroup));\r\n    }\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      position: {\r\n        get: ExpressionPropertyInterface(prop.p),\r\n      },\r\n      rotation: {\r\n        get: ExpressionPropertyInterface(prop.r),\r\n      },\r\n      points: {\r\n        get: ExpressionPropertyInterface(prop.pt),\r\n      },\r\n      outerRadius: {\r\n        get: ExpressionPropertyInterface(prop.or),\r\n      },\r\n      outerRoundness: {\r\n        get: ExpressionPropertyInterface(prop.os),\r\n      },\r\n      innerRadius: {\r\n        get: ExpressionPropertyInterface(prop.ir),\r\n      },\r\n      innerRoundness: {\r\n        get: ExpressionPropertyInterface(prop.is),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function rectInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.p.ix === value) {\r\n        return interfaceFunction.position;\r\n      }\r\n      if (shape.r.ix === value) {\r\n        return interfaceFunction.roundness;\r\n      }\r\n      if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\r\n        return interfaceFunction.size;\r\n      }\r\n      return null;\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n\r\n    var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\r\n    prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\r\n    prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      position: {\r\n        get: ExpressionPropertyInterface(prop.p),\r\n      },\r\n      roundness: {\r\n        get: ExpressionPropertyInterface(prop.r),\r\n      },\r\n      size: {\r\n        get: ExpressionPropertyInterface(prop.s),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function roundedInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.r.ix === value || value === 'Round Corners 1') {\r\n        return interfaceFunction.radius;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var prop = view;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.rd.setGroupProperty(PropertyInterface('Radius', _propertyGroup));\r\n\r\n    Object.defineProperties(interfaceFunction, {\r\n      radius: {\r\n        get: ExpressionPropertyInterface(prop.rd),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  function repeaterInterfaceFactory(shape, view, propertyGroup) {\r\n    function interfaceFunction(value) {\r\n      if (shape.c.ix === value || value === 'Copies') {\r\n        return interfaceFunction.copies;\r\n      } if (shape.o.ix === value || value === 'Offset') {\r\n        return interfaceFunction.offset;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\r\n    var prop = view;\r\n    interfaceFunction.propertyIndex = shape.ix;\r\n    prop.c.setGroupProperty(PropertyInterface('Copies', _propertyGroup));\r\n    prop.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\r\n    Object.defineProperties(interfaceFunction, {\r\n      copies: {\r\n        get: ExpressionPropertyInterface(prop.c),\r\n      },\r\n      offset: {\r\n        get: ExpressionPropertyInterface(prop.o),\r\n      },\r\n      _name: { value: shape.nm },\r\n    });\r\n    interfaceFunction.mn = shape.mn;\r\n    return interfaceFunction;\r\n  }\r\n\r\n  return function (shapes, view, propertyGroup) {\r\n    var interfaces;\r\n    function _interfaceFunction(value) {\r\n      if (typeof value === 'number') {\r\n        value = value === undefined ? 1 : value;\r\n        if (value === 0) {\r\n          return propertyGroup;\r\n        }\r\n        return interfaces[value - 1];\r\n      }\r\n      var i = 0;\r\n      var len = interfaces.length;\r\n      while (i < len) {\r\n        if (interfaces[i]._name === value) {\r\n          return interfaces[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n    }\r\n    function parentGroupWrapper() {\r\n      return propertyGroup;\r\n    }\r\n    _interfaceFunction.propertyGroup = propertyGroupFactory(_interfaceFunction, parentGroupWrapper);\r\n    interfaces = iterateElements(shapes, view, _interfaceFunction.propertyGroup);\r\n    _interfaceFunction.numProperties = interfaces.length;\r\n    _interfaceFunction._name = 'Contents';\r\n    return _interfaceFunction;\r\n  };\r\n}());\r\n\r\n/* exported TextExpressionInterface */\r\n\r\nvar TextExpressionInterface = (function () {\r\n  return function (elem) {\r\n    var _prevValue;\r\n    var _sourceText;\r\n    function _thisLayerFunction(name) {\r\n      switch (name) {\r\n        case 'ADBE Text Document':\r\n          return _thisLayerFunction.sourceText;\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    Object.defineProperty(_thisLayerFunction, 'sourceText', {\r\n      get: function () {\r\n        elem.textProperty.getValue();\r\n        var stringValue = elem.textProperty.currentData.t;\r\n        if (stringValue !== _prevValue) {\r\n          elem.textProperty.currentData.t = _prevValue;\r\n          _sourceText = new String(stringValue); // eslint-disable-line no-new-wrappers\r\n          // If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n          _sourceText.value = stringValue || new String(stringValue); // eslint-disable-line no-new-wrappers\r\n        }\r\n        return _sourceText;\r\n      },\r\n    });\r\n    return _thisLayerFunction;\r\n  };\r\n}());\r\n\r\n/* global Matrix, MaskManagerInterface, TransformExpressionInterface, getDescriptor */\r\n/* exported LayerExpressionInterface */\r\n\r\nvar LayerExpressionInterface = (function () {\r\n  function getMatrix(time) {\r\n    var toWorldMat = new Matrix();\r\n    if (time !== undefined) {\r\n      var propMatrix = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n      propMatrix.clone(toWorldMat);\r\n    } else {\r\n      var transformMat = this._elem.finalTransform.mProp;\r\n      transformMat.applyToMatrix(toWorldMat);\r\n    }\r\n    return toWorldMat;\r\n  }\r\n\r\n  function toWorldVec(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    toWorldMat.props[12] = 0;\r\n    toWorldMat.props[13] = 0;\r\n    toWorldMat.props[14] = 0;\r\n    return this.applyPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function toWorld(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    return this.applyPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function fromWorldVec(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    toWorldMat.props[12] = 0;\r\n    toWorldMat.props[13] = 0;\r\n    toWorldMat.props[14] = 0;\r\n    return this.invertPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function fromWorld(arr, time) {\r\n    var toWorldMat = this.getMatrix(time);\r\n    return this.invertPoint(toWorldMat, arr);\r\n  }\r\n\r\n  function applyPoint(matrix, arr) {\r\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n      var i;\r\n      var len = this._elem.hierarchy.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n      }\r\n    }\r\n    return matrix.applyToPointArray(arr[0], arr[1], arr[2] || 0);\r\n  }\r\n\r\n  function invertPoint(matrix, arr) {\r\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n      var i;\r\n      var len = this._elem.hierarchy.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\r\n      }\r\n    }\r\n    return matrix.inversePoint(arr);\r\n  }\r\n\r\n  function fromComp(arr) {\r\n    var toWorldMat = new Matrix();\r\n    toWorldMat.reset();\r\n    this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n    if (this._elem.hierarchy && this._elem.hierarchy.length) {\r\n      var i;\r\n      var len = this._elem.hierarchy.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n      }\r\n      return toWorldMat.inversePoint(arr);\r\n    }\r\n    return toWorldMat.inversePoint(arr);\r\n  }\r\n\r\n  function sampleImage() {\r\n    return [1, 1, 1, 1];\r\n  }\r\n\r\n  return function (elem) {\r\n    var transformInterface;\r\n\r\n    function _registerMaskInterface(maskManager) {\r\n      _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n    }\r\n    function _registerEffectsInterface(effects) {\r\n      _thisLayerFunction.effect = effects;\r\n    }\r\n\r\n    function _thisLayerFunction(name) {\r\n      switch (name) {\r\n        case 'ADBE Root Vectors Group':\r\n        case 'Contents':\r\n        case 2:\r\n          return _thisLayerFunction.shapeInterface;\r\n        case 1:\r\n        case 6:\r\n        case 'Transform':\r\n        case 'transform':\r\n        case 'ADBE Transform Group':\r\n          return transformInterface;\r\n        case 4:\r\n        case 'ADBE Effect Parade':\r\n        case 'effects':\r\n        case 'Effects':\r\n          return _thisLayerFunction.effect;\r\n        case 'ADBE Text Properties':\r\n          return _thisLayerFunction.textInterface;\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    _thisLayerFunction.getMatrix = getMatrix;\r\n    _thisLayerFunction.invertPoint = invertPoint;\r\n    _thisLayerFunction.applyPoint = applyPoint;\r\n    _thisLayerFunction.toWorld = toWorld;\r\n    _thisLayerFunction.toWorldVec = toWorldVec;\r\n    _thisLayerFunction.fromWorld = fromWorld;\r\n    _thisLayerFunction.fromWorldVec = fromWorldVec;\r\n    _thisLayerFunction.toComp = toWorld;\r\n    _thisLayerFunction.fromComp = fromComp;\r\n    _thisLayerFunction.sampleImage = sampleImage;\r\n    _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n    _thisLayerFunction._elem = elem;\r\n    transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\r\n    var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\r\n    Object.defineProperties(_thisLayerFunction, {\r\n      hasParent: {\r\n        get: function () {\r\n          return elem.hierarchy.length;\r\n        },\r\n      },\r\n      parent: {\r\n        get: function () {\r\n          return elem.hierarchy[0].layerInterface;\r\n        },\r\n      },\r\n      rotation: getDescriptor(transformInterface, 'rotation'),\r\n      scale: getDescriptor(transformInterface, 'scale'),\r\n      position: getDescriptor(transformInterface, 'position'),\r\n      opacity: getDescriptor(transformInterface, 'opacity'),\r\n      anchorPoint: anchorPointDescriptor,\r\n      anchor_point: anchorPointDescriptor,\r\n      transform: {\r\n        get: function () {\r\n          return transformInterface;\r\n        },\r\n      },\r\n      active: {\r\n        get: function () {\r\n          return elem.isInRange;\r\n        },\r\n      },\r\n    });\r\n\r\n    _thisLayerFunction.startTime = elem.data.st;\r\n    _thisLayerFunction.index = elem.data.ind;\r\n    _thisLayerFunction.source = elem.data.refId;\r\n    _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\r\n    _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\r\n    _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\r\n    _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\r\n    _thisLayerFunction._name = elem.data.nm;\r\n\r\n    _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n    _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n    return _thisLayerFunction;\r\n  };\r\n}());\r\n\r\n/* global */\r\n/* exported FootageInterface */\r\n\r\nvar FootageInterface = (function () {\r\n  var outlineInterfaceFactory = (function (elem) {\r\n    var currentPropertyName = '';\r\n    var currentProperty = elem.getFootageData();\r\n    function init() {\r\n      currentPropertyName = '';\r\n      currentProperty = elem.getFootageData();\r\n      return searchProperty;\r\n    }\r\n    function searchProperty(value) {\r\n      if (currentProperty[value]) {\r\n        currentPropertyName = value;\r\n        currentProperty = currentProperty[value];\r\n        if (typeof currentProperty === 'object') {\r\n          return searchProperty;\r\n        }\r\n        return currentProperty;\r\n      }\r\n      var propertyNameIndex = value.indexOf(currentPropertyName);\r\n      if (propertyNameIndex !== -1) {\r\n        var index = parseInt(value.substr(propertyNameIndex + currentPropertyName.length), 10);\r\n        currentProperty = currentProperty[index];\r\n        if (typeof currentProperty === 'object') {\r\n          return searchProperty;\r\n        }\r\n        return currentProperty;\r\n      }\r\n      return '';\r\n    }\r\n    return init;\r\n  });\r\n\r\n  var dataInterfaceFactory = function (elem) {\r\n    function interfaceFunction(value) {\r\n      if (value === 'Outline') {\r\n        return interfaceFunction.outlineInterface();\r\n      }\r\n      return null;\r\n    }\r\n\r\n    interfaceFunction._name = 'Outline';\r\n    interfaceFunction.outlineInterface = outlineInterfaceFactory(elem);\r\n    return interfaceFunction;\r\n  };\r\n\r\n  return function (elem) {\r\n    function _interfaceFunction(value) {\r\n      if (value === 'Data') {\r\n        return _interfaceFunction.dataInterface;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    _interfaceFunction._name = 'Data';\r\n    _interfaceFunction.dataInterface = dataInterfaceFactory(elem);\r\n    return _interfaceFunction;\r\n  };\r\n}());\r\n\r\n/* exported CompExpressionInterface */\r\n\r\nvar CompExpressionInterface = (function () {\r\n  return function (comp) {\r\n    function _thisLayerFunction(name) {\r\n      var i = 0;\r\n      var len = comp.layers.length;\r\n      while (i < len) {\r\n        if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\r\n          return comp.elements[i].layerInterface;\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n      // return {active:false};\r\n    }\r\n    Object.defineProperty(_thisLayerFunction, '_name', { value: comp.data.nm });\r\n    _thisLayerFunction.layer = _thisLayerFunction;\r\n    _thisLayerFunction.pixelAspect = 1;\r\n    _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\r\n    _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\r\n    _thisLayerFunction.pixelAspect = 1;\r\n    _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\r\n    _thisLayerFunction.displayStartTime = 0;\r\n    _thisLayerFunction.numLayers = comp.layers.length;\r\n    return _thisLayerFunction;\r\n  };\r\n}());\r\n\r\n/* global ExpressionPropertyInterface */\r\n/* exported TransformExpressionInterface */\r\n\r\nvar TransformExpressionInterface = (function () {\r\n  return function (transform) {\r\n    function _thisFunction(name) {\r\n      switch (name) {\r\n        case 'scale':\r\n        case 'Scale':\r\n        case 'ADBE Scale':\r\n        case 6:\r\n          return _thisFunction.scale;\r\n        case 'rotation':\r\n        case 'Rotation':\r\n        case 'ADBE Rotation':\r\n        case 'ADBE Rotate Z':\r\n        case 10:\r\n          return _thisFunction.rotation;\r\n        case 'ADBE Rotate X':\r\n          return _thisFunction.xRotation;\r\n        case 'ADBE Rotate Y':\r\n          return _thisFunction.yRotation;\r\n        case 'position':\r\n        case 'Position':\r\n        case 'ADBE Position':\r\n        case 2:\r\n          return _thisFunction.position;\r\n        case 'ADBE Position_0':\r\n          return _thisFunction.xPosition;\r\n        case 'ADBE Position_1':\r\n          return _thisFunction.yPosition;\r\n        case 'ADBE Position_2':\r\n          return _thisFunction.zPosition;\r\n        case 'anchorPoint':\r\n        case 'AnchorPoint':\r\n        case 'Anchor Point':\r\n        case 'ADBE AnchorPoint':\r\n        case 1:\r\n          return _thisFunction.anchorPoint;\r\n        case 'opacity':\r\n        case 'Opacity':\r\n        case 11:\r\n          return _thisFunction.opacity;\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    Object.defineProperty(_thisFunction, 'rotation', {\r\n      get: ExpressionPropertyInterface(transform.r || transform.rz),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'zRotation', {\r\n      get: ExpressionPropertyInterface(transform.rz || transform.r),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'xRotation', {\r\n      get: ExpressionPropertyInterface(transform.rx),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'yRotation', {\r\n      get: ExpressionPropertyInterface(transform.ry),\r\n    });\r\n    Object.defineProperty(_thisFunction, 'scale', {\r\n      get: ExpressionPropertyInterface(transform.s),\r\n    });\r\n    var _px;\r\n    var _py;\r\n    var _pz;\r\n    var _transformFactory;\r\n    if (transform.p) {\r\n      _transformFactory = ExpressionPropertyInterface(transform.p);\r\n    } else {\r\n      _px = ExpressionPropertyInterface(transform.px);\r\n      _py = ExpressionPropertyInterface(transform.py);\r\n      if (transform.pz) {\r\n        _pz = ExpressionPropertyInterface(transform.pz);\r\n      }\r\n    }\r\n    Object.defineProperty(_thisFunction, 'position', {\r\n      get: function () {\r\n        if (transform.p) {\r\n          return _transformFactory();\r\n        }\r\n        return [\r\n          _px(),\r\n          _py(),\r\n          _pz ? _pz() : 0];\r\n      },\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'xPosition', {\r\n      get: ExpressionPropertyInterface(transform.px),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'yPosition', {\r\n      get: ExpressionPropertyInterface(transform.py),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'zPosition', {\r\n      get: ExpressionPropertyInterface(transform.pz),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'anchorPoint', {\r\n      get: ExpressionPropertyInterface(transform.a),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'opacity', {\r\n      get: ExpressionPropertyInterface(transform.o),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'skew', {\r\n      get: ExpressionPropertyInterface(transform.sk),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'skewAxis', {\r\n      get: ExpressionPropertyInterface(transform.sa),\r\n    });\r\n\r\n    Object.defineProperty(_thisFunction, 'orientation', {\r\n      get: ExpressionPropertyInterface(transform.or),\r\n    });\r\n\r\n    return _thisFunction;\r\n  };\r\n}());\r\n\r\n/* exported ProjectInterface */\r\n\r\nvar ProjectInterface = (function () {\r\n  function registerComposition(comp) {\r\n    this.compositions.push(comp);\r\n  }\r\n\r\n  return function () {\r\n    function _thisProjectFunction(name) {\r\n      var i = 0;\r\n      var len = this.compositions.length;\r\n      while (i < len) {\r\n        if (this.compositions[i].data && this.compositions[i].data.nm === name) {\r\n          if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\r\n            this.compositions[i].prepareFrame(this.currentFrame);\r\n          }\r\n          return this.compositions[i].compInterface;\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    _thisProjectFunction.compositions = [];\r\n    _thisProjectFunction.currentFrame = 0;\r\n\r\n    _thisProjectFunction.registerComposition = registerComposition;\r\n\r\n    return _thisProjectFunction;\r\n  };\r\n}());\r\n\r\n/* global propertyGroupFactory, ExpressionPropertyInterface, PropertyInterface */\r\n/* exported EffectsExpressionInterface */\r\n\r\nvar EffectsExpressionInterface = (function () {\r\n  var ob = {\r\n    createEffectsInterface: createEffectsInterface,\r\n  };\r\n\r\n  function createEffectsInterface(elem, propertyGroup) {\r\n    if (elem.effectsManager) {\r\n      var effectElements = [];\r\n      var effectsData = elem.data.ef;\r\n      var i;\r\n      var len = elem.effectsManager.effectElements.length;\r\n      for (i = 0; i < len; i += 1) {\r\n        effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\r\n      }\r\n\r\n      var effects = elem.data.ef || [];\r\n      var groupInterface = function (name) {\r\n        i = 0;\r\n        len = effects.length;\r\n        while (i < len) {\r\n          if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n            return effectElements[i];\r\n          }\r\n          i += 1;\r\n        }\r\n        return null;\r\n      };\r\n      Object.defineProperty(groupInterface, 'numProperties', {\r\n        get: function () {\r\n          return effects.length;\r\n        },\r\n      });\r\n      return groupInterface;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function createGroupInterface(data, elements, propertyGroup, elem) {\r\n    function groupInterface(name) {\r\n      var effects = data.ef;\r\n      var i = 0;\r\n      var len = effects.length;\r\n      while (i < len) {\r\n        if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\r\n          if (effects[i].ty === 5) {\r\n            return effectElements[i];\r\n          }\r\n          return effectElements[i]();\r\n        }\r\n        i += 1;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var _propertyGroup = propertyGroupFactory(groupInterface, propertyGroup);\r\n\r\n    var effectElements = [];\r\n    var i;\r\n    var len = data.ef.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      if (data.ef[i].ty === 5) {\r\n        effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\r\n      } else {\r\n        effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\r\n      }\r\n    }\r\n\r\n    if (data.mn === 'ADBE Color Control') {\r\n      Object.defineProperty(groupInterface, 'color', {\r\n        get: function () {\r\n          return effectElements[0]();\r\n        },\r\n      });\r\n    }\r\n    Object.defineProperties(groupInterface, {\r\n      numProperties: {\r\n        get: function () {\r\n          return data.np;\r\n        },\r\n      },\r\n      _name: { value: data.nm },\r\n      propertyGroup: { value: _propertyGroup },\r\n    });\r\n    groupInterface.enabled = data.en !== 0;\r\n    groupInterface.active = groupInterface.enabled;\r\n    return groupInterface;\r\n  }\r\n\r\n  function createValueInterface(element, type, elem, propertyGroup) {\r\n    var expressionProperty = ExpressionPropertyInterface(element.p);\r\n    function interfaceFunction() {\r\n      if (type === 10) {\r\n        return elem.comp.compInterface(element.p.v);\r\n      }\r\n      return expressionProperty();\r\n    }\r\n\r\n    if (element.p.setGroupProperty) {\r\n      element.p.setGroupProperty(PropertyInterface('', propertyGroup));\r\n    }\r\n\r\n    return interfaceFunction;\r\n  }\r\n\r\n  return ob;\r\n}());\r\n\r\n/* global createSizedArray */\r\n/* exported MaskManagerInterface */\r\n\r\nvar MaskManagerInterface = (function () {\r\n  function MaskInterface(mask, data) {\r\n    this._mask = mask;\r\n    this._data = data;\r\n  }\r\n  Object.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n    get: function () {\r\n      if (this._mask.prop.k) {\r\n        this._mask.prop.getValue();\r\n      }\r\n      return this._mask.prop;\r\n    },\r\n  });\r\n  Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\r\n    get: function () {\r\n      if (this._mask.op.k) {\r\n        this._mask.op.getValue();\r\n      }\r\n      return this._mask.op.v * 100;\r\n    },\r\n  });\r\n\r\n  var MaskManager = function (maskManager) {\r\n    var _masksInterfaces = createSizedArray(maskManager.viewData.length);\r\n    var i;\r\n    var len = maskManager.viewData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n      _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n    }\r\n\r\n    var maskFunction = function (name) {\r\n      i = 0;\r\n      while (i < len) {\r\n        if (maskManager.masksProperties[i].nm === name) {\r\n          return _masksInterfaces[i];\r\n        }\r\n        i += 1;\r\n      }\r\n      return null;\r\n    };\r\n    return maskFunction;\r\n  };\r\n  return MaskManager;\r\n}());\r\n\r\n/* global createTypedArray */\r\n/* exported ExpressionPropertyInterface */\r\n\r\nvar ExpressionPropertyInterface = (function () {\r\n  var defaultUnidimensionalValue = { pv: 0, v: 0, mult: 1 };\r\n  var defaultMultidimensionalValue = { pv: [0, 0, 0], v: [0, 0, 0], mult: 1 };\r\n\r\n  function completeProperty(expressionValue, property, type) {\r\n    Object.defineProperty(expressionValue, 'velocity', {\r\n      get: function () {\r\n        return property.getVelocityAtTime(property.comp.currentFrame);\r\n      },\r\n    });\r\n    expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\r\n    expressionValue.key = function (pos) {\r\n      if (!expressionValue.numKeys) {\r\n        return 0;\r\n      }\r\n      var value = '';\r\n      if ('s' in property.keyframes[pos - 1]) {\r\n        value = property.keyframes[pos - 1].s;\r\n      } else if ('e' in property.keyframes[pos - 2]) {\r\n        value = property.keyframes[pos - 2].e;\r\n      } else {\r\n        value = property.keyframes[pos - 2].s;\r\n      }\r\n      var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value); // eslint-disable-line no-new-wrappers\r\n      valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\r\n      valueProp.value = type === 'unidimensional' ? value[0] : value;\r\n      return valueProp;\r\n    };\r\n    expressionValue.valueAtTime = property.getValueAtTime;\r\n    expressionValue.speedAtTime = property.getSpeedAtTime;\r\n    expressionValue.velocityAtTime = property.getVelocityAtTime;\r\n    expressionValue.propertyGroup = property.propertyGroup;\r\n  }\r\n\r\n  function UnidimensionalPropertyInterface(property) {\r\n    if (!property || !('pv' in property)) {\r\n      property = defaultUnidimensionalValue;\r\n    }\r\n    var mult = 1 / property.mult;\r\n    var val = property.pv * mult;\r\n    var expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n    expressionValue.value = val;\r\n    completeProperty(expressionValue, property, 'unidimensional');\r\n\r\n    return function () {\r\n      if (property.k) {\r\n        property.getValue();\r\n      }\r\n      val = property.v * mult;\r\n      if (expressionValue.value !== val) {\r\n        expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\r\n        expressionValue.value = val;\r\n        completeProperty(expressionValue, property, 'unidimensional');\r\n      }\r\n      return expressionValue;\r\n    };\r\n  }\r\n\r\n  function MultidimensionalPropertyInterface(property) {\r\n    if (!property || !('pv' in property)) {\r\n      property = defaultMultidimensionalValue;\r\n    }\r\n    var mult = 1 / property.mult;\r\n    var len = (property.data && property.data.l) || property.pv.length;\r\n    var expressionValue = createTypedArray('float32', len);\r\n    var arrValue = createTypedArray('float32', len);\r\n    expressionValue.value = arrValue;\r\n    completeProperty(expressionValue, property, 'multidimensional');\r\n\r\n    return function () {\r\n      if (property.k) {\r\n        property.getValue();\r\n      }\r\n      for (var i = 0; i < len; i += 1) {\r\n        arrValue[i] = property.v[i] * mult;\r\n        expressionValue[i] = arrValue[i];\r\n      }\r\n      return expressionValue;\r\n    };\r\n  }\r\n\r\n  // TODO: try to avoid using this getter\r\n  function defaultGetter() {\r\n    return defaultUnidimensionalValue;\r\n  }\r\n\r\n  return function (property) {\r\n    if (!property) {\r\n      return defaultGetter;\r\n    } if (property.propType === 'unidimensional') {\r\n      return UnidimensionalPropertyInterface(property);\r\n    }\r\n    return MultidimensionalPropertyInterface(property);\r\n  };\r\n}());\r\n\r\n/* global expressionHelpers, TextSelectorProp, ExpressionManager */\r\n/* exported TextExpressionSelectorProp */\r\n\r\n(function () {\r\n  var TextExpressionSelectorProp = (function () { // eslint-disable-line no-unused-vars\r\n    function getValueProxy(index, total) {\r\n      this.textIndex = index + 1;\r\n      this.textTotal = total;\r\n      this.v = this.getValue() * this.mult;\r\n      return this.v;\r\n    }\r\n\r\n    return function TextExpressionSelectorPropFactory(elem, data) {\r\n      this.pv = 1;\r\n      this.comp = elem.comp;\r\n      this.elem = elem;\r\n      this.mult = 0.01;\r\n      this.propType = 'textSelector';\r\n      this.textTotal = data.totalChars;\r\n      this.selectorValue = 100;\r\n      this.lastValue = [1, 1, 1];\r\n      this.k = true;\r\n      this.x = true;\r\n      this.getValue = ExpressionManager.initiateExpression.bind(this)(elem, data, this);\r\n      this.getMult = getValueProxy;\r\n      this.getVelocityAtTime = expressionHelpers.getVelocityAtTime;\r\n      if (this.kf) {\r\n        this.getValueAtTime = expressionHelpers.getValueAtTime.bind(this);\r\n      } else {\r\n        this.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(this);\r\n      }\r\n      this.setGroupProperty = expressionHelpers.setGroupProperty;\r\n    };\r\n  }());\r\n\r\n  var propertyGetTextProp = TextSelectorProp.getTextSelectorProp;\r\n  TextSelectorProp.getTextSelectorProp = function (elem, data, arr) {\r\n    if (data.t === 1) {\r\n      return new TextExpressionSelectorPropFactory(elem, data, arr); // eslint-disable-line no-undef\r\n    }\r\n    return propertyGetTextProp(elem, data, arr);\r\n  };\r\n}());\r\n\r\n/* global PropertyFactory */\r\n/* exported SliderEffect, AngleEffect, ColorEffect, PointEffect, LayerIndexEffect, MaskIndexEffect, CheckboxEffect, NoValueEffect */\r\n\r\nfunction SliderEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction AngleEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction ColorEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n}\r\nfunction PointEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\r\n}\r\nfunction LayerIndexEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction MaskIndexEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction CheckboxEffect(data, elem, container) {\r\n  this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\r\n}\r\nfunction NoValueEffect() {\r\n  this.p = {};\r\n}\r\n\r\n/* global extendPrototype, SliderEffect, AngleEffect, ColorEffect, PointEffect, CheckboxEffect, LayerIndexEffect,\r\nMaskIndexEffect, NoValueEffect, DynamicPropertyContainer */\r\n\r\nfunction EffectsManager(data, element) {\r\n  var effects = data.ef || [];\r\n  this.effectElements = [];\r\n  var i;\r\n  var len = effects.length;\r\n  var effectItem;\r\n  for (i = 0; i < len; i += 1) {\r\n    effectItem = new GroupEffect(effects[i], element);\r\n    this.effectElements.push(effectItem);\r\n  }\r\n}\r\n\r\nfunction GroupEffect(data, element) {\r\n  this.init(data, element);\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], GroupEffect);\r\n\r\nGroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\r\n\r\nGroupEffect.prototype.init = function (data, element) {\r\n  this.data = data;\r\n  this.effectElements = [];\r\n  this.initDynamicPropertyContainer(element);\r\n  var i;\r\n  var len = this.data.ef.length;\r\n  var eff;\r\n  var effects = this.data.ef;\r\n  for (i = 0; i < len; i += 1) {\r\n    eff = null;\r\n    switch (effects[i].ty) {\r\n      case 0:\r\n        eff = new SliderEffect(effects[i], element, this);\r\n        break;\r\n      case 1:\r\n        eff = new AngleEffect(effects[i], element, this);\r\n        break;\r\n      case 2:\r\n        eff = new ColorEffect(effects[i], element, this);\r\n        break;\r\n      case 3:\r\n        eff = new PointEffect(effects[i], element, this);\r\n        break;\r\n      case 4:\r\n      case 7:\r\n        eff = new CheckboxEffect(effects[i], element, this);\r\n        break;\r\n      case 10:\r\n        eff = new LayerIndexEffect(effects[i], element, this);\r\n        break;\r\n      case 11:\r\n        eff = new MaskIndexEffect(effects[i], element, this);\r\n        break;\r\n      case 5:\r\n        eff = new EffectsManager(effects[i], element, this);\r\n        break;\r\n        // case 6:\r\n      default:\r\n        eff = new NoValueEffect(effects[i], element, this);\r\n        break;\r\n    }\r\n    if (eff) {\r\n      this.effectElements.push(eff);\r\n    }\r\n  }\r\n};\r\n\r\n\r\nvar lottie = {};\r\n\r\nfunction setLocationHref(href) {\r\n  locationHref = href;\r\n}\r\n\r\nfunction searchAnimations() {\r\n  if (standalone === true) {\r\n    animationManager.searchAnimations(animationData, standalone, renderer);\r\n  } else {\r\n    animationManager.searchAnimations();\r\n  }\r\n}\r\n\r\nfunction setSubframeRendering(flag) {\r\n  subframeEnabled = flag;\r\n}\r\n\r\nfunction loadAnimation(params) {\r\n  if (standalone === true) {\r\n    params.animationData = JSON.parse(animationData);\r\n  }\r\n  return animationManager.loadAnimation(params);\r\n}\r\n\r\nfunction setQuality(value) {\r\n  if (typeof value === 'string') {\r\n    switch (value) {\r\n      case 'high':\r\n        defaultCurveSegments = 200;\r\n        break;\r\n      default:\r\n      case 'medium':\r\n        defaultCurveSegments = 50;\r\n        break;\r\n      case 'low':\r\n        defaultCurveSegments = 10;\r\n        break;\r\n    }\r\n  } else if (!isNaN(value) && value > 1) {\r\n    defaultCurveSegments = value;\r\n  }\r\n  if (defaultCurveSegments >= 50) {\r\n    roundValues(false);\r\n  } else {\r\n    roundValues(true);\r\n  }\r\n}\r\n\r\nfunction inBrowser() {\r\n  return typeof navigator !== 'undefined';\r\n}\r\n\r\nfunction installPlugin(type, plugin) {\r\n  if (type === 'expressions') {\r\n    expressionsPlugin = plugin;\r\n  }\r\n}\r\n\r\nfunction getFactory(name) {\r\n  switch (name) {\r\n    case 'propertyFactory':\r\n      return PropertyFactory;\r\n    case 'shapePropertyFactory':\r\n      return ShapePropertyFactory;\r\n    case 'matrix':\r\n      return Matrix;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nlottie.play = animationManager.play;\r\nlottie.pause = animationManager.pause;\r\nlottie.setLocationHref = setLocationHref;\r\nlottie.togglePause = animationManager.togglePause;\r\nlottie.setSpeed = animationManager.setSpeed;\r\nlottie.setDirection = animationManager.setDirection;\r\nlottie.stop = animationManager.stop;\r\nlottie.searchAnimations = searchAnimations;\r\nlottie.registerAnimation = animationManager.registerAnimation;\r\nlottie.loadAnimation = loadAnimation;\r\nlottie.setSubframeRendering = setSubframeRendering;\r\nlottie.resize = animationManager.resize;\r\n// lottie.start = start;\r\nlottie.goToAndStop = animationManager.goToAndStop;\r\nlottie.destroy = animationManager.destroy;\r\nlottie.setQuality = setQuality;\r\nlottie.inBrowser = inBrowser;\r\nlottie.installPlugin = installPlugin;\r\nlottie.freeze = animationManager.freeze;\r\nlottie.unfreeze = animationManager.unfreeze;\r\nlottie.setVolume = animationManager.setVolume;\r\nlottie.mute = animationManager.mute;\r\nlottie.unmute = animationManager.unmute;\r\nlottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\r\nlottie.__getFactory = getFactory;\r\nlottie.version = '5.7.8';\r\n\r\nfunction checkReady() {\r\n  if (document.readyState === 'complete') {\r\n    clearInterval(readyStateCheckInterval);\r\n    searchAnimations();\r\n  }\r\n}\r\n\r\nfunction getQueryVariable(variable) {\r\n  var vars = queryString.split('&');\r\n  for (var i = 0; i < vars.length; i += 1) {\r\n    var pair = vars[i].split('=');\r\n    if (decodeURIComponent(pair[0]) == variable) { // eslint-disable-line eqeqeq\r\n      return decodeURIComponent(pair[1]);\r\n    }\r\n  }\r\n  return null;\r\n}\r\nvar standalone = '__[STANDALONE]__';\r\nvar animationData = '__[ANIMATIONDATA]__';\r\nvar renderer = '';\r\nvar queryString;\r\nif (standalone) {\r\n  var scripts = document.getElementsByTagName('script');\r\n  var index = scripts.length - 1;\r\n  var myScript = scripts[index] || {\r\n    src: '',\r\n  };\r\n  queryString = myScript.src.replace(/^[^\\?]+\\??/, ''); // eslint-disable-line no-useless-escape\r\n  renderer = getQueryVariable('renderer');\r\n}\r\nvar readyStateCheckInterval = setInterval(checkReady, 100);\r\n\nreturn lottie;\n}));","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","<template>\n    <div>\n       <div class=\"flex flex-col items-center justify-center h-screen bg-gray-100 select-none\">\n    <div class=\"flex flex-col w-full max-w-md px-4 py-8 -mt-32 bg-white shadow-2xl sm:px-6 md:px-8 lg:px-10 rounded-xl\">\n        <div class=\"w-12 h-12 text-center text-blue-500\">\n        <LoginAnimate/>\n        </div>\n       <div class=\"mt-10\">\n            <form @submit.prevent=\"login\"> \n                <div class=\"relative w-full mb-3\">\n                    <input type=\"text\" name=\"username\" v-model=\"username\" class=\"w-full p-4 text-sm text-gray-700 placeholder-gray-400 bg-white border-0 rounded shadow focus:outline-none focus:ring\" placeholder=\"Usuario\" style=\"transition: all 0.15s ease 0s;\" />\n                </div>\n                <div class=\"relative w-full mb-3\">\n                    <input type=\"password\" v-model=\"password\" name=\"password\" autocomplete=\"on\" class=\"w-full p-4 text-sm text-gray-700 placeholder-gray-400 bg-white border-0 rounded shadow focus:outline-none focus:ring\" placeholder=\"Clave\" style=\"transition: all 0.15s ease 0s;\" />\n                    <small class=\"p-2 text-red-500\">{{error}}</small>\n                </div>\n                <div class=\"mt-6 text-center\">\n                    <input type=\"submit\" value=\"Iniciar\" name=\"signin\" id=\"signin\" class=\"justify-center w-32 p-3 text-white bg-blue-500 border rounded-lg shadow outline-none focus:bg-blue-500 hover:text-blue-500 hover:border-blue-500 hover:border hover:bg-white focus:text-white\"/>\n                </div>  \n                <div class=\"flex flex-wrap mt-6\">\n                    <div class=\"w-1/2 text-left\">\n                        <a href=\"#\" class=\"text-xl text-black hover:text-blue-700\"><small>Olvidaste tu clave?</small></a>\n                    </div>\n                    <div class=\"w-1/2 text-right\">\n                        <a href=\"#\" class=\"text-xl text-black hover:text-blue-700\"><small>Registrate</small></a>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n    </div>\n     \n</template>\n<script>\n// @ is an alias to /src\nimport HelloWorld from '@/components/HelloWorld.vue'\nimport LoginAnimate from '@/components/LoginAnimate.vue'\nimport { ref, computed } from 'vue'\nimport {useStore} from 'vuex'\nexport default {\n  name: 'Login',\n  components: {\n    HelloWorld, LoginAnimate\n  },\n  setup(){\n    const store = useStore()\n    const password = ref('')\n    const username = ref('')\n    store.commit('setError', null)\n    const error = computed(() => store.state.error)\n    const login = ()=> store.dispatch('login', {\"username\": username.value, \"password\": password.value})\n    \n    return {password, username, login, error}\n  }\n}\n</script>","<template>\n       <!-- <lottie :width=\"1024\" :height=\"1024\" :options=\"lottieOptions\" v-on:animCreated=\"handleAnimation\" /> --> \n        <lottie :options=\"lottieOptions\" v-on:animCreated=\"handleAnimation\" />\n</template>\n<style>\n</style>\n<script>\nimport lottie from 'vue-lottie/src/lottie.vue'\nimport * as animationData from \"../assets/login_animation.json\";\nexport default {\n    components: {\n    lottie\n  },\n  data() {\n    return {\n      anim: null, // firts value\n      lottieOptions: { animationData: animationData.default }\n    };\n  },\n  methods: {\n    handleAnimation: function (anim) {\n      this.anim = anim;\n    }\n  }\n}\n</script>","<template>\n    <div :style=\"style\" ref=\"lavContainer\"></div>\n</template>\n\n<script>\n  import lottie from 'lottie-web';\n\n  export default {\n    props: {\n      options: {\n        type: Object,\n        required: true\n      },\n      height: Number,\n      width: Number,\n    },\n\n    data () {\n      return {\n        style: {\n          width: this.width ? `${this.width}px` : '100%',\n          height: this.height ? `${this.height}px` : '100%',\n          overflow: 'hidden',\n          margin: '0 auto'\n        }\n      }\n    },\n\n    mounted () {\n      this.anim = lottie.loadAnimation({\n          container: this.$refs.lavContainer,\n          renderer: 'svg',\n          loop: this.options.loop !== false,\n          autoplay: this.options.autoplay !== false,\n          animationData: this.options.animationData,\n          rendererSettings: this.options.rendererSettings\n        }\n      );\n      this.$emit('animCreated', this.anim)\n    }\n  }\n</script>\n","import { render } from \"./lottie.vue?vue&type=template&id=3c796cc7\"\nimport script from \"./lottie.vue?vue&type=script&lang=js\"\nexport * from \"./lottie.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./LoginAnimate.vue?vue&type=template&id=aca8f368\"\nimport script from \"./LoginAnimate.vue?vue&type=script&lang=js\"\nexport * from \"./LoginAnimate.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Login.vue?vue&type=template&id=14bcdbe8\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","<template>\n<div>\n    \n\n<div v-for=\"register in home_list\" :key=\"register.updated\" class=\"home\">\n\n  <Card :description=\"register.description\" \n        :amount=\"register.amount\"\n        :item=\"register.item__name\"\n        :color=\"register.item__color\"\n        :intensity=\"register.item__color_intensity\"\n        \n        @click=\"selected(register)\"\n        class=\"m-3 mb-4\"/>\n\n</div>\n<Pop v-if=\"register_selected\" :id=\"register_selected.id\" \n:amount=\"register_selected.amount\"\n:description=\"register_selected.description\"/>\n\n\n\n\n</div>\n\n\n\n  \n</template>\n\n<script>\n\nimport Card from '@/components/Card.vue'\nimport Pop from '@/components/Pop.vue'\n\nimport { ref, computed } from 'vue'\nimport {useStore} from 'vuex'\n\n\nexport default {\n  name: 'Home',\n  components: {\n    Card, Pop\n  },\n\n  setup(){\n    const store = useStore()\n    \n    \n    const register_selected = computed(() =>store.state.register_selected)\n    \n    const selected = (register)=> {\n      store.commit('setRegister_selected', register)\n      console.log(register)\n    \n    }\n    const home_list = computed(() => store.getters.ordered_home_list)\n    const getHomeList = ()=> store.dispatch('getHomeList')\n    getHomeList()\n\n    return {home_list, selected, register_selected}\n}}\n</script>\n\n","<template>\n    \n    <div class=\"border rounded-lg shadow-md hover:border-2 hover:border-gray-500\" v-bind:class=\"[class_bg ? class_bg : class_default_bg]\">\n        \n        <div class=\"p-3 text-2xl font-semibold text-black description\">\n            {{description}}\n        </div>\n       \n      <div class=\"flex p-3 place-content-between \">   \n    \n        <div class=\"text-xs item\">\n            {{item}}\n        </div>\n        <div class=\"font-semibold amount\">\n            {{amount}}\n        </div>\n        </div>\n    </div>\n</template>\n<script>\nimport {computed} from 'vue'\nexport default {\n    props : ['description', 'amount', 'item', 'color', 'intensity'],\n    setup(props) {\n        const description = computed(()=>{\n            const lower = props.description.toLowerCase()\n            return lower[0].toUpperCase() + lower.slice(1)\n        })\n                \n        const amount = Number(props.amount)\n        const item = props.item\n        const color = props.color\n        const intensity = props.intensity\n        const class_default_bg = 'bg-white'\n        \n        const class_bg = computed(()=> {\n            if (color && intensity) {\n                return `bg-${color}-${intensity}`\n            }else{\n                return null\n            }\n        })\n        \n        return {description,amount, item, class_bg, class_default_bg}\n        \n    },\n}\n</script>\n\n","import { render } from \"./Card.vue?vue&type=template&id=2bac8bf5\"\nimport script from \"./Card.vue?vue&type=script&lang=js\"\nexport * from \"./Card.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n\n  <TransitionRoot appear :show=\"isOpen\" as=\"template\">\n    <Dialog as=\"div\" :open=\"isOpen\" @close=\"closeModal2\">\n      <div class=\"fixed inset-0 z-10 overflow-y-auto\">\n        <div class=\"min-h-screen px-4 text-center\">\n          <TransitionChild\n            as=\"template\"\n            enter=\"duration-300 ease-out\"\n            enter-from=\"opacity-0\"\n            enter-to=\"opacity-30\"\n            leave=\"duration-200 ease-in\"\n            leave-from=\"opacity-100\"\n            leave-to=\"opacity-0\"\n          >\n            <DialogOverlay class=\"fixed inset-0 bg-black opacity-70\" />\n          </TransitionChild>\n\n          <span class=\"inline-block h-screen align-middle\" aria-hidden=\"true\">\n            &#8203;\n          </span>\n\n          <TransitionChild\n            as=\"template\"\n            enter=\"duration-300 ease-out\"\n            enter-from=\"opacity-0 scale-95\"\n            enter-to=\"opacity-100 scale-100\"\n            leave=\"duration-200 ease-in\"\n            leave-from=\"opacity-100 scale-100\"\n            leave-to=\"opacity-0 scale-95\"\n          >\n            <div\n              class=\"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl\"\n            >\n            <div v-if=\"confirmation\">\n              <DialogTitle\n                as=\"h3\"\n                class=\"text-lg font-medium leading-6 text-gray-900\"\n              >\n                Estas seguro que deseas borrar este registro?\n              </DialogTitle>\n              <div class=\"mt-2\">\n                <p class=\"text-sm text-gray-500\">\n                  {{description}} <br>\n                  {{amount}}\n                </p>\n              </div>\n\n              <div class=\"mt-4 space-x-3\">\n                <button\n                  type=\"button\"\n                  class=\"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                  @click=\"closeModal\"\n                >\n                  Borrar\n                </button>\n                  <button\n                  type=\"button\"\n                  class=\"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                  @click=\"closeModal2\"\n                >\n                  Cancelar\n                </button>\n\n              </div>\n              </div>\n              <div v-if=\"!confirmation\">\n              <DialogTitle\n                as=\"h3\"\n                class=\"text-lg font-medium leading-6 text-gray-900\"\n              >\n                {{description}}\n              </DialogTitle>\n              <DialogTitle\n                as=\"h3\"\n                class=\"text-lg mt-2 font-medium leading-6 text-gray-500\"\n              >\n                {{amount}}\n              </DialogTitle>\n\n\n              <div class=\"mt-4 space-x-3\">\n                <button\n                  type=\"button\"\n                  class=\"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                  @click=\"confirmation=true\"\n                >\n                  Borrar\n                </button>\n\n                <button\n                  type=\"button\"\n                  class=\"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                  \n                >\n                  Editar\n                </button>\n\n              </div>\n              </div>\n            </div>\n          </TransitionChild>\n        </div>\n      </div>\n    </Dialog>\n  </TransitionRoot>\n</template>\n\n<script>\nimport {\n  TransitionRoot,\n  TransitionChild,\n  Dialog,\n  DialogOverlay,\n  DialogTitle,\n} from '@headlessui/vue'\n\nimport { ref, computed } from 'vue'\nimport {useStore} from 'vuex'\nexport default {\n    props: ['id', 'description', 'amount'],\n    name: 'Pop',\n  components: {\n    TransitionRoot,\n    TransitionChild,\n    Dialog,\n    DialogOverlay,\n    DialogTitle\n    \n  },\n\n    setup(props) {\n\n        const store = useStore()\n        const register_selected = computed(() =>store.state.register_selected)\n\n        let isOpen = ref(true);\n        let confirmation = ref(false);\n        const closeModal = ()=> {\n        store.dispatch('deleteRegister', props.id)\n        isOpen.value = false\n        }\n\n        const closeModal2 = ()=> {\n        store.commit('setRegister_selected', null)\n        isOpen.value = false\n        }\n        const openModal = ()=> isOpen.value = true\n\n        return { isOpen, closeModal, register_selected, openModal, closeModal2, confirmation}\n        \n    },\n}\n</script>","import { render } from \"./Pop.vue?vue&type=template&id=1a93b9d2\"\nimport script from \"./Pop.vue?vue&type=script&lang=js\"\nexport * from \"./Pop.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Home.vue?vue&type=template&id=2d43b1d6\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { cloneVNode, h, onUnmounted, ref, watchEffect, onUpdated, inject, provide, defineComponent, Teleport, reactive, computed, unref, onMounted, nextTick, toRaw, watch } from 'vue';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  it = o[Symbol.iterator]();\n  return it.next.bind(it);\n}\n\nfunction match(value, lookup) {\n  if (value in lookup) {\n    var returnValue = lookup[value];\n\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n\n    return typeof returnValue === 'function' ? returnValue.apply(void 0, args) : returnValue;\n  }\n\n  var error = new Error(\"Tried to handle \\\"\" + value + \"\\\" but there is no handler defined. Only defined handlers are: \" + Object.keys(lookup).map(function (key) {\n    return \"\\\"\" + key + \"\\\"\";\n  }).join(', ') + \".\");\n  if (Error.captureStackTrace) Error.captureStackTrace(error, match);\n  throw error;\n}\n\nvar Features;\n\n(function (Features) {\n  /** No features at all */\n  Features[Features[\"None\"] = 0] = \"None\";\n  /**\r\n   * When used, this will allow us to use one of the render strategies.\r\n   *\r\n   * **The render strategies are:**\r\n   *    - **Unmount**   _(Will unmount the component.)_\r\n   *    - **Hidden**    _(Will hide the component using the [hidden] attribute.)_\r\n   */\n\n  Features[Features[\"RenderStrategy\"] = 1] = \"RenderStrategy\";\n  /**\r\n   * When used, this will allow the user of our component to be in control. This can be used when\r\n   * you want to transition based on some state.\r\n   */\n\n  Features[Features[\"Static\"] = 2] = \"Static\";\n})(Features || (Features = {}));\n\nvar RenderStrategy;\n\n(function (RenderStrategy) {\n  RenderStrategy[RenderStrategy[\"Unmount\"] = 0] = \"Unmount\";\n  RenderStrategy[RenderStrategy[\"Hidden\"] = 1] = \"Hidden\";\n})(RenderStrategy || (RenderStrategy = {}));\n\nfunction render(_ref) {\n  var _ref$visible = _ref.visible,\n      visible = _ref$visible === void 0 ? true : _ref$visible,\n      _ref$features = _ref.features,\n      features = _ref$features === void 0 ? Features.None : _ref$features,\n      main = _objectWithoutPropertiesLoose(_ref, [\"visible\", \"features\"]);\n\n  // Visible always render\n  if (visible) return _render(main);\n\n  if (features & Features.Static) {\n    // When the `static` prop is passed as `true`, then the user is in control, thus we don't care about anything else\n    if (main.props[\"static\"]) return _render(main);\n  }\n\n  if (features & Features.RenderStrategy) {\n    var _main$props$unmount, _match;\n\n    var strategy = ((_main$props$unmount = main.props.unmount) != null ? _main$props$unmount : true) ? RenderStrategy.Unmount : RenderStrategy.Hidden;\n    return match(strategy, (_match = {}, _match[RenderStrategy.Unmount] = function () {\n      return null;\n    }, _match[RenderStrategy.Hidden] = function () {\n      return _render(_extends({}, main, {\n        props: _extends({}, main.props, {\n          hidden: true,\n          style: {\n            display: 'none'\n          }\n        })\n      }));\n    }, _match));\n  } // No features enabled, just render\n\n\n  return _render(main);\n}\n\nfunction _render(_ref2) {\n  var props = _ref2.props,\n      attrs = _ref2.attrs,\n      slots = _ref2.slots,\n      slot = _ref2.slot,\n      name = _ref2.name;\n\n  var _omit = omit(props, ['unmount', 'static']),\n      as = _omit.as,\n      passThroughProps = _objectWithoutPropertiesLoose(_omit, [\"as\"]);\n\n  var children = slots[\"default\"] == null ? void 0 : slots[\"default\"](slot);\n\n  if (as === 'template') {\n    if (Object.keys(passThroughProps).length > 0 || Object.keys(attrs).length > 0) {\n      var _ref3 = children != null ? children : [],\n          firstChild = _ref3[0],\n          other = _ref3.slice(1);\n\n      if (!isValidElement(firstChild) || other.length > 0) {\n        throw new Error(['Passing props on \"template\"!', '', \"The current component <\" + name + \" /> is rendering a \\\"template\\\".\", \"However we need to passthrough the following props:\", Object.keys(passThroughProps).concat(Object.keys(attrs)).map(function (line) {\n          return \"  - \" + line;\n        }).join('\\n'), '', 'You can apply a few solutions:', ['Add an `as=\"...\"` prop, to ensure that we render an actual element instead of a \"template\".', 'Render a single element as the child so that we can forward the props onto that element.'].map(function (line) {\n          return \"  - \" + line;\n        }).join('\\n')].join('\\n'));\n      }\n\n      return cloneVNode(firstChild, passThroughProps);\n    }\n\n    if (Array.isArray(children) && children.length === 1) {\n      return children[0];\n    }\n\n    return children;\n  }\n\n  return h(as, passThroughProps, children);\n}\n\nfunction omit(object, keysToOmit) {\n  if (keysToOmit === void 0) {\n    keysToOmit = [];\n  }\n\n  var clone = Object.assign({}, object);\n\n  for (var _iterator = _createForOfIteratorHelperLoose(keysToOmit), _step; !(_step = _iterator()).done;) {\n    var key = _step.value;\n    if (key in clone) delete clone[key];\n  }\n\n  return clone;\n}\n\nfunction isValidElement(input) {\n  if (input == null) return false; // No children\n\n  if (typeof input.type === 'string') return true; // 'div', 'span', ...\n\n  if (typeof input.type === 'object') return true; // Other components\n\n  if (typeof input.type === 'function') return true; // Built-ins like Transition\n\n  return false; // Comments, strings, ...\n}\n\n// TODO: This must already exist somewhere, right? \n// Ref: https://www.w3.org/TR/uievents-key/#named-key-attribute-values\nvar Keys;\n\n(function (Keys) {\n  Keys[\"Space\"] = \" \";\n  Keys[\"Enter\"] = \"Enter\";\n  Keys[\"Escape\"] = \"Escape\";\n  Keys[\"Backspace\"] = \"Backspace\";\n  Keys[\"ArrowLeft\"] = \"ArrowLeft\";\n  Keys[\"ArrowUp\"] = \"ArrowUp\";\n  Keys[\"ArrowRight\"] = \"ArrowRight\";\n  Keys[\"ArrowDown\"] = \"ArrowDown\";\n  Keys[\"Home\"] = \"Home\";\n  Keys[\"End\"] = \"End\";\n  Keys[\"PageUp\"] = \"PageUp\";\n  Keys[\"PageDown\"] = \"PageDown\";\n  Keys[\"Tab\"] = \"Tab\";\n})(Keys || (Keys = {}));\n\nvar id = 0;\n\nfunction generateId() {\n  return ++id;\n}\n\nfunction useId() {\n  return generateId();\n}\n\n//  - https://stackoverflow.com/a/30753870\n\nvar focusableSelector = /*#__PURE__*/['[contentEditable=true]', '[tabindex]', 'a[href]', 'area[href]', 'button:not([disabled])', 'iframe', 'input:not([disabled])', 'select:not([disabled])', 'textarea:not([disabled])'].map(process.env.NODE_ENV === 'test' ? // TODO: Remove this once JSDOM fixes the issue where an element that is\n// \"hidden\" can be the document.activeElement, because this is not possible\n// in real browsers.\n// TODO: Remove this once JSDOM fixes the issue where an element that is\nfunction (selector) {\n  return selector + \":not([tabindex='-1']):not([style*='display: none'])\";\n} : function (selector) {\n  return selector + \":not([tabindex='-1'])\";\n}).join(',');\nvar Focus;\n\n(function (Focus) {\n  /** Focus the first non-disabled element */\n  Focus[Focus[\"First\"] = 1] = \"First\";\n  /** Focus the previous non-disabled element */\n\n  Focus[Focus[\"Previous\"] = 2] = \"Previous\";\n  /** Focus the next non-disabled element */\n\n  Focus[Focus[\"Next\"] = 4] = \"Next\";\n  /** Focus the last non-disabled element */\n\n  Focus[Focus[\"Last\"] = 8] = \"Last\";\n  /** Wrap tab around */\n\n  Focus[Focus[\"WrapAround\"] = 16] = \"WrapAround\";\n  /** Prevent scrolling the focusable elements into view */\n\n  Focus[Focus[\"NoScroll\"] = 32] = \"NoScroll\";\n})(Focus || (Focus = {}));\n\nvar FocusResult;\n\n(function (FocusResult) {\n  FocusResult[FocusResult[\"Error\"] = 0] = \"Error\";\n  FocusResult[FocusResult[\"Overflow\"] = 1] = \"Overflow\";\n  FocusResult[FocusResult[\"Success\"] = 2] = \"Success\";\n  FocusResult[FocusResult[\"Underflow\"] = 3] = \"Underflow\";\n})(FocusResult || (FocusResult = {}));\n\nvar Direction;\n\n(function (Direction) {\n  Direction[Direction[\"Previous\"] = -1] = \"Previous\";\n  Direction[Direction[\"Next\"] = 1] = \"Next\";\n})(Direction || (Direction = {}));\n\nfunction getFocusableElements(container) {\n  if (container === void 0) {\n    container = document.body;\n  }\n\n  if (container == null) return [];\n  return Array.from(container.querySelectorAll(focusableSelector));\n}\nvar FocusableMode;\n\n(function (FocusableMode) {\n  /** The element itself must be focusable. */\n  FocusableMode[FocusableMode[\"Strict\"] = 0] = \"Strict\";\n  /** The element should be inside of a focusable element. */\n\n  FocusableMode[FocusableMode[\"Loose\"] = 1] = \"Loose\";\n})(FocusableMode || (FocusableMode = {}));\n\nfunction isFocusableElement(element, mode) {\n  var _match;\n\n  if (mode === void 0) {\n    mode = FocusableMode.Strict;\n  }\n\n  if (element === document.body) return false;\n  return match(mode, (_match = {}, _match[FocusableMode.Strict] = function () {\n    return element.matches(focusableSelector);\n  }, _match[FocusableMode.Loose] = function () {\n    var next = element;\n\n    while (next !== null) {\n      if (next.matches(focusableSelector)) return true;\n      next = next.parentElement;\n    }\n\n    return false;\n  }, _match));\n}\nfunction focusElement(element) {\n  element == null ? void 0 : element.focus({\n    preventScroll: true\n  });\n}\nfunction focusIn(container, focus) {\n  var elements = Array.isArray(container) ? container : getFocusableElements(container);\n  var active = document.activeElement;\n\n  var direction = function () {\n    if (focus & (Focus.First | Focus.Next)) return Direction.Next;\n    if (focus & (Focus.Previous | Focus.Last)) return Direction.Previous;\n    throw new Error('Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last');\n  }();\n\n  var startIndex = function () {\n    if (focus & Focus.First) return 0;\n    if (focus & Focus.Previous) return Math.max(0, elements.indexOf(active)) - 1;\n    if (focus & Focus.Next) return Math.max(0, elements.indexOf(active)) + 1;\n    if (focus & Focus.Last) return elements.length - 1;\n    throw new Error('Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last');\n  }();\n\n  var focusOptions = focus & Focus.NoScroll ? {\n    preventScroll: true\n  } : {};\n  var offset = 0;\n  var total = elements.length;\n  var next = undefined;\n\n  do {\n    var _next;\n\n    // Guard against infinite loops\n    if (offset >= total || offset + total <= 0) return FocusResult.Error;\n    var nextIdx = startIndex + offset;\n\n    if (focus & Focus.WrapAround) {\n      nextIdx = (nextIdx + total) % total;\n    } else {\n      if (nextIdx < 0) return FocusResult.Underflow;\n      if (nextIdx >= total) return FocusResult.Overflow;\n    }\n\n    next = elements[nextIdx]; // Try the focus the next element, might not work if it is \"hidden\" to the user.\n\n    (_next = next) == null ? void 0 : _next.focus(focusOptions); // Try the next one in line\n\n    offset += direction;\n  } while (next !== document.activeElement); // This is a little weird, but let me try and explain: There are a few scenario's\n  // in chrome for example where a focused `<a>` tag does not get the default focus\n  // styles and sometimes they do. This highly depends on whether you started by\n  // clicking or by using your keyboard. When you programmatically add focus `anchor.focus()`\n  // then the active element (document.activeElement) is this anchor, which is expected.\n  // However in that case the default focus styles are not applied *unless* you\n  // also add this tabindex.\n\n\n  if (!next.hasAttribute('tabindex')) next.setAttribute('tabindex', '0');\n  return FocusResult.Success;\n}\n\nfunction useWindowEvent(type, listener, options) {\n  window.addEventListener(type, listener, options);\n  onUnmounted(function () {\n    return window.removeEventListener(type, listener, options);\n  });\n}\n\nfunction contains(containers, element) {\n  for (var _iterator = _createForOfIteratorHelperLoose(containers), _step; !(_step = _iterator()).done;) {\n    var container = _step.value;\n    if (container.contains(element)) return true;\n  }\n\n  return false;\n}\n\nfunction useFocusTrap(containers, enabled, options) {\n  if (enabled === void 0) {\n    enabled = ref(true);\n  }\n\n  if (options === void 0) {\n    options = ref({});\n  }\n\n  var restoreElement = ref(typeof window !== 'undefined' ? document.activeElement : null);\n  var previousActiveElement = ref(null);\n\n  function handleFocus() {\n    if (!enabled.value) return;\n    if (containers.value.size !== 1) return;\n    var initialFocus = options.value.initialFocus;\n    var activeElement = document.activeElement;\n\n    if (initialFocus) {\n      if (initialFocus === activeElement) {\n        return; // Initial focus ref is already the active element\n      }\n    } else if (contains(containers.value, activeElement)) {\n      return; // Already focused within Dialog\n    }\n\n    restoreElement.value = activeElement; // Try to focus the initialFocus ref\n\n    if (initialFocus) {\n      focusElement(initialFocus);\n    } else {\n      var couldFocus = false;\n\n      for (var _iterator = _createForOfIteratorHelperLoose(containers.value), _step; !(_step = _iterator()).done;) {\n        var container = _step.value;\n        var result = focusIn(container, Focus.First);\n\n        if (result === FocusResult.Success) {\n          couldFocus = true;\n          break;\n        }\n      }\n\n      if (!couldFocus) throw new Error('There are no focusable elements inside the <FocusTrap />');\n    }\n\n    previousActiveElement.value = document.activeElement;\n  } // Restore when `enabled` becomes false\n\n\n  function restore() {\n    focusElement(restoreElement.value);\n    restoreElement.value = null;\n    previousActiveElement.value = null;\n  } // Handle initial focus\n\n\n  watchEffect(handleFocus);\n  onUpdated(function () {\n    enabled.value ? handleFocus() : restore();\n  });\n  onUnmounted(restore); // Handle Tab & Shift+Tab keyboard events\n\n  useWindowEvent('keydown', function (event) {\n    if (!enabled.value) return;\n    if (event.key !== Keys.Tab) return;\n    if (!document.activeElement) return;\n    if (containers.value.size !== 1) return;\n    event.preventDefault();\n\n    for (var _iterator2 = _createForOfIteratorHelperLoose(containers.value), _step2; !(_step2 = _iterator2()).done;) {\n      var element = _step2.value;\n      var result = focusIn(element, (event.shiftKey ? Focus.Previous : Focus.Next) | Focus.WrapAround);\n\n      if (result === FocusResult.Success) {\n        previousActiveElement.value = document.activeElement;\n        break;\n      }\n    }\n  }); // Prevent programmatically escaping\n\n  useWindowEvent('focus', function (event) {\n    if (!enabled.value) return;\n    if (containers.value.size !== 1) return;\n    var previous = previousActiveElement.value;\n    if (!previous) return;\n    var toElement = event.target;\n\n    if (toElement && toElement instanceof HTMLElement) {\n      if (!contains(containers.value, toElement)) {\n        event.preventDefault();\n        event.stopPropagation();\n        focusElement(previous);\n      } else {\n        previousActiveElement.value = toElement;\n        focusElement(toElement);\n      }\n    } else {\n      focusElement(previousActiveElement.value);\n    }\n  }, true);\n}\n\nvar CHILDREN_SELECTOR = process.env.NODE_ENV === 'test' ? '[data-v-app=\"\"] > *' : 'body > *';\nvar interactables = /*#__PURE__*/new Set();\nvar originals = /*#__PURE__*/new Map();\n\nfunction inert(element) {\n  element.setAttribute('aria-hidden', 'true'); // @ts-expect-error `inert` does not exist on HTMLElement (yet!)\n\n  element.inert = true;\n}\n\nfunction restore(element) {\n  var original = originals.get(element);\n  if (!original) return;\n  if (original['aria-hidden'] === null) element.removeAttribute('aria-hidden');else element.setAttribute('aria-hidden', original['aria-hidden']); // @ts-expect-error `inert` does not exist on HTMLElement (yet!)\n\n  element.inert = original.inert;\n}\n\nfunction useInertOthers(container, enabled) {\n  if (enabled === void 0) {\n    enabled = ref(true);\n  }\n\n  watchEffect(function (onInvalidate) {\n    if (!enabled.value) return;\n    if (!container.value) return;\n    var element = container.value; // Mark myself as an interactable element\n\n    interactables.add(element); // Restore elements that now contain an interactable child\n\n    for (var _iterator = _createForOfIteratorHelperLoose(originals.keys()), _step; !(_step = _iterator()).done;) {\n      var original = _step.value;\n\n      if (original.contains(element)) {\n        restore(original);\n        originals[\"delete\"](original);\n      }\n    } // Collect direct children of the body\n\n\n    document.querySelectorAll(CHILDREN_SELECTOR).forEach(function (child) {\n      if (!(child instanceof HTMLElement)) return; // Skip non-HTMLElements\n      // Skip the interactables, and the parents of the interactables\n\n      for (var _iterator2 = _createForOfIteratorHelperLoose(interactables), _step2; !(_step2 = _iterator2()).done;) {\n        var interactable = _step2.value;\n        if (child.contains(interactable)) return;\n      } // Keep track of the elements\n\n\n      if (interactables.size === 1) {\n        originals.set(child, {\n          'aria-hidden': child.getAttribute('aria-hidden'),\n          // @ts-expect-error `inert` does not exist on HTMLElement (yet!)\n          inert: child.inert\n        }); // Mutate the element\n\n        inert(child);\n      }\n    });\n    onInvalidate(function () {\n      // Inert is disabled on the current element\n      interactables[\"delete\"](element); // We still have interactable elements, therefore this one and its parent\n      // will become inert as well.\n\n      if (interactables.size > 0) {\n        // Collect direct children of the body\n        document.querySelectorAll(CHILDREN_SELECTOR).forEach(function (child) {\n          if (!(child instanceof HTMLElement)) return; // Skip non-HTMLElements\n          // Skip already inert parents\n\n          if (originals.has(child)) return; // Skip the interactables, and the parents of the interactables\n\n          for (var _iterator3 = _createForOfIteratorHelperLoose(interactables), _step3; !(_step3 = _iterator3()).done;) {\n            var interactable = _step3.value;\n            if (child.contains(interactable)) return;\n          }\n\n          originals.set(child, {\n            'aria-hidden': child.getAttribute('aria-hidden'),\n            // @ts-expect-error `inert` does not exist on HTMLElement (yet!)\n            inert: child.inert\n          }); // Mutate the element\n\n          inert(child);\n        });\n      } else {\n        for (var _iterator4 = _createForOfIteratorHelperLoose(originals.keys()), _step4; !(_step4 = _iterator4()).done;) {\n          var _element = _step4.value;\n          // Restore\n          restore(_element); // Cleanup\n\n          originals[\"delete\"](_element);\n        }\n      }\n    });\n  });\n}\n\nvar StackContext = /*#__PURE__*/Symbol('StackContext');\nvar StackMessage;\n\n(function (StackMessage) {\n  StackMessage[StackMessage[\"AddElement\"] = 0] = \"AddElement\";\n  StackMessage[StackMessage[\"RemoveElement\"] = 1] = \"RemoveElement\";\n})(StackMessage || (StackMessage = {}));\n\nfunction useStackContext() {\n  return inject(StackContext, function () {});\n}\nfunction useElemenStack(element) {\n  var notify = useStackContext();\n  watchEffect(function (onInvalidate) {\n    var domElement = element == null ? void 0 : element.value;\n    if (!domElement) return;\n    notify(StackMessage.AddElement, domElement);\n    onInvalidate(function () {\n      return notify(StackMessage.RemoveElement, domElement);\n    });\n  });\n}\nfunction useStackProvider(onUpdate) {\n  var parentUpdate = useStackContext();\n\n  function notify() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // Notify our layer\n    onUpdate == null ? void 0 : onUpdate.apply(void 0, args); // Notify the parent\n\n    parentUpdate.apply(void 0, args);\n  }\n\n  provide(StackContext, notify);\n}\n\nvar ForcePortalRootContext = /*#__PURE__*/Symbol('ForcePortalRootContext');\nfunction usePortalRoot() {\n  return inject(ForcePortalRootContext, false);\n}\nvar ForcePortalRoot = /*#__PURE__*/defineComponent({\n  name: 'ForcePortalRoot',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'template'\n    },\n    force: {\n      type: Boolean,\n      \"default\": false\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        attrs = _ref.attrs;\n    provide(ForcePortalRootContext, props.force);\n    return function () {\n      var passThroughProps = _objectWithoutPropertiesLoose(props, [\"force\"]);\n\n      return render({\n        props: passThroughProps,\n        slot: {},\n        slots: slots,\n        attrs: attrs,\n        name: 'ForcePortalRoot'\n      });\n    };\n  }\n});\n\nfunction getPortalRoot() {\n  var existingRoot = document.getElementById('headlessui-portal-root');\n  if (existingRoot) return existingRoot;\n  var root = document.createElement('div');\n  root.setAttribute('id', 'headlessui-portal-root');\n  return document.body.appendChild(root);\n}\n\nvar Portal = /*#__PURE__*/defineComponent({\n  name: 'Portal',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        attrs = _ref.attrs;\n    var forcePortalRoot = usePortalRoot();\n    var groupContext = inject(PortalGroupContext, null);\n    var myTarget = ref(forcePortalRoot === true ? getPortalRoot() : groupContext === null ? getPortalRoot() : groupContext.resolveTarget());\n    watchEffect(function () {\n      if (forcePortalRoot) return;\n      if (groupContext === null) return;\n      myTarget.value = groupContext.resolveTarget();\n    });\n    var element = ref(null);\n    useElemenStack(element);\n    onUnmounted(function () {\n      var root = document.getElementById('headlessui-portal-root');\n      if (!root) return;\n      if (myTarget.value !== root) return;\n\n      if (myTarget.value.children.length <= 0) {\n        var _myTarget$value$paren;\n\n        (_myTarget$value$paren = myTarget.value.parentElement) == null ? void 0 : _myTarget$value$paren.removeChild(myTarget.value);\n      }\n    });\n    useStackProvider();\n    return function () {\n      if (myTarget.value === null) return null;\n      var propsWeControl = {\n        ref: element\n      };\n      return h( // @ts-expect-error Children can be an object, but TypeScript is not happy\n      // with it. Once this is fixed upstream we can remove this assertion.\n      Teleport, {\n        to: myTarget.value\n      }, render({\n        props: _extends({}, props, propsWeControl),\n        slot: {},\n        attrs: attrs,\n        slots: slots,\n        name: 'Portal'\n      }));\n    };\n  }\n}); // ---\n\nvar PortalGroupContext = /*#__PURE__*/Symbol('PortalGroupContext');\nvar PortalGroup = /*#__PURE__*/defineComponent({\n  name: 'PortalGroup',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'template'\n    },\n    target: {\n      type: Object,\n      \"default\": null\n    }\n  },\n  setup: function setup(props, _ref2) {\n    var attrs = _ref2.attrs,\n        slots = _ref2.slots;\n    var api = reactive({\n      resolveTarget: function resolveTarget() {\n        return props.target;\n      }\n    });\n    provide(PortalGroupContext, api);\n    return function () {\n      var passThroughProps = _objectWithoutPropertiesLoose(props, [\"target\"]);\n\n      return render({\n        props: passThroughProps,\n        slot: {},\n        attrs: attrs,\n        slots: slots,\n        name: 'PortalGroup'\n      });\n    };\n  }\n});\n\nvar DescriptionContext = /*#__PURE__*/Symbol('DescriptionContext');\n\nfunction useDescriptionContext() {\n  var context = inject(DescriptionContext, null);\n\n  if (context === null) {\n    throw new Error('Missing parent');\n  }\n\n  return context;\n}\n\nfunction useDescriptions(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$slot = _ref.slot,\n      slot = _ref$slot === void 0 ? ref({}) : _ref$slot,\n      _ref$name = _ref.name,\n      name = _ref$name === void 0 ? 'Description' : _ref$name,\n      _ref$props = _ref.props,\n      props = _ref$props === void 0 ? {} : _ref$props;\n\n  var descriptionIds = ref([]);\n\n  function register(value) {\n    descriptionIds.value.push(value);\n    return function () {\n      var idx = descriptionIds.value.indexOf(value);\n      if (idx === -1) return;\n      descriptionIds.value.splice(idx, 1);\n    };\n  }\n\n  provide(DescriptionContext, {\n    register: register,\n    slot: slot,\n    name: name,\n    props: props\n  }); // The actual id's as string or undefined.\n\n  return computed(function () {\n    return descriptionIds.value.length > 0 ? descriptionIds.value.join(' ') : undefined;\n  });\n} // ---\n\nvar Description = /*#__PURE__*/defineComponent({\n  name: 'Description',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'p'\n    }\n  },\n  render: function render$1() {\n    var _this$context = this.context,\n        _this$context$name = _this$context.name,\n        name = _this$context$name === void 0 ? 'Description' : _this$context$name,\n        _this$context$slot = _this$context.slot,\n        slot = _this$context$slot === void 0 ? ref({}) : _this$context$slot,\n        _this$context$props = _this$context.props,\n        props = _this$context$props === void 0 ? {} : _this$context$props;\n    var passThroughProps = this.$props;\n\n    var propsWeControl = _extends({}, Object.entries(props).reduce(function (acc, _ref2) {\n      var _Object$assign;\n\n      var key = _ref2[0],\n          value = _ref2[1];\n      return Object.assign(acc, (_Object$assign = {}, _Object$assign[key] = unref(value), _Object$assign));\n    }, {}), {\n      id: this.id\n    });\n\n    return render({\n      props: _extends({}, passThroughProps, propsWeControl),\n      slot: slot.value,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: name\n    });\n  },\n  setup: function setup() {\n    var context = useDescriptionContext();\n    var id = \"headlessui-description-\" + useId();\n    onMounted(function () {\n      return onUnmounted(context.register(id));\n    });\n    return {\n      id: id,\n      context: context\n    };\n  }\n});\n\nfunction dom(ref) {\n  var _ref$value$$el;\n\n  if (ref == null) return null;\n  if (ref.value == null) return null;\n  return (_ref$value$$el = ref.value.$el) != null ? _ref$value$$el : ref.value;\n}\n\nvar Context = /*#__PURE__*/Symbol('Context');\nvar State;\n\n(function (State) {\n  State[State[\"Open\"] = 0] = \"Open\";\n  State[State[\"Closed\"] = 1] = \"Closed\";\n})(State || (State = {}));\n\nfunction useOpenClosed() {\n  return inject(Context, null);\n}\nfunction useOpenClosedProvider(value) {\n  provide(Context, value);\n}\n\nvar DialogStates;\n\n(function (DialogStates) {\n  DialogStates[DialogStates[\"Open\"] = 0] = \"Open\";\n  DialogStates[DialogStates[\"Closed\"] = 1] = \"Closed\";\n})(DialogStates || (DialogStates = {}));\n\nvar DialogContext = /*#__PURE__*/Symbol('DialogContext');\n\nfunction useDialogContext(component) {\n  var context = inject(DialogContext, null);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <Dialog /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useDialogContext);\n    throw err;\n  }\n\n  return context;\n} // ---\n\n\nvar Missing = 'DC8F892D-2EBD-447C-A4C8-A03058436FF4';\nvar Dialog = /*#__PURE__*/defineComponent({\n  name: 'Dialog',\n  inheritAttrs: false,\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    \"static\": {\n      type: Boolean,\n      \"default\": false\n    },\n    unmount: {\n      type: Boolean,\n      \"default\": true\n    },\n    open: {\n      type: Boolean,\n      \"default\": Missing\n    },\n    initialFocus: {\n      type: Object,\n      \"default\": null\n    }\n  },\n  emits: ['close'],\n  render: function render$1() {\n    var _this = this;\n\n    var propsWeControl = _extends({}, this.$attrs, {\n      ref: 'el',\n      id: this.id,\n      role: 'dialog',\n      'aria-modal': this.dialogState === DialogStates.Open ? true : undefined,\n      'aria-labelledby': this.titleId,\n      'aria-describedby': this.describedby,\n      onClick: this.handleClick,\n      onKeydown: this.handleKeyDown\n    });\n\n    var _this$$props = this.$props,\n        passThroughProps = _objectWithoutPropertiesLoose(_this$$props, [\"open\", \"initialFocus\"]);\n\n    var slot = {\n      open: this.dialogState === DialogStates.Open\n    };\n    return h(ForcePortalRoot, {\n      force: true\n    }, function () {\n      return h(Portal, function () {\n        return h(PortalGroup, {\n          target: _this.dialogRef\n        }, function () {\n          return h(ForcePortalRoot, {\n            force: false\n          }, function () {\n            return render({\n              props: _extends({}, passThroughProps, propsWeControl),\n              slot: slot,\n              attrs: _this.$attrs,\n              slots: _this.$slots,\n              visible: _this.visible,\n              features: Features.RenderStrategy | Features.Static,\n              name: 'Dialog'\n            });\n          });\n        });\n      });\n    });\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var containers = ref(new Set());\n    var usesOpenClosedState = useOpenClosed();\n    var open = computed(function () {\n      // @ts-expect-error We are comparing to a uuid stirng at runtime\n      if (props.open === Missing && usesOpenClosedState !== null) {\n        var _match;\n\n        // Update the `open` prop based on the open closed state\n        return match(usesOpenClosedState.value, (_match = {}, _match[State.Open] = true, _match[State.Closed] = false, _match));\n      }\n\n      return props.open;\n    }); // Validations\n    // @ts-expect-error We are comparing to a uuid stirng at runtime\n\n    var hasOpen = props.open !== Missing || usesOpenClosedState !== null;\n\n    if (!hasOpen) {\n      throw new Error(\"You forgot to provide an `open` prop to the `Dialog`.\");\n    }\n\n    if (typeof open.value !== 'boolean') {\n      throw new Error(\"You provided an `open` prop to the `Dialog`, but the value is not a boolean. Received: \" + (open.value === Missing ? undefined : props.open));\n    }\n\n    var dialogState = computed(function () {\n      return props.open ? DialogStates.Open : DialogStates.Closed;\n    });\n    var visible = computed(function () {\n      if (usesOpenClosedState !== null) {\n        return usesOpenClosedState.value === State.Open;\n      }\n\n      return dialogState.value === DialogStates.Open;\n    });\n    var internalDialogRef = ref(null);\n    var enabled = ref(dialogState.value === DialogStates.Open);\n    onUpdated(function () {\n      enabled.value = dialogState.value === DialogStates.Open;\n    });\n    var id = \"headlessui-dialog-\" + useId();\n    var focusTrapOptions = computed(function () {\n      return {\n        initialFocus: props.initialFocus\n      };\n    });\n    useFocusTrap(containers, enabled, focusTrapOptions);\n    useInertOthers(internalDialogRef, enabled);\n    useStackProvider(function (message, element) {\n      var _match2;\n\n      return match(message, (_match2 = {}, _match2[StackMessage.AddElement] = function () {\n        containers.value.add(element);\n      }, _match2[StackMessage.RemoveElement] = function () {\n        containers.value[\"delete\"](element);\n      }, _match2));\n    });\n    var describedby = useDescriptions({\n      name: 'DialogDescription',\n      slot: computed(function () {\n        return {\n          open: open.value\n        };\n      })\n    });\n    var titleId = ref(null);\n    var api = {\n      titleId: titleId,\n      dialogState: dialogState,\n      setTitleId: function setTitleId(id) {\n        if (titleId.value === id) return;\n        titleId.value = id;\n      },\n      close: function close() {\n        emit('close', false);\n      }\n    };\n    provide(DialogContext, api); // Handle outside click\n\n    useWindowEvent('mousedown', function (event) {\n      var target = event.target;\n      if (dialogState.value !== DialogStates.Open) return;\n      if (containers.value.size !== 1) return;\n      if (contains(containers.value, target)) return;\n      api.close();\n      nextTick(function () {\n        return target == null ? void 0 : target.focus();\n      });\n    }); // Scroll lock\n\n    watchEffect(function (onInvalidate) {\n      if (dialogState.value !== DialogStates.Open) return;\n      var overflow = document.documentElement.style.overflow;\n      var paddingRight = document.documentElement.style.paddingRight;\n      var scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n      document.documentElement.style.overflow = 'hidden';\n      document.documentElement.style.paddingRight = scrollbarWidth + \"px\";\n      onInvalidate(function () {\n        document.documentElement.style.overflow = overflow;\n        document.documentElement.style.paddingRight = paddingRight;\n      });\n    }); // Trigger close when the FocusTrap gets hidden\n\n    watchEffect(function (onInvalidate) {\n      if (dialogState.value !== DialogStates.Open) return;\n      var container = dom(internalDialogRef);\n      if (!container) return;\n      var observer = new IntersectionObserver(function (entries) {\n        for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\n          var entry = _step.value;\n\n          if (entry.boundingClientRect.x === 0 && entry.boundingClientRect.y === 0 && entry.boundingClientRect.width === 0 && entry.boundingClientRect.height === 0) {\n            api.close();\n          }\n        }\n      });\n      observer.observe(container);\n      onInvalidate(function () {\n        return observer.disconnect();\n      });\n    });\n    return {\n      id: id,\n      el: internalDialogRef,\n      dialogRef: internalDialogRef,\n      containers: containers,\n      dialogState: dialogState,\n      titleId: titleId,\n      describedby: describedby,\n      visible: visible,\n      open: open,\n      handleClick: function handleClick(event) {\n        event.stopPropagation();\n      },\n      // Handle `Escape` to close\n      handleKeyDown: function handleKeyDown(event) {\n        if (event.key !== Keys.Escape) return;\n        if (dialogState.value !== DialogStates.Open) return;\n        if (containers.value.size > 1) return; // 1 is myself, otherwise other elements in the Stack\n\n        event.preventDefault();\n        event.stopPropagation();\n        api.close();\n      }\n    };\n  }\n}); // ---\n\nvar DialogOverlay = /*#__PURE__*/defineComponent({\n  name: 'DialogOverlay',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    }\n  },\n  render: function render$1() {\n    var api = useDialogContext('DialogOverlay');\n    var propsWeControl = {\n      ref: 'el',\n      id: this.id,\n      'aria-hidden': true,\n      onClick: this.handleClick\n    };\n    var passThroughProps = this.$props;\n    return render({\n      props: _extends({}, passThroughProps, propsWeControl),\n      slot: {\n        open: api.dialogState.value === DialogStates.Open\n      },\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'DialogOverlay'\n    });\n  },\n  setup: function setup() {\n    var api = useDialogContext('DialogOverlay');\n    var id = \"headlessui-dialog-overlay-\" + useId();\n    return {\n      id: id,\n      handleClick: function handleClick(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        api.close();\n      }\n    };\n  }\n}); // ---\n\nvar DialogTitle = /*#__PURE__*/defineComponent({\n  name: 'DialogTitle',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'h2'\n    }\n  },\n  render: function render$1() {\n    var api = useDialogContext('DialogTitle');\n    var propsWeControl = {\n      id: this.id\n    };\n    var passThroughProps = this.$props;\n    return render({\n      props: _extends({}, passThroughProps, propsWeControl),\n      slot: {\n        open: api.dialogState.value === DialogStates.Open\n      },\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'DialogTitle'\n    });\n  },\n  setup: function setup() {\n    var api = useDialogContext('DialogTitle');\n    var id = \"headlessui-dialog-title-\" + useId();\n    onMounted(function () {\n      api.setTitleId(id);\n      onUnmounted(function () {\n        return api.setTitleId(null);\n      });\n    });\n    return {\n      id: id\n    };\n  }\n}); // ---\n\nvar DialogDescription = Description;\n\nvar DisclosureStates;\n\n(function (DisclosureStates) {\n  DisclosureStates[DisclosureStates[\"Open\"] = 0] = \"Open\";\n  DisclosureStates[DisclosureStates[\"Closed\"] = 1] = \"Closed\";\n})(DisclosureStates || (DisclosureStates = {}));\n\nvar DisclosureContext = /*#__PURE__*/Symbol('DisclosureContext');\n\nfunction useDisclosureContext(component) {\n  var context = inject(DisclosureContext, null);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <Disclosure /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useDisclosureContext);\n    throw err;\n  }\n\n  return context;\n} // ---\n\n\nvar Disclosure = /*#__PURE__*/defineComponent({\n  name: 'Disclosure',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'template'\n    },\n    defaultOpen: {\n      type: [Boolean],\n      \"default\": false\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        attrs = _ref.attrs;\n    var disclosureState = ref(props.defaultOpen ? DisclosureStates.Open : DisclosureStates.Closed);\n    var panelRef = ref(null);\n    var api = {\n      disclosureState: disclosureState,\n      panelRef: panelRef,\n      toggleDisclosure: function toggleDisclosure() {\n        var _match;\n\n        disclosureState.value = match(disclosureState.value, (_match = {}, _match[DisclosureStates.Open] = DisclosureStates.Closed, _match[DisclosureStates.Closed] = DisclosureStates.Open, _match));\n      }\n    };\n    provide(DisclosureContext, api);\n    useOpenClosedProvider(computed(function () {\n      var _match2;\n\n      return match(disclosureState.value, (_match2 = {}, _match2[DisclosureStates.Open] = State.Open, _match2[DisclosureStates.Closed] = State.Closed, _match2));\n    }));\n    return function () {\n      var passThroughProps = _objectWithoutPropertiesLoose(props, [\"defaultOpen\"]);\n\n      var slot = {\n        open: disclosureState.value === DisclosureStates.Open\n      };\n      return render({\n        props: passThroughProps,\n        slot: slot,\n        slots: slots,\n        attrs: attrs,\n        name: 'Disclosure'\n      });\n    };\n  }\n}); // ---\n\nvar DisclosureButton = /*#__PURE__*/defineComponent({\n  name: 'DisclosureButton',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'button'\n    },\n    disabled: {\n      type: [Boolean],\n      \"default\": false\n    }\n  },\n  render: function render$1() {\n    var api = useDisclosureContext('DisclosureButton');\n    var slot = {\n      open: api.disclosureState.value === DisclosureStates.Open\n    };\n    var propsWeControl = {\n      id: this.id,\n      type: 'button',\n      'aria-expanded': api.disclosureState.value === DisclosureStates.Open ? true : undefined,\n      'aria-controls': this.ariaControls,\n      onClick: this.handleClick,\n      onKeydown: this.handleKeyDown,\n      onKeyup: this.handleKeyUp\n    };\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'DisclosureButton'\n    });\n  },\n  setup: function setup(props) {\n    var api = useDisclosureContext('DisclosureButton');\n    var buttonId = \"headlessui-disclosure-button-\" + useId();\n    var ariaControls = computed(function () {\n      var _dom$id, _dom;\n\n      return (_dom$id = (_dom = dom(api.panelRef)) == null ? void 0 : _dom.id) != null ? _dom$id : undefined;\n    });\n    return {\n      id: buttonId,\n      ariaControls: ariaControls,\n      handleClick: function handleClick() {\n        if (props.disabled) return;\n        api.toggleDisclosure();\n      },\n      handleKeyDown: function handleKeyDown(event) {\n        if (props.disabled) return;\n\n        switch (event.key) {\n          case Keys.Space:\n          case Keys.Enter:\n            event.preventDefault();\n            event.stopPropagation();\n            api.toggleDisclosure();\n            break;\n        }\n      },\n      handleKeyUp: function handleKeyUp(event) {\n        switch (event.key) {\n          case Keys.Space:\n            // Required for firefox, event.preventDefault() in handleKeyDown for\n            // the Space key doesn't cancel the handleKeyUp, which in turn\n            // triggers a *click*.\n            event.preventDefault();\n            break;\n        }\n      }\n    };\n  }\n}); // ---\n\nvar DisclosurePanel = /*#__PURE__*/defineComponent({\n  name: 'DisclosurePanel',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    \"static\": {\n      type: Boolean,\n      \"default\": false\n    },\n    unmount: {\n      type: Boolean,\n      \"default\": true\n    }\n  },\n  render: function render$1() {\n    var api = useDisclosureContext('DisclosurePanel');\n    var slot = {\n      open: api.disclosureState.value === DisclosureStates.Open\n    };\n    var propsWeControl = {\n      id: this.id,\n      ref: 'el'\n    };\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      features: Features.RenderStrategy | Features.Static,\n      visible: this.visible,\n      name: 'DisclosurePanel'\n    });\n  },\n  setup: function setup() {\n    var api = useDisclosureContext('DisclosurePanel');\n    var panelId = \"headlessui-disclosure-panel-\" + useId();\n    var usesOpenClosedState = useOpenClosed();\n    var visible = computed(function () {\n      if (usesOpenClosedState !== null) {\n        return usesOpenClosedState.value === State.Open;\n      }\n\n      return api.disclosureState.value === DisclosureStates.Open;\n    });\n    return {\n      id: panelId,\n      el: api.panelRef,\n      visible: visible\n    };\n  }\n});\n\nvar FocusTrap = /*#__PURE__*/defineComponent({\n  name: 'FocusTrap',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    initialFocus: {\n      type: Object,\n      \"default\": null\n    }\n  },\n  render: function render$1() {\n    var slot = {};\n    var propsWeControl = {\n      ref: 'el'\n    };\n\n    var _this$$props = this.$props,\n        passThroughProps = _objectWithoutPropertiesLoose(_this$$props, [\"initialFocus\"]);\n\n    return render({\n      props: _extends({}, passThroughProps, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'FocusTrap'\n    });\n  },\n  setup: function setup(props) {\n    var containers = ref(new Set());\n    var container = ref(null);\n    var enabled = ref(true);\n    var focusTrapOptions = computed(function () {\n      return {\n        initialFocus: props.initialFocus\n      };\n    });\n    onMounted(function () {\n      if (!container.value) return;\n      containers.value.add(container.value);\n      useFocusTrap(containers, enabled, focusTrapOptions);\n    });\n    onUnmounted(function () {\n      enabled.value = false;\n    });\n    return {\n      el: container\n    };\n  }\n});\n\nfunction assertNever(x) {\n  throw new Error('Unexpected object: ' + x);\n}\n\nvar Focus$1;\n\n(function (Focus) {\n  /** Focus the first non-disabled item. */\n  Focus[Focus[\"First\"] = 0] = \"First\";\n  /** Focus the previous non-disabled item. */\n\n  Focus[Focus[\"Previous\"] = 1] = \"Previous\";\n  /** Focus the next non-disabled item. */\n\n  Focus[Focus[\"Next\"] = 2] = \"Next\";\n  /** Focus the last non-disabled item. */\n\n  Focus[Focus[\"Last\"] = 3] = \"Last\";\n  /** Focus a specific item based on the `id` of the item. */\n\n  Focus[Focus[\"Specific\"] = 4] = \"Specific\";\n  /** Focus no items at all. */\n\n  Focus[Focus[\"Nothing\"] = 5] = \"Nothing\";\n})(Focus$1 || (Focus$1 = {}));\n\nfunction calculateActiveIndex(action, resolvers) {\n  var items = resolvers.resolveItems();\n  if (items.length <= 0) return null;\n  var currentActiveIndex = resolvers.resolveActiveIndex();\n  var activeIndex = currentActiveIndex != null ? currentActiveIndex : -1;\n\n  var nextActiveIndex = function () {\n    switch (action.focus) {\n      case Focus$1.First:\n        return items.findIndex(function (item) {\n          return !resolvers.resolveDisabled(item);\n        });\n\n      case Focus$1.Previous:\n        {\n          var idx = items.slice().reverse().findIndex(function (item, idx, all) {\n            if (activeIndex !== -1 && all.length - idx - 1 >= activeIndex) return false;\n            return !resolvers.resolveDisabled(item);\n          });\n          if (idx === -1) return idx;\n          return items.length - 1 - idx;\n        }\n\n      case Focus$1.Next:\n        return items.findIndex(function (item, idx) {\n          if (idx <= activeIndex) return false;\n          return !resolvers.resolveDisabled(item);\n        });\n\n      case Focus$1.Last:\n        {\n          var _idx = items.slice().reverse().findIndex(function (item) {\n            return !resolvers.resolveDisabled(item);\n          });\n\n          if (_idx === -1) return _idx;\n          return items.length - 1 - _idx;\n        }\n\n      case Focus$1.Specific:\n        return items.findIndex(function (item) {\n          return resolvers.resolveId(item) === action.id;\n        });\n\n      case Focus$1.Nothing:\n        return null;\n\n      default:\n        assertNever(action);\n    }\n  }();\n\n  return nextActiveIndex === -1 ? currentActiveIndex : nextActiveIndex;\n}\n\nfunction resolvePropValue(property, bag) {\n  if (property === undefined) return undefined;\n  if (typeof property === 'function') return property(bag);\n  return property;\n}\n\nvar ListboxStates;\n\n(function (ListboxStates) {\n  ListboxStates[ListboxStates[\"Open\"] = 0] = \"Open\";\n  ListboxStates[ListboxStates[\"Closed\"] = 1] = \"Closed\";\n})(ListboxStates || (ListboxStates = {}));\n\nfunction nextFrame(cb) {\n  requestAnimationFrame(function () {\n    return requestAnimationFrame(cb);\n  });\n}\n\nvar ListboxContext = /*#__PURE__*/Symbol('ListboxContext');\n\nfunction useListboxContext(component) {\n  var context = inject(ListboxContext, null);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <Listbox /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useListboxContext);\n    throw err;\n  }\n\n  return context;\n} // ---\n\n\nvar Listbox = /*#__PURE__*/defineComponent({\n  name: 'Listbox',\n  emits: ['update:modelValue'],\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'template'\n    },\n    disabled: {\n      type: [Boolean],\n      \"default\": false\n    },\n    modelValue: {\n      type: [Object, String, Number, Boolean]\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        attrs = _ref.attrs,\n        emit = _ref.emit;\n\n    var disabled = props.disabled,\n        passThroughProps = _objectWithoutPropertiesLoose(props, [\"modelValue\", \"disabled\"]);\n\n    var listboxState = ref(ListboxStates.Closed);\n    var labelRef = ref(null);\n    var buttonRef = ref(null);\n    var optionsRef = ref(null);\n    var options = ref([]);\n    var searchQuery = ref('');\n    var activeOptionIndex = ref(null);\n    var value = computed(function () {\n      return props.modelValue;\n    });\n    var api = {\n      listboxState: listboxState,\n      value: value,\n      labelRef: labelRef,\n      buttonRef: buttonRef,\n      optionsRef: optionsRef,\n      disabled: disabled,\n      options: options,\n      searchQuery: searchQuery,\n      activeOptionIndex: activeOptionIndex,\n      closeListbox: function closeListbox() {\n        if (disabled) return;\n        if (listboxState.value === ListboxStates.Closed) return;\n        listboxState.value = ListboxStates.Closed;\n        activeOptionIndex.value = null;\n      },\n      openListbox: function openListbox() {\n        if (disabled) return;\n        if (listboxState.value === ListboxStates.Open) return;\n        listboxState.value = ListboxStates.Open;\n      },\n      goToOption: function goToOption(focus, id) {\n        if (disabled) return;\n        if (listboxState.value === ListboxStates.Closed) return;\n        var nextActiveOptionIndex = calculateActiveIndex(focus === Focus$1.Specific ? {\n          focus: Focus$1.Specific,\n          id: id\n        } : {\n          focus: focus\n        }, {\n          resolveItems: function resolveItems() {\n            return options.value;\n          },\n          resolveActiveIndex: function resolveActiveIndex() {\n            return activeOptionIndex.value;\n          },\n          resolveId: function resolveId(option) {\n            return option.id;\n          },\n          resolveDisabled: function resolveDisabled(option) {\n            return option.dataRef.disabled;\n          }\n        });\n        if (searchQuery.value === '' && activeOptionIndex.value === nextActiveOptionIndex) return;\n        searchQuery.value = '';\n        activeOptionIndex.value = nextActiveOptionIndex;\n      },\n      search: function search(value) {\n        if (disabled) return;\n        if (listboxState.value === ListboxStates.Closed) return;\n        searchQuery.value += value.toLowerCase();\n        var match = options.value.findIndex(function (option) {\n          return !option.dataRef.disabled && option.dataRef.textValue.startsWith(searchQuery.value);\n        });\n        if (match === -1 || match === activeOptionIndex.value) return;\n        activeOptionIndex.value = match;\n      },\n      clearSearch: function clearSearch() {\n        if (disabled) return;\n        if (listboxState.value === ListboxStates.Closed) return;\n        if (searchQuery.value === '') return;\n        searchQuery.value = '';\n      },\n      registerOption: function registerOption(id, dataRef) {\n        // @ts-expect-error The expected type comes from property 'dataRef' which is declared here on type '{ id: string; dataRef: { textValue: string; disabled: boolean; }; }'\n        options.value.push({\n          id: id,\n          dataRef: dataRef\n        });\n      },\n      unregisterOption: function unregisterOption(id) {\n        var nextOptions = options.value.slice();\n        var currentActiveOption = activeOptionIndex.value !== null ? nextOptions[activeOptionIndex.value] : null;\n        var idx = nextOptions.findIndex(function (a) {\n          return a.id === id;\n        });\n        if (idx !== -1) nextOptions.splice(idx, 1);\n        options.value = nextOptions;\n\n        activeOptionIndex.value = function () {\n          if (idx === activeOptionIndex.value) return null;\n          if (currentActiveOption === null) return null; // If we removed the option before the actual active index, then it would be out of sync. To\n          // fix this, we will find the correct (new) index position.\n\n          return nextOptions.indexOf(currentActiveOption);\n        }();\n      },\n      select: function select(value) {\n        if (disabled) return;\n        emit('update:modelValue', value);\n      }\n    };\n    useWindowEvent('mousedown', function (event) {\n      var _dom, _dom2, _dom3;\n\n      var target = event.target;\n      var active = document.activeElement;\n      if (listboxState.value !== ListboxStates.Open) return;\n      if ((_dom = dom(buttonRef)) == null ? void 0 : _dom.contains(target)) return;\n      if (!((_dom2 = dom(optionsRef)) == null ? void 0 : _dom2.contains(target))) api.closeListbox();\n      if (active !== document.body && (active == null ? void 0 : active.contains(target))) return; // Keep focus on newly clicked/focused element\n\n      if (!event.defaultPrevented) (_dom3 = dom(buttonRef)) == null ? void 0 : _dom3.focus({\n        preventScroll: true\n      });\n    }); // @ts-expect-error Types of property 'dataRef' are incompatible.\n\n    provide(ListboxContext, api);\n    useOpenClosedProvider(computed(function () {\n      var _match;\n\n      return match(listboxState.value, (_match = {}, _match[ListboxStates.Open] = State.Open, _match[ListboxStates.Closed] = State.Closed, _match));\n    }));\n    return function () {\n      var slot = {\n        open: listboxState.value === ListboxStates.Open,\n        disabled: disabled\n      };\n      return render({\n        props: passThroughProps,\n        slot: slot,\n        slots: slots,\n        attrs: attrs,\n        name: 'Listbox'\n      });\n    };\n  }\n}); // ---\n\nvar ListboxLabel = /*#__PURE__*/defineComponent({\n  name: 'ListboxLabel',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'label'\n    }\n  },\n  render: function render$1() {\n    var api = useListboxContext('ListboxLabel');\n    var slot = {\n      open: api.listboxState.value === ListboxStates.Open,\n      disabled: api.disabled\n    };\n    var propsWeControl = {\n      id: this.id,\n      ref: 'el',\n      onClick: this.handleClick\n    };\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'ListboxLabel'\n    });\n  },\n  setup: function setup() {\n    var api = useListboxContext('ListboxLabel');\n    var id = \"headlessui-listbox-label-\" + useId();\n    return {\n      id: id,\n      el: api.labelRef,\n      handleClick: function handleClick() {\n        var _dom4;\n\n        (_dom4 = dom(api.buttonRef)) == null ? void 0 : _dom4.focus({\n          preventScroll: true\n        });\n      }\n    };\n  }\n}); // ---\n\nvar ListboxButton = /*#__PURE__*/defineComponent({\n  name: 'ListboxButton',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'button'\n    }\n  },\n  render: function render$1() {\n    var _dom5, _dom6;\n\n    var api = useListboxContext('ListboxButton');\n    var slot = {\n      open: api.listboxState.value === ListboxStates.Open,\n      disabled: api.disabled\n    };\n    var propsWeControl = {\n      ref: 'el',\n      id: this.id,\n      type: 'button',\n      'aria-haspopup': true,\n      'aria-controls': (_dom5 = dom(api.optionsRef)) == null ? void 0 : _dom5.id,\n      'aria-expanded': api.listboxState.value === ListboxStates.Open ? true : undefined,\n      'aria-labelledby': api.labelRef.value ? [(_dom6 = dom(api.labelRef)) == null ? void 0 : _dom6.id, this.id].join(' ') : undefined,\n      disabled: api.disabled,\n      onKeydown: this.handleKeyDown,\n      onKeyup: this.handleKeyUp,\n      onClick: this.handleClick\n    };\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'ListboxButton'\n    });\n  },\n  setup: function setup() {\n    var api = useListboxContext('ListboxButton');\n    var id = \"headlessui-listbox-button-\" + useId();\n\n    function handleKeyDown(event) {\n      switch (event.key) {\n        // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-13\n        case Keys.Space:\n        case Keys.Enter:\n        case Keys.ArrowDown:\n          event.preventDefault();\n          api.openListbox();\n          nextTick(function () {\n            var _dom7;\n\n            (_dom7 = dom(api.optionsRef)) == null ? void 0 : _dom7.focus({\n              preventScroll: true\n            });\n            if (!api.value.value) api.goToOption(Focus$1.First);\n          });\n          break;\n\n        case Keys.ArrowUp:\n          event.preventDefault();\n          api.openListbox();\n          nextTick(function () {\n            var _dom8;\n\n            (_dom8 = dom(api.optionsRef)) == null ? void 0 : _dom8.focus({\n              preventScroll: true\n            });\n            if (!api.value.value) api.goToOption(Focus$1.Last);\n          });\n          break;\n      }\n    }\n\n    function handleKeyUp(event) {\n      switch (event.key) {\n        case Keys.Space:\n          // Required for firefox, event.preventDefault() in handleKeyDown for\n          // the Space key doesn't cancel the handleKeyUp, which in turn\n          // triggers a *click*.\n          event.preventDefault();\n          break;\n      }\n    }\n\n    function handleClick(event) {\n      if (api.disabled) return;\n\n      if (api.listboxState.value === ListboxStates.Open) {\n        api.closeListbox();\n        nextTick(function () {\n          var _dom9;\n\n          return (_dom9 = dom(api.buttonRef)) == null ? void 0 : _dom9.focus({\n            preventScroll: true\n          });\n        });\n      } else {\n        event.preventDefault();\n        api.openListbox();\n        nextFrame(function () {\n          var _dom10;\n\n          return (_dom10 = dom(api.optionsRef)) == null ? void 0 : _dom10.focus({\n            preventScroll: true\n          });\n        });\n      }\n    }\n\n    return {\n      id: id,\n      el: api.buttonRef,\n      handleKeyDown: handleKeyDown,\n      handleKeyUp: handleKeyUp,\n      handleClick: handleClick\n    };\n  }\n}); // ---\n\nvar ListboxOptions = /*#__PURE__*/defineComponent({\n  name: 'ListboxOptions',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'ul'\n    },\n    \"static\": {\n      type: Boolean,\n      \"default\": false\n    },\n    unmount: {\n      type: Boolean,\n      \"default\": true\n    }\n  },\n  render: function render$1() {\n    var _api$options$value$ap, _dom$id, _dom11, _dom12;\n\n    var api = useListboxContext('ListboxOptions');\n    var slot = {\n      open: api.listboxState.value === ListboxStates.Open\n    };\n    var propsWeControl = {\n      'aria-activedescendant': api.activeOptionIndex.value === null ? undefined : (_api$options$value$ap = api.options.value[api.activeOptionIndex.value]) == null ? void 0 : _api$options$value$ap.id,\n      'aria-labelledby': (_dom$id = (_dom11 = dom(api.labelRef)) == null ? void 0 : _dom11.id) != null ? _dom$id : (_dom12 = dom(api.buttonRef)) == null ? void 0 : _dom12.id,\n      id: this.id,\n      onKeydown: this.handleKeyDown,\n      role: 'listbox',\n      tabIndex: 0,\n      ref: 'el'\n    };\n    var passThroughProps = this.$props;\n    return render({\n      props: _extends({}, passThroughProps, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      features: Features.RenderStrategy | Features.Static,\n      visible: this.visible,\n      name: 'ListboxOptions'\n    });\n  },\n  setup: function setup() {\n    var api = useListboxContext('ListboxOptions');\n    var id = \"headlessui-listbox-options-\" + useId();\n    var searchDebounce = ref(null);\n\n    function handleKeyDown(event) {\n      if (searchDebounce.value) clearTimeout(searchDebounce.value);\n\n      switch (event.key) {\n        // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-12\n        // @ts-expect-error Fallthrough is expected here\n        case Keys.Space:\n          if (api.searchQuery.value !== '') {\n            event.preventDefault();\n            event.stopPropagation();\n            return api.search(event.key);\n          }\n\n        // When in type ahead mode, fallthrough\n\n        case Keys.Enter:\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (api.activeOptionIndex.value !== null) {\n            var dataRef = api.options.value[api.activeOptionIndex.value].dataRef;\n            api.select(dataRef.value);\n          }\n\n          api.closeListbox();\n          nextTick(function () {\n            var _dom13;\n\n            return (_dom13 = dom(api.buttonRef)) == null ? void 0 : _dom13.focus({\n              preventScroll: true\n            });\n          });\n          break;\n\n        case Keys.ArrowDown:\n          event.preventDefault();\n          event.stopPropagation();\n          return api.goToOption(Focus$1.Next);\n\n        case Keys.ArrowUp:\n          event.preventDefault();\n          event.stopPropagation();\n          return api.goToOption(Focus$1.Previous);\n\n        case Keys.Home:\n        case Keys.PageUp:\n          event.preventDefault();\n          event.stopPropagation();\n          return api.goToOption(Focus$1.First);\n\n        case Keys.End:\n        case Keys.PageDown:\n          event.preventDefault();\n          event.stopPropagation();\n          return api.goToOption(Focus$1.Last);\n\n        case Keys.Escape:\n          event.preventDefault();\n          event.stopPropagation();\n          api.closeListbox();\n          nextTick(function () {\n            var _dom14;\n\n            return (_dom14 = dom(api.buttonRef)) == null ? void 0 : _dom14.focus({\n              preventScroll: true\n            });\n          });\n          break;\n\n        case Keys.Tab:\n          event.preventDefault();\n          event.stopPropagation();\n          break;\n\n        default:\n          if (event.key.length === 1) {\n            api.search(event.key);\n            searchDebounce.value = setTimeout(function () {\n              return api.clearSearch();\n            }, 350);\n          }\n\n          break;\n      }\n    }\n\n    var usesOpenClosedState = useOpenClosed();\n    var visible = computed(function () {\n      if (usesOpenClosedState !== null) {\n        return usesOpenClosedState.value === State.Open;\n      }\n\n      return api.listboxState.value === ListboxStates.Open;\n    });\n    return {\n      id: id,\n      el: api.optionsRef,\n      handleKeyDown: handleKeyDown,\n      visible: visible\n    };\n  }\n});\nvar ListboxOption = /*#__PURE__*/defineComponent({\n  name: 'ListboxOption',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'li'\n    },\n    value: {\n      type: [Object, String]\n    },\n    disabled: {\n      type: Boolean,\n      \"default\": false\n    },\n    \"class\": {\n      type: [String, Function],\n      required: false\n    },\n    className: {\n      type: [String, Function],\n      required: false\n    }\n  },\n  setup: function setup(props, _ref2) {\n    var slots = _ref2.slots,\n        attrs = _ref2.attrs;\n    var api = useListboxContext('ListboxOption');\n    var id = \"headlessui-listbox-option-\" + useId();\n    var disabled = props.disabled,\n        defaultClass = props[\"class\"],\n        _props$className = props.className,\n        className = _props$className === void 0 ? defaultClass : _props$className,\n        value = props.value;\n    var active = computed(function () {\n      return api.activeOptionIndex.value !== null ? api.options.value[api.activeOptionIndex.value].id === id : false;\n    });\n    var selected = computed(function () {\n      return toRaw(api.value.value) === toRaw(value);\n    });\n    var dataRef = ref({\n      disabled: disabled,\n      value: value,\n      textValue: ''\n    });\n    onMounted(function () {\n      var _document$getElementB, _document$getElementB2;\n\n      var textValue = (_document$getElementB = document.getElementById(id)) == null ? void 0 : (_document$getElementB2 = _document$getElementB.textContent) == null ? void 0 : _document$getElementB2.toLowerCase().trim();\n      if (textValue !== undefined) dataRef.value.textValue = textValue;\n    });\n    onMounted(function () {\n      return api.registerOption(id, dataRef);\n    });\n    onUnmounted(function () {\n      return api.unregisterOption(id);\n    });\n    onMounted(function () {\n      watch([api.listboxState, selected], function () {\n        var _document$getElementB3;\n\n        if (api.listboxState.value !== ListboxStates.Open) return;\n        if (!selected.value) return;\n        api.goToOption(Focus$1.Specific, id);\n        (_document$getElementB3 = document.getElementById(id)) == null ? void 0 : _document$getElementB3.focus == null ? void 0 : _document$getElementB3.focus();\n      }, {\n        immediate: true\n      });\n    });\n    watchEffect(function () {\n      if (api.listboxState.value !== ListboxStates.Open) return;\n      if (!active.value) return;\n      nextTick(function () {\n        var _document$getElementB4;\n\n        return (_document$getElementB4 = document.getElementById(id)) == null ? void 0 : _document$getElementB4.scrollIntoView == null ? void 0 : _document$getElementB4.scrollIntoView({\n          block: 'nearest'\n        });\n      });\n    });\n\n    function handleClick(event) {\n      if (disabled) return event.preventDefault();\n      api.select(value);\n      api.closeListbox();\n      nextTick(function () {\n        var _dom15;\n\n        return (_dom15 = dom(api.buttonRef)) == null ? void 0 : _dom15.focus({\n          preventScroll: true\n        });\n      });\n    }\n\n    function handleFocus() {\n      if (disabled) return api.goToOption(Focus$1.Nothing);\n      api.goToOption(Focus$1.Specific, id);\n    }\n\n    function handleMove() {\n      if (disabled) return;\n      if (active.value) return;\n      api.goToOption(Focus$1.Specific, id);\n    }\n\n    function handleLeave() {\n      if (disabled) return;\n      if (!active.value) return;\n      api.goToOption(Focus$1.Nothing);\n    }\n\n    return function () {\n      var slot = {\n        active: active.value,\n        selected: selected.value,\n        disabled: disabled\n      };\n      var propsWeControl = {\n        id: id,\n        role: 'option',\n        tabIndex: -1,\n        \"class\": resolvePropValue(className, slot),\n        'aria-disabled': disabled === true ? true : undefined,\n        'aria-selected': selected.value === true ? selected.value : undefined,\n        onClick: handleClick,\n        onFocus: handleFocus,\n        onPointermove: handleMove,\n        onMousemove: handleMove,\n        onPointerleave: handleLeave,\n        onMouseleave: handleLeave\n      };\n      return render({\n        props: _extends({}, props, propsWeControl),\n        slot: slot,\n        attrs: attrs,\n        slots: slots,\n        name: 'ListboxOption'\n      });\n    };\n  }\n});\n\nfunction useTreeWalker(_ref) {\n  var container = _ref.container,\n      accept = _ref.accept,\n      walk = _ref.walk,\n      enabled = _ref.enabled;\n  watchEffect(function () {\n    var root = container.value;\n    if (!root) return;\n    if (enabled !== undefined && !enabled.value) return;\n    var acceptNode = Object.assign(function (node) {\n      return accept(node);\n    }, {\n      acceptNode: accept\n    });\n    var walker = document.createTreeWalker(root, NodeFilter.SHOW_ELEMENT, acceptNode, false);\n\n    while (walker.nextNode()) {\n      walk(walker.currentNode);\n    }\n  });\n}\n\nvar MenuStates;\n\n(function (MenuStates) {\n  MenuStates[MenuStates[\"Open\"] = 0] = \"Open\";\n  MenuStates[MenuStates[\"Closed\"] = 1] = \"Closed\";\n})(MenuStates || (MenuStates = {}));\n\nfunction nextFrame$1(cb) {\n  requestAnimationFrame(function () {\n    return requestAnimationFrame(cb);\n  });\n}\n\nvar MenuContext = /*#__PURE__*/Symbol('MenuContext');\n\nfunction useMenuContext(component) {\n  var context = inject(MenuContext, null);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <Menu /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useMenuContext);\n    throw err;\n  }\n\n  return context;\n}\n\nvar Menu = /*#__PURE__*/defineComponent({\n  name: 'Menu',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'template'\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        attrs = _ref.attrs;\n    var menuState = ref(MenuStates.Closed);\n    var buttonRef = ref(null);\n    var itemsRef = ref(null);\n    var items = ref([]);\n    var searchQuery = ref('');\n    var activeItemIndex = ref(null);\n    var api = {\n      menuState: menuState,\n      buttonRef: buttonRef,\n      itemsRef: itemsRef,\n      items: items,\n      searchQuery: searchQuery,\n      activeItemIndex: activeItemIndex,\n      closeMenu: function closeMenu() {\n        menuState.value = MenuStates.Closed;\n        activeItemIndex.value = null;\n      },\n      openMenu: function openMenu() {\n        return menuState.value = MenuStates.Open;\n      },\n      goToItem: function goToItem(focus, id) {\n        var nextActiveItemIndex = calculateActiveIndex(focus === Focus$1.Specific ? {\n          focus: Focus$1.Specific,\n          id: id\n        } : {\n          focus: focus\n        }, {\n          resolveItems: function resolveItems() {\n            return items.value;\n          },\n          resolveActiveIndex: function resolveActiveIndex() {\n            return activeItemIndex.value;\n          },\n          resolveId: function resolveId(item) {\n            return item.id;\n          },\n          resolveDisabled: function resolveDisabled(item) {\n            return item.dataRef.disabled;\n          }\n        });\n        if (searchQuery.value === '' && activeItemIndex.value === nextActiveItemIndex) return;\n        searchQuery.value = '';\n        activeItemIndex.value = nextActiveItemIndex;\n      },\n      search: function search(value) {\n        searchQuery.value += value.toLowerCase();\n        var match = items.value.findIndex(function (item) {\n          return item.dataRef.textValue.startsWith(searchQuery.value) && !item.dataRef.disabled;\n        });\n        if (match === -1 || match === activeItemIndex.value) return;\n        activeItemIndex.value = match;\n      },\n      clearSearch: function clearSearch() {\n        searchQuery.value = '';\n      },\n      registerItem: function registerItem(id, dataRef) {\n        // @ts-expect-error The expected type comes from property 'dataRef' which is declared here on type '{ id: string; dataRef: { textValue: string; disabled: boolean; }; }'\n        items.value.push({\n          id: id,\n          dataRef: dataRef\n        });\n      },\n      unregisterItem: function unregisterItem(id) {\n        var nextItems = items.value.slice();\n        var currentActiveItem = activeItemIndex.value !== null ? nextItems[activeItemIndex.value] : null;\n        var idx = nextItems.findIndex(function (a) {\n          return a.id === id;\n        });\n        if (idx !== -1) nextItems.splice(idx, 1);\n        items.value = nextItems;\n\n        activeItemIndex.value = function () {\n          if (idx === activeItemIndex.value) return null;\n          if (currentActiveItem === null) return null; // If we removed the item before the actual active index, then it would be out of sync. To\n          // fix this, we will find the correct (new) index position.\n\n          return nextItems.indexOf(currentActiveItem);\n        }();\n      }\n    };\n    useWindowEvent('mousedown', function (event) {\n      var _dom, _dom2, _dom3;\n\n      var target = event.target;\n      var active = document.activeElement;\n      if (menuState.value !== MenuStates.Open) return;\n      if ((_dom = dom(buttonRef)) == null ? void 0 : _dom.contains(target)) return;\n      if (!((_dom2 = dom(itemsRef)) == null ? void 0 : _dom2.contains(target))) api.closeMenu();\n      if (active !== document.body && (active == null ? void 0 : active.contains(target))) return; // Keep focus on newly clicked/focused element\n\n      if (!event.defaultPrevented) (_dom3 = dom(buttonRef)) == null ? void 0 : _dom3.focus({\n        preventScroll: true\n      });\n    }); // @ts-expect-error Types of property 'dataRef' are incompatible.\n\n    provide(MenuContext, api);\n    useOpenClosedProvider(computed(function () {\n      var _match;\n\n      return match(menuState.value, (_match = {}, _match[MenuStates.Open] = State.Open, _match[MenuStates.Closed] = State.Closed, _match));\n    }));\n    return function () {\n      var slot = {\n        open: menuState.value === MenuStates.Open\n      };\n      return render({\n        props: props,\n        slot: slot,\n        slots: slots,\n        attrs: attrs,\n        name: 'Menu'\n      });\n    };\n  }\n});\nvar MenuButton = /*#__PURE__*/defineComponent({\n  name: 'MenuButton',\n  props: {\n    disabled: {\n      type: Boolean,\n      \"default\": false\n    },\n    as: {\n      type: [Object, String],\n      \"default\": 'button'\n    }\n  },\n  render: function render$1() {\n    var _dom4;\n\n    var api = useMenuContext('MenuButton');\n    var slot = {\n      open: api.menuState.value === MenuStates.Open\n    };\n    var propsWeControl = {\n      ref: 'el',\n      id: this.id,\n      type: 'button',\n      'aria-haspopup': true,\n      'aria-controls': (_dom4 = dom(api.itemsRef)) == null ? void 0 : _dom4.id,\n      'aria-expanded': api.menuState.value === MenuStates.Open ? true : undefined,\n      onKeydown: this.handleKeyDown,\n      onKeyup: this.handleKeyUp,\n      onClick: this.handleClick\n    };\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'MenuButton'\n    });\n  },\n  setup: function setup(props) {\n    var api = useMenuContext('MenuButton');\n    var id = \"headlessui-menu-button-\" + useId();\n\n    function handleKeyDown(event) {\n      switch (event.key) {\n        // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-13\n        case Keys.Space:\n        case Keys.Enter:\n        case Keys.ArrowDown:\n          event.preventDefault();\n          event.stopPropagation();\n          api.openMenu();\n          nextTick(function () {\n            var _dom5;\n\n            (_dom5 = dom(api.itemsRef)) == null ? void 0 : _dom5.focus({\n              preventScroll: true\n            });\n            api.goToItem(Focus$1.First);\n          });\n          break;\n\n        case Keys.ArrowUp:\n          event.preventDefault();\n          event.stopPropagation();\n          api.openMenu();\n          nextTick(function () {\n            var _dom6;\n\n            (_dom6 = dom(api.itemsRef)) == null ? void 0 : _dom6.focus({\n              preventScroll: true\n            });\n            api.goToItem(Focus$1.Last);\n          });\n          break;\n      }\n    }\n\n    function handleKeyUp(event) {\n      switch (event.key) {\n        case Keys.Space:\n          // Required for firefox, event.preventDefault() in handleKeyDown for\n          // the Space key doesn't cancel the handleKeyUp, which in turn\n          // triggers a *click*.\n          event.preventDefault();\n          break;\n      }\n    }\n\n    function handleClick(event) {\n      if (props.disabled) return;\n\n      if (api.menuState.value === MenuStates.Open) {\n        api.closeMenu();\n        nextTick(function () {\n          var _dom7;\n\n          return (_dom7 = dom(api.buttonRef)) == null ? void 0 : _dom7.focus({\n            preventScroll: true\n          });\n        });\n      } else {\n        event.preventDefault();\n        event.stopPropagation();\n        api.openMenu();\n        nextFrame$1(function () {\n          var _dom8;\n\n          return (_dom8 = dom(api.itemsRef)) == null ? void 0 : _dom8.focus({\n            preventScroll: true\n          });\n        });\n      }\n    }\n\n    return {\n      id: id,\n      el: api.buttonRef,\n      handleKeyDown: handleKeyDown,\n      handleKeyUp: handleKeyUp,\n      handleClick: handleClick\n    };\n  }\n});\nvar MenuItems = /*#__PURE__*/defineComponent({\n  name: 'MenuItems',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    \"static\": {\n      type: Boolean,\n      \"default\": false\n    },\n    unmount: {\n      type: Boolean,\n      \"default\": true\n    }\n  },\n  render: function render$1() {\n    var _api$items$value$api$, _dom9;\n\n    var api = useMenuContext('MenuItems');\n    var slot = {\n      open: api.menuState.value === MenuStates.Open\n    };\n    var propsWeControl = {\n      'aria-activedescendant': api.activeItemIndex.value === null ? undefined : (_api$items$value$api$ = api.items.value[api.activeItemIndex.value]) == null ? void 0 : _api$items$value$api$.id,\n      'aria-labelledby': (_dom9 = dom(api.buttonRef)) == null ? void 0 : _dom9.id,\n      id: this.id,\n      onKeydown: this.handleKeyDown,\n      onKeyup: this.handleKeyUp,\n      role: 'menu',\n      tabIndex: 0,\n      ref: 'el'\n    };\n    var passThroughProps = this.$props;\n    return render({\n      props: _extends({}, passThroughProps, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      features: Features.RenderStrategy | Features.Static,\n      visible: this.visible,\n      name: 'MenuItems'\n    });\n  },\n  setup: function setup() {\n    var api = useMenuContext('MenuItems');\n    var id = \"headlessui-menu-items-\" + useId();\n    var searchDebounce = ref(null);\n    useTreeWalker({\n      container: computed(function () {\n        return dom(api.itemsRef);\n      }),\n      enabled: computed(function () {\n        return api.menuState.value === MenuStates.Open;\n      }),\n      accept: function accept(node) {\n        if (node.getAttribute('role') === 'menuitem') return NodeFilter.FILTER_REJECT;\n        if (node.hasAttribute('role')) return NodeFilter.FILTER_SKIP;\n        return NodeFilter.FILTER_ACCEPT;\n      },\n      walk: function walk(node) {\n        node.setAttribute('role', 'none');\n      }\n    });\n\n    function handleKeyDown(event) {\n      if (searchDebounce.value) clearTimeout(searchDebounce.value);\n\n      switch (event.key) {\n        // Ref: https://www.w3.org/TR/wai-aria-practices-1.2/#keyboard-interaction-12\n        // @ts-expect-error Fallthrough is expected here\n        case Keys.Space:\n          if (api.searchQuery.value !== '') {\n            event.preventDefault();\n            event.stopPropagation();\n            return api.search(event.key);\n          }\n\n        // When in type ahead mode, fallthrough\n\n        case Keys.Enter:\n          event.preventDefault();\n          event.stopPropagation();\n\n          if (api.activeItemIndex.value !== null) {\n            var _document$getElementB;\n\n            var _id = api.items.value[api.activeItemIndex.value].id;\n            (_document$getElementB = document.getElementById(_id)) == null ? void 0 : _document$getElementB.click();\n          }\n\n          api.closeMenu();\n          nextTick(function () {\n            var _dom10;\n\n            return (_dom10 = dom(api.buttonRef)) == null ? void 0 : _dom10.focus({\n              preventScroll: true\n            });\n          });\n          break;\n\n        case Keys.ArrowDown:\n          event.preventDefault();\n          event.stopPropagation();\n          return api.goToItem(Focus$1.Next);\n\n        case Keys.ArrowUp:\n          event.preventDefault();\n          event.stopPropagation();\n          return api.goToItem(Focus$1.Previous);\n\n        case Keys.Home:\n        case Keys.PageUp:\n          event.preventDefault();\n          event.stopPropagation();\n          return api.goToItem(Focus$1.First);\n\n        case Keys.End:\n        case Keys.PageDown:\n          event.preventDefault();\n          event.stopPropagation();\n          return api.goToItem(Focus$1.Last);\n\n        case Keys.Escape:\n          event.preventDefault();\n          event.stopPropagation();\n          api.closeMenu();\n          nextTick(function () {\n            var _dom11;\n\n            return (_dom11 = dom(api.buttonRef)) == null ? void 0 : _dom11.focus({\n              preventScroll: true\n            });\n          });\n          break;\n\n        case Keys.Tab:\n          event.preventDefault();\n          event.stopPropagation();\n          break;\n\n        default:\n          if (event.key.length === 1) {\n            api.search(event.key);\n            searchDebounce.value = setTimeout(function () {\n              return api.clearSearch();\n            }, 350);\n          }\n\n          break;\n      }\n    }\n\n    function handleKeyUp(event) {\n      switch (event.key) {\n        case Keys.Space:\n          // Required for firefox, event.preventDefault() in handleKeyDown for\n          // the Space key doesn't cancel the handleKeyUp, which in turn\n          // triggers a *click*.\n          event.preventDefault();\n          break;\n      }\n    }\n\n    var usesOpenClosedState = useOpenClosed();\n    var visible = computed(function () {\n      if (usesOpenClosedState !== null) {\n        return usesOpenClosedState.value === State.Open;\n      }\n\n      return api.menuState.value === MenuStates.Open;\n    });\n    return {\n      id: id,\n      el: api.itemsRef,\n      handleKeyDown: handleKeyDown,\n      handleKeyUp: handleKeyUp,\n      visible: visible\n    };\n  }\n});\nvar MenuItem = /*#__PURE__*/defineComponent({\n  name: 'MenuItem',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'template'\n    },\n    disabled: {\n      type: Boolean,\n      \"default\": false\n    },\n    \"class\": {\n      type: [String, Function],\n      required: false\n    },\n    className: {\n      type: [String, Function],\n      required: false\n    }\n  },\n  setup: function setup(props, _ref2) {\n    var slots = _ref2.slots,\n        attrs = _ref2.attrs;\n    var api = useMenuContext('MenuItem');\n    var id = \"headlessui-menu-item-\" + useId();\n    var disabled = props.disabled,\n        defaultClass = props[\"class\"],\n        _props$className = props.className,\n        className = _props$className === void 0 ? defaultClass : _props$className;\n    var active = computed(function () {\n      return api.activeItemIndex.value !== null ? api.items.value[api.activeItemIndex.value].id === id : false;\n    });\n    var dataRef = ref({\n      disabled: disabled,\n      textValue: ''\n    });\n    onMounted(function () {\n      var _document$getElementB2, _document$getElementB3;\n\n      var textValue = (_document$getElementB2 = document.getElementById(id)) == null ? void 0 : (_document$getElementB3 = _document$getElementB2.textContent) == null ? void 0 : _document$getElementB3.toLowerCase().trim();\n      if (textValue !== undefined) dataRef.value.textValue = textValue;\n    });\n    onMounted(function () {\n      return api.registerItem(id, dataRef);\n    });\n    onUnmounted(function () {\n      return api.unregisterItem(id);\n    });\n    watchEffect(function () {\n      if (api.menuState.value !== MenuStates.Open) return;\n      if (!active.value) return;\n      nextTick(function () {\n        var _document$getElementB4;\n\n        return (_document$getElementB4 = document.getElementById(id)) == null ? void 0 : _document$getElementB4.scrollIntoView == null ? void 0 : _document$getElementB4.scrollIntoView({\n          block: 'nearest'\n        });\n      });\n    });\n\n    function handleClick(event) {\n      if (disabled) return event.preventDefault();\n      api.closeMenu();\n      nextTick(function () {\n        var _dom12;\n\n        return (_dom12 = dom(api.buttonRef)) == null ? void 0 : _dom12.focus({\n          preventScroll: true\n        });\n      });\n    }\n\n    function handleFocus() {\n      if (disabled) return api.goToItem(Focus$1.Nothing);\n      api.goToItem(Focus$1.Specific, id);\n    }\n\n    function handleMove() {\n      if (disabled) return;\n      if (active.value) return;\n      api.goToItem(Focus$1.Specific, id);\n    }\n\n    function handleLeave() {\n      if (disabled) return;\n      if (!active.value) return;\n      api.goToItem(Focus$1.Nothing);\n    }\n\n    return function () {\n      var slot = {\n        active: active.value,\n        disabled: disabled\n      };\n      var propsWeControl = {\n        id: id,\n        role: 'menuitem',\n        tabIndex: -1,\n        \"class\": resolvePropValue(className, slot),\n        'aria-disabled': disabled === true ? true : undefined,\n        onClick: handleClick,\n        onFocus: handleFocus,\n        onPointermove: handleMove,\n        onMousemove: handleMove,\n        onPointerleave: handleLeave,\n        onMouseleave: handleLeave\n      };\n      return render({\n        props: _extends({}, props, propsWeControl),\n        slot: slot,\n        attrs: attrs,\n        slots: slots,\n        name: 'MenuItem'\n      });\n    };\n  }\n});\n\nvar PopoverStates;\n\n(function (PopoverStates) {\n  PopoverStates[PopoverStates[\"Open\"] = 0] = \"Open\";\n  PopoverStates[PopoverStates[\"Closed\"] = 1] = \"Closed\";\n})(PopoverStates || (PopoverStates = {}));\n\nvar PopoverContext = /*#__PURE__*/Symbol('PopoverContext');\n\nfunction usePopoverContext(component) {\n  var context = inject(PopoverContext, null);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <\" + Popover.name + \" /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, usePopoverContext);\n    throw err;\n  }\n\n  return context;\n}\n\nvar PopoverGroupContext = /*#__PURE__*/Symbol('PopoverGroupContext');\n\nfunction usePopoverGroupContext() {\n  return inject(PopoverGroupContext, null);\n}\n\nvar PopoverPanelContext = /*#__PURE__*/Symbol('PopoverPanelContext');\n\nfunction usePopoverPanelContext() {\n  return inject(PopoverPanelContext, null);\n} // ---\n\n\nvar Popover = /*#__PURE__*/defineComponent({\n  name: 'Popover',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        attrs = _ref.attrs;\n\n    var passThroughProps = _extends({}, props);\n\n    var buttonId = \"headlessui-popover-button-\" + useId();\n    var panelId = \"headlessui-popover-panel-\" + useId();\n    var popoverState = ref(PopoverStates.Closed);\n    var button = ref(null);\n    var panel = ref(null);\n    var api = {\n      popoverState: popoverState,\n      buttonId: buttonId,\n      panelId: panelId,\n      panel: panel,\n      button: button,\n      togglePopover: function togglePopover() {\n        var _match;\n\n        popoverState.value = match(popoverState.value, (_match = {}, _match[PopoverStates.Open] = PopoverStates.Closed, _match[PopoverStates.Closed] = PopoverStates.Open, _match));\n      },\n      closePopover: function closePopover() {\n        if (popoverState.value === PopoverStates.Closed) return;\n        popoverState.value = PopoverStates.Closed;\n      }\n    };\n    provide(PopoverContext, api);\n    useOpenClosedProvider(computed(function () {\n      var _match2;\n\n      return match(popoverState.value, (_match2 = {}, _match2[PopoverStates.Open] = State.Open, _match2[PopoverStates.Closed] = State.Closed, _match2));\n    }));\n    var registerBag = {\n      buttonId: buttonId,\n      panelId: panelId,\n      close: function close() {\n        api.closePopover();\n      }\n    };\n    var groupContext = usePopoverGroupContext();\n    var registerPopover = groupContext == null ? void 0 : groupContext.registerPopover;\n\n    function isFocusWithinPopoverGroup() {\n      var _groupContext$isFocus, _dom, _dom2;\n\n      return (_groupContext$isFocus = groupContext == null ? void 0 : groupContext.isFocusWithinPopoverGroup()) != null ? _groupContext$isFocus : ((_dom = dom(button)) == null ? void 0 : _dom.contains(document.activeElement)) || ((_dom2 = dom(panel)) == null ? void 0 : _dom2.contains(document.activeElement));\n    }\n\n    watchEffect(function () {\n      return registerPopover == null ? void 0 : registerPopover(registerBag);\n    }); // Handle focus out\n\n    useWindowEvent('focus', function () {\n      if (popoverState.value !== PopoverStates.Open) return;\n      if (isFocusWithinPopoverGroup()) return;\n      if (!button) return;\n      if (!panel) return;\n      api.closePopover();\n    }, true); // Handle outside click\n\n    useWindowEvent('mousedown', function (event) {\n      var _dom3, _dom4;\n\n      var target = event.target;\n      if (popoverState.value !== PopoverStates.Open) return;\n      if ((_dom3 = dom(button)) == null ? void 0 : _dom3.contains(target)) return;\n      if ((_dom4 = dom(panel)) == null ? void 0 : _dom4.contains(target)) return;\n      api.closePopover();\n\n      if (!isFocusableElement(target, FocusableMode.Loose)) {\n        var _dom5;\n\n        event.preventDefault();\n        (_dom5 = dom(button)) == null ? void 0 : _dom5.focus();\n      }\n    });\n    return function () {\n      var slot = {\n        open: popoverState.value === PopoverStates.Open\n      };\n      return render({\n        props: passThroughProps,\n        slot: slot,\n        slots: slots,\n        attrs: attrs,\n        name: 'Popover'\n      });\n    };\n  }\n}); // ---\n\nvar PopoverButton = /*#__PURE__*/defineComponent({\n  name: 'PopoverButton',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'button'\n    },\n    disabled: {\n      type: [Boolean],\n      \"default\": false\n    }\n  },\n  render: function render$1() {\n    var api = usePopoverContext('PopoverButton');\n    var slot = {\n      open: api.popoverState.value === PopoverStates.Open\n    };\n    var propsWeControl = this.isWithinPanel ? {\n      type: 'button',\n      onKeydown: this.handleKeyDown,\n      onClick: this.handleClick\n    } : {\n      ref: 'el',\n      id: api.buttonId,\n      type: 'button',\n      'aria-expanded': api.popoverState.value === PopoverStates.Open ? true : undefined,\n      'aria-controls': dom(api.panel) ? api.panelId : undefined,\n      onKeydown: this.handleKeyDown,\n      onKeyup: this.handleKeyUp,\n      onClick: this.handleClick\n    };\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'PopoverButton'\n    });\n  },\n  setup: function setup(props) {\n    var api = usePopoverContext('PopoverButton');\n    var groupContext = usePopoverGroupContext();\n    var closeOthers = groupContext == null ? void 0 : groupContext.closeOthers;\n    var panelContext = usePopoverPanelContext();\n    var isWithinPanel = panelContext === null ? false : panelContext === api.panelId; // TODO: Revisit when handling Tab/Shift+Tab when using Portal's\n\n    var activeElementRef = ref(null);\n    var previousActiveElementRef = ref(typeof window === 'undefined' ? null : document.activeElement);\n    useWindowEvent('focus', function () {\n      previousActiveElementRef.value = activeElementRef.value;\n      activeElementRef.value = document.activeElement;\n    }, true);\n    return {\n      isWithinPanel: isWithinPanel,\n      el: isWithinPanel ? null : api.button,\n      handleKeyDown: function handleKeyDown(event) {\n        var _dom6, _dom7;\n\n        if (isWithinPanel) {\n          if (api.popoverState.value === PopoverStates.Closed) return;\n\n          switch (event.key) {\n            case Keys.Space:\n            case Keys.Enter:\n              event.preventDefault(); // Prevent triggering a *click* event\n\n              event.stopPropagation();\n              api.closePopover();\n              (_dom6 = dom(api.button)) == null ? void 0 : _dom6.focus(); // Re-focus the original opening Button\n\n              break;\n          }\n        } else {\n          switch (event.key) {\n            case Keys.Space:\n            case Keys.Enter:\n              event.preventDefault(); // Prevent triggering a *click* event\n\n              event.stopPropagation();\n              if (api.popoverState.value === PopoverStates.Closed) closeOthers == null ? void 0 : closeOthers(api.buttonId);\n              api.togglePopover();\n              break;\n\n            case Keys.Escape:\n              if (api.popoverState.value !== PopoverStates.Open) return closeOthers == null ? void 0 : closeOthers(api.buttonId);\n              if (!dom(api.button)) return;\n              if (!((_dom7 = dom(api.button)) == null ? void 0 : _dom7.contains(document.activeElement))) return;\n              api.closePopover();\n              break;\n\n            case Keys.Tab:\n              if (api.popoverState.value !== PopoverStates.Open) return;\n              if (!api.panel) return;\n              if (!api.button) return; // TODO: Revisit when handling Tab/Shift+Tab when using Portal's\n\n              if (event.shiftKey) {\n                var _dom8, _dom9;\n\n                // Check if the last focused element exists, and check that it is not inside button or panel itself\n                if (!previousActiveElementRef.value) return;\n                if ((_dom8 = dom(api.button)) == null ? void 0 : _dom8.contains(previousActiveElementRef.value)) return;\n                if ((_dom9 = dom(api.panel)) == null ? void 0 : _dom9.contains(previousActiveElementRef.value)) return; // Check if the last focused element is *after* the button in the DOM\n\n                var focusableElements = getFocusableElements();\n                var previousIdx = focusableElements.indexOf(previousActiveElementRef.value);\n                var buttonIdx = focusableElements.indexOf(dom(api.button));\n                if (buttonIdx > previousIdx) return;\n                event.preventDefault();\n                event.stopPropagation();\n                focusIn(dom(api.panel), Focus.Last);\n              } else {\n                event.preventDefault();\n                event.stopPropagation();\n                focusIn(dom(api.panel), Focus.First);\n              }\n\n              break;\n          }\n        }\n      },\n      handleKeyUp: function handleKeyUp(event) {\n        var _dom10, _dom11;\n\n        if (isWithinPanel) return;\n\n        if (event.key === Keys.Space) {\n          // Required for firefox, event.preventDefault() in handleKeyDown for\n          // the Space key doesn't cancel the handleKeyUp, which in turn\n          // triggers a *click*.\n          event.preventDefault();\n        }\n\n        if (api.popoverState.value !== PopoverStates.Open) return;\n        if (!api.panel) return;\n        if (!api.button) return; // TODO: Revisit when handling Tab/Shift+Tab when using Portal's\n\n        switch (event.key) {\n          case Keys.Tab:\n            // Check if the last focused element exists, and check that it is not inside button or panel itself\n            if (!previousActiveElementRef.value) return;\n            if ((_dom10 = dom(api.button)) == null ? void 0 : _dom10.contains(previousActiveElementRef.value)) return;\n            if ((_dom11 = dom(api.panel)) == null ? void 0 : _dom11.contains(previousActiveElementRef.value)) return; // Check if the last focused element is *after* the button in the DOM\n\n            var focusableElements = getFocusableElements();\n            var previousIdx = focusableElements.indexOf(previousActiveElementRef.value);\n            var buttonIdx = focusableElements.indexOf(dom(api.button));\n            if (buttonIdx > previousIdx) return;\n            event.preventDefault();\n            event.stopPropagation();\n            focusIn(dom(api.panel), Focus.Last);\n            break;\n        }\n      },\n      handleClick: function handleClick() {\n        if (props.disabled) return;\n\n        if (isWithinPanel) {\n          var _dom12;\n\n          api.closePopover();\n          (_dom12 = dom(api.button)) == null ? void 0 : _dom12.focus(); // Re-focus the original opening Button\n        } else {\n          var _dom13;\n\n          if (api.popoverState.value === PopoverStates.Closed) closeOthers == null ? void 0 : closeOthers(api.buttonId);\n          (_dom13 = dom(api.button)) == null ? void 0 : _dom13.focus();\n          api.togglePopover();\n        }\n      },\n      handleFocus: function handleFocus() {}\n    };\n  }\n}); // ---\n\nvar PopoverOverlay = /*#__PURE__*/defineComponent({\n  name: 'PopoverOverlay',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    \"static\": {\n      type: Boolean,\n      \"default\": false\n    },\n    unmount: {\n      type: Boolean,\n      \"default\": true\n    }\n  },\n  render: function render$1() {\n    var api = usePopoverContext('PopoverOverlay');\n    var slot = {\n      open: api.popoverState.value === PopoverStates.Open\n    };\n    var propsWeControl = {\n      id: this.id,\n      ref: 'el',\n      'aria-hidden': true,\n      onClick: this.handleClick\n    };\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      features: Features.RenderStrategy | Features.Static,\n      visible: this.visible,\n      name: 'PopoverOverlay'\n    });\n  },\n  setup: function setup() {\n    var api = usePopoverContext('PopoverOverlay');\n    var usesOpenClosedState = useOpenClosed();\n    var visible = computed(function () {\n      if (usesOpenClosedState !== null) {\n        return usesOpenClosedState.value === State.Open;\n      }\n\n      return api.popoverState.value === PopoverStates.Open;\n    });\n    return {\n      id: \"headlessui-popover-overlay-\" + useId(),\n      handleClick: function handleClick() {\n        api.closePopover();\n      },\n      visible: visible\n    };\n  }\n}); // ---\n\nvar PopoverPanel = /*#__PURE__*/defineComponent({\n  name: 'PopoverPanel',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    \"static\": {\n      type: Boolean,\n      \"default\": false\n    },\n    unmount: {\n      type: Boolean,\n      \"default\": true\n    },\n    focus: {\n      type: Boolean,\n      \"default\": false\n    }\n  },\n  render: function render$1() {\n    var api = usePopoverContext('PopoverPanel');\n    var slot = {\n      open: api.popoverState.value === PopoverStates.Open\n    };\n    var propsWeControl = {\n      ref: 'el',\n      id: this.id,\n      onKeydown: this.handleKeyDown\n    };\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      features: Features.RenderStrategy | Features.Static,\n      visible: this.visible,\n      name: 'PopoverPanel'\n    });\n  },\n  setup: function setup(props) {\n    var focus = props.focus;\n    var api = usePopoverContext('PopoverPanel');\n    provide(PopoverPanelContext, api.panelId);\n    onUnmounted(function () {\n      api.panel.value = null;\n    }); // Move focus within panel\n\n    watchEffect(function () {\n      var _dom14;\n\n      if (!focus) return;\n      if (api.popoverState.value !== PopoverStates.Open) return;\n      if (!api.panel) return;\n      var activeElement = document.activeElement;\n      if ((_dom14 = dom(api.panel)) == null ? void 0 : _dom14.contains(activeElement)) return; // Already focused within Dialog\n\n      focusIn(dom(api.panel), Focus.First);\n    }); // Handle Tab / Shift+Tab focus positioning\n\n    useWindowEvent('keydown', function (event) {\n      var _dom15;\n\n      if (api.popoverState.value !== PopoverStates.Open) return;\n      if (!dom(api.panel)) return;\n      if (event.key !== Keys.Tab) return;\n      if (!document.activeElement) return;\n      if (!((_dom15 = dom(api.panel)) == null ? void 0 : _dom15.contains(document.activeElement))) return; // We will take-over the default tab behaviour so that we have a bit\n      // control over what is focused next. It will behave exactly the same,\n      // but it will also \"fix\" some issues based on whether you are using a\n      // Portal or not.\n\n      event.preventDefault();\n      var result = focusIn(dom(api.panel), event.shiftKey ? Focus.Previous : Focus.Next);\n\n      if (result === FocusResult.Underflow) {\n        var _dom16;\n\n        return (_dom16 = dom(api.button)) == null ? void 0 : _dom16.focus();\n      } else if (result === FocusResult.Overflow) {\n        if (!dom(api.button)) return;\n        var elements = getFocusableElements();\n        var buttonIdx = elements.indexOf(dom(api.button));\n        var nextElements = elements.splice(buttonIdx + 1) // Elements after button\n        .filter(function (element) {\n          var _dom17;\n\n          return !((_dom17 = dom(api.panel)) == null ? void 0 : _dom17.contains(element));\n        }); // Ignore items in panel\n        // Try to focus the next element, however it could fail if we are in a\n        // Portal that happens to be the very last one in the DOM. In that\n        // case we would Error (because nothing after the button is\n        // focusable). Therefore we will try and focus the very first item in\n        // the document.body.\n\n        if (focusIn(nextElements, Focus.First) === FocusResult.Error) {\n          focusIn(document.body, Focus.First);\n        }\n      }\n    }); // Handle focus out when we are in special \"focus\" mode\n\n    useWindowEvent('focus', function () {\n      var _dom18;\n\n      if (!focus) return;\n      if (api.popoverState.value !== PopoverStates.Open) return;\n      if (!dom(api.panel)) return;\n      if ((_dom18 = dom(api.panel)) == null ? void 0 : _dom18.contains(document.activeElement)) return;\n      api.closePopover();\n    }, true);\n    var usesOpenClosedState = useOpenClosed();\n    var visible = computed(function () {\n      if (usesOpenClosedState !== null) {\n        return usesOpenClosedState.value === State.Open;\n      }\n\n      return api.popoverState.value === PopoverStates.Open;\n    });\n    return {\n      id: api.panelId,\n      el: api.panel,\n      handleKeyDown: function handleKeyDown(event) {\n        var _dom19, _dom20;\n\n        switch (event.key) {\n          case Keys.Escape:\n            if (api.popoverState.value !== PopoverStates.Open) return;\n            if (!dom(api.panel)) return;\n            if (!((_dom19 = dom(api.panel)) == null ? void 0 : _dom19.contains(document.activeElement))) return;\n            event.preventDefault();\n            api.closePopover();\n            (_dom20 = dom(api.button)) == null ? void 0 : _dom20.focus();\n            break;\n        }\n      },\n      visible: visible\n    };\n  }\n}); // ---\n\nvar PopoverGroup = /*#__PURE__*/defineComponent({\n  name: 'PopoverGroup',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    }\n  },\n  render: function render$1() {\n    var propsWeControl = {\n      ref: 'el'\n    };\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: {},\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'PopoverGroup'\n    });\n  },\n  setup: function setup() {\n    var groupRef = ref(null);\n    var popovers = ref([]);\n\n    function unregisterPopover(registerBag) {\n      var idx = popovers.value.indexOf(registerBag);\n      if (idx !== -1) popovers.value.splice(idx, 1);\n    }\n\n    function registerPopover(registerBag) {\n      popovers.value.push(registerBag);\n      return function () {\n        unregisterPopover(registerBag);\n      };\n    }\n\n    function isFocusWithinPopoverGroup() {\n      var _dom21;\n\n      var element = document.activeElement;\n      if ((_dom21 = dom(groupRef)) == null ? void 0 : _dom21.contains(element)) return true; // Check if the focus is in one of the button or panel elements. This is important in case you are rendering inside a Portal.\n\n      return popovers.value.some(function (bag) {\n        var _document$getElementB, _document$getElementB2;\n\n        return ((_document$getElementB = document.getElementById(bag.buttonId)) == null ? void 0 : _document$getElementB.contains(element)) || ((_document$getElementB2 = document.getElementById(bag.panelId)) == null ? void 0 : _document$getElementB2.contains(element));\n      });\n    }\n\n    function closeOthers(buttonId) {\n      for (var _iterator = _createForOfIteratorHelperLoose(popovers.value), _step; !(_step = _iterator()).done;) {\n        var popover = _step.value;\n        if (popover.buttonId !== buttonId) popover.close();\n      }\n    }\n\n    provide(PopoverGroupContext, {\n      registerPopover: registerPopover,\n      unregisterPopover: unregisterPopover,\n      isFocusWithinPopoverGroup: isFocusWithinPopoverGroup,\n      closeOthers: closeOthers\n    });\n    return {\n      el: groupRef\n    };\n  }\n});\n\nvar LabelContext = /*#__PURE__*/Symbol('LabelContext');\n\nfunction useLabelContext() {\n  var context = inject(LabelContext, null);\n\n  if (context === null) {\n    var err = new Error('You used a <Label /> component, but it is not inside a parent.');\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useLabelContext);\n    throw err;\n  }\n\n  return context;\n}\n\nfunction useLabels(_temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$slot = _ref.slot,\n      slot = _ref$slot === void 0 ? {} : _ref$slot,\n      _ref$name = _ref.name,\n      name = _ref$name === void 0 ? 'Label' : _ref$name,\n      _ref$props = _ref.props,\n      props = _ref$props === void 0 ? {} : _ref$props;\n\n  var labelIds = ref([]);\n\n  function register(value) {\n    labelIds.value.push(value);\n    return function () {\n      var idx = labelIds.value.indexOf(value);\n      if (idx === -1) return;\n      labelIds.value.splice(idx, 1);\n    };\n  }\n\n  provide(LabelContext, {\n    register: register,\n    slot: slot,\n    name: name,\n    props: props\n  }); // The actual id's as string or undefined.\n\n  return computed(function () {\n    return labelIds.value.length > 0 ? labelIds.value.join(' ') : undefined;\n  });\n} // ---\n\nvar Label = /*#__PURE__*/defineComponent({\n  name: 'Label',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'label'\n    },\n    passive: {\n      type: [Boolean],\n      \"default\": false\n    }\n  },\n  render: function render$1() {\n    var _this$context = this.context,\n        _this$context$name = _this$context.name,\n        name = _this$context$name === void 0 ? 'Label' : _this$context$name,\n        _this$context$slot = _this$context.slot,\n        slot = _this$context$slot === void 0 ? {} : _this$context$slot,\n        _this$context$props = _this$context.props,\n        props = _this$context$props === void 0 ? {} : _this$context$props;\n\n    var _this$$props = this.$props,\n        passive = _this$$props.passive,\n        passThroughProps = _objectWithoutPropertiesLoose(_this$$props, [\"passive\"]);\n\n    var propsWeControl = _extends({}, Object.entries(props).reduce(function (acc, _ref2) {\n      var _Object$assign;\n\n      var key = _ref2[0],\n          value = _ref2[1];\n      return Object.assign(acc, (_Object$assign = {}, _Object$assign[key] = unref(value), _Object$assign));\n    }, {}), {\n      id: this.id\n    });\n\n    var allProps = _extends({}, passThroughProps, propsWeControl); // @ts-expect-error props are dynamic via context, some components will\n    //                  provide an onClick then we can delete it.\n\n\n    if (passive) delete allProps['onClick'];\n    return render({\n      props: allProps,\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: name\n    });\n  },\n  setup: function setup() {\n    var context = useLabelContext();\n    var id = \"headlessui-label-\" + useId();\n    onMounted(function () {\n      return onUnmounted(context.register(id));\n    });\n    return {\n      id: id,\n      context: context\n    };\n  }\n});\n\nvar RadioGroupContext = /*#__PURE__*/Symbol('RadioGroupContext');\n\nfunction useRadioGroupContext(component) {\n  var context = inject(RadioGroupContext, null);\n\n  if (context === null) {\n    var err = new Error(\"<\" + component + \" /> is missing a parent <RadioGroup /> component.\");\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useRadioGroupContext);\n    throw err;\n  }\n\n  return context;\n} // ---\n\n\nvar RadioGroup = /*#__PURE__*/defineComponent({\n  name: 'RadioGroup',\n  emits: ['update:modelValue'],\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    disabled: {\n      type: [Boolean],\n      \"default\": false\n    },\n    modelValue: {\n      type: [Object, String, Number, Boolean]\n    }\n  },\n  render: function render$1() {\n    var _this$$props = this.$props,\n        passThroughProps = _objectWithoutPropertiesLoose(_this$$props, [\"modelValue\", \"disabled\"]);\n\n    var propsWeControl = {\n      ref: 'el',\n      id: this.id,\n      role: 'radiogroup',\n      'aria-labelledby': this.labelledby,\n      'aria-describedby': this.describedby,\n      onKeydown: this.handleKeyDown\n    };\n    return render({\n      props: _extends({}, passThroughProps, propsWeControl),\n      slot: {},\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'RadioGroup'\n    });\n  },\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var radioGroupRef = ref(null);\n    var options = ref([]);\n    var labelledby = useLabels({\n      name: 'RadioGroupLabel'\n    });\n    var describedby = useDescriptions({\n      name: 'RadioGroupDescription'\n    });\n    var value = computed(function () {\n      return props.modelValue;\n    });\n    var api = {\n      options: options,\n      value: value,\n      disabled: computed(function () {\n        return props.disabled;\n      }),\n      firstOption: computed(function () {\n        return options.value.find(function (option) {\n          if (option.propsRef.disabled) return false;\n          return true;\n        });\n      }),\n      containsCheckedOption: computed(function () {\n        return options.value.some(function (option) {\n          return toRaw(option.propsRef.value) === toRaw(props.modelValue);\n        });\n      }),\n      change: function change(nextValue) {\n        var _options$value$find;\n\n        if (props.disabled) return false;\n        if (value.value === nextValue) return false;\n        var nextOption = (_options$value$find = options.value.find(function (option) {\n          return toRaw(option.propsRef.value) === toRaw(nextValue);\n        })) == null ? void 0 : _options$value$find.propsRef;\n        if (nextOption == null ? void 0 : nextOption.disabled) return false;\n        emit('update:modelValue', nextValue);\n        return true;\n      },\n      registerOption: function registerOption(action) {\n        var _radioGroupRef$value;\n\n        var orderMap = Array.from((_radioGroupRef$value = radioGroupRef.value) == null ? void 0 : _radioGroupRef$value.querySelectorAll('[id^=\"headlessui-radiogroup-option-\"]')).reduce(function (lookup, element, index) {\n          var _Object$assign;\n\n          return Object.assign(lookup, (_Object$assign = {}, _Object$assign[element.id] = index, _Object$assign));\n        }, {});\n        options.value.push(action);\n        options.value.sort(function (a, z) {\n          return orderMap[a.id] - orderMap[z.id];\n        });\n      },\n      unregisterOption: function unregisterOption(id) {\n        var idx = options.value.findIndex(function (radio) {\n          return radio.id === id;\n        });\n        if (idx === -1) return;\n        options.value.splice(idx, 1);\n      }\n    }; // @ts-expect-error ...\n\n    provide(RadioGroupContext, api);\n    useTreeWalker({\n      container: computed(function () {\n        return dom(radioGroupRef);\n      }),\n      accept: function accept(node) {\n        if (node.getAttribute('role') === 'radio') return NodeFilter.FILTER_REJECT;\n        if (node.hasAttribute('role')) return NodeFilter.FILTER_SKIP;\n        return NodeFilter.FILTER_ACCEPT;\n      },\n      walk: function walk(node) {\n        node.setAttribute('role', 'none');\n      }\n    });\n\n    function handleKeyDown(event) {\n      if (!radioGroupRef.value) return;\n      if (!radioGroupRef.value.contains(event.target)) return;\n      var all = options.value.filter(function (option) {\n        return option.propsRef.disabled === false;\n      }).map(function (radio) {\n        return radio.element;\n      });\n\n      switch (event.key) {\n        case Keys.ArrowLeft:\n        case Keys.ArrowUp:\n          {\n            event.preventDefault();\n            event.stopPropagation();\n            var result = focusIn(all, Focus.Previous | Focus.WrapAround);\n\n            if (result === FocusResult.Success) {\n              var activeOption = options.value.find(function (option) {\n                return option.element === document.activeElement;\n              });\n              if (activeOption) api.change(activeOption.propsRef.value);\n            }\n          }\n          break;\n\n        case Keys.ArrowRight:\n        case Keys.ArrowDown:\n          {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var _result = focusIn(all, Focus.Next | Focus.WrapAround);\n\n            if (_result === FocusResult.Success) {\n              var _activeOption = options.value.find(function (option) {\n                return option.element === document.activeElement;\n              });\n\n              if (_activeOption) api.change(_activeOption.propsRef.value);\n            }\n          }\n          break;\n\n        case Keys.Space:\n          {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var _activeOption2 = options.value.find(function (option) {\n              return option.element === document.activeElement;\n            });\n\n            if (_activeOption2) api.change(_activeOption2.propsRef.value);\n          }\n          break;\n      }\n    }\n\n    var id = \"headlessui-radiogroup-\" + useId();\n    return {\n      id: id,\n      labelledby: labelledby,\n      describedby: describedby,\n      el: radioGroupRef,\n      handleKeyDown: handleKeyDown\n    };\n  }\n}); // ---\n\nvar OptionState;\n\n(function (OptionState) {\n  OptionState[OptionState[\"Empty\"] = 1] = \"Empty\";\n  OptionState[OptionState[\"Active\"] = 2] = \"Active\";\n})(OptionState || (OptionState = {}));\n\nvar RadioGroupOption = /*#__PURE__*/defineComponent({\n  name: 'RadioGroupOption',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    value: {\n      type: [Object, String, Number, Boolean]\n    },\n    disabled: {\n      type: Boolean,\n      \"default\": false\n    },\n    \"class\": {\n      type: [String, Function],\n      required: false\n    },\n    className: {\n      type: [String, Function],\n      required: false\n    }\n  },\n  render: function render$1() {\n    var _this$$props2 = this.$props,\n        defaultClass = _this$$props2[\"class\"],\n        _this$$props2$classNa = _this$$props2.className,\n        className = _this$$props2$classNa === void 0 ? defaultClass : _this$$props2$classNa,\n        passThroughProps = _objectWithoutPropertiesLoose(_this$$props2, [\"value\", \"disabled\", \"class\", \"className\"]);\n\n    var slot = {\n      checked: this.checked,\n      disabled: this.disabled,\n      active: Boolean(this.state & OptionState.Active)\n    };\n    var propsWeControl = {\n      id: this.id,\n      ref: 'el',\n      role: 'radio',\n      \"class\": resolvePropValue(className, slot),\n      'aria-checked': this.checked ? 'true' : 'false',\n      'aria-labelledby': this.labelledby,\n      'aria-describedby': this.describedby,\n      tabIndex: this.tabIndex,\n      onClick: this.disabled ? undefined : this.handleClick,\n      onFocus: this.disabled ? undefined : this.handleFocus,\n      onBlur: this.disabled ? undefined : this.handleBlur\n    };\n    return render({\n      props: _extends({}, passThroughProps, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'RadioGroupOption'\n    });\n  },\n  setup: function setup(props) {\n    var api = useRadioGroupContext('RadioGroupOption');\n    var id = \"headlessui-radiogroup-option-\" + useId();\n    var labelledby = useLabels({\n      name: 'RadioGroupLabel'\n    });\n    var describedby = useDescriptions({\n      name: 'RadioGroupDescription'\n    });\n    var optionRef = ref(null);\n    var propsRef = computed(function () {\n      return {\n        value: props.value,\n        disabled: props.disabled\n      };\n    });\n    var state = ref(OptionState.Empty);\n    onMounted(function () {\n      return api.registerOption({\n        id: id,\n        element: optionRef,\n        propsRef: propsRef\n      });\n    });\n    onUnmounted(function () {\n      return api.unregisterOption(id);\n    });\n    var isFirstOption = computed(function () {\n      var _api$firstOption$valu;\n\n      return ((_api$firstOption$valu = api.firstOption.value) == null ? void 0 : _api$firstOption$valu.id) === id;\n    });\n    var disabled = computed(function () {\n      return api.disabled.value || props.disabled;\n    });\n    var checked = computed(function () {\n      return toRaw(api.value.value) === toRaw(props.value);\n    });\n    return {\n      id: id,\n      el: optionRef,\n      labelledby: labelledby,\n      describedby: describedby,\n      state: state,\n      disabled: disabled,\n      checked: checked,\n      tabIndex: computed(function () {\n        if (disabled.value) return -1;\n        if (checked.value) return 0;\n        if (!api.containsCheckedOption.value && isFirstOption.value) return 0;\n        return -1;\n      }),\n      handleClick: function handleClick() {\n        var _optionRef$value;\n\n        if (!api.change(props.value)) return;\n        state.value |= OptionState.Active;\n        (_optionRef$value = optionRef.value) == null ? void 0 : _optionRef$value.focus();\n      },\n      handleFocus: function handleFocus() {\n        state.value |= OptionState.Active;\n      },\n      handleBlur: function handleBlur() {\n        state.value &= ~OptionState.Active;\n      }\n    };\n  }\n}); // ---\n\nvar RadioGroupLabel = Label;\nvar RadioGroupDescription = Description;\n\nvar GroupContext = /*#__PURE__*/Symbol('GroupContext'); // ---\n\nvar SwitchGroup = /*#__PURE__*/defineComponent({\n  name: 'SwitchGroup',\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'template'\n    }\n  },\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        attrs = _ref.attrs;\n    var switchRef = ref(null);\n    var labelledby = useLabels({\n      name: 'SwitchLabel',\n      props: {\n        onClick: function onClick() {\n          if (!switchRef.value) return;\n          switchRef.value.click();\n          switchRef.value.focus({\n            preventScroll: true\n          });\n        }\n      }\n    });\n    var describedby = useDescriptions({\n      name: 'SwitchDescription'\n    });\n    var api = {\n      switchRef: switchRef,\n      labelledby: labelledby,\n      describedby: describedby\n    };\n    provide(GroupContext, api);\n    return function () {\n      return render({\n        props: props,\n        slot: {},\n        slots: slots,\n        attrs: attrs,\n        name: 'SwitchGroup'\n      });\n    };\n  }\n}); // ---\n\nvar Switch = /*#__PURE__*/defineComponent({\n  name: 'Switch',\n  emits: ['update:modelValue'],\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'button'\n    },\n    modelValue: {\n      type: Boolean,\n      \"default\": false\n    },\n    \"class\": {\n      type: [String, Function],\n      required: false\n    },\n    className: {\n      type: [String, Function],\n      required: false\n    }\n  },\n  render: function render$1() {\n    var api = inject(GroupContext, null);\n    var _this$$props = this.$props,\n        defaultClass = _this$$props[\"class\"],\n        _this$$props$classNam = _this$$props.className,\n        className = _this$$props$classNam === void 0 ? defaultClass : _this$$props$classNam;\n    var slot = {\n      checked: this.$props.modelValue\n    };\n    var propsWeControl = {\n      id: this.id,\n      ref: api === null ? undefined : api.switchRef,\n      role: 'switch',\n      tabIndex: 0,\n      \"class\": resolvePropValue(className, slot),\n      'aria-checked': this.$props.modelValue,\n      'aria-labelledby': this.labelledby,\n      'aria-describedby': this.describedby,\n      onClick: this.handleClick,\n      onKeyup: this.handleKeyUp,\n      onKeypress: this.handleKeyPress\n    };\n\n    if (this.$props.as === 'button') {\n      Object.assign(propsWeControl, {\n        type: 'button'\n      });\n    }\n\n    return render({\n      props: _extends({}, this.$props, propsWeControl),\n      slot: slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'Switch'\n    });\n  },\n  setup: function setup(props, _ref2) {\n    var emit = _ref2.emit;\n    var api = inject(GroupContext, null);\n    var id = \"headlessui-switch-\" + useId();\n\n    function toggle() {\n      emit('update:modelValue', !props.modelValue);\n    }\n\n    return {\n      id: id,\n      el: api == null ? void 0 : api.switchRef,\n      labelledby: api == null ? void 0 : api.labelledby,\n      describedby: api == null ? void 0 : api.describedby,\n      handleClick: function handleClick(event) {\n        event.preventDefault();\n        toggle();\n      },\n      handleKeyUp: function handleKeyUp(event) {\n        if (event.key !== Keys.Tab) event.preventDefault();\n        if (event.key === Keys.Space) toggle();\n      },\n      // This is needed so that we can \"cancel\" the click event when we use the `Enter` key on a button.\n      handleKeyPress: function handleKeyPress(event) {\n        event.preventDefault();\n      }\n    };\n  }\n}); // ---\n\nvar SwitchLabel = Label;\nvar SwitchDescription = Description;\n\nfunction once(cb) {\n  var state = {\n    called: false\n  };\n  return function () {\n    if (state.called) return;\n    state.called = true;\n    return cb.apply(void 0, arguments);\n  };\n}\n\nfunction disposables() {\n  var disposables = [];\n  var api = {\n    requestAnimationFrame: function (_requestAnimationFrame) {\n      function requestAnimationFrame() {\n        return _requestAnimationFrame.apply(this, arguments);\n      }\n\n      requestAnimationFrame.toString = function () {\n        return _requestAnimationFrame.toString();\n      };\n\n      return requestAnimationFrame;\n    }(function () {\n      var raf = requestAnimationFrame.apply(void 0, arguments);\n      api.add(function () {\n        return cancelAnimationFrame(raf);\n      });\n    }),\n    nextFrame: function nextFrame() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      api.requestAnimationFrame(function () {\n        api.requestAnimationFrame.apply(api, args);\n      });\n    },\n    setTimeout: function (_setTimeout) {\n      function setTimeout() {\n        return _setTimeout.apply(this, arguments);\n      }\n\n      setTimeout.toString = function () {\n        return _setTimeout.toString();\n      };\n\n      return setTimeout;\n    }(function () {\n      var timer = setTimeout.apply(void 0, arguments);\n      api.add(function () {\n        return clearTimeout(timer);\n      });\n    }),\n    add: function add(cb) {\n      disposables.push(cb);\n    },\n    dispose: function dispose() {\n      for (var _iterator = _createForOfIteratorHelperLoose(disposables.splice(0)), _step; !(_step = _iterator()).done;) {\n        var dispose = _step.value;\n        dispose();\n      }\n    }\n  };\n  return api;\n}\n\nfunction addClasses(node) {\n  var _node$classList;\n\n  for (var _len = arguments.length, classes = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    classes[_key - 1] = arguments[_key];\n  }\n\n  node && classes.length > 0 && (_node$classList = node.classList).add.apply(_node$classList, classes);\n}\n\nfunction removeClasses(node) {\n  var _node$classList2;\n\n  for (var _len2 = arguments.length, classes = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    classes[_key2 - 1] = arguments[_key2];\n  }\n\n  node && classes.length > 0 && (_node$classList2 = node.classList).remove.apply(_node$classList2, classes);\n}\n\nvar Reason;\n\n(function (Reason) {\n  Reason[\"Finished\"] = \"finished\";\n  Reason[\"Cancelled\"] = \"cancelled\";\n})(Reason || (Reason = {}));\n\nfunction waitForTransition(node, done) {\n  var d = disposables();\n  if (!node) return d.dispose; // Safari returns a comma separated list of values, so let's sort them and take the highest value.\n\n  var _getComputedStyle = getComputedStyle(node),\n      transitionDuration = _getComputedStyle.transitionDuration,\n      transitionDelay = _getComputedStyle.transitionDelay;\n\n  var _map = [transitionDuration, transitionDelay].map(function (value) {\n    var _value$split$filter$m = value.split(',') // Remove falseys we can't work with\n    .filter(Boolean) // Values are returned as `0.3s` or `75ms`\n    .map(function (v) {\n      return v.includes('ms') ? parseFloat(v) : parseFloat(v) * 1000;\n    }).sort(function (a, z) {\n      return z - a;\n    }),\n        _value$split$filter$m2 = _value$split$filter$m[0],\n        resolvedValue = _value$split$filter$m2 === void 0 ? 0 : _value$split$filter$m2;\n\n    return resolvedValue;\n  }),\n      durationMs = _map[0],\n      delaysMs = _map[1]; // Waiting for the transition to end. We could use the `transitionend` event, however when no\n  // actual transition/duration is defined then the `transitionend` event is not fired.\n  //\n  // TODO: Downside is, when you slow down transitions via devtools this timeout is still using the\n  // full 100% speed instead of the 25% or 10%.\n\n\n  if (durationMs !== 0) {\n    d.setTimeout(function () {\n      return done(Reason.Finished);\n    }, durationMs + delaysMs);\n  } else {\n    // No transition is happening, so we should cleanup already. Otherwise we have to wait until we\n    // get disposed.\n    done(Reason.Finished);\n  } // If we get disposed before the timeout runs we should cleanup anyway\n\n\n  d.add(function () {\n    return done(Reason.Cancelled);\n  });\n  return d.dispose;\n}\n\nfunction transition(node, base, from, to, done) {\n  var d = disposables();\n\n  var _done = done !== undefined ? once(done) : function () {};\n\n  addClasses.apply(void 0, [node].concat(base, from));\n  d.nextFrame(function () {\n    removeClasses.apply(void 0, [node].concat(from));\n    addClasses.apply(void 0, [node].concat(to));\n    d.add(waitForTransition(node, function (reason) {\n      removeClasses.apply(void 0, [node].concat(to, base));\n      return _done(reason);\n    }));\n  }); // Once we get disposed, we should ensure that we cleanup after ourselves. In case of an unmount,\n  // the node itself will be nullified and will be a no-op. In case of a full transition the classes\n  // are already removed which is also a no-op. However if you go from enter -> leave mid-transition\n  // then we have some leftovers that should be cleaned.\n\n  d.add(function () {\n    return removeClasses.apply(void 0, [node].concat(base, from, to));\n  }); // When we get disposed early, than we should also call the done method but switch the reason.\n\n  d.add(function () {\n    return _done(Reason.Cancelled);\n  });\n  return d.dispose;\n}\n\nfunction splitClasses(classes) {\n  if (classes === void 0) {\n    classes = '';\n  }\n\n  return classes.split(' ').filter(function (className) {\n    return className.trim().length > 1;\n  });\n}\n\nvar TransitionContext = /*#__PURE__*/Symbol('TransitionContext');\nvar TreeStates;\n\n(function (TreeStates) {\n  TreeStates[\"Visible\"] = \"visible\";\n  TreeStates[\"Hidden\"] = \"hidden\";\n})(TreeStates || (TreeStates = {}));\n\nfunction useTransitionContext() {\n  var context = inject(TransitionContext, null);\n\n  if (context === null) {\n    throw new Error('A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.');\n  }\n\n  return context;\n}\n\nfunction useParentNesting() {\n  var context = inject(NestingContext, null);\n\n  if (context === null) {\n    throw new Error('A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.');\n  }\n\n  return context;\n}\n\nvar NestingContext = /*#__PURE__*/Symbol('NestingContext');\n\nfunction hasChildren(bag) {\n  if ('children' in bag) return hasChildren(bag.children);\n  return bag.value.filter(function (_ref) {\n    var state = _ref.state;\n    return state === TreeStates.Visible;\n  }).length > 0;\n}\n\nfunction useNesting(done) {\n  var transitionableChildren = ref([]);\n  var mounted = ref(false);\n  onMounted(function () {\n    return mounted.value = true;\n  });\n  onUnmounted(function () {\n    return mounted.value = false;\n  });\n\n  function unregister(childId, strategy) {\n    var _match;\n\n    if (strategy === void 0) {\n      strategy = RenderStrategy.Hidden;\n    }\n\n    var idx = transitionableChildren.value.findIndex(function (_ref2) {\n      var id = _ref2.id;\n      return id === childId;\n    });\n    if (idx === -1) return;\n    match(strategy, (_match = {}, _match[RenderStrategy.Unmount] = function () {\n      transitionableChildren.value.splice(idx, 1);\n    }, _match[RenderStrategy.Hidden] = function () {\n      transitionableChildren.value[idx].state = TreeStates.Hidden;\n    }, _match));\n\n    if (!hasChildren(transitionableChildren) && mounted.value) {\n      done == null ? void 0 : done();\n    }\n  }\n\n  function register(childId) {\n    var child = transitionableChildren.value.find(function (_ref3) {\n      var id = _ref3.id;\n      return id === childId;\n    });\n\n    if (!child) {\n      transitionableChildren.value.push({\n        id: childId,\n        state: TreeStates.Visible\n      });\n    } else if (child.state !== TreeStates.Visible) {\n      child.state = TreeStates.Visible;\n    }\n\n    return function () {\n      return unregister(childId, RenderStrategy.Unmount);\n    };\n  }\n\n  return {\n    children: transitionableChildren,\n    register: register,\n    unregister: unregister\n  };\n} // ---\n\n\nvar TransitionChildRenderFeatures = Features.RenderStrategy;\nvar TransitionChild = /*#__PURE__*/defineComponent({\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    show: {\n      type: [Boolean],\n      \"default\": null\n    },\n    unmount: {\n      type: [Boolean],\n      \"default\": true\n    },\n    appear: {\n      type: [Boolean],\n      \"default\": false\n    },\n    enter: {\n      type: [String],\n      \"default\": ''\n    },\n    enterFrom: {\n      type: [String],\n      \"default\": ''\n    },\n    enterTo: {\n      type: [String],\n      \"default\": ''\n    },\n    leave: {\n      type: [String],\n      \"default\": ''\n    },\n    leaveFrom: {\n      type: [String],\n      \"default\": ''\n    },\n    leaveTo: {\n      type: [String],\n      \"default\": ''\n    }\n  },\n  emits: ['beforeEnter', 'afterEnter', 'beforeLeave', 'afterLeave'],\n  render: function render$1() {\n    var _this$$props = this.$props,\n        rest = _objectWithoutPropertiesLoose(_this$$props, [\"appear\", \"show\", \"enter\", \"enterFrom\", \"enterTo\", \"leave\", \"leaveFrom\", \"leaveTo\"]);\n\n    var propsWeControl = {\n      ref: 'el'\n    };\n    var passthroughProps = rest;\n    return render({\n      props: _extends({}, passthroughProps, propsWeControl),\n      slot: {},\n      slots: this.$slots,\n      attrs: this.$attrs,\n      features: TransitionChildRenderFeatures,\n      visible: this.state === TreeStates.Visible,\n      name: 'TransitionChild'\n    });\n  },\n  setup: function setup(props, _ref4) {\n    var emit = _ref4.emit;\n    var container = ref(null);\n    var state = ref(TreeStates.Visible);\n    var strategy = computed(function () {\n      return props.unmount ? RenderStrategy.Unmount : RenderStrategy.Hidden;\n    });\n\n    var _useTransitionContext = useTransitionContext(),\n        show = _useTransitionContext.show,\n        appear = _useTransitionContext.appear;\n\n    var _useParentNesting = useParentNesting(),\n        register = _useParentNesting.register,\n        unregister = _useParentNesting.unregister;\n\n    var initial = {\n      value: true\n    };\n    var id = useId();\n    var isTransitioning = {\n      value: false\n    };\n    var nesting = useNesting(function () {\n      // When all children have been unmounted we can only hide ourselves if and only if we are not\n      // transitioning ourselves. Otherwise we would unmount before the transitions are finished.\n      if (!isTransitioning.value) {\n        state.value = TreeStates.Hidden;\n        unregister(id);\n        emit('afterLeave');\n      }\n    });\n    onMounted(function () {\n      var unregister = register(id);\n      onUnmounted(unregister);\n    });\n    watchEffect(function () {\n      var _match2;\n\n      // If we are in another mode than the Hidden mode then ignore\n      if (strategy.value !== RenderStrategy.Hidden) return;\n      if (!id) return; // Make sure that we are visible\n\n      if (show && state.value !== TreeStates.Visible) {\n        state.value = TreeStates.Visible;\n        return;\n      }\n\n      match(state.value, (_match2 = {}, _match2[TreeStates.Hidden] = function () {\n        return unregister(id);\n      }, _match2[TreeStates.Visible] = function () {\n        return register(id);\n      }, _match2));\n    });\n    var enterClasses = splitClasses(props.enter);\n    var enterFromClasses = splitClasses(props.enterFrom);\n    var enterToClasses = splitClasses(props.enterTo);\n    var leaveClasses = splitClasses(props.leave);\n    var leaveFromClasses = splitClasses(props.leaveFrom);\n    var leaveToClasses = splitClasses(props.leaveTo);\n    onMounted(function () {\n      watchEffect(function () {\n        if (state.value === TreeStates.Visible) {\n          var domElement = dom(container); // When you return `null` from a component, the actual DOM reference will\n          // be an empty comment... This means that we can never check for the DOM\n          // node to be `null`. So instead we check for an empty comment.\n\n          var isEmptyDOMNode = domElement instanceof Comment && domElement.data === '';\n\n          if (isEmptyDOMNode) {\n            throw new Error('Did you forget to passthrough the `ref` to the actual DOM node?');\n          }\n        }\n      });\n    });\n\n    function executeTransition(onInvalidate) {\n      // Skipping initial transition\n      var skip = initial.value && !appear.value;\n      var node = dom(container);\n      if (!node || !(node instanceof HTMLElement)) return;\n      if (skip) return;\n      isTransitioning.value = true;\n      if (show.value) emit('beforeEnter');\n      if (!show.value) emit('beforeLeave');\n      onInvalidate(show.value ? transition(node, enterClasses, enterFromClasses, enterToClasses, function (reason) {\n        isTransitioning.value = false;\n        if (reason === Reason.Finished) emit('afterEnter');\n      }) : transition(node, leaveClasses, leaveFromClasses, leaveToClasses, function (reason) {\n        isTransitioning.value = false;\n        if (reason !== Reason.Finished) return; // When we don't have children anymore we can safely unregister from the parent and hide\n        // ourselves.\n\n        if (!hasChildren(nesting)) {\n          state.value = TreeStates.Hidden;\n          unregister(id);\n          emit('afterLeave');\n        }\n      }));\n    }\n\n    onMounted(function () {\n      watch([show, appear], function (_oldValues, _newValues, onInvalidate) {\n        executeTransition(onInvalidate);\n        initial.value = false;\n      }, {\n        immediate: true\n      });\n    });\n    provide(NestingContext, nesting);\n    useOpenClosedProvider(computed(function () {\n      var _match3;\n\n      return match(state.value, (_match3 = {}, _match3[TreeStates.Visible] = State.Open, _match3[TreeStates.Hidden] = State.Closed, _match3));\n    }));\n    return {\n      el: container,\n      state: state\n    };\n  }\n}); // ---\n\nvar TransitionRoot = /*#__PURE__*/defineComponent({\n  inheritAttrs: false,\n  props: {\n    as: {\n      type: [Object, String],\n      \"default\": 'div'\n    },\n    show: {\n      type: [Boolean],\n      \"default\": null\n    },\n    unmount: {\n      type: [Boolean],\n      \"default\": true\n    },\n    appear: {\n      type: [Boolean],\n      \"default\": false\n    },\n    enter: {\n      type: [String],\n      \"default\": ''\n    },\n    enterFrom: {\n      type: [String],\n      \"default\": ''\n    },\n    enterTo: {\n      type: [String],\n      \"default\": ''\n    },\n    leave: {\n      type: [String],\n      \"default\": ''\n    },\n    leaveFrom: {\n      type: [String],\n      \"default\": ''\n    },\n    leaveTo: {\n      type: [String],\n      \"default\": ''\n    }\n  },\n  emits: ['beforeEnter', 'afterEnter', 'beforeLeave', 'afterLeave'],\n  render: function render$1() {\n    var _this = this;\n\n    var _this$$props2 = this.$props,\n        unmount = _this$$props2.unmount,\n        passThroughProps = _objectWithoutPropertiesLoose(_this$$props2, [\"show\", \"appear\", \"unmount\"]);\n\n    var sharedProps = {\n      unmount: unmount\n    };\n    return render({\n      props: _extends({}, sharedProps, {\n        as: 'template'\n      }),\n      slot: {},\n      slots: _extends({}, this.$slots, {\n        \"default\": function _default() {\n          return [h(TransitionChild, _extends({}, _this.$attrs, sharedProps, passThroughProps), _this.$slots[\"default\"])];\n        }\n      }),\n      attrs: {},\n      features: TransitionChildRenderFeatures,\n      visible: this.state === TreeStates.Visible,\n      name: 'Transition'\n    });\n  },\n  setup: function setup(props) {\n    var usesOpenClosedState = useOpenClosed();\n    var show = computed(function () {\n      if (props.show === null && usesOpenClosedState !== null) {\n        var _match4;\n\n        return match(usesOpenClosedState.value, (_match4 = {}, _match4[State.Open] = true, _match4[State.Closed] = false, _match4));\n      }\n\n      return props.show;\n    });\n    watchEffect(function () {\n      if (![true, false].includes(show.value)) {\n        throw new Error('A <Transition /> is used but it is missing a `:show=\"true | false\"` prop.');\n      }\n    });\n    var state = ref(show.value ? TreeStates.Visible : TreeStates.Hidden);\n    var nestingBag = useNesting(function () {\n      state.value = TreeStates.Hidden;\n    });\n    var initial = {\n      value: true\n    };\n    var transitionBag = {\n      show: show,\n      appear: computed(function () {\n        return props.appear || !initial.value;\n      })\n    };\n    onMounted(function () {\n      watchEffect(function () {\n        initial.value = false;\n\n        if (show.value) {\n          state.value = TreeStates.Visible;\n        } else if (!hasChildren(nestingBag)) {\n          state.value = TreeStates.Hidden;\n        }\n      });\n    });\n    provide(NestingContext, nestingBag);\n    provide(TransitionContext, transitionBag);\n    return {\n      state: state,\n      show: show\n    };\n  }\n});\n\nexport { Dialog, DialogDescription, DialogOverlay, DialogTitle, Disclosure, DisclosureButton, DisclosurePanel, FocusTrap, Listbox, ListboxButton, ListboxLabel, ListboxOption, ListboxOptions, Menu, MenuButton, MenuItem, MenuItems, Popover, PopoverButton, PopoverGroup, PopoverOverlay, PopoverPanel, Portal, PortalGroup, RadioGroup, RadioGroupDescription, RadioGroupLabel, RadioGroupOption, Switch, SwitchDescription, SwitchGroup, SwitchLabel, TransitionChild, TransitionRoot };\n//# sourceMappingURL=headlessui.esm.js.map\n","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}